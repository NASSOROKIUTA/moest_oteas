!function(){"use strict";angular.module("authApp",["ui.router","satellizer","ui.bootstrap","ui.bootstrap.modal","angularjs-datetime-picker","angularUtils.directives.dirPagination","chart.js","toastr","ngChatbox","ngMaterial","ngMessages","perfect_scrollbar","ngMdIcons"]),angular.module("authApp").config(function(e,t,a,i,n,s,r){s.theme("default").primaryPalette("teal").accentPalette("red"),r.defaultIconSet("/svg/avatars.svg",128).icon("menu","/svg/menu.svg",512).icon("logout","/svg/logout.svg",512).icon("default_profile","/svg/default_profile.svg",512).icon("notifications","/svg/notifications.svg",512),n.factory("redirectWhenLoggedOut",function(e,t){return{responseError:function(a){var i=t.get("$state"),n=["token_not_provided","token_expired","token_absent","token_invalid"];return angular.forEach(n,function(e,t){a.data.error===e&&(localStorage.removeItem("user"),i.go("auth"))}),e.reject(a)}}}),i.interceptors.push("redirectWhenLoggedOut"),a.loginUrl="/api/authenticate",t.otherwise("/auth"),e.state("master",{abstract:!0,controller:"AuthController as auth",views:{"@":{templateUrl:"/views/layouts/master.tmpl.html"}}}).state("auth",{url:"/auth",templateUrl:"/views/authView.html",controller:"AuthController as auth"}).state("dashboard",{url:"/dashboard",parent:"master",templateUrl:"/views/welcome.html",controller:"UserController as user"}).state("mtuha_report",{url:"/mtuha_report",parent:"master",templateUrl:"/views/mtuha_main_template.html",controller:"UserController as user"}).state("os_labtests",{url:"/os_labtests",parent:"master",templateUrl:"/views/os_labtests.html",controller:"UserController as user"}).state("os_drugs",{url:"/os_drugs",parent:"master",templateUrl:"/views/os_drugs.html",controller:"UserController as user"}).state("insuarance_report",{url:"/insuarance_report",parent:"master",templateUrl:"/views/insuarance_report.html",controller:"UserController as user"}).state("staff_perfomance",{url:"/staff_perfomance",parent:"master",templateUrl:"/views/staff_perfomance.html",controller:"UserController as user"}).state("patientRegistration",{url:"/patientRegistration",parent:"master",templateUrl:"/views/userView.html",controller:"patientController as patient"}).state("reception",{url:"/reception",parent:"master",templateUrl:"/views/receptionTemplate.html",controller:"patientController as patient"}).state("system",{url:"/system",parent:"master",templateUrl:"/views/admin_template.html",controller:"adminController"}).state("addPermRole",{url:"/addPermRole",parent:"master",templateUrl:"/views/addPermRole.html",controller:"rolesController as roles"}).state("addViews",{url:"/addViews",parent:"master",templateUrl:"/views/addViews.html",controller:"rolesController as roles"}).state("addUserImage",{url:"/addUserImage",parent:"master",templateUrl:"/views/addUserImage.html",controller:"rolesController as roles"}).state("addPermUser",{url:"/addPermUser",parent:"master",templateUrl:"/views/addPermUser.html",controller:"rolesController as roles"}).state("nursing_care",{url:"/nursing_care",parent:"master",templateUrl:"/views/nursing_care.html",controller:"nursingCareController as roles"}).state("ward_management",{url:"/ward_management",parent:"master",templateUrl:"/views/ward_management.html",controller:"nursingCareController as roles"}).state("theatre_managing_list",{url:"/theatre_managing_list",parent:"master",templateUrl:"/views/ward_to_theatre.html",controller:"nursingCareController as roles"}).state("addRoles",{url:"/addRoles",parent:"master",templateUrl:"/views/registerSystemRoles.html",controller:"rolesController as roles"}).state("addModules",{url:"/addModules",parent:"master",templateUrl:"/views/registerSystemPemissions.html",controller:"rolesController as roles"}).state("ctcClinic",{url:"/ctcClinic",parent:"master",templateUrl:"/views/ctcClinic.html",controller:"rolesController as roles"}).state("ctcClinicSetup",{url:"/ctcClinicSetup",parent:"master",templateUrl:"/views/ctcClinicSetup.html",controller:"rolesController as roles"}).state("doctorctcClinic",{url:"/doctorctcClinic",parent:"master",templateUrl:"/views/ctcClinic.html",controller:"rolesController as roles"}).state("doctor_opd",{url:"/doctor_opd",parent:"master",templateUrl:"/views/modules/clinicalServices/opd.html",controller:"opdQueueController as opd"}).state("doctor_ipd",{url:"/doctor_ipd",parent:"master",templateUrl:"/views/modules/clinicalServices/ipd.html",controller:"ipdQueueController as ipd"}).state("icu",{url:"/icu",parent:"master",templateUrl:"/views/modules/icu/icuView.html",controller:"icuController as icu"}).state("dental_clinic",{url:"/dental_clinic",parent:"master",templateUrl:"/views/modules/clinic/dental/dentalView.html",controller:"dentalHomeController as dental"}).state("eye_clinic",{url:"/eye_clinic",parent:"master",templateUrl:"/views/modules/clinic/eye/eyeView.html",controller:"dentalHomeController as dental"}).state("inventory",{url:"/inventory",parent:"master",templateUrl:"/views/modules/inventory/invView.html",controller:"inventoryController as inventory"}).state("insurance_management",{url:"/insurance_management",parent:"master",templateUrl:"/views/modules/insurance/insuranceView.html",controller:"insuranceController as insurance"}).state("referral",{url:"/referral",parent:"master",templateUrl:"/views/modules/referral/refView.html",controller:"referralController as referral"}).state("Eye",{url:"/Eye",parent:"master",templateUrl:"/views/modules/Clinics/Master/Eye_master.html",controller:"opdController as opd"}).state("Cardiac",{url:"/Cardiac",parent:"master",templateUrl:"/views/modules/Clinics/Master/Cardiac_master.html",controller:"opdController as opd"}).state("Ctc",{url:"/Ctc",parent:"master",templateUrl:"/views/modules/Clinics/Master/Cardiac_master.html",controller:"opdController as opd"}).state("Dental",{url:"/Dental",parent:"master",templateUrl:"/views/modules/Clinics/Master/Dental_master.html",controller:"opdController as opd"}).state("Ent",{url:"/Ent",parent:"master",templateUrl:"/views/modules/Clinics/Master/Ent_master.html",controller:"opdController as opd"}).state("General_surgery",{url:"/General_surgery",parent:"master",templateUrl:"/views/modules/Clinics/Master/General_surgery_master.html",controller:"opdController as opd"}).state("Mental_health",{url:"/Mental_health",parent:"master",templateUrl:"/views/modules/Clinics/Master/Mental_health_master.html",controller:"opdController as opd"}).state("Medical_health",{url:"/Medical_health",templateUrl:"/views/modules/Clinics/Master/Medical_health_master.html",controller:"opdController as opd"}).state("Nutrition",{url:"/Nutrition",templateUrl:"/views/modules/Clinics/Master/Nutrition_master.html",controller:"opdController as opd"}).state("Obs_gyn",{url:"/Obs_gyn",parent:"master",templateUrl:"/views/modules/Clinics/Master/Obs_gyn_master.html",controller:"opdController as opd"}).state("Orthopedic",{url:"/Orthopedic",parent:"master",templateUrl:"/views/modules/Clinics/Master/Orthopedic_master.html",controller:"opdController as opd"}).state("Physio",{url:"/Physio",parent:"master",templateUrl:"/views/modules/Clinics/Master/Physio_master.html",controller:"opdController as opd"}).state("Pmtct",{url:"/Pmtct",parent:"master",templateUrl:"/views/modules/Clinics/Master/Pmtct_master.html",controller:"opdController as opd"}).state("Tb",{url:"/Tb",parent:"master",templateUrl:"/views/Tb_master.html",controller:"TbController"}).state("Vct",{url:"/Vct",parent:"master",templateUrl:"/views/Vct_master.html",controller:"VctController"}).state("Pediatric",{url:"/Pediatric",parent:"master",templateUrl:"/views/Pediatric_master.html",controller:"PediatricController"}).state("Urology",{url:"/Urology",parent:"master",templateUrl:"/views/modules/Clinics/Master/Urology_master.html",controller:"opdController as opd"}).state("exemption",{url:"/exemption",parent:"master",templateUrl:"/views/Exemption_form.html",controller:"exemptionController"}).state("payments",{url:"/payments",parent:"master",templateUrl:"/views/modules/payments/paymentView.html",controller:"paymentsController as payments"}).state("point_of_sale",{url:"/point_of_sale",parent:"master",templateUrl:"/views/modules/payments/posView.html",controller:"paymentsController as payments"}).state("receipts",{url:"/receipts",parent:"master",templateUrl:"/views/modules/payments/receiptView.html",controller:"receiptsController as receipts",params:{billsdata:null,patient:null,payment_type:null}}).state("reports",{url:"/reports",parent:"master",templateUrl:"/views/modules/payments/reportsView.html",controller:"reportsController as reports"}).state("userRegistration",{url:"/userRegistration",parent:"master",templateUrl:"/views/userRegistration.html",controller:"userSettingController as user"}).state("UsersList",{url:"/UsersList",parent:"master",templateUrl:"/views/UsersList.html",controller:"userSettingController as user"}).state("password_resset",{url:"/password_resset",parent:"master",templateUrl:"/views/password_resset.html",controller:"userSettingController as user"}).state("regions",{url:"/regions",parent:"master",templateUrl:"/views/Region_master.html",controller:"regionController"}).state("facility",{url:"/facility",parent:"master",templateUrl:"/views/Facility_registration.html",controller:"facilityController"}).state("facility_list",{url:"/facility_list",parent:"master",templateUrl:"/views/Facility_list.html",controller:"facilityController"}).state("Discount",{url:"/Discount",parent:"master",templateUrl:"/views/discount_Form.html",controller:"discountController"}).state("payment_type",{url:"/payment_type",parent:"master",templateUrl:"/views/Payment_type.html",controller:"payment_typeController"}).state("payment_category",{url:"/payment_category",parent:"master",templateUrl:"/views/Payment_category.html",controller:"payment_typeController"}).state("item_setup",{url:"/item_setup",parent:"master",templateUrl:"/views/item_setup.html",controller:"itemSetupController"}).state("item_Price",{url:"/item_Price",parent:"master",templateUrl:"/views/item_Price.html",controller:"itemPriceController"}).state("exemption_list",{url:"/exemption_list",templateUrl:"/views/exemption_list.html",controller:"exemptionController"}).state("Temporary_exemption",{url:"/Temporary_exemption",parent:"master",templateUrl:"/views/Temporary_exemption_master.html",controller:"exemptionController"}).state("Pharmacy",{url:"/Pharmacy",parent:"master",templateUrl:"/views/Pharmacy_master.html",controller:"PharmacyController"}).state("MainPharmacy",{url:"/MainPharmacy",parent:"master",templateUrl:"/views/Main_Pharmacy_master.html",controller:"PharmacyItemsController"}).state("Sub_store",{url:"/Sub_store",parent:"master",templateUrl:"/views/Sub_store_master.html",controller:"SubStoreItemsController"}).state("Dispensing",{url:"/Dispensing",parent:"master",templateUrl:"/views/Dispensing_master.html",controller:"DispensingController"}).state("Anti_natal",{url:"/Anti_natal",parent:"master",templateUrl:"/views/Anti_natal_master.html",controller:"Anti_natalController"}).state("Post_natal",{url:"/Post_natal",parent:"master",templateUrl:"/views/Post_natal_master.html",controller:"PostnatalController"}).state("Labour",{url:"/Labour",parent:"master",templateUrl:"/views/Labour_master.html",controller:"LabourController"}).state("Children",{url:"/Children",parent:"master",templateUrl:"/views/Child_form_master.html",controller:"LabourController"}).state("Family_Planning",{url:"/Family_Planning",parent:"master",templateUrl:"/views/Family_planning_master.html",controller:"Family_planning_Controller"}).state("Rch_report",{url:"/Rch_report",parent:"master",templateUrl:"/views/Rch_report_master.html",controller:"Rch_reoprtController"}).state("patientCard",{url:"/patientCard",parent:"master",templateUrl:"/views/singlecardPrint.html",controller:"patientController"}).state("edit",{url:"/edit",parent:"master",templateUrl:"/views/Edit_user.html",controller:"UserController as user"}).state("radiology",{url:"/radiology",parent:"master",templateUrl:"/views/radiology.html",controller:"radiologyController as radiology"}).state("VitalSign",{url:"/VitalSign",parent:"master",templateUrl:"/views/modules/VitalSign/VitalSign.html",controller:"VitalSignController as VitalSign"}).state("radiologytest",{url:"/radiologytest",parent:"master",templateUrl:"/views/radiologytest.html",controller:"radiologyTestController as radiologytest"}).state("radiologyDepartment",{url:"/radiologyDepartment",parent:"master",templateUrl:"/views/radiology_department.html",controller:"radiologyDepartmentController as radiologyDepartment"}).state("radiologyView",{url:"/radiologyView",parent:"master",templateUrl:"/views/radiology_view.html",controller:"radiologyViewController as radiologyView"}).state("radiopatients",{url:"/radiopatients",parent:"master",templateUrl:"/views/radiopatients.html",controller:"radiopatientsController as radiologyPatients"}).state("appointment",{url:"/appointment",parent:"master",templateUrl:"/views/appointment_master.html",controller:"UserController as user"}).state("patientEdit",{url:"/patientEdit",parent:"master",templateUrl:"/views/modules/registration/editPatient.html",controller:"patientController as user"}).state("laboratory",{url:"/laboratory",parent:"master",templateUrl:"/views/modules/laboratory/laboratory.html",controller:"UserController as user"}).state("SampleCollection",{url:"/SampleCollection",parent:"master",templateUrl:"/views/labSet.html",controller:"UserController as user"}).state("labSetting",{url:"/labSetting",parent:"master",templateUrl:"/views/SetDeviceTest.html",controller:"UserController as user"}).state("sampleManagement",{url:"/sampleManagement",parent:"master",templateUrl:"/views/samples.html",controller:"UserController as user"}).state("mortuaryManagement",{url:"/mortuaryManagement",parent:"master",templateUrl:"/views/mortuaryManagement.html",controller:"UserController as user"}).state("emergency",{url:"/emergency",parent:"master",templateUrl:"/views/emergencyview.html",controller:"emergencyController as emergency"}).state("emergencyDepartment",{url:"/emergencyDepartment",parent:"master",templateUrl:"/views/emergencyDepartment.html",controller:"emergencydepartmentController as emergencyDepartment"}).state("normalRegistration",{url:"/normalRegistration",parent:"master",templateUrl:"/views/normalRegistration.html",controller:"normalRegistrationController as normalRegistration"}).state("treatmentDepartment",{url:"/treatmentDepartment",parent:"master",templateUrl:"/views/treatmentDepartment.html",controller:"treatmentDepartmentController as treatmentEmergence"}).state("casualtyRoom",{url:"/casualtyRoom",parent:"master",templateUrl:"/views/casualtyRoom.html",controller:"casualtyRoomController as treatmentcasualty"}).state("observationRoom",{url:"/observationRoom",parent:"master",templateUrl:"/views/observationRoom.html",controller:"observationRoomController as treatmentobservation"})}),angular.module("authApp").run(function(e,t,a){e.$on("$stateChangeStart",function(i,n){var s=JSON.parse(localStorage.getItem("user"));s||"auth"==n.name||a.path("/auth"),s&&(e.authenticated=!0,e.currentUser=s,"auth"===n.name&&(i.preventDefault(),t.go("dashboard")),"auth"!==n.name&&0===e.currentUser.length&&(i.preventDefault(),t.go("auth")))})})}(),function(){"use strict";function e(e,t,a,i,n,s,r){e.loading=!1,e.leftSidebar=!0,e.showSearch=!1,e.hideToast=!1,e.topDirections=["left","up"],e.bottomDirections=["down","right"],e.isOpen=!1,e.availableModes=["md-fling","md-scale"],e.selectedMode="md-fling",e.selectedDirection="up",e.toggleSidenav=function(e){a(e).toggle()},e.menu=[{link:"",title:"Dashboard",icon:"dashboard",state:"dashboard"},{link:"",title:"Change Password",state:"dashboard",icon:"lock"}],e.admin=[{link:"",title:"Trash",icon:"delete"},{link:"showListBottomSheet($event)",title:"Settings",icon:"settings"}],e.activity=[{what:"Brunch this weekend?",who:"Ali Conners",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{what:"Summer BBQ",who:"to Alex, Scott, Jennifer",when:"3:08PM",notes:"Wish I could come out but I'm out of town this weekend"},{what:"Oui Oui",who:"Sandra Adams",when:"3:08PM",notes:"Do you have Paris recommendations? Have you ever been?"},{what:"Birthday Gift",who:"Trevor Hansen",when:"3:08PM",notes:"Have any ideas of what we should get Heidi for her birthday?"},{what:"Recipe to try",who:"Brian Holt",when:"3:08PM",notes:"We should eat this: Grapefruit, Squash, Corn, and Tomatillo tacos"}]}angular.module("authApp").controller("AppController",e),e.$inject=["$scope","$rootScope","$mdSidenav","$mdMedia","$filter","$window","$http"]}(),function(){"use strict";angular.module("authApp").controller("AuthController",function(e,t,a,i,n,s){var r=this;r.loginError=!1,r.logout=function(){console.log("logging out")},r.login=function(){var o={email:r.email,password:r.password};e.login(o).then(function(){return a.get("/api/authenticate/user")},function(e){r.loginError=!0,n.error=e.data.error,r.loginErrorText=e.data.error,s.error("",r.loginErrorText)}).then(function(e){var a=JSON.stringify(e.data.user);localStorage.setItem("user",a),i.authenticated=!0,i.currentUser=e.data.user;var n=i.currentUser.name;s.success("","Welcome "+n),t.go("dashboard")})}})}(),function(){"use strict";angular.module("authApp").controller("UserController",function(e,t,a,i,n){var s=this;s.getUsers=function(){e.get("/api/authenticate").then(function(e){s.users=e.data}).then(function(e){s.error=e})},s.change_profile=function(){console.log("changing")},e.get("/api/authenticate").then(function(e){var t=a.currentUser.id;n.printUserMenu(t),n.users=e.data[0].name,n.email=e.data[0].email,n.id=e.data[0].id,n.users,n.email,n.id}),n.update=function(t){if(!confirm("Are you sure you want to Update"+t.name))return!1;e.post("/api/update_user",t).then(function(e){n.good=t.name+" Successful Updated",n.kol=e.status,s.getUsers()})},n.delete=function(t,a){if(!confirm("Are you sure you want to delete    "+t))return!1;e.get("/api/delete/"+a).then(function(e){n.deleted=t+" Successful Deleted",n.del=e.status,s.getUsers()})},n.printUserMenu=function(t){console.log(angular.isDefined(t)),e.get("/api/getUsermenu/"+t).then(function(e){n.menu=e.data,console.log(n.menu)})},n.register=function(t){e.post("/api/register",t).then(function(e){n.send=e.data.name+" Successful Added in Database"}),n.user=""},n.edit=function(t){e.get("/api/edit/"+t).then(function(e){n.japh=e})},s.logout=function(){t.logout().then(function(){localStorage.removeItem("user"),a.authenticated=!1,a.currentUser=null,i.go("auth")})}})}(),function(){"use strict";angular.module("authApp").controller("discountController",function(e,t,a,i,n,s,r){e.get("public/api/facility_list").then(function(e){s.facilities=e.data}),s.ExportFile=function(){e.get("public/downloadExcel/xls").then(function(e){console.log(e)})};var o=[];s.showSearch=function(t){if(!(t.length<5))return e.post("public/api/searchpatientForBill",{searchKey:t}).then(function(e){o=e.data}),o};var l=a.currentUser.id,d=a.currentUser.facility_id;s.printUserMenu=function(t){e.get("public/api/getUsermenu/"+t).then(function(e){s.menu=e.data})};l=a.currentUser.id;s.printUserMenu(l);s.selectedPatient;s.exemption_registration=function(t){var i={exemption_no:1,user_id:a.currentUser.id,facility_code:a.currentUser.facility_id,patient_id:t.selectedPatient.id,status_id:t.status_id,exemption_type_id:t.exemption_type_id,exemption_reason:t.exemption_reason,reason_for_revoke:t.reason_for_revoke,description:t.description};console.log(i),e.post("public/api/patient_exemption",i).then(function(e){console.log(e)})},s.loadBill=function(t){e.get("public/api/loadDiscountBill/"+t.id).then(function(e){s.discounts=e.data,s.previusDiscount=m(s.discounts),s.jumla=p(s.discounts),s.TotalDiscount=""})},s.discountArray=[];var c="";s.discounting=function(e){e.amount,e.price,e.quantity,e.price*e.quantity-e.amount>=0?(s.discountArray.push({patient_id:e.patient_id,receipt_number:e.invoice_id,id:e.item_refference,user_id:l,invoice_id:e.item_refference,quantity:e.quantity,price:e.price,discount:e.amount}),console.log(s.discountArray),s.TotalDiscount=_(s.discountArray)):null==e.amount||swal("Warning","Please Check again Your Discount. Otherwise Your discount for any row data exceeds limit, will be ignored","warning")};var u="";s.discount_reason=function(e){c=e,console.log(u)},s.CommitDiscount=function(){s.discountArray.length>0?swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!  ",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){swal({title:"Reasons for This discount",input:"textarea",showCancelButton:!0,inputValidator:function(e){return new Promise(function(t,a){e?t():a("You need to write Reasons for This discount!")})}}).then(function(t){u={discount_reason:t,patient_id:s.discountArray[0].patient_id,receipt_number:s.discountArray[0].receipt_number,facility_id:d},e.post("public/api/invoice_discount",s.discountArray).then(function(t){t&&e.post("public/api/discountingReason",u).then(function(e){}),swal("Success!!!","Discount Successful Granted..","success"),s.discountArray=[]})})},function(e){"cancel"===e&&swal("Cancelled","Discount Has Cancelled","error")}):swal("Oops!!!..","Discount Already Granted..","info")};var p=function(){for(var e=0,t=0;t<s.discounts.length;t++)e+=s.discounts[t].price*s.discounts[t].quantity;return e},_=function(){for(var e=0,t=0;t<s.discountArray.length;t++)e+=s.discountArray[t].discount;return e},m=function(){for(var e=0,t=0;t<s.discounts.length;t++)e+=s.discounts[t].discount;return e};s.swalImage=function(){swal({title:"Select image",input:"file",timer:2e3,inputAttributes:{accept:"image/*"}}).then(function(e){var t=new FileReader;t.onload=function(e){swal({imageUrl:e.target.result}),console.log(e.target.result)},t.readAsDataURL(e),console.log(t)})}})}(),function(){"use strict";angular.module("authApp").directive("ngFiles",["$parse",function(e){return{link:function(t,a,i){var n=e(i.ngFiles);a.on("change",function(e){n(t,{$files:e.target.files})})}}}]).controller("exemptionController",function(e,t,a,i,n,s,r){var o=new FormData;s.getTheFiles=function(e){angular.forEach(e,function(e,t){o.append(t,e)})},s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0;var l=a.currentUser.id,d=a.currentUser.facility_id;e.get("public/api/facility_list").then(function(e){s.facilities=e.data}),s.exemption_list=function(){e.get("public/api/exemption_list/"+d).then(function(e){e.data.length<1||(s.exemptions=e.data)})},s.exemption_list(),s.temporary_exemption_list=function(){e.get("public/api/temporary_exemption_list/"+d).then(function(e){e.data.length,s.tempo_exemptions=e.data})},s.temporary_exemption_status_update=function(t){swal({title:"ARE YOU SURE YOU WANT To CHANGE TEMPORARY EXEMPTION Of "+t.medical_record_number,text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!  ",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("public/api/temporary_exemption_status_update/"+t.patient_id).then(function(e){var t=e.data.msg;swal("Feedback..",t,"success"),s.temporary_exemption_list()})},function(e){})},s.temporary_exemption_list(),s.exemption_filter=function(){e.get("public/api/exemption_list_by_gender/"+d).then(function(e){if(e.data.length<1)swal("Feedback..","No data set available..","info");else{s.exemption_by_genders=e.data,s.totalex=c(s.exemption_by_genders),s.xs=[],s.ys=[],s.z=[];for(var t=0;t<s.exemption_by_genders.length;t++)s.xs.push(s.exemption_by_genders[t].gender),s.series=s.z.push(s.exemption_by_genders[t].exemption_name),s.ys.push(s.exemption_by_genders[t].total);s.labels=s.xs,s.data=s.ys}})};var c=function(){for(var e=0,t=0;t<s.exemption_by_genders.length;t++)e+=s.exemption_by_genders[t].total;return e};s.pdf=function(e){s.pdd=PDFObject.embed("public/uploads/"+e,"#example1")},s.printUserMenu=function(t){e.get("public/api/getUsermenu/"+t).then(function(e){s.menu=e.data})};l=a.currentUser.id;s.printUserMenu(l);s.selectedPatient;s.exemption_registration=function(t){var i=2,n="..",r=(t.selectedPatient.id,t.exemption_type_id),l=t.exemption_reason;if(void 0==t.selectedPatient.id)swal("Feedback..","Please Select Client from a Search Box above...","error");else if(void 0==r)swal("Feedback..","Please Select Exemption Category ","error");else if(void 0==l)swal("Feedback..","Please Fill  Reason(s) for This exemption ","error");else{var i=2,r=(t.selectedPatient.id,t.exemption_type_id),l=t.exemption_reason,d=a.currentUser.id,c=a.currentUser.facility_id,u=t.selectedPatient.id,i=i,r=t.exemption_type_id,l=t.exemption_reason,n=n;t.description,o.append("exemption_type_id",r),o.append("exemption_reason",l),o.append("user_id",d),o.append("facility_id",c),o.append("patient_id",u),o.append("reason_for_revoke",n),o.append("status_id",i),e({method:"POST",url:"public/api/patient_exemption",data:o,headers:{"Content-Type":void 0}}).then(function(e){var t=e.data.msg;s.ok=e.data.status,0==e.data.status?swal("Error",t,"error"):swal("Success",t,"success")}).then(function(){})}};var u=[];s.showSearch=function(t){if(!(t.length<5))return e.post("public/api/searchpatientForBill",{searchKey:t}).then(function(e){u=e.data,s.ok=0}),u},s.exempted_service=function(e){e.exemption_type_id,e.selectedPatient.id,a.currentUser.facility_id,a.currentUser.id;e.exemption_type_id},s.exemption_type_list=function(){e.get("public/api/exemption_type_list").then(function(e){s.exemption_types=e.data})},s.exemption_type_list(),s.exemption_type_registration=function(t){e.post("public/api/exemption_type_registration",t).then(function(e){s.exemption_type_list();var t=e.data;swal("Feedback..",t,"success")})},s.vulnerables=function(){e.get("public/api/vulnerables/"+d).then(function(e){s.vulnerables=e.data,s.female_under_59_total=C(s.vulnerables),s.male_under_59_total=T(s.vulnerables),s.total_under_59_total=O(s.vulnerables),s.female_under_9_total=I(s.vulnerables),s.male_under_9_total=M(s.vulnerables),s.total_under_9_total=U(s.vulnerables),s.female_under_24_total=R(s.vulnerables),s.male_under_24_total=B(s.vulnerables),s.total_under_24_total=F(s.vulnerables),s.female_above_25_total=x(s.vulnerables),s.male_above_25_total=N(s.vulnerables),s.total_above_25_total=k(s.vulnerables),s.total_female_total=q(s.vulnerables),s.total_male_total=L(s.vulnerables),s.total_total=V(s.vulnerables)})},s.violances=function(){e.get("public/api/violances/"+d).then(function(e){s.violences=e.data,s.female_under_59_total=p(s.violences),s.male_under_59_total=_(s.violences),s.total_under_59_total=m(s.violences),s.female_under_9_total=f(s.violences),s.male_under_9_total=g(s.violences),s.total_under_9_total=h(s.violences),s.female_under_24_total=v(s.violences),s.male_under_24_total=y(s.violences),s.total_under_24_total=w(s.violences),s.female_above_25_total=b(s.violences),s.male_above_25_total=P(s.violences),s.total_above_25_total=S(s.violences),s.total_female_total=A(s.violences),s.total_male_total=D(s.violences),s.total_total=E(s.violences)})};var p=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].female_under_59;return e},_=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].male_under_59;return e},m=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].total_under_59;return e},f=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].female_under_9;return e},g=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].male_under_9;return e},h=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].total_under_9;return e},v=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].female_under_24;return e},y=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].male_under_24;return e},w=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].total_under_24;return e},b=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].female_above_25;return e},P=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].male_above_25;return e},S=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].total_above_25;return e},A=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].total_female;return e},D=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].total_male;return e},E=function(){for(var e=0,t=0;t<s.violences.length;t++)e+=s.violences[t].total;return e},C=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].female_under_59;return e},T=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].male_under_59;return e},O=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].total_under_59;return e},I=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].female_under_9;return e},M=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].male_under_9;return e},U=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].total_under_9;return e},R=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].female_under_24;return e},B=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].male_under_24;return e},F=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].total_under_24;return e},x=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].female_above_25;return e},N=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].male_above_25;return e},k=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].total_above_25;return e},q=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].total_female;return e},L=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].total_male;return e},V=function(){for(var e=0,t=0;t<s.vulnerables.length;t++)e+=s.vulnerables[t].total;return e};s.exemption_type_update=function(t){swal({title:"Are you sure You Want To Update?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!  ",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("public/api/exemption_type_update",t).then(function(e){swal("Feedback..","Updated..","success"),s.exemption_type_list()})},function(e){})},s.exemption_type_delete=function(t){swal({title:"Are you sure You Want To Delete?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:" Yes!  ",cancelButtonText:"  No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("public/api/exemption_type_delete/"+t).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):(swal("Feedback..",t,"info"),s.exemption_type_list())})},function(e){})},s.patient_exemption_status_update=function(t){var a={id:t.id,status_id:t.exemption_status,patient_id:t.patient_id,facility_id:d,user_id:l,reason_for_revoke:"-"};4==t.exemption_status?swal({title:"Are you sure You Want To Revoke This Exemption?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!  ",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){swal({title:"Reasons for Revoke",input:"textarea",showCancelButton:!0,inputValidator:function(e){return new Promise(function(t,a){e?t():a("You need to write Reasons for This Revoke!")})}}).then(function(a){var i={id:t.id,status_id:t.exemption_status,reason_for_revoke:a,patient_id:t.patient_id,facility_id:d,user_id:l};e.post("public/api/patient_exemption_status_update",i).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Success",t,"success"),s.exemption_list()})})},function(e){}):swal({title:"Are you sure You Want To Update This exemption Status?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("public/api/patient_exemption_status_update",a).then(function(e){swal("Feedback..","Updated..","success"),s.exemption_list()})},function(e){})},s.exemption_status_registration=function(t){e.post("public/api/exemption_status_registration",t).then(function(e){t=" ";var a=e.data;s.exemption_status_list(),swal("Feedback..",a,"success")})},s.exemption_status_list=function(){e.get("public/api/exemption_status_list").then(function(e){s.exemption_statuses=e.data})},s.exemption_status_list(),s.exemption_status_update=function(t){swal({title:"Are you sure You Want To Update?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!  ",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("public/api/exemption_status_update",t).then(function(e){s.exemption_status_list(),swal("Response!","Updated ....","success")})},function(e){})},s.exemption_status_delete=function(t,a){swal({title:"Are you sure You Want To Delete?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!  ",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("public/api/exemption_status_delete/"+a).then(function(e){s.exemption_status_list(),swal("","Item Deleted","warning")})},function(e){})},s.violence_cat_registration=function(t){void 0==t?swal("Error","Fill This field","error"):e.post("public/api/violence_cat_registration",t).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.violence_cat_list()})},s.violence_cat_update=function(t){e.post("public/api/violence_cat_update",t).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.violence_cat_list()})},s.violence_cat_list=function(){$("#small").click(function(){chart.setSize(400,300)}),$("#large").click(function(){chart.setSize(600,300)}),e.get("public/api/violence_cat_list").then(function(e){s.violence_cats=e.data})},e.get("public/api/violence_type_list").then(function(e){s.violence_types=e.data}),s.institution_registration=function(t){void 0==t?swal("Error","Fill Instituition Name","error"):void 0==t.institution_type?swal("Error","Fill Instituition Type","error"):e.post("public/api/institution_registration",t).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.institution_list()})},s.institution_update=function(t){e.post("public/api/institution_update",t).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.institution_list()})},s.institution_list=function(){e.get("public/api/institution_list").then(function(e){s.institutes=e.data})},s.violence_cat_list(),s.institution_list(),s.violence_registration=function(t,a,i){if(void 0==a.selectedPatient)swal("Error","Choose Patient","error");else if(void 0==t.violence_type_id)swal("Error","Choose Violation Type","error");else if(void 0==t.violence_category_id)swal("Error","Choose Violation Category","error");else if(void 0==t.description)swal("Error","Fill or write description for this violence","error");else if(void 0==t.service)swal("Error","Fill or write services given for this violence","error");else if(2==i.fp&&void 0==t.referral_id)swal("Error","Choose referred Institution","error");else if(2==i.fp&&void 0==t.referral_reason)swal("Error","Fill or write reason for this referral","error");else if(1==i.fp&&void 0==t.followup_date)swal("Error","Fill or write date for Followup","error");else if(void 0==t.date_of_event)swal("Error","Fill or write date of occurrence of this violation","error");else{var n="",s="";void 0==i.fp&&void 0==t.referral_id&&(n=""),void 0!=i.fp&&void 0==t.referral_id&&(n=""),n=2!=i.fp&&void 0==t.referral_id?"":t.referral_id.id,s=(i.fp=void 0==t.followup_date)?"":t.followup_date;var r=a.selectedPatient.id,n=n,c=t.violence_category_id.id,u=t.violence_type_id.id,s=s,p=t.description,_=t.other_description,m=t.referral_reason,f=t.service,g=t.date_of_event;o.append("user_id",l),o.append("facility_id",d),o.append("patient_id",r),o.append("referral_id",n),o.append("referral_reason",m),o.append("violence_category_id",c),o.append("violence_type_id",u),o.append("followup_date",s),o.append("description",p),o.append("other_description",_),o.append("service",f),o.append("date_of_event",g),e({method:"POST",url:"public/api/violation_registration",data:o,headers:{"Content-Type":void 0}}).then(function(e){var t=e.data.msg;i.fp="",0==e.data.status?swal("Error",t,"error"):swal("Success",t,"success")}).then(function(){})}}})}(),function(){"use strict";angular.module("authApp").controller("itemPriceController",function(e,t,a,i,n,s,r){var o=a.currentUser.id,l=a.currentUser.facility_id;e.get("public/api/getUsermenu/"+o).then(function(e){s.menu=e.data});var d=[];s.item_ist_search=function(t){return e.post("public/api/item_ist_search",{search:t}).then(function(e){d=e.data}),d},e.get("public/api/item_list").then(function(e){s.items=e.data}),e.get("public/api/payment_sub_category_to_set_price").then(function(e){s.payment_sub_categories=e.data}),s.item_price_registration=function(t){var a,i=[];s.payment_sub_categories.forEach(function(e){a=e.sub_category_name.replace(" ","_"),""!=$("#"+a).val()&&(i.push({facility_id:l,sub_category_id:e.id,price:$("#"+a).val().replace(",",""),item_id:t.selectedItem.id,startingFinancialYear:t.startingFinancialYear,endingFinancialYear:t.endingFinancialYear}),$("#"+a).val(""))}),t.sub_category_id,t.price,t.selectedItem.id,t.startingFinancialYear,t.endingFinancialYear,e.post("public/api/item_price_registration",i).then(function(e){e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):(swal("Success",t,"success"),s.item_price_list())})},s.itemLabSearch=function(t){return e.post("public/api/itemLabSearch",{search:t}).then(function(e){d=e.data}),d},s.item_price_list=function(){e.get("public/api/item_price_list/"+l).then(function(e){s.item_prices=e.data})},e.get("public/api/department_list").then(function(e){s.departments=e.data}),s.item_price_update=function(t){var a={id:t.id,price:t.price,facility_id:l,startingFinancialYear:t.startingFinancialYear,endingFinancialYear:t.endingFinancialYear};swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("public/api/item_price_update",a).then(function(e){s.item_price_list(),e.data,swal("Feedback..","Updated..","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.item_price_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("public/api/item_price_delete/"+a).then(function(e){s.item_price_list(),e.data,swal("Feedback..","Deleted","info")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})}})}(),function(){"use strict";angular.module("authApp").controller("itemSetupController",function(e,t,a,i,n,s,r){var o=a.currentUser.id;e.get("public/api/getUsermenu/"+o).then(function(e){s.menu=e.data}),s.item_exemptions=[],s.item_exemption=function(e){$("#itm").val("");for(var t=0;t<s.item_exemptions.length;t++)if(s.item_exemptions[t].item_id==e.selectedItem.id)return void swal(e.selectedItem.item_name+" already in your order list  ","","info");s.item_exemptions.push({item_name:e.selectedItem.item_name,item_id:e.selectedItem.id})},s.item_exemption_set=function(){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"SET",cancelButtonText:"CANCEL",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("public/api/item_exemption_set",{items:s.item_exemptions,status:1}).then(function(e){s.item_exemptions=[];var t=e.data.msg;swal("Feedback..",t,"success")})},function(e){})},s.item_exemption_reset=function(){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"RESET",cancelButtonText:"CANCEL",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("public/api/item_exemption_set",{items:s.item_exemptions,status:0}).then(function(e){s.item_exemptions=[];var t=e.data.msg;swal("Feedback..",t,"success")})},function(e){})},s.removeItemArray=function(e){s.item_exemptions.splice(e,1)},s.item_registration=function(t){var a={item_name:t.item_name,dept_id:t.dept_id};e.post("public/api/item_registration",a).then(function(e){s.item_list();var t=e.data;swal("Feedback..",t,"success")})},s.item_list=function(){e.get("public/api/item_list").then(function(e){s.items=e.data})};var l=[];s.item_searching=function(t){return e.get("public/api/item_searching/"+t).then(function(e){l=e.data}),l},e.get("public/api/department_list").then(function(e){s.departments=e.data}),s.item_update=function(t){var a={id:t.id,item_name:t.item_name,dept_id:t.dept_id};swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("public/api/item_update",a).then(function(e){s.item_list(),e.data,swal("Feedback..","Updated....","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.item_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("public/api/item_delete/"+a).then(function(e){s.item_list(),e.data,swal("Feedback..","Deleted..","info")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.item_type_map_registration=function(t){var a={item_id:t.selectedItem.id,Dose_formulation:t.Dose_formulation,dispensing_unit:t.dispensing_unit,item_category:t.item_category,item_code:t.item_code,sub_item_category:t.sub_item_category,unit_of_measure:t.unit_of_measure};console.log(t),e.post("public/api/item_type_map_registration",a).then(function(e){s.item_type_map_list();var t=e.data.msg;swal("Feedback..",t,"success")})},s.item_type_map_list=function(){e.get("public/api/item_type_map_list").then(function(e){s.item_type_maps=e.data})},e.get("public/api/item_type_map_list").then(function(e){s.item_type_maps=e.data}),e.get("public/api/department_list").then(function(e){s.departments=e.data}),s.item_type_map_update=function(t){var a={item_type_map_name:t.item_type_map_name,dept_id:t.dept_id};swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("public/api/item_type_map_update",a).then(function(e){s.item_type_map_list(),e.data,swal("Feedback..","Updated..","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.item_type_map_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("public/api/item_type_map_delete/"+a).then(function(e){s.item_type_map_list(),e.data,swal("Feedback..","Deleted...","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.item_category_registration=function(t){console.log(t);var a={item_category_name:t.item_category_name};e.post("public/api/item_category_registration",a).then(function(e){s.item_category_list();var t=e.data;swal("Feedback..",t,"success")})},s.item_category_list=function(){e.get("public/api/item_category_list").then(function(e){s.item_categories=e.data})},s.item_category_list(),s.item_category_update=function(t){console.log(t);var a=t;console.log(a),swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("public/api/item_category_update",a).then(function(e){s.item_category_list(),e.data,swal("Feedback..","Updated....","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.item_category_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("public/api/item_category_delete/"+a).then(function(e){s.item_category_list(),e.data,swal("Feedback..","Deleted..","info")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})}})}(),function(){"use strict";angular.module("authApp").controller("payment_typeController",function(e,t,a,i,n,s,r){var o=a.currentUser.id,l=a.currentUser.facility_id;e.get("/api/getUsermenu/"+o).then(function(e){s.menu=e.data}),e.get("/api/payment_type_list").then(function(e){s.payment_types=e.data}),s.payment_type_registration=function(t){console.log(t);var a={payment_type_name:t.payment_type_name,facility_id:l};e.post("/api/payment_type_registration",a).then(function(e){var t=e.data;swal("Feedback..",t,"success"),s.payment_type_list()})},s.payment_type_list=function(){e.get("/api/payment_type_list").then(function(e){s.payment_types=e.data})},s.payment_type_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/payment_type_update",t).then(function(e){e.data,swal("Feedback..","Updated....","success"),s.payment_type_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.payment_type_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/payment_type_delete/"+a).then(function(e){e.data,swal("Feedback..","Deleted..","warning"),s.payment_type_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},e.get("/api/payment_category_list").then(function(e){s.payment_categories=e.data}),s.payment_category_registration=function(t){var a={category_description:t.category_description," facility_id":l};e.post("/api/payment_category_registration",a).then(function(e){var t=e.data;swal("Feedback..",t,"success"),s.payment_category_list()})},s.payment_category_list=function(){e.get("/api/payment_category_list").then(function(e){s.payment_categories=e.data})},s.payment_category_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/payment_category_update",t).then(function(e){e.data,swal("Feedback..","updated....","success"),s.payment_category_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.payment_category_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/payment_category_delete/"+a).then(function(e){e.data,swal("Feedback..","Deleted","warning"),s.payment_category_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},e.get("/api/payment_sub_category_list").then(function(e){s.payment_sub_categories=e.data}),s.payment_sub_category_registration=function(t){var a={sub_category_name:t.sub_category_name,pay_cat_id:t.pay_cat_id,facility_id:l};e.post("/api/payment_sub_category_registration",a).then(function(e){var t=e.data;swal("Feedback..",t,"success"),s.payment_sub_category_list()})},s.payment_sub_category_list=function(){e.get("/api/payment_sub_category_list").then(function(e){s.payment_sub_categories=e.data})},s.payment_sub_category_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/payment_sub_category_update",t).then(function(e){e.data,swal("Feedback..","Updated...","success"),s.payment_sub_category_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.payment_sub_category_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/payment_sub_category_delete/"+a).then(function(e){e.data,swal("Feedback..","Deleted..","warning"),s.payment_sub_category_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},e.get("/api/payment_status_list").then(function(e){s.payment_status=e.data}),s.payment_status_registration=function(t){console.log(t),t.payment_status,e.post("/api/payment_status_registration",t).then(function(e){var t=e.data;swal("Feedback..",t,"success"),s.payment_status_list()})},s.payment_status_list=function(){e.get("/api/payment_status_list").then(function(e){s.payment_status=e.data})},s.payment_status_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/payment_status_update",t).then(function(e){e.data,swal("Feedback..","Updated...","success"),s.payment_status_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.payment_status_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/payment_status_delete/"+a).then(function(e){e.data,swal("Feedback..","Deleted...","warning"),s.payment_status_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})}})}(),function(){"use strict";angular.module("authApp").factory("Excel",function(e){var t=function(t){return e.btoa(unescape(encodeURIComponent(t)))},a=function(e,t){return e.replace(/{(\w+)}/g,function(e,a){return t[a]})};return{tableToExcel:function(e,i){var n={worksheet:i,table:$(e).html()};return"data:application/vnd.ms-excel;base64,"+t(a('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body><table>{table}</table></body></html>',n))}}}).controller("DispensingController",function(e,t,a,i,n,s,r,o,l,d){var c=a.currentUser.id,u=a.currentUser.facility_id;e.get("/api/getUsermenu/"+c).then(function(e){s.menu=e.data}),s.exportToExcel=function(e){var t=r.tableToExcel(e,"WireWorkbenchDataExport");o(function(){location.href=t},100)},s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0,e.get("/api/dispensings/"+c).then(function(e){s.items_balances=e.data});var p=[];s.dispensing_array_requisitions=[],s.Dispensing_queue=function(){e.get("/api/Dispensing_queue/"+u).then(function(e){s.patients=e.data,s.patientsTodispense=""})},s.Dispensing_queue(),s.patient_to_dispense=function(t){e.get("/api/patient_to_dispense/"+t).then(function(e){s.patientsTodispense=e.data,s.prescription_receipt=[]})},s.Item_to_dispense=function(t){var a=t.item_id,i=t.quantity;s.Vieworders=t,s.patientsTodispense="",e.get("/api/batch_patient_dispensing_list/"+a+","+c+","+i).then(function(e){s.batches=e.data})},s.Vieworder=function(t){var a=t.item_id;t.quantity,s.Vieworders=t,e.get("/api/batchdispensing_list/"+a+","+c).then(function(e){s.batches=e.data})},s.searchPatientTodispense=function(t){return e.post("/api/searchPatientTodispense",{searchKey:t}).then(function(e){p=e.data}),p},s.batchesbalances="",s.loadBatchBalance=function(t,a){e.get("/api/loaddispensingBatchBalance/"+t+","+a).then(function(e){s.batchesbalances=e.data})},s.LoadPatientTodispenseFromDB=function(t){e.post("/api/LoadPatientTodispenseFromDB",{mrn:t}).then(function(e){s.patients=e.data,s.patientsTodispense=""})},s.prescription_receipt=[],s.issue_to_patient=function(t,a){if("OS"==a.out_of_stock)var i=void 0,n=void 0,r=void 0,o=void 0,l=void 0;else var i=t.selectedBatch.received_from_id,n=s.batchesbalances[0].id,r=s.batchesbalances[0].store_id,o=t.selectedBatch.batch_no,l=s.batchesbalances[0].quantity_received-a.quantity;for(var d=0;d<s.prescription_receipt.length;d++)if(s.prescription_receipt[d].item_id==a.item_id)return void swal("Item already in your order list!");s.prescription_receipt.push({item_id:a.item_id,frequency:a.frequency,duration:a.duration,instruction:a.instruction,dose:a.dose,os:a.out_of_stock,gender:a.gender,dob:a.dob,middle_name:a.middle_name,last_name:a.last_name,first_name:a.first_name,start_date:a.start_date,item_name:a.item_name,medical_record_number:a.medical_record_number,quantity:a.quantity,doctor:a.name});var u={item_id:a.item_id,os:a.out_of_stock,quantity_dispensed:a.quantity,patient_id:a.patient_id,request_amount:a.quantity,received_from_id:i,order_id:a.id,identifier:n,user_id:c,dispensing_status_id:2,store_id:r,batch_no:o,quantity_received:l};e.post("/api/save_dispensed_item",u).then(function(t){s.Vieworders="",e.get("/api/patient_to_dispense/"+a.patient_id).then(function(e){s.patientsTodispense=e.data,s.patientsTodispense.length<1&&(s.Dispensing_queue(),s.Print_now())})})},s.prescription_printer=function(e,t){s.prescription_receipt.push({item_id:t.item_id,frequency:t.frequency,duration:t.duration,instruction:t.instruction,dose:t.dose,os:t.out_of_stock,gender:t.gender,dob:t.dob,middle_name:t.middle_name,last_name:t.last_name,first_name:t.first_name,start_date:t.start_date,item_name:t.item_name,medical_record_number:t.medical_record_number,quantity:t.quantity,doctor:t.name})},s.Print_now=function(){var e=s.prescription_receipt;d.open({templateUrl:"/views/Pharmacy/prescriptionModal.html",size:"lg",animation:!0,controller:"PrescriptionController",resolve:{object:function(){return e}}})},s.Cancelorders=function(){s.patientsTodispense="",s.Dispensing_queue(u)},s.Cancelorder=function(){s.Vieworders=""},s.showSearch=function(t){return e.post("/api/searchItemReceived",{searchKey:t}).then(function(e){p=e.data}),p},s.showItem=function(t){return e.post("/api/searchItemdispensingReceived",{searchKey:t}).then(function(e){p=e.data}),p},s.loadBatch=function(t){e.get("/api/batchdispensing_list/"+t+","+c).then(function(e){s.batches=e.data})},e.get("/api/pharmacy_transaction_type_list").then(function(e){s.transtypes=e.data}),e.get("/api/store_list/"+c).then(function(e){s.stores=e.data}),e.get("/api/Dispensing_stores_List/"+c).then(function(e){s.dispensing_stores=e.data}),e.get("/api/Sub_main_stores_List/"+c).then(function(e){s.Sub_Main_stores=e.data}),l(function(){s.callAtInterval()},1e3),s.callAtInterval=function(){},s.dispensing_item_receiving_list=function(){s.load=0,s.loading="Please wait while system loading",s.items="",e.get("/api/dispensing_item_receiving_list/"+u+","+c).then(function(e){if(e.data.length<1)swal("Error","No data Available","error");else{s.items=e.data,s.xs=[],s.ys=[];for(var t=0;t<s.items.length;t++)s.xs.push(s.items[t].item_name),s.ys.push(s.items[t].quantity_received);s.labels=s.xs,s.data=s.ys}})},s.reports=[{id:1,balance:"Store Balance"},{id:2,balance:"Detailed Report"},{id:3,balance:"Dispensed Items"}],s.pharmacy_report=function(t){e.get("/api/item_balances_list_in_dispensing/"+u+","+c+","+t).then(function(e){e.data.length>0&&(s.items=e.data,s.xs=[],s.ys=[]);for(var t=0;t<s.items.length;t++)s.xs.push(s.items[t].item_name),s.ys.push(s.items[t].quantity_received);s.labels=s.xs,s.data=s.ys})},s.dispensing_item_list_requisition=function(e){if(void 0==e.selectedItem)swal("Error","Choose Item First..","error");else if(void 0==e.selectedItem.item_id)swal("Error","Choose Item First..","error");else if(void 0==e.selectedStoreRequestReceiver)swal("Error","Choose Store Name you want To send this order request","error");else if(void 0==e.selectedStoreRequestSender)swal("Error","Choose Store Name where order request is Coming from","error");else if(void 0==e.quantity)swal("Error","Enter Quantity you want to order","error");else if(e.selectedStoreRequestSender.id==e.selectedStoreRequestReceiver.id)swal("Error","You can not Request item From similar Store","error");else if(e.quantity<0)swal("Error","Quantity Can not be a negative value .. Please enter a Possitive number","error");else{for(var t=0;t<s.dispensing_array_requisitions.length;t++)if(s.dispensing_array_requisitions[t].item_id==e.selectedItem.item_id&&s.dispensing_array_requisitions[t].request_receiver==e.selectedStoreRequestReceiver.id)return void swal(e.selectedItem.item_name+" already in your order list","","info");$("#btch").val(""),$("#itm3").val(""),$("#itm4").val(""),s.dispensing_array_requisitions.push({item_id:e.selectedItem.item_id,item_name:e.selectedItem.item_name,quantity:e.quantity,user_id:c,facility_id:u,request_sender:e.selectedStoreRequestSender.id,from:e.selectedStoreRequestSender.store_name,request_receiver:e.selectedStoreRequestReceiver.id,receiver_name:e.selectedStoreRequestReceiver.store_name,store_name:e.selectedStoreRequestReceiver.store_name,request_receiver_type:e.selectedStoreRequestReceiver.store_type_id,request_sender_type:e.selectedStoreRequestSender.store_type_id})}},s.removeItemArray_requisition=function(e){s.dispensing_array_requisitions.splice(e,1)},s.dispensing_item_ordering=function(){e.post("/api/dispensing_item_ordering",s.dispensing_array_requisitions).then(function(e){s.dispensing_array_requisitions=[];var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})};var _;s.ngModelOptionsSelected=function(e){if(!arguments.length)return _;_=e},s.modelOptions={debounce:{default:500,blur:250},getterSetter:!0},s.sort=function(e){s.sortKey=e,s.reverse=!s.reverse}})}(),function(){"use strict";angular.module("authApp").controller("PharmacyController",function(e,t,a,i,n,s,r){s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e};var o=a.currentUser.id,l=a.currentUser.facility_id;e.get("/api/getUsermenu/"+o).then(function(e){s.menu=e.data});var d=[];s.SearchUser=function(t){var a={userKey:t,facility_id:l};return e.post("/api/getUserToSetStoreToAccess",a).then(function(e){d=e.data}),d},s.User_store_populate=[];s.populateInArray=function(e){d[0].id,e.id,0==e.value1||s.User_store_populate.push({user_name:d[0].name,user_id:d[0].id,store_id:e.id,store_name:e.store_name})},s.store_user_configure=function(){s.User_store_populate.length<1?swal("Error","Nothing to save","error"):e.post("/api/store_user_configure",s.User_store_populate).then(function(e){var t=e.data.msg;0==e.data.status?swal("Feedback!",t,"info"):swal("Feedback!",t,"success"),e&&(s.User_store_populate=[])})},s.removeItem=function(e){s.User_store_populate.splice(e,1)},s.vendor_registration=function(t){var a={vendor_name:t.vendor_name,facility_id:l,vendor_address:t.vendor_address,vendor_phone_number:t.vendor_phone_number,vendor_contact_person:t.vendor_contact_person};e.post("/api/vendor_registration",a).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.vendor_list()})},s.vendor_list=function(){e.get("/api/vendor_list/"+l).then(function(e){s.vendors=e.data})},s.vendor_list(),s.vendor_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/vendor_update",t).then(function(e){var t=e.data.msg;swal("Feedback..",t,"success"),s.vendor_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.vendor_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/vendor_delete/"+a).then(function(e){var t=e.data.msg;swal("Feedback..",t,"warning"),s.vendor_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.invoice_registration=function(t){var a={invoice_number:t.invoice_number,vendor_id:t.vendor_id};console.log(a),e.post("/api/invoice_registration",a).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.invoice_list()})},s.invoice_list=function(){e.get("/api/invoice_list/"+l).then(function(e){s.invoices=e.data})},s.invoice_list(),s.invoice_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/invoice_update",t).then(function(e){var t=e.data.msg;swal("Feedback..",t,"success"),s.invoice_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.invoice_delete=function(t){console.log(t),swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/invoice_delete/"+t).then(function(e){var t=e.data.msg;swal("Feedback..",t,"warning"),s.invoice_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.pharmacy_transaction_type_registration=function(t){t.transaction_type,console.log(t),e.post("/api/pharmacy_transaction_type_registration",t).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.transtype_list()})},s.transtype_list=function(){e.get("/api/pharmacy_transaction_type_list").then(function(e){s.transtypes=e.data})},s.transtype_list(),s.pharmacy_transaction_type_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/pharmacy_transaction_type_update",t).then(function(e){var t=e.data.msg;swal("Feedback..",t,"success"),s.transtype_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.pharmacy_transaction_type_delete=function(t){console.log(t),swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/pharmacy_transaction_type_delete/"+t).then(function(e){var t=e.data.msg;swal("Feedback..",t,"warning"),s.transtype_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.store_type_registration=function(t){var a={store_type_name:t.store_type_name};console.log(a),e.post("/api/store_type_registration",a).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.store_type_list()})},s.store_type_list=function(){e.get("/api/store_type_list").then(function(e){s.storetypes=e.data})},s.store_type_list(),s.store_type_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/store_type_update",t).then(function(e){var t=e.data.msg;swal("Feedback..",t,"success"),s.store_type_list()}),s.store_type_list()},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.store_type_delete=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/store_type_delete/"+t).then(function(e){var t=e.data.msg;swal("Feedback..",t,"warning"),s.store_type_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.store_request_status_registration=function(t){var a={store_request_status:t.store_request_status};console.log(a),e.post("/api/store_request_status_registration",a).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.store_request_status_list()})},s.store_request_status_list=function(){e.get("/api/store_request_status_list").then(function(e){s.requeststatuses=e.data})},s.store_request_status_list(),s.store_request_status_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/store_request_status_update",t).then(function(e){var t=e.data.msg;swal("Feedback..",t,"success"),s.store_request_status_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.store_request_status_delete=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/store_request_status_delete/"+t).then(function(e){var t=e.data.msg;swal("Feedback..",t,"warning"),s.store_request_status_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.store_registration=function(t){var a={store_name:t.store_name,store_type_id:t.store_type_id,facility_id:l};console.log(a),console.log(t),e.post("/api/store_registration",a).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.store_list()})},s.store_list=function(){e.get("/api/store_list/"+o).then(function(e){s.stores=e.data})},s.store_list(),s.store_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/store_update",t).then(function(e){var t=e.data.msg;swal("Feedback..",t,"success"),s.store_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.store_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/store_delete/"+a).then(function(e){var t=e.data.msg;swal("Feedback..",t,"warning"),s.store_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})}})}(),function(){"use strict";angular.module("authApp").controller("PharmacyItemsController",function(e,t,a,i,n,s,r){s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0;var o=a.currentUser.id,l=a.currentUser.facility_id;e.get("/api/getUsermenu/"+o).then(function(e){s.menu=e.data});var d=[];s.items_array=[],s.items_array_issue=[],s.items_array_requisitions=[],s.showSearch=function(t){return e.post("/api/searchItem",{searchKey:t}).then(function(e){d=e.data}),d},s.showItem=function(t){return e.post("/api/searchItemReceived",{searchKey:t}).then(function(e){d=e.data}),d},s.loadBatch=function(t){e.get("/api/batch_list/"+t+","+o).then(function(e){s.batches=e.data,console.log(e.data)})},s.batchesbalances="",s.loadBatchBalance=function(t,a){e.get("/api/loadBatchBalance/"+t+","+a).then(function(e){s.batchesbalances=e.data,console.log(e.data)})},e.get("/api/invoice_list/"+l).then(function(e){s.invoices=e.data}),e.get("/api/pharmacy_transaction_type_list").then(function(e){s.transtypes=e.data}),e.get("/api/pharmacy_transaction_adjustment").then(function(e){s.transtypespossitive=e.data}),e.get("/api/Main_stores_List/"+o).then(function(e){s.main_stores=e.data}),e.get("/api/store_list/"+o).then(function(e){s.stores=e.data}),s.store_list=function(){e.get("/api/storesListToAsignAccess/"+l).then(function(e){s.storesListToconfigure=e.data})},s.store_list(),s.item_receiving_list=function(e){if(void 0==e&&0==s.items_array.length&&swal("Error","Choose Item first","error"),void 0==e.selectedItem&&0==s.items_array.length)swal("Error","Choose Item first","error");else if(void 0==e.selectedItem.item_id&&0==s.items_array.length)swal("Error","Choose Item first","error");else if(void 0==e.batch_no)swal("Error","Choose  or Enter Batch Number","error");else if(void 0==e.quantity)swal("Error","Choose  or Enter Item Quantity Received","error");else if(void 0==e.expiry_date)swal("Error","Choose  or Enter Item Expiry Date","error");else if(void 0==e.price)swal("Error","Choose  or Enter Item Cost Price","error");else{for(var t=0;t<s.items_array.length;t++)if(s.items_array[t].batch_no==e.batch_no)return void swal("  Batch Number "+e.batch_no+" already in your order list"+s.items_array[t].item_name,"","info");if(0!=s.items_array.length)var a=s.items_array[0].store_name,i=s.items_array[0].received_store_id,n=s.items_array[0].invoice_refference,r=s.items_array[0].received_from_id,d=s.items_array[0].transaction_type_id,u=s.items_array[0].transaction_type,p=s.items_array[0].received_date,_=s.items_array[0].invoice_number,m=s.items_array[0].remarks;else a=e.selectedStore.store_name,i=e.selectedStore.id,n=e.selectedInvoice.id,r=e.selectedInvoice.vendor_id,d=e.transaction_type_id,u=e.transaction_type,p=e.received_date,_=e.selectedInvoice.invoice_number,m=e.remarks;s.items_array.push({item_id:e.selectedItem.item_id,item_name:e.selectedItem.item_name,store_name:a,received_store_id:i,invoice_refference:n,invoice_number:_,received_from_id:r,transaction_type:u,transaction_type_id:d,received_date:p,remarks:m,user_id:o,batch_no:e.batch_no,quantity:e.quantity,expiry_date:e.expiry_date,price:e.price,facility_id:l,control:"l"}),s.total_cost=c(s.items_array)}};var c=function(){for(var e=0,t=0;t<s.items_array.length;t++)e+=s.items_array[t].price*s.items_array[t].quantity;return e};s.item_receiving_registration=function(){e.post("/api/item_receiving_registration",s.items_array).then(function(e){var t=e.data.msg,a=e.data.status;s.items_array=[],0==a?swal("Error",t,"error"):swal("Success",t,"success")})},s.reports=[{id:1,balance:"Store Balance"},{id:2,balance:"Detailed Report"},{id:3,balance:"Reorder Level"},{id:4,balance:"Tracer Medicine"}],s.pharmacy_report=function(t){e.get("/api/item_balances_list_in_mainstore/"+l+","+o+","+t).then(function(e){if(e.data.length>0)s.items=e.data;else{s.xs=[],s.ys=[];for(var t=0;t<s.items.length;t++)s.xs.push(s.items[t].item_name),s.ys.push(s.items[t].quantity);s.labels=s.xs,s.data=s.ys}})},s.pharmacy_report(1),s.main_store_incoming_order=function(){e.get("/api/main_store_incoming_order/"+l+","+o).then(function(e){s.item_orders=e.data})},s.main_store_incoming_order(),s.Vieworder=function(t){var a=t.item_id;s.Vieworders=t,e.get("/api/batch_list/"+a+","+o).then(function(e){s.batches=e.data})},s.order_issuing=function(t,a){if(console.log(s.batchesbalances),console.log(t,a),void 0==s.batchesbalances[0].quantity)swal("Error","Choose Batch Number","error");else if(t.quantity<0)swal("Error","Issuing Quantity Can not Be Negative value","error");else if(void 0==a.item_id)swal("Error","Choose Issued Store","error");else if(void 0==t.transaction_type_id)swal("Error","Choose Issuing Type of This Transaction","error");else if(s.batchesbalances[0].quantity-t.quantity<0)swal("Error","No Enough Quantity from this Store only"+s.batchesbalances[0].quantity+" remained","error");else{var i=s.batchesbalances[0].quantity-t.quantity,n=s.batchesbalances[0].quantity,r={item_id:a.item_id,quantity_issued:t.quantity,received_from_id:t.selectedBatch.store_id,invoice_refference:t.selectedBatch.invoice_id,request_id:a.id,identifier:s.batchesbalances[0].id,issued_store_id:a.requesting_store_id,vendor:s.batchesbalances[0].received_from_id,expiry_date:s.batchesbalances[0].expiry_date,store_name:a.requesting_store_name,order_no:a.order_no,requested_store_type_id:a.requested_store_type_id,requesting_store_type_id:a.requesting_store_type_id,store_balance:i,PreviusBalance:n,batch_no:t.selectedBatch.batch_no,user_id:o,transaction_type_id:t.transaction_type_id,facility_id:l};e.post("/api/Order_processing",r).then(function(e){s.processed=e.data,s.main_store_incoming_order(),s.Vieworders="";var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.Cancelorder=function(){s.Vieworders=""},s.pharmacy_item_list_issue=function(e){if(void 0==e.selectedItem.item_id)swal("Error","Choose Item First..","error");else if(s.batchesbalances.length<1)swal("Error","Choose Batch Number which has enough balance","error");else if(e.quantity<0)swal("Error","Issuing Quantity Can not Be Negative value","error");else if(void 0==e.transaction_type_id)swal("Error","Choose Issuing Type of This Transaction","error");else if(void 0==e.selectedStore&&"plus"==e.transaction_type_id.adjustment)swal("Error","Choose Issued Store","error");else if(s.batchesbalances.length<1)swal("Error","No Enough Quantity from this Store only","info");else if(s.batchesbalances[0].quantity-e.quantity<0)swal("Error","No Enough Quantity from this Store only"+s.batchesbalances[0].quantity+" remained","error");else{for(var t=0;t<s.items_array_issue.length;t++)if(s.items_array_issue[t].item_id==e.selectedItem.item_id)return void swal(e.selectedItem.item_name+" already in your order list ","","info");$("#btch").val(""),$("#itm").val(""),$("#itm1").val(""),$("#itm2").val("");var a=void 0,i=void 0,n=void 0;"plus"==e.transaction_type_id.adjustment&&(a=e.selectedStore.id,i=e.selectedStore.store_type_id,n=e.selectedStore.store_name);var r=s.batchesbalances[0].quantity-e.quantity,d=s.batchesbalances[0].quantity;console.log(e.selectedBatch.store_id),s.items_array_issue.push({item_id:e.selectedItem.item_id,quantity_issued:e.quantity,item_name:e.selectedItem.item_name,received_from_id:e.selectedBatch.store_id,from:e.selectedBatch.store_name,identifier:s.batchesbalances[0].id,issued_store_id:a,store_type_id:i,store_name:n,invoice_no:e.selectedBatch.invoice_number,internal_issuer_id:e.selectedBatch.store_id,store_balance:r,PreviusBalance:d,invoice_number:e.selectedBatch.invoice_id,vendor_id:e.selectedBatch.vendor_id,expiry_date:e.selectedBatch.expiry_date,user_id:o,transaction_type_id:e.transaction_type_id.id,adjustment:e.transaction_type_id.adjustment,batch_no:e.selectedBatch.batch_no,facility_id:l})}},s.pharmacy_item_issuing=function(){e.post("/api/pharmacy_item_issuing",s.items_array_issue).then(function(e){s.items_issued=e.data;var t=e.data.msg,a=e.data.status;s.items_array_issue=[],0==a?swal("Error",t,"error"):swal("Feedback..",t,"success")})},s.pharmacy_item_list_requisition=function(e){if(void 0==e.selectedItem)swal("Error","Choose Item First..","error");else if(void 0==e.selectedItem.item_id)swal("Error","Choose Item First..","error");else if(void 0==e.selectedStoreRequestReceiver)swal("Error","Choose Store Name you want To send this order request","error");else if(void 0==e.selectedStoreRequestSender)swal("Error","Choose Store Name where order request is Coming from","error");else if(void 0==e.quantity)swal("Error","Enter Quantity you want to order","error");else if(e.selectedStoreRequestSender.id==e.selectedStoreRequestReceiver.id)swal("Error","You can not Request item From similar Store","error");else if(e.quantity<0)swal("Error","Quantity Can not be a negative value .. Please enter a Possitive number","error");else{for(var t=0;t<s.items_array_requisitions.length;t++)if(s.items_array_requisitions[t].item_id==e.selectedItem.item_id&&s.items_array_requisitions[t].request_receiver==e.selectedStoreRequestReceiver.id)return void swal(e.selectedItem.item_name+" already in your order list  ","","info");$("#btch").val(""),$("#itm3").val(""),$("#itm4").val(""),s.items_array_requisitions.push({item_id:e.selectedItem.item_id,item_name:e.selectedItem.item_name,quantity:e.quantity,user_id:o,facility_id:l,request_sender:e.selectedStoreRequestSender.id,from:e.selectedStoreRequestSender.store_name,request_receiver:e.selectedStoreRequestReceiver.id,receiver_name:e.selectedStoreRequestReceiver.store_name,store_name:e.selectedStoreRequestReceiver.store_name,request_receiver_type:e.selectedStoreRequestReceiver.store_type_id,request_sender_type:e.selectedStoreRequestSender.store_type_id})}},s.main_store_item_ordering=function(){e.post("/api/main_store_item_ordering",s.items_array_requisitions).then(function(e){var t=e.data.msg,a=e.data.status;s.items_array_requisitions=[],0==a?swal("Error",t,"error"):swal("Feedback..",t,"success")})},s.tracers=[],s.tracer_medicine=function(e){s.tracers.push({item_id:e.selectedItem.item_id,item_name:e.selectedItem.item_name,status:e.status})},s.save_tracer_medicine=function(){e.post("/api/save_tracer_medicine",s.tracers).then(function(e){var t=e.data.msg,a=e.data.status;s.tracers=[],0==a?swal("Info",t,"info"):swal("Response",t,"success")})},s.removeTracerItem=function(e){s.tracers.splice(e,1)},s.removeItemArray=function(e){s.items_array.splice(e,1),s.total_cost=c(s.items_array)},s.removeItemArray_issue=function(e){s.items_array_issue.splice(e,1)},s.removeItemArray_requisition=function(e){s.items_array_requisitions.splice(e,1)};var u=[];s.SearchUser=function(t){var a={userKey:t,facility_id:l};return e.post("/api/getUserToSetStoreToAccess",a).then(function(e){u=e.data}),u},s.User_store_populate=[];s.populateInArray=function(e){u[0].id,e.id,0==e.value1||s.User_store_populate.push({user_name:u[0].name,user_id:u[0].id,store_id:e.id,store_name:e.store_name})},s.store_user_configure=function(){s.User_store_populate.length<1?swal("Error","Nothing to save","error"):e.post("/api/store_user_configure",s.User_store_populate).then(function(e){var t=e.data.msg;0==e.data.status?swal("Feedback!",t,"info"):swal("Feedback!",t,"success"),e&&(s.User_store_populate=[])})},s.removeItem=function(e){s.User_store_populate.splice(e,1)},s.vendor_registration=function(t){if(void 0==t)swal("Error","Fill all required fields","error");else{var a={vendor_name:t.vendor_name,facility_id:l,vendor_address:t.vendor_address,vendor_phone_number:t.vendor_phone_number,vendor_contact_person:t.vendor_contact_person};e.post("/api/vendor_registration",a).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.vendor_list()})}},s.vendor_list=function(){e.get("/api/vendor_list/"+l).then(function(e){s.vendors=e.data})},s.vendor_list(),s.vendor_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/vendor_update",t).then(function(e){var t=e.data.msg;swal("Feedback..",t,"success"),s.vendor_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.vendor_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/vendor_delete/"+a).then(function(e){var t=e.data.msg;swal("Feedback..",t,"warning"),s.vendor_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.invoice_registration=function(t){if(void 0==t)swal("Error","Fill all required fields","error");else{var a={invoice_number:t.invoice_number,vendor_id:t.vendor_id};console.log(a),e.post("/api/invoice_registration",a).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.invoice_list()})}},s.invoice_list=function(){e.get("/api/invoice_list/"+l).then(function(e){s.invoices=e.data})},s.invoice_list(),s.invoice_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/invoice_update",t).then(function(e){var t=e.data.msg;swal("Feedback..",t,"success"),s.invoice_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.invoice_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/invoice_delete/"+a).then(function(e){var t=e.data.msg;swal("Feedback..",t,"warning"),s.invoice_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.pharmacy_transaction_type_registration=function(t){t.transaction_type,console.log(t),e.post("/api/pharmacy_transaction_type_registration",t).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.transtype_list()})},s.transtype_list=function(){e.get("/api/pharmacy_transaction_type_list").then(function(e){s.transtypes=e.data})},s.transtype_list(),s.store_type_list=function(){e.get("/api/store_type_list").then(function(e){s.storetypes=e.data})},s.store_type_list(),s.store_registration=function(t){if(void 0==t)swal("Error","Fill all required fields","error");else{var a={store_name:t.store_name,store_type_id:t.store_type_id,facility_id:l};console.log(a),console.log(t),e.post("/api/store_registration",a).then(function(e){var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.store_list()})}},s.store_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/store_update",t).then(function(e){var t=e.data.msg;swal("Feedback..",t,"success"),s.store_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})};var p;s.ngModelOptionsSelected=function(e){if(!arguments.length)return p;p=e},s.modelOptions={debounce:{default:500,blur:250},getterSetter:!0},s.sort=function(e){s.sortKey=e,s.reverse=!s.reverse}})}(),function(){"use strict";angular.module("authApp").controller("PrescriptionController",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.prescriptions=s;a.currentUser.id,a.currentUser.facility_id;e.date=new Date}])}(),function(){"use strict";angular.module("authApp").controller("SubStoreItemsController",function(e,t,a,i,n,s,r){var o=a.currentUser.id,l=a.currentUser.facility_id;e.get("/api/getUsermenu/"+o).then(function(e){s.menu=e.data}),s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0,s.sort=function(e){s.sortKey=e,s.reverse=!s.reverse};var d=[];s.items_array_requisitions=[],s.items_array_issue=[],s.showSearch=function(t){return e.post("/api/searchItem",{searchKey:t}).then(function(e){d=e.data}),d},s.showItem=function(t){return e.post("/api/searchItemsubstoreReceived",{searchKey:t}).then(function(e){d=e.data}),d},s.loadBatch=function(t){e.get("/api/batchsubstore_list/"+t+","+o).then(function(e){s.batches=e.data,console.log(e.data)})},s.batchesbalances="",s.loadBatchBalance=function(t,a){e.get("/api/loadsubstoreBatchBalance/"+t+","+a).then(function(e){s.batchesbalances=e.data,console.log(e.data)})},e.get("/api/pharmacy_transaction_type_list").then(function(e){s.transtypes=e.data}),e.get("/api/store_list/"+o).then(function(e){s.stores=e.data}),e.get("/api/Sub_stores_List/"+o).then(function(e){s.Sub_stores=e.data}),e.get("/api/Sub_main_stores_List/"+o).then(function(e){s.Sub_Main_stores=e.data}),e.get("/api/Sub_dispensing_stores_List/"+o).then(function(e){s.Sub_dispensing_stores=e.data}),s.substore_item_receiving_list=function(){e.get("/api/substore_item_receiving_list/"+l+","+o).then(function(e){e.data.length>0?s.items=e.data:swal("Info","Nothing in stores","info")})},s.reports=[{id:1,balance:"Store Balance"},{id:2,balance:"Detailed Report"}],s.pharmacy_report=function(t){e.get("/api/item_balances_list_in_substore/"+l+","+o+","+t).then(function(e){e.data.length>0&&(s.items=e.data)})},s.Substore_item_list_issue=function(e){if(console.log(e),void 0==e.selectedItem.item_id)swal("Error","Choose Item First..","error");else if(s.batchesbalances.length<1)swal("Error","Choose Batch Number which has enough balance","error");else if(e.quantity<0)swal("Error","Issuing Quantity Can not Be Negative value","error");else if(void 0==e.transaction_type_id)swal("Error","Choose Issuing Type of This Transaction","error");else if(void 0==e.selectedStore&&"plus"==e.transaction_type_id.adjustment)swal("Error","Choose Issued Store","error");else if(s.batchesbalances.length<1)swal("Error","No Enough Quantity from this Store only","info");else if(s.batchesbalances[0].quantity-e.quantity<0)swal("Error","No Enough Quantity from this Store only"+s.batchesbalances[0].quantity+" remained","error");else{for(var t=0;t<s.items_array_issue.length;t++)if(s.items_array_issue[t].item_id==e.selectedItem.item_id)return void swal(e.selectedItem.item_name+" already in your order list ","","info");$("#btch").val(""),$("#itm").val(""),$("#itm1").val(""),$("#itm2").val("");var a="",i="",n="";"plus"==e.transaction_type_id.adjustment&&(a=e.selectedStore.id,i=e.selectedStore.store_type_id,n=e.selectedStore.store_name);var r=s.batchesbalances[0].quantity-e.quantity,d=s.batchesbalances[0].quantity;console.log(e.selectedBatch.store_id),s.items_array_issue.push({item_name:e.selectedItem.item_name,from:e.selectedBatch.store_name,item_id:e.selectedItem.item_id,quantity_issued:e.quantity,identifier:s.batchesbalances[0].id,received_from_id:e.selectedBatch.store_id,store_sender_id:s.batchesbalances[0].store_id,store_receiver_id:a,issued_store_id:a,store_type_id:i,store_name:n,internal_issuer_id:s.batchesbalances[0].store_id,store_balance:r,PreviusBalance:d,invoice_number:s.batchesbalances[0].invoice_id,vendor_id:e.selectedBatch.vendor_id,expiry_date:s.batchesbalances[0].expiry_date,user_id:o,transaction_type_id:e.transaction_type_id.id,adjustment:e.transaction_type_id.adjustment,batch_no:s.batchesbalances[0].batch_no,facility_id:l})}},s.removeItemArray_issue=function(e){s.items_array_issue.splice(e,1)},s.substore_item_issuing=function(){e.post("/api/substore_item_issuing",s.items_array_issue).then(function(e){s.items_issued=e.data,s.items_array_issue=[];var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")}),s.batchesbalances=""},s.SubStore_item_list_requisition=function(e){if(void 0==e.selectedItem)swal("Error","Choose Item First..","error");else if(void 0==e.selectedItem.item_id)swal("Error","Choose Item First..","error");else if(void 0==e.selectedStoreRequestReceiver)swal("Error","Choose Store Name you want To send this order request","error");else if(void 0==e.selectedStoreRequestSender)swal("Error","Choose Store Name where order request is Coming from","error");else if(void 0==e.quantity)swal("Error","Enter Quantity you want to order","error");else if(e.selectedStoreRequestSender.id==e.selectedStoreRequestReceiver.id)swal("Error","You can not Request item From similar Store","error");else if(e.quantity<0)swal("Error","Quantity Can not be a negative value .. Please enter a Possitive number","error");else{for(var t=0;t<s.items_array_requisitions.length;t++)if(s.items_array_requisitions[t].item_id==e.selectedItem.item_id&&s.items_array_requisitions[t].request_receiver==e.selectedStoreRequestReceiver.id)return void swal(e.selectedItem.item_name+" already in your order list ","","info");$("#btch").val(""),$("#itm").val(""),$("#itm1").val(""),s.items_array_requisitions.push({item_id:e.selectedItem.item_id,item_name:e.selectedItem.item_name,quantity:e.quantity,user_id:o,facility_id:l,request_sender:e.selectedStoreRequestSender.id,from:e.selectedStoreRequestSender.store_name,request_receiver:e.selectedStoreRequestReceiver.id,receiver_name:e.selectedStoreRequestReceiver.store_name,store_name:e.selectedStoreRequestReceiver.store_name,request_receiver_type:e.selectedStoreRequestReceiver.store_type_id,request_sender_type:e.selectedStoreRequestSender.store_type_id})}},s.removeItemArray=function(e){s.items_array_requisitions.splice(e,1)},s.substore_item_ordering=function(){e.post("/api/substore_item_ordering",s.items_array_requisitions).then(function(e){s.items_array_requisitions=[];var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})},s.sub_store_incoming_order=function(){e.get("/api/sub_store_incoming_order/"+l+","+o).then(function(e){s.item_orders=e.data})},s.sub_store_incoming_order(),s.Vieworder=function(t){console.log(t);var a=t.item_id;s.Vieworders=t,e.get("/api/batchsubstore_list/"+a+","+o).then(function(e){s.batches=e.data,console.log(e.data)})},s.order_issuing=function(t,a){if(void 0==s.batchesbalances[0].quantity)swal("Error","Choose Batch Number","error");else if(t.quantity<0)swal("Error","Issuing Quantity Can not Be Negative value","error");else if(void 0==a.item_id)swal("Error","Choose Issued Store","error");else if(void 0==t.transaction_type_id)swal("Error","Choose Issuing Type of This Transaction","error");else if(s.batchesbalances[0].quantity-t.quantity<0)swal("Error","No Enough Quantity from this Store only"+s.batchesbalances[0].quantity+" remained","error");else{var i=s.batchesbalances[0].quantity-t.quantity,n=s.batchesbalances[0].quantity,r={item_id:a.item_id,quantity_issued:t.quantity,received_from_id:s.batchesbalances[0].received_from_id,request_id:a.id,issued_store_id:a.requested_store_id,identifier:s.batchesbalances[0].id,store_name:a.requesting_store_name,order_no:a.order_no,requested_store_type_id:a.requested_store_type_id,requesting_store_type_id:a.requesting_store_type_id,store_balance:i,PreviusBalance:n,batch_no:s.batchesbalances[0].batch_no,user_id:o,transaction_type_id:t.transaction_type_id,facility_id:l};console.log(r),e.post("/api/sub_store_Order_processing",r).then(function(e){s.processed=e.data,s.sub_store_incoming_order(),s.Vieworders="";var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.Cancelorder=function(){s.Vieworders=""};var c;s.ngModelOptionsSelected=function(e){if(!arguments.length)return c;c=e},s.modelOptions={debounce:{default:500,blur:250},getterSetter:!0}})}(),function(){"use strict";angular.module("authApp").controller("Anti_natalController",function(e,t,a,i,n,s,r){s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0;var o=a.currentUser.id,l=a.currentUser.facility_id;e.get("/api/getUsermenu/"+o).then(function(e){s.menu=e.data});var d=[],c=[];s.showSearchOccupation=function(t){return e.get("/api/getOccupation/"+t).then(function(e){d=e.data}),d},s.showSearchResidences=function(t){return e.get("/api/searchResidences/"+t).then(function(e){c=e.data}),c},s.ClinicQueue=function(){e.get("/api/searchClinicpatientQueue/"+l).then(function(e){s.resdatas=e.data[1]})},s.ClinicQueue(),e.get("/api/facility_list").then(function(e){s.facility=e.data}),s.showSearch=function(t){return e.post("/api/searchRchpatient",{searchKey:t}).then(function(e){c=e.data}),c},s.department_list=function(){e.get("/api/department_list").then(function(e){s.departments=e.data})},s.department_list(),s.SearchStds=function(t){return e.post("/api/SearchStds",{searchKey:t}).then(function(e){c=e.data}),c},s.LNMP=function(t){e.get("/api/calculateWeek/"+t).then(function(e){s.lnmp=e.data,console.log(s.lnmp)})},s.anti_natal_registration=function(t){if(void 0==t)swal("Error","Please Fill All required Fields","error");else if(void 0==t.first_name)swal("Error","Please Fill First name","error");else if(void 0==t.residence_id)swal("Error","Please Fill Residence","error");else if(void 0==t.occupation)swal("Error","Please Fill Occupation","error");else if(void 0==t.partner_name)swal("Error","Please Fill Partner Name","error");else if(void 0==t.occupation1)swal("Error","Please Fill Partner Occupation","error");else{var a={facility_id:l,user_id:o,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,gender:"Female",dob:t.dob,dob1:t.dob1,height:t.height,voucher_no:t.voucher_no,education1:t.education1,education:t.education,mobile_number:t.mobile_number,partner_name:t.partner_name,occupation_id:t.occupation.id,occupation_id1:t.occupation1.id,residence_id:t.residence_id.residence_id};e.post("/api/anti_natal_registration",a).then(function(e){s.detail=e.data;var t=e.data.data;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.vaccination_list=function(){e.get("/api/vaccination_list").then(function(e){s.vaccinations=e.data})},s.vaccination_list(),s.vaccination_registration=function(t){e.post("/api/vaccination_registration",t).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.vaccination_list()})},s.prev_preg_info_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t.number_of_pregnancy)swal("Error","Please Enter Number of pregnancy","error");else if(void 0==t.number_of_delivery)swal("Error","Please Enter Number of delivery","error");else if(void 0==t.number_alive_children)swal("Error","Please Enter Number of alive children","error");else if(void 0==t.number_of_miscarriage)swal("Error","Please Enter Number of Miscarriage","error");else if(void 0==t.year)swal("Error","Please Enter year of events above","error");else if(void 0==t.lnmp)swal("Error","Please Enter LNMP","error");else if(void 0==t.edd)swal("Error","Please Enter EDD","error");else if(void 0==t.delivery_place)swal("Error","Please Enter Suggested Place of Delivery","error");else{var i={number_of_pregnancy:t.number_of_pregnancy,number_of_delivery:t.number_of_delivery,number_alive_children:t.number_alive_children,number_of_miscarriage:t.number_of_miscarriage,edd:t.edd,lnmp:t.lnmp,year:t.year,delivery_place:t.delivery_place.id,client_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/prev_preg_info_registration",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.prev_preg_info_indicator=function(t,a){if(void 0==t)swal("Error","Please Fill all fields","error");else if(void 0==t.fp_35_years_n_above)swal("Error","Mimba ya kwanza Zaidi ya miaka 35?","error");else if(void 0==t.lp_10_years_n_above)swal("Error","Mimba ya mwisho Zaidi ya miaka 10?","error");else if(void 0==t.delivery_method)swal("Error","Alijifungua Je?","error");else if(void 0==t.fbs_msb)swal("Error","Kuzaa mtoto Mfu au Kifo cha mtoto mchanga?","error");else if(void 0==t.miscarriage_three_plus)swal("Error","Kuharibika kwa mimba tatu au zaidi?","error");else if(void 0==t.heart_disease)swal("Error","Ana Ugonjwa wa Moyo?","error");else if(void 0==t.diabetic)swal("Error","Alishawahi kuugua Kisukari?","error");else if(void 0==t.tb)swal("Error","Alishawahi kuugua Kifua Kikuu?","error");else if(void 0==t.waist_disability)swal("Error","Anaulemavu wa Nyonga?","error");else if(void 0==t.high_bleeding)swal("Error","Kutoka Damu Nyingi wakati wa kujifungua?","error");else if(void 0==t.placenta_stacked)swal("Error"," Kondo la Nyuma Kukwama?","error");else{var i={fp_35_years_n_above:t.fp_35_years_n_above,lp_10_years_n_above:t.lp_10_years_n_above,delivery_method:t.delivery_method,high_bleeding:t.high_bleeding,fbs_msb:t.fbs_msb,miscarriage_three_plus:t.miscarriage_three_plus,heart_disease:t.heart_disease,diabetic:t.diabetic,tb:t.tb,waist_disability:t.waist_disability,placenta_stacked:t.placenta_stacked,client_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/pregnancy_indicator",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.anti_natal_lab_results=function(t,a){if(void 0==t)swal("Error","Please Fill all Fields","error");else if(void 0==t.blood_group)swal("Error","Please Enter Blood Group","error");else if(void 0==t.rh)swal("Error","Please Enter Rhesus","error");else if(void 0==t.vdrl_rpr)swal("Error","Please Enter vdrl/rpr","error");else if(void 0==t.pmtct)swal("Error","Please Enter PMTCT Status","error");else if(void 0==t.mrdt_bs)swal("Error","Please Choose MRDT or BS","error");else if(void 0==t.result)swal("Error","Please Enter Results for  "+t.mrdt_bs,"error");else{var i={blood_group:t.blood_group,rh:t.rh,vdrl_rpr:t.vdrl_rpr,pmtct:t.pmtct,mrdt_bs:t.mrdt_bs,result:t.result,other_test:t.other_test,client_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/anti_natal_lab_results",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.lab_result})}},s.partner_lab_results=function(t,a){if(void 0==t)swal("Error","Please Fill all Fields","error");else if(void 0==t.blood_group)swal("Error","Please Enter Blood Group","error");else if(void 0==t.rh)swal("Error","Please Enter Rhesus","error");else if(void 0==t.vdrl_rpr)swal("Error","Please Enter vdrl/rpr","error");else if(void 0==t.pmtct)swal("Error","Please Enter PMTCT Status","error");else{var i={blood_group:t.blood_group,rh:t.rh,vdrl_rpr:t.vdrl_rpr,pmtct:t.pmtct,other_test:t.other_test,client_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/partner_lab_results",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.p_lab_result})}},s.reattendance_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill Fields required","error");else if(void 0==t.hb)swal("Error","Please Fill for HB","error");else if(void 0==t.bp)swal("Error","Please Fill for BP","error");else if(void 0==t.urine_albumin)swal("Error","Jaza Albumin Kwenye Mkojo","error");else if(void 0==t.urine_sugar)swal("Error","Jaza Sukari Kwenye Mkojo","error");else if(void 0==t.oedema)swal("Error","Jaza Kuvimba Miguu/Uso/Mikono","error");else if(void 0==t.followup_date)swal("Error","Jaza Tarehe ya Kurudi","error");else{var i={weight:t.weight,hb:t.hb,bp:t.bp,urine_albumin:t.urine_albumin,urine_sugar:t.urine_sugar,pregnancy_height:t.pregnancy_height,baby_position:t.baby_position,baby_pointer:t.baby_pointer,baby_play:t.baby_play,baby_heart_beat:t.baby_heart_beat,twins:t.twins,oedema:t.oedema,followup_date:t.followup_date,client_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/reattendance_registration",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.investigation=null})}},s.pmtct_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t.vvu_infection)swal("Error","Please Fill Column for VVU Infection  ","error");else if(void 0==t.has_counsel_given)swal("Error","Please Fill Column for  Counselling Given  ","error");else if(void 0==t.has_taken_vvu_test)swal("Error","Please Fill Column for VVU test Taken ","error");else if(void 0==t.vvu_first_test_result)swal("Error","Please Fill Column for VVU First Test Result ","error");else if(void 0==t.counselling_after_vvu_test)swal("Error","Please Fill Column for Counselling After VVU Test ","error");else if(void 0==t.vvu_second_test_result)swal("Error","Please Fill Column for VVU Second Test Result ","error");else if(void 0==t.baby_feeding_counsel_given)swal("Error","Please Fill Column for Baby Feeding Counselling ","error");else{var i={vvu_infection:t.vvu_infection,has_counsel_given:t.has_counsel_given,counselling_date:t.counselling_date,has_taken_vvu_test:t.has_taken_vvu_test,date_of_test_taken:t.date_of_test_taken,vvu_first_test_result:t.vvu_first_test_result,counselling_after_vvu_test:t.counselling_after_vvu_test,vvu_second_test_result:t.vvu_second_test_result,baby_feeding_counsel_given:t.baby_feeding_counsel_given,patient_id:a,facility_id:l,user_id:o};e.post("/api/pmtct_registration",i).then(function(e){s.pmtct=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.pmtct=null})}},s.pmtct_partner_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t.vvu_infection)swal("Error","Please Fill Column for VVU Infection  ","error");else if(void 0==t.has_counsel_given)swal("Error","Please Fill Column for  Counselling Given  ","error");else if(void 0==t.has_taken_vvu_test)swal("Error","Please Fill Column for VVU test Taken ","error");else if(void 0==t.vvu_first_test_result)swal("Error","Please Fill Column for VVU First Test Result ","error");else if(void 0==t.counselling_after_vvu_test)swal("Error","Please Fill Column for Counselling After VVU Test ","error");else if(void 0==t.vvu_second_test_result)swal("Error","Please Fill Column for VVU Second Test Result ","error");else{var i={vvu_infection:t.vvu_infection,has_counsel_given:t.has_counsel_given,counselling_date:t.counselling_date,has_taken_vvu_test:t.has_taken_vvu_test,date_of_test_taken:t.date_of_test_taken,vvu_first_test_result:t.vvu_first_test_result,counselling_after_vvu_test:t.counselling_after_vvu_test,vvu_second_test_result:t.vvu_second_test_result,patient_id:a,facility_id:l,user_id:o};e.post("/api/pmtct_partner_registration",i).then(function(e){s.pmtct=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.pmtct=null})}},s.preventives_registration=function(t,a){if(void 0==t)swal("Error","Please choose Client First","error");else if(void 0==t.ferrous_sulphate)swal("Error","Please Fill Column for ferrous sulphate  ","error");else if(void 0==t.folic_acid)swal("Error","Please Fill Column for folic acid  ","error");else if(void 0==t.deworm)swal("Error","  Amepewa Dawa ya Minyoo ?","error");else if(void 0==t.malaria)swal("Error","  Amepewa dawa ya kujikinga na Malaria ?","error");else{var i={ferrous_sulphate:t.ferrous_sulphate,folic_acid:t.folic_acid,malaria:t.malaria,deworm:t.deworm,client_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/preventives_registration",i).then(function(e){s.prevents=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.malaria=null})}},s.ipt_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t.ipt)swal("Error","Please Choose IPT Number first","error");else if(void 0==t.ipt_date)swal("Error","Please Enter Date for   "+t.ipt,"error");else{var i={ipt:t.ipt,ipt_date:t.ipt_date,patient_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/ipt_registration",i).then(function(e){s.pmtct=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.ipt=null})}},s.counselling_area_registration=function(t){void 0==t?swal("Error","Please Fill Column shown","error"):e.post("/api/counselling_area_registration",t).then(function(e){s.counsellings=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):(swal("Feedback..",t,"success"),s.counseling_aresa())})},s.counseling_aresa=function(){e.get("/api/councelling_lists").then(function(e){s.counselings=e.data})},s.counseling_aresa(),s.counseling_givens=[],s.Add_counsel=function(e,t){void 0==e?swal("Error","Choose Description you want","error"):void 0==e.description_id?swal("Error","Choose Description you want","error"):void 0==e.description_id.id?swal("Error","Choose Description you want","error"):void 0==e.status?swal("Error","Choose Description Status","error"):s.counseling_givens.push({facility_id:l,user_id:o,description:e.description_id.description,description_id:e.description_id.id,client_id:t,status:e.status})},s.counselling_registration=function(){e.post("/api/counselling_registration",s.counseling_givens).then(function(e){s.send=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success"),s.counseling_givens=[]})},s.removeIT=function(e){s.counseling_givens.slice(e,1)},s.tt_vaccination_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t.vaccination_date)swal("Error","Please Enter Date for "+t.vaccination_id.vaccination_name,"error");else if(void 0==t.has_card)swal("Error","Please choose option if Client has card or not ","error");else{var i={vaccination_id:t.vaccination_id.id,has_card:t.has_card,vaccination_date:t.vaccination_date,patient_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/tt_vaccination_registration",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.std_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t.std_id)swal("Error","Please Select STDs Diagnosis First  ","error");else if(void 0==t.std_id.id)swal("Error","Select STDs Diagnosis First","error");else if(void 0==t.result)swal("Error","Please choose option for Status about "+t.std_id.description,"error");else if(void 0==t.treated)swal("Error","Please choose option for treatment about "+t.std_id.description+" selected","error");else{var i={std_id:t.std_id.id,result:t.result,treated:t.treated,p_result:t.p_result,p_treated:t.p_treated,patient_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/std_registration",i).then(function(e){s.stds=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.institution_list=function(){e.get("/api/institution_list").then(function(e){s.institutes=e.data})},s.institution_list(),s.vaccination_update=function(t){e.post("/api/vaccination_update",t).then(function(e){s.vaccines=e.data,s.vaccination_list();var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})},s.child_referral_registration=function(t,a,i){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill All fields  ","error");else if(void 0==t.referral_id)swal("Error","Select Clinic for referring","error");else if(void 0==t.reason)swal("Error","Please Enter Reasons for  Referral ","error");else{var n={transfered_institution_id:t.referral_id,reason:t.reason,mother_id:1,patient_id:a,patient_id_table:i,sender_clinic_id:18,facility_id:l,user_id:o};e.post("/api/child_referral_registration",n).then(function(e){s.stds=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.vaccination_update=function(t){e.post("/api/vaccination_update",t).then(function(e){s.vaccines=e.data,s.vaccination_list();var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})},s.RCH_recommendations_registration=function(t,a){if(void 0==t)swal("Error","Write Recommendations first","error");else{var i={opinion:t.opinion,opinion_type:2,facility_id:l,patient_id:a,user_id:o};e.post("/api/RCH_recommendations_registration",i).then(function(e){s.opinions=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.Anti_natal_in_referral=function(t){e.post("/api/Anti_incoming_referral",t).then(function(e){s.selectedPatient=e.data}),s.ClinicQueue()}})}(),function(){"use strict";angular.module("authApp").controller("Child_Controller",function(e,t,a,i,n,s,r){s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0;var o=a.currentUser.id,l=a.currentUser.facility_id;e.get("/api/getUsermenu/"+o).then(function(e){s.menu=e.data}),s.ClinicQueue=function(){e.get("/api/searchClinicpatientQueue/"+l).then(function(e){s.resdatas=e.data[2]})},s.ClinicQueue(),s.Anti_natal_in_referral=function(t){e.post("/api/Child_incoming_referral",t).then(function(e){s.selectedPatient=e.data}),s.ClinicQueue()},s.department_list=function(){e.get("/api/department_list").then(function(e){s.departments=e.data})},s.department_list();var d=[];s.showSearch=function(t){return e.post("/api/searchRchAllChild",{searchKey:t}).then(function(e){d=e.data}),d},e.get("/api/facility_list").then(function(e){s.facility=e.data}),s.showSearchResidences=function(t){return e.get("/api/searchResidences/"+t).then(function(e){d=e.data}),d},s.child_serial_no=function(t){e.post("/api/Child_serial_no",{facility_id:l,patient_id:t,user_id:o}).then(function(e){s.serial_no=e.data})},s.institution_list=function(){e.get("/api/institution_list").then(function(e){s.institutes=e.data})},s.institution_list(),s.vaccination_list=function(){e.get("/api/vaccination_list").then(function(e){s.vaccinations=e.data})},s.vaccination_list(),s.child_registration=function(t,a){if(void 0==t)swal("Error","Please Fill all fields","error");else if(void 0==t.first_name)swal("Error","Please Enter First Name","error");else if(void 0==t.last_name)swal("Error","Please Enter Last Name","error");else if(void 0==t.gender)swal("Error","Please Enter Gender","error");else if(void 0==t.dob)swal("Error","Please Enter Date of Birth","error");else if(void 0==t.weight)swal("Error","Please Enter Child Body Weight","error");else if(void 0==t.delivery_place)swal("Error","Please Enter Delivery Place","error");else if(void 0==t.midwife)swal("Error","Please Enter Type of Midwife Assisted Delivery","error");else if(void 0==t.mother_name)swal("Error","Please Enter Mother's Name","error");else if(void 0==t.residence_id)swal("Error","Please Enter Residence","error");else if(void 0==t.residence_id)swal("Error","Please Enter Residence","error");else{var i={facility_id:l,user_id:o,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,gender:t.gender,dob:t.dob,weight:t.weight,delivery_place:t.delivery_place,midwife:t.midwife,mobile_number:t.mobile_number,mother_name:t.mother_name,father_name:t.father_name,residence_id:t.residence_id.residence_id};console.log(i),e.post("/api/Child_registration_update",i).then(function(e){s.child=e.data;var a=e.data.msg,i=e.data.status;t.birth_reg_no=null,0==i?swal("Error",a,"error"):swal("Response",a,"success")})}},s.child_mother_registration=function(t,a){if(void 0==t)swal("Error","Please Fill all fields","error");else if(void 0==t.tt_given)swal("Error","Please Fill Option For Mother TT Given Status","error");else if(void 0==t.vvu_status)swal("Error","Please Fill Option For Mother VVU Status","error");else{var i={facility_id:l,patient_id:a,user_id:o,tt_given:t.tt_given,vvu_status:t.vvu_status};e.post("/api/Child_mother_registration",i).then(function(e){s.child=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.hiv_ID_registration=function(t,a){if(void 0==t)swal("Error","Please Fill all fields","error");else if(void 0==t.heid_no)swal("Error","Please Enter HIV Expose ID NUMBER","error");else{var i={facility_id:l,patient_id:a,user_id:o,heid_no:t.heid_no,mother_id:1};e.post("/api/hiv_ID_registration",i).then(function(e){s.child=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.Child_vaccination_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t.date)swal("Error","Please Enter Date for "+t.vaccination_id.vaccination_name,"error");else if(void 0==t.place)swal("Error","Please Choose Place of This Client","error");else{var i={vaccination_id:t.vaccination_id.id,mother_id:1,date:t.date,patient_id:a,facility_id:l,place:t.place,user_id:o};console.log(i),e.post("/api/Child_vaccination_registration",i).then(function(e){s.vaccines=e.data;var a=e.data.msg,i=e.data.status;t=null,0==i?swal("Error",a,"error"):swal("Feedback..",a,"success")})}},s.child_growth_registration=function(t){var a=$("#height").val(),i=$("#heightz").val(),n=$("#heightp").val(),r=$("#weight").val(),d=$("#weightz").val(),c=$("#weightp").val(),u={height:a,weight:r,heightz:i,heightp:n,weightz:d,weightp:c,followup_date:$("#followup_date").val(),patient_id:t,facility_id:l,user_id:o};console.log(a,i,n,r,d,c),e.post("/api/child_growth_registration",u).then(function(e){s.gr=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})},s.child_deworm_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill All fields ","error");else{var i={deworm_given:t.deworm_given,vitamin_given:t.vitamin_given,mother_id:1,date:t.date,client_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/child_deworm_registration",i).then(function(e){s.gr=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.child_voucher_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill All fields ","error");else if(void 0==t.voucher_given)swal("Error","Please Fill Option For Subsidized Voucher Given column","error");else if(void 0==t.date)swal("Error","Please Enter Date where Subsidized Voucher   Given","error");else{var i={voucher_given:t.voucher_given,date:t.date,patient_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/child_voucher_registration",i).then(function(e){s.gr=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.child_feed_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill optional fields ","error");else{var i={feeding_type:t.feeding_type,mother_id:1,patient_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/child_feeding_registration",i).then(function(e){s.gr=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.child_referral_registration=function(t,a,i){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill All fields  ","error");else if(void 0==t.referral_id)swal("Error","Select Clinic for referring","error");else if(void 0==t.reason)swal("Error","Please Enter Reasons for  Referral ","error");else{var n;n=void 0==i.patient_id?i.client_id:i.patient_id;var r={transfered_institution_id:t.referral_id,reason:t.reason,mother_id:1,patient_id:a,patient_id_table:n,sender_clinic_id:19,facility_id:l,user_id:o};e.post("/api/child_referral_registration",r).then(function(e){s.stds=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.RCH_recommendations_registration=function(t,a){if(void 0==t)swal("Error","Write Recommendations first","error");else{var i={opinion:t.opinion,opinion_type:2,facility_id:l,patient_id:a,user_id:o};e.post("/api/RCH_recommendations_registration",i).then(function(e){s.opinions=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}}})}(),function(){"use strict";angular.module("authApp").controller("Family_planning_Controller",function(e,t,a,i,n,s,r){s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0;var o=a.currentUser.id,l=a.currentUser.facility_id;e.get("/api/getUsermenu/"+o).then(function(e){s.menu=e.data}),s.ClinicQueue=function(){e.get("/api/searchClinicpatientQueue/"+l).then(function(e){s.resdatas=e.data[5]})},s.ClinicQueue(),s.Anti_natal_in_referral=function(t){e.post("/api/Family_incoming_referral",t).then(function(e){s.selectedPatient=e.data}),s.ClinicQueue()},s.department_list=function(){e.get("/api/department_list").then(function(e){s.departments=e.data})},s.department_list();var d=[],c=[];s.showSearchOccupation=function(t){return e.get("/api/getOccupation/"+t).then(function(e){d=e.data}),d},s.showSearchResidences=function(t){return e.get("/api/searchResidences/"+t).then(function(e){c=e.data}),c},e.get("/api/facility_list").then(function(e){s.facility=e.data}),s.showSearch=function(t){return e.post("/api/search_family_planing_clients",{searchKey:t}).then(function(e){c=e.data}),c},s.family_planning_registration=function(t){if(void 0==t)swal("Error","Please Fill All required Fields","error");else if(void 0==t.first_name)swal("Error","Please Fill First name","error");else if(void 0==t.residence_id)swal("Error","Please Fill Residence","error");else if(void 0==t.occupation)swal("Error","Please Fill Occupation","error");else{var a={facility_id:l,user_id:o,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,gender:t.gender,dob:t.dob,education:t.education,mobile_number:t.mobile_number,occupation_id:t.occupation.id,residence_id:t.residence_id.residence_id};console.log(a),e.post("/api/family_planning_registration",a).then(function(e){s.detail=e.data;var t=e.data.data;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.Family_planning_serial_no=function(t){e.post("/api/Family_planning_serial_no",{facility_id:l,patient_id:t,user_id:o}).then(function(e){s.serial_no=e.data,s.mother_planning_method_status(t)})},s.mother_planning_method_status=function(t){e.get("/api/mother_planning_method_status/"+t).then(function(e){s.method_statuses=e.data})},s.mother_planning_method_status_update=function(t){var a=t.planning_method;swal({title:"Are you sure?",text:"You Want to stop Using "+a,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes! ",cancelButtonText:"  No, cancel!",confirmButtonClass:"btn btn-success  ",cancelButtonClass:"  btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/mother_planning_method_status_update",t).then(function(e){s.method_statuses=e.data.records;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})},function(e){})},s.family_plan_reattendance_registration=function(t){e.post("/api/family_plan_reattendance_registration",{facility_id:l,patient_id:t,user_id:o}).then(function(e){s.serial_no=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})},s.faimily_birth_registration=function(t,a){if(void 0==t)swal("Error","Fill all Fields","error");else if(void 0==t.pregnancy_number)swal("Error","Fill Number of Delivery column","error");else if(void 0==t.miscarriage_number)swal("Error","Fill Number of Miscarriage column","error");else if(void 0==t.msb_number)swal("Error","Fill Number of Maslated column","error");else if(void 0==t.alive_born_number)swal("Error","Fill Number of   Alive Born column","error");else if(void 0==t.child_alive_number)swal("Error","Fill Number of Children Alive column","error");else{var i={pregnancy_number:t.pregnancy_number,msb_number:t.msb_number,alive_born_number:t.alive_born_number,miscarriage_number:t.miscarriage_number,child_alive_number:t.child_alive_number,last_delivery_date:t.last_delivery_date,facility_id:l,patient_id:a,user_id:o};e.post("/api/faimily_birth_registration",i).then(function(e){s.serial_no=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.faimily_health_registration=function(t,a){if(void 0==t)swal("Error","Fill all Fields","error");else if(void 0==t.headache)swal("Error","Fill Option of Headache column","error");else if(void 0==t.yellow_fever)swal("Error","Fill Option of Yellow Fever column","error");else if(void 0==t.heart_disease)swal("Error","Fill Option of Heart Disease column","error");else if(void 0==t.bp)swal("Error","Fill Option of BP column","error");else if(void 0==t.diabet)swal("Error","Fill Option of Diabetic column","error");else if(void 0==t.breast_bunje)swal("Error","Fill Option of Bunje in Breast column","error");else if(void 0==t.varicose_vein)swal("Error","Fill Option of Varicose Vein column","error");else if(void 0==t.kifafa_medics)swal("Error","Fill Option of Had Ever used Kifafa Medicines ?","error");else if(void 0==t.tb_medics)swal("Error","Fill Option of Had Ever used TB Medicines ?","error");else{var i={headache:t.headache,yellow_fever:t.yellow_fever,heart_disease:t.heart_disease,bp:t.bp,diabet:t.diabet,breast_bunje:t.breast_bunje,varicose_vein:t.varicose_vein,kifafa_medics:t.kifafa_medics,tb_medics:t.tb_medics,other_problems:t.other_problems,facility_id:l,client_id:a,user_id:o};e.post("/api/faimily_health_registration",i).then(function(e){s.serial_no=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.faimily_delivery_result_registration=function(t,a){if(void 0==t)swal("Error","Fill all Fields","error");else if(void 0==t.year)swal("Error","Fill Year of Event Occurred","error");else if(void 0==t.delivery_method)swal("Error","Fill Delivery Method","error");else if(void 0==t.delivery_place)swal("Error","Fill Delivery Place","error");else if(void 0==t.delivery_results)swal("Error","Fill Delivery Results","error");else if(void 0==t.baby_feeding)swal("Error","Fill BAby Feeding Method","error");else{var i={year:t.year,delivery_method:t.delivery_method,delivery_place:t.delivery_place,delivery_results:t.delivery_results,baby_feeding:t.baby_feeding,facility_id:l,client_id:a,user_id:o};e.post("/api/faimily_delivery_result_registration",i).then(function(e){s.serial_no=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.faimily_menstral_result_registration=function(t,a){if(void 0==t)swal("Error","Fill all Fields","error");else if(void 0==t.lnmp)swal("Error","Fill Last Normal Menstrauation Period","error");else if(void 0==t.menstral_day)swal("Error","Fill   Menstruation Day","error");else if(void 0==t.bleeding_quantity)swal("Error","Fill   Quantity of Blood Lost","error");else if(void 0==t.menstral_cycle)swal("Error","Fill   Menstruation Cycle","error");else if(void 0==t.pain)swal("Error","Fill option  Menstruation pain column","error");else{var i={lnmp:t.lnmp,menstral_day:t.menstral_day,bleeding_quantity:t.bleeding_quantity,menstral_cycle:t.menstral_cycle,pain:t.pain,facility_id:l,client_id:a,user_id:o};e.post("/api/faimily_menstral_result_registration",i).then(function(e){s.serial_no=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.faimily_iptc_registration=function(t,a){if(void 0==t)swal("Error","Fill all Fields","error");else if(void 0==t.pitc)swal("Error","Fill Option Of PITC","error");else if(void 0==t.pitc_result)swal("Error","Fill   IPTC Results","error");else if(void 0==t.result_date)swal("Error","Fill  Date of  IPTC Results ","error");else{var i={pitc:t.pitc,pitc_result:t.pitc_result,result_date:t.result_date,facility_id:l,client_id:a,user_id:o};e.post("/api/faimily_iptc_registration",i).then(function(e){s.serial_no=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.faimily_cancer_registration=function(t,a){if(void 0==t)swal("Error","Fill all Fields","error");else if(void 0==t.placenta_status)swal("Error","Fill Option Of Placenta Status","error");else if(void 0==t.suspected_cancer)swal("Error","Fill Option Of Hypothetically Placenta Cancer Carrier","error");else if(void 0==t.cryotherapy)swal("Error","Fill Option Of Cryotherapy ","error");else if(void 0==t.breast_bunje)swal("Error","Fill Option Of Bunje In Breast ","error");else{var i={placenta_status:t.placenta_status,suspected_cancer:t.suspected_cancer,cryotherapy:t.cryotherapy,breast_bunje:t.breast_bunje,facility_id:l,client_id:a,user_id:o};e.post("/api/faimily_cancer_registration",i).then(function(e){s.serial_no=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.faimily_lab_test_registration=function(t,a){if(void 0==t)swal("Error","Fill all Fields","error");else if(void 0==t.urine)swal("Error","Fill Option Of Urine","error");else if(void 0==t.albumin)swal("Error","Fill Option Of Albumin","error");else if(void 0==t.sugar)swal("Error","Fill Option Of Sugar ","error");else{var i={urine:t.urine,albumin:t.albumin,sugar:t.sugar,others:t.others,facility_id:l,client_id:a,user_id:o};e.post("/api/faimily_lab_test_registration",i).then(function(e){s.serial_no=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.fplanning_stomach_leg_investigation=function(t,a){if(void 0==t)swal("Error","Fill all Fields","error");else if(void 0==t.liver_inflammation)swal("Error","Fill all Columns","error");else{var i={liver_inflammation:t.liver_inflammation,leg_inflammation:t.leg_inflammation,vericose_vein:t.vericose_vein,others:t.others,facility_id:l,client_id:a,user_id:o};e.post("/api/fplanning_stomach_leg_investigation",i).then(function(e){s.serial_no=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.fplanning_viginal_by_arm_investigations=function(t,a){if(void 0==t)swal("Error","Fill all Fields","error");else if(void 0==t.placenta_size)swal("Error","Fill placenta size Columns","error");else if(void 0==t.placenta_layout)swal("Error","Fill placenta Layout Columns","error");else if(void 0==t.adnexa)swal("Error","Fill adnexa Columns","error");else{var i={placenta_size:t.placenta_size,placenta_layout:t.placenta_layout,adnexa:t.adnexa,others:t.others,facility_id:l,client_id:a,user_id:o};e.post("/api/fplanning_viginal_by_arm_investigations",i).then(function(e){s.serial_no=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.fplanning_viginal_by_spec_investigations=function(t,a){if(void 0==t)swal("Error","Fill all Fields","error");else if(void 0==t.viginal_wet)swal("Error","Fill option for Vaginal wet Columns","error");else if(void 0==t.viginal_dirt)swal("Error","Fill option for Vaginal Dirt Columns","error");else if(void 0==t.cervix_normal)swal("Error","Fill option for cervix normalilty Columns","error");else if(void 0==t.viginal_inflammation)swal("Error","Fill option for vaginal_inflammation Columns","error");else if(void 0==t.cancer)swal("Error","Fill option for Cancer Columns","error");else{var i={viginal_inflammation:t.viginal_inflammation,viginal_wet:t.viginal_wet,viginal_dirt:t.viginal_dirt,cervix_normal:t.cervix_normal,cancer:t.cancer,others:t.others,facility_id:l,client_id:a,user_id:o};e.post("/api/fplanning_viginal_by_spec_investigations",i).then(function(e){s.serial_no=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.fplanning_attendances=function(t,a){if(void 0==t)swal("Error","Fill all Fields","error");else if(void 0==t.weight)swal("Error","Fill Body Weight Column","error");else if(void 0==t.bp)swal("Error","Fill BP Columns","error");else if(void 0==t.lnmp)swal("Error","Fill L.N.M.P Column","error");else{var i={weight:t.weight,bp:t.bp,lnmp:t.lnmp,complains:t.complains,comment_treatment:t.comment_treatment,followup_date:t.followup_date,facility_id:l,client_id:a,user_id:o};e.post("/api/fplanning_attendances",i).then(function(e){s.serial_no=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.planning_method_list_registration=function(t){if(void 0==t)swal("Error","Fill Field","error");else{var a={planning_method:t.planning_method};e.post("/api/planning_method_list_registration",a).then(function(e){s.serial_no=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):(swal("Feedback..",t,"success"),s.family_planning_method_list())})}},s.family_planning_method_list_update=function(t){var a={planning_method:t.planning_method,id:t.id};e.post("/api/family_planning_method_list_update",a).then(function(e){s.serial_no=e.data;var a=e.data.msg;0==e.data.status?swal("Error",a,"error"):(swal("Feedback..",a,"success"),t.planning_method=null,s.family_planning_method_list())})},s.RCH_recommendations_registration=function(t,a){if(void 0==t)swal("Error","Write Recommendations first","error");else{var i={opinion:t.opinion,opinion_type:5,facility_id:l,patient_id:a,user_id:o};e.post("/api/RCH_recommendations_registration",i).then(function(e){s.opinions=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.mother_planning_method_registration=function(t,a){if(void 0==t)swal("Error","Fill Choose Method of Family Planning","error");else if(void 0==t.id)swal("Error","Fill Choose Method of Family Planning","error");else if(void 0==t.event_driven)swal("Error","Fill Choose Event Made you to Use This Method","error");else if(void 0==t.place)swal("Error","Fill Choose Place of This Client","error");else{var i={method_id:t.id.id,place:t.place,status:1,event_driven:t.event_driven,facility_id:l,patient_id:a,user_id:o};e.post("/api/mother_planning_method_registration",i).then(function(e){s.method=e.data;var t=e.data.msg,i=e.data.status;s.mother_planning_method_status(a),0==i?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.breast_cancer_registration=function(t,a){if(void 0==t)swal("Error","Fill Choose Fill All fields","error");else if(void 0==t.bunje)swal("Error","Fill Choose Option For Bunje Column","error");else if(void 0==t.wound)swal("Error","Fill Choose Option For Wound Column","error");else if(void 0==t.wound)swal("Error","Fill Choose Option For Wound Column","error");else{var i={bunje:t.bunje,wound:t.wound,breast_bleeding:t.breast_bleeding,breast_abscess:t.breast_abscess,others:t.others,facility_id:l,patient_id:a,user_id:o};e.post("/api/breast_cancer_registration",i).then(function(e){s.method=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.cervix_cancer_registration=function(t,a){if(void 0==t)swal("Error","Fill Choose Fill All fields","error");else if(void 0==t.virginal_discharge)swal("Error","Fill Choose Option For virginal discharge Column","error");else{var i={virginal_discharge:t.virginal_discharge,cervix_scratching:t.cervix_scratching,cervix_swelling:t.cervix_swelling,virginal_bleeding:t.virginal_bleeding,others:t.others,facility_id:l,patient_id:a,user_id:o};e.post("/api/cervix_cancer_registration",i).then(function(e){s.method=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.planning_vvu_registration=function(t,a){if(void 0==t)swal("Error","Fill Choose Fill All fields","error");else if(void 0==t.current_vvu_status)swal("Error","Fill Choose Option For VVU Current Status Column","error");else{var i={current_vvu_status:t.current_vvu_status,mother_vvu_status:t.mother_vvu_status,partner_vvu_status:t.partner_vvu_status,facility_id:l,patient_id:a,user_id:o};e.post("/api/planning_vvu_registration",i).then(function(e){s.method=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.institution_list=function(){e.get("/api/institution_list").then(function(e){s.institutes=e.data})},s.institution_list(),s.family_planning_method_list=function(){e.get("/api/family_planning_method_list").then(function(e){s.methods=e.data})},s.family_planning_method_list(),s.child_referral_registration=function(t,a,i){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill All fields  ","error");else if(void 0==t.referral_id)swal("Error","Select Clinic for referring","error");else if(void 0==t.reason)swal("Error","Please Enter Reasons for  Referral ","error");else{var n={transfered_institution_id:t.referral_id,reason:t.reason,mother_id:1,patient_id:a,patient_id_table:i,sender_clinic_id:22,facility_id:l,user_id:o};e.post("/api/child_referral_registration",n).then(function(e){s.stds=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.condom_usage_registration=function(t,a){if(void 0==t)swal("Error","Please Fill All fields  ","error");else if(void 0==t.place)swal("Error","Please Fill client Place Status ","error");else if(void 0==t.quantity)swal("Error","Please Fill client quantity of condoms Given(PCs) ","error");else{var i={patient_id:a,place:t.place,quantity:t.quantity,facility_id:l,user_id:o};e.post("/api/condom_usage_registration",i).then(function(e){s.stds=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}}})}(),function(){"use strict";angular.module("authApp").controller("LabourController",function(e,t,a,i,n,s,r){s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0;var o=a.currentUser.id,l=a.currentUser.facility_id;e.get("/api/getUsermenu/"+o).then(function(e){s.menu=e.data}),s.ClinicQueue=function(){e.get("/api/searchClinicpatientQueue/"+l).then(function(e){s.resdatas=e.data[4]})},s.ClinicQueue(),s.Anti_natal_in_referral=function(t){e.post("/api/Anti_incoming_referral",t).then(function(e){s.selectedPatient=e.data}),s.ClinicQueue()},s.department_list=function(){e.get("/api/department_list").then(function(e){s.departments=e.data})},s.department_list(),e.get("/api/user_list").then(function(e){s.users=e.data});var d=[],c=[];s.showSearchOccupation=function(t){return e.get("/api/getOccupation/"+t).then(function(e){d=e.data}),d},s.showSearchResidences=function(t){return e.get("/api/searchResidences/"+t).then(function(e){c=e.data}),c},e.get("/api/facility_list").then(function(e){s.facility=e.data}),s.showSearch=function(t){return e.post("/api/searchRchpatient",{searchKey:t}).then(function(e){c=e.data}),c},s.anti_natal_registration=function(t){if(void 0==t)swal("Error","Please Fill All required Fields","error");else if(void 0==t.first_name)swal("Error","Please Fill First name","error");else if(void 0==t.residence_id)swal("Error","Please Fill Residence","error");else if(void 0==t.occupation)swal("Error","Please Fill Occupation","error");else if(void 0==t.partner_name)swal("Error","Please Fill Partner Name","error");else if(void 0==t.occupation1)swal("Error","Please Fill Partner Occupation","error");else{var a={facility_id:l,user_id:o,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,gender:"Female",dob:t.dob,dob1:t.dob1,height:t.height,voucher_no:t.voucher_no,education1:t.education1,education:t.education,mobile_number:t.mobile_number,partner_name:t.partner_name,occupation_id:t.occupation.id,occupation_id1:t.occupation1.id,residence_id:t.residence_id.residence_id};e.post("/api/anti_natal_registration",a).then(function(e){s.detail=e.data;var t=e.data.data;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.prev_preg_info_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t.number_of_pregnancy)swal("Error","Please Enter Number of pregnancy","error");else if(void 0==t.number_of_delivery)swal("Error","Please Enter Number of delivery","error");else if(void 0==t.number_alive_children)swal("Error","Please Enter Number of alive children","error");else if(void 0==t.number_of_miscarriage)swal("Error","Please Enter Number of Miscarriage","error");else if(void 0==t.year)swal("Error","Please Enter year of events above","error");else if(void 0==t.lnmp)swal("Error","Please Enter LNMP","error");else if(void 0==t.edd)swal("Error","Please Enter EDD","error");else if(void 0==t.delivery_place)swal("Error","Please Enter Suggested Place of Delivery","error");else{var i={number_of_pregnancy:t.number_of_pregnancy,number_of_delivery:t.number_of_delivery,number_alive_children:t.number_alive_children,number_of_miscarriage:t.number_of_miscarriage,edd:t.edd,lnmp:t.lnmp,year:t.year,delivery_place:t.delivery_place.id,client_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/prev_preg_info_registration",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.prev_preg_info_indicator=function(t,a){if(void 0==t)swal("Error","Please Fill all fields","error");else if(void 0==t.fp_35_years_n_above)swal("Error","Mimba ya kwanza Zaidi ya miaka 35?","error");else if(void 0==t.lp_10_years_n_above)swal("Error","Mimba ya mwisho Zaidi ya miaka 10?","error");else if(void 0==t.delivery_method)swal("Error","Alijifungua Je?","error");else if(void 0==t.fbs_msb)swal("Error","Kuzaa mtoto Mfu au Kifo cha mtoto mchanga?","error");else if(void 0==t.miscarriage_three_plus)swal("Error","Kuharibika kwa mimba tatu au zaidi?","error");else if(void 0==t.heart_disease)swal("Error","Ana Ugonjwa wa Moyo?","error");else if(void 0==t.diabetic)swal("Error","Alishawahi kuugua Kisukari?","error");else if(void 0==t.tb)swal("Error","Alishawahi kuugua Kifua Kikuu?","error");else if(void 0==t.waist_disability)swal("Error","Anaulemavu wa Nyonga?","error");else if(void 0==t.high_bleeding)swal("Error","Kutoka Damu Nyingi wakati wa kujifungua?","error");else if(void 0==t.placenta_stacked)swal("Error"," Kondo la Nyuma Kukwama?","error");else{var i={fp_35_years_n_above:t.fp_35_years_n_above,lp_10_years_n_above:t.lp_10_years_n_above,delivery_method:t.delivery_method,high_bleeding:t.high_bleeding,fbs_msb:t.fbs_msb,miscarriage_three_plus:t.miscarriage_three_plus,heart_disease:t.heart_disease,diabetic:t.diabetic,tb:t.tb,waist_disability:t.waist_disability,placenta_stacked:t.placenta_stacked,client_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/pregnancy_indicator",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.admin_registration=function(t,a){if(void 0==t)swal("Error","Please Fill Date and Time for This Admission","error");else{var i={facility_id:l,client_id:a,user_id:o,admission_date:t.admission_date,pregnancy_age:t.pregnancy_age,pregnancy_height:t.pregnancy_height};e.post("/api/labour_admission_registration",i).then(function(e){s.rch_4=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.delivery_registration=function(t,a){var i=null;if(void 0==t.delivery_date)swal("Error","Please Fill Date and Time of Delivery","error");else{if("HAUJACHANIKA"!=t.msamba&&void 0==t.tailer_id)return void swal("Error","Jina la Aliyeshona ni nani?","error");"HAUJACHANIKA"==t.msamba||(i=t.tailer_id.id);var n={facility_id:l,client_id:a,user_id:o,delivery_date:t.delivery_date,place_of_delivery:t.place_of_delivery,number_of_newborn:t.number_of_newborn,method_of_delivery:t.method_of_delivery,midwife_name:t.midwife_name,vitamin_given:t.vitamin_given,reason_for_scisoring:t.reason_for_scisoring,placenter_removed:t.placenter_removed,placenter_removed_date:t.placenter_removed_date,blood_discharged:t.blood_discharged,labour_catalyst:t.labour_catalyst,msamba:t.msamba,comment:t.comment,bp:t.bp,tailer_id:i};console.log(n),e.post("/api/labour_delivery_registration",n).then(function(e){s.rch_4=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.child_referral_registration=function(t,a,i){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill All fields  ","error");else if(void 0==t.referral_id)swal("Error","Select Clinic for referring","error");else if(void 0==t.reason)swal("Error","Please Enter Reasons for  Referral ","error");else{var n={transfered_institution_id:t.referral_id,reason:t.reason,mother_id:1,patient_id:a,patient_id_table:i,sender_clinic_id:21,facility_id:l,user_id:o};e.post("/api/child_referral_registration",n).then(function(e){s.stds=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.newborn_info_registration=function(t,a,i){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill all Fields  ","error");else if(void 0==t.gender)swal("Error","Please Select Newborn Gender  ","error");else if(void 0==t.first_minute_score)swal("Error","  APGAR  SCORE 1 DAKIKA","error");else if(void 0==t.fifth_minute_score)swal("Error","  APGAR  SCORE 5 DAKIKA","error");else if(void 0==t.breast_feeding_within_hour)swal("Error","Please Choose option for  Breast feeding within hour ","error");else{var n={gender:t.gender,first_minute_score:t.first_minute_score,fifth_minute_score:t.fifth_minute_score,breast_feeding_within_hour:t.breast_feeding_within_hour,client_id:a,facility_id:l,user_id:o};e.post("/api/newborn_info_registration",n).then(function(e){s.stds=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.labour_fsb_msb_registration=function(t,a,i){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill  Field  ","error");else{var n={fsb_msb:t.fsb_msb,patient_id:a,facility_id:l,user_id:o};e.post("/api/labour_fsb_msb_registration",n).then(function(e){s.stds=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.labour_fgm_registration=function(t,a,i){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill  Field  ","error");else{var n={fgm:t.fgm,patient_id:a,facility_id:l,user_id:o};e.post("/api/labour_fgm_registration",n).then(function(e){s.stds=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.labour_complication_registration=function(t,a,i){if(console.log(t),void 0==a)swal("Error","Please choose Client First","error");else{var n={vaginal_bleeding:t.vaginal_bleeding,prom:t.prom,preeclampsia:t.preeclampsia,eclampsia:t.eclampsia,anaemia:t.anaemia,sepsis:t.sepsis,malaria:t.malaria,hiv_p:t.hiv_p,pph:t.pph,fgm:t.fgm,obstructed_labour:t.obstructed_labour,three_tear:t.three_tear,retained_placenta:t.retained_placenta,chest_pain:t.chest_pain,loss_strength:t.loss_strength,other_complication:t.other_complication,patient_id:a,facility_id:l,user_id:o};e.post("/api/labour_complication_registration",n).then(function(e){s.stds=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.labour_observation_registration=function(t,a){if(void 0==t.amniotic_bust)swal("Error","Please Fill Some of the Important Fields","error");else{var i={labour_start_date:t.labour_start_date,amniotic_bust:t.amniotic_bust,amniotic_bust_date:t.amniotic_bust_date,baby_possition:t.baby_possition,baby_pointer:t.baby_pointer,sacral_promontary_reached:t.sacral_promontary_reached,ischial_spine_apeared:t.ischial_spine_apeared,narrow_outlet:t.narrow_outlet,large_servix:t.large_servix,temperature:t.temperature,hb:t.hb,bp:t.bp,blood_bleeding:t.blood_bleeding,baby_heart_beat:t.baby_heart_beat,comment:t.comment,client_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/labour_observation_registration",i).then(function(e){s.stds=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.labour_child_feeding_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill Feeding Type ","error");else{var i={feeding_type:t.feeding_type,patient_id:a,facility_id:l,user_id:o};e.post("/api/labour_child_feeding_registration",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.labour_mother_disposition_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill all Fields required ","error");else{var i={alive:t.alive,disposition_date:t.disposition_date,death_date:t.death_date,death_reason:t.death_reason,patient_id:a,facility_id:l,user_id:o};e.post("/api/labour_mother_disposition_registration",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.labour_child_disposition_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill all Fields required ","error");else{var i={alive:t.alive,disposition_date:t.disposition_date,death_date:t.death_date,death_reason:t.death_reason,patient_id:a,facility_id:l,user_id:o};e.post("/api/labour_child_disposition_registration",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.RCH_recommendations_registration=function(t,a){if(void 0==t)swal("Error","Write Recommendations first","error");else{var i={opinion:t.opinion,opinion_type:2,facility_id:l,patient_id:a,user_id:o};e.post("/api/RCH_recommendations_registration",i).then(function(e){s.opinions=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}}})}(),function(){"use strict";angular.module("authApp").controller("PostnatalController",function(e,t,a,i,n,s,r){s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0;var o=a.currentUser.id,l=a.currentUser.facility_id;e.get("/api/getUsermenu/"+o).then(function(e){s.menu=e.data}),s.ClinicQueue=function(){e.get("/api/searchClinicpatientQueue/"+l).then(function(e){s.resdatas=e.data[3]})},s.ClinicQueue(),s.department_list=function(){e.get("/api/department_list").then(function(e){s.departments=e.data})},s.department_list();var d=[],c=[];s.showSearchOccupation=function(t){return e.get("/api/getOccupation/"+t).then(function(e){d=e.data}),d},s.showSearchResidences=function(t){return e.get("/api/searchResidences/"+t).then(function(e){c=e.data}),c},e.get("/api/facility_list").then(function(e){s.facility=e.data}),s.showSearch=function(t){return e.post("/api/searchRchpatient",{searchKey:t}).then(function(e){c=e.data}),c},s.showARVITEM=function(t){if(!(t.length<4))return e.post("/api/searchItem",{searchKey:t}).then(function(e){c=e.data}),c},s.Post_natal_serial_no=function(t){e.post("/api/Post_natal_serial_no",{facility_id:l,patient_id:t,user_id:o}).then(function(e){s.serial_no=e.data})},s.anti_natal_registration=function(t){if(void 0==t)swal("Error","Please Fill All required Fields","error");else if(void 0==t.first_name)swal("Error","Please Fill First name","error");else if(void 0==t.residence_id)swal("Error","Please Fill Residence","error");else if(void 0==t.occupation)swal("Error","Please Fill Occupation","error");else if(void 0==t.partner_name)swal("Error","Please Fill Partner Name","error");else if(void 0==t.occupation1)swal("Error","Please Fill Partner Occupation","error");else{var a={facility_id:l,user_id:o,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,gender:"Female",dob:t.dob,dob1:t.dob1,height:t.height,voucher_no:t.voucher_no,education1:t.education1,education:t.education,mobile_number:t.mobile_number,partner_name:t.partner_name,occupation_id:t.occupation.id,occupation_id1:t.occupation1.id,residence_id:t.residence_id.residence_id};e.post("/api/anti_natal_registration",a).then(function(e){s.detail=e.data;var t=e.data.data;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.prev_preg_info_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t.number_of_pregnancy)swal("Error","Please Enter Number of pregnancy","error");else if(void 0==t.number_of_delivery)swal("Error","Please Enter Number of delivery","error");else if(void 0==t.number_alive_children)swal("Error","Please Enter Number of alive children","error");else if(void 0==t.number_of_miscarriage)swal("Error","Please Enter Number of Miscarriage","error");else if(void 0==t.year)swal("Error","Please Enter year of events above","error");else if(void 0==t.lnmp)swal("Error","Please Enter LNMP","error");else if(void 0==t.edd)swal("Error","Please Enter EDD","error");else if(void 0==t.delivery_place)swal("Error","Please Enter Suggested Place of Delivery","error");else{var i={number_of_pregnancy:t.number_of_pregnancy,number_of_delivery:t.number_of_delivery,number_alive_children:t.number_alive_children,number_of_miscarriage:t.number_of_miscarriage,edd:t.edd,lnmp:t.lnmp,year:t.year,delivery_place:t.delivery_place.id,client_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/prev_preg_info_registration",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.prev_preg_info_indicator=function(t,a){if(void 0==t)swal("Error","Please Fill all fields","error");else if(void 0==t.fp_35_years_n_above)swal("Error","Mimba ya kwanza Zaidi ya miaka 35?","error");else if(void 0==t.lp_10_years_n_above)swal("Error","Mimba ya mwisho Zaidi ya miaka 10?","error");else if(void 0==t.delivery_method)swal("Error","Alijifungua Je?","error");else if(void 0==t.fbs_msb)swal("Error","Kuzaa mtoto Mfu au Kifo cha mtoto mchanga?","error");else if(void 0==t.miscarriage_three_plus)swal("Error","Kuharibika kwa mimba tatu au zaidi?","error");else if(void 0==t.heart_disease)swal("Error","Ana Ugonjwa wa Moyo?","error");else if(void 0==t.diabetic)swal("Error","Alishawahi kuugua Kisukari?","error");else if(void 0==t.tb)swal("Error","Alishawahi kuugua Kifua Kikuu?","error");else if(void 0==t.waist_disability)swal("Error","Anaulemavu wa Nyonga?","error");else if(void 0==t.high_bleeding)swal("Error","Kutoka Damu Nyingi wakati wa kujifungua?","error");else if(void 0==t.placenta_stacked)swal("Error"," Kondo la Nyuma Kukwama?","error");else{var i={fp_35_years_n_above:t.fp_35_years_n_above,lp_10_years_n_above:t.lp_10_years_n_above,delivery_method:t.delivery_method,high_bleeding:t.high_bleeding,fbs_msb:t.fbs_msb,miscarriage_three_plus:t.miscarriage_three_plus,heart_disease:t.heart_disease,diabetic:t.diabetic,tb:t.tb,waist_disability:t.waist_disability,placenta_stacked:t.placenta_stacked,client_id:a,facility_id:l,user_id:o};console.log(i),e.post("/api/pregnancy_indicator",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.vaccination_list=function(){e.get("/api/vaccination_list").then(function(e){s.vaccinations=e.data})},s.vaccination_list(),s.post_natal_registration=function(t,a){if(void 0==t)swal("Error","Please Enter RCH-4 Number","error");else if(void 0==t.rch_4)swal("Error","Please Enter RCH-4 Number","error");else if(void 0==t.post_natal_reg_date)swal("Error","Please Enter Date for Post natal registration","error");else{var i={facility_id:l,patient_id:a,user_id:o,rch_4:t.rch_4,post_natal_reg_date:t.post_natal_reg_date};e.post("/api/post_natal_registration_update",i).then(function(e){s.rch_4=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.prev_preg_info_registration=function(t,a){if(void 0==t)swal("Error","Please Fill all fields required","error");else if(void 0==t.number_of_delivery)swal("Error","Please Enter Number of Delivery","error");else if(void 0==t.delivery_date)swal("Error","Please Enter date of Delivery","error");else if(void 0==t.place_of_delivery)swal("Error","Please Enter Place of Delivery","error");else if(void 0==t.midwife_proffesion)swal("Error","Please Enter Midwife profession","error");else if(void 0==t.mother_status)swal("Error","Please Enter Status Of Mother","error");else if(void 0==t.number_of_newborn)swal("Error","Please Enter Number of Newborns","error");else if(void 0==t.number_of_newborn_alive)swal("Error","Please Enter Number of Newborns Alive","error");else if(void 0==t.number_of_newborn_died)swal("Error","Please Enter Number of Newborns Died","error");else{var i={facility_id:l,patient_id:a,user_id:o,number_of_newborn_died:t.number_of_newborn_died,number_of_newborn_alive:t.number_of_newborn_alive,number_of_newborn:t.number_of_newborn,mother_status:t.mother_status,midwife_proffesion:t.midwife_proffesion,place_of_delivery:t.place_of_delivery,number_of_delivery:t.number_of_delivery,delivery_date:t.delivery_date};e.post("/api/post_birth_info_registration",i).then(function(e){s.rch_4=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.baby_feed_registration=function(t,a){if(void 0==t)swal("Error","Please Fill Option","error");else{var i={facility_id:l,patient_id:a,user_id:o,baby_breastfeeding_within_hour:t.baby_breastfeeding_within_hour};e.post("/api/baby_feed_registration",i).then(function(e){s.rch_4=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.pmtct_registration=function(t,a){if(void 0==t)swal("Error","Please Fill Option","error");else if(void 0==t.anti_natal_vvu_infection_status)swal("Error","Please Fill Option for Anti Natal VVU Infection Status","error");else if(void 0==t.post_natal_vvu_infection_status)swal("Error","Please Fill Option for Post Natal VVU Infection Status","error");else{var i={facility_id:l,patient_id:a,user_id:o,anti_natal_vvu_infection_status:t.anti_natal_vvu_infection_status,post_natal_vvu_infection_status:t.post_natal_vvu_infection_status};e.post("/api/pmtct_post_registration",i).then(function(e){s.rch_4=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.reattendance_registration=function(t,a){if(void 0==t)swal("Error","Please Fill Option for Attendance Range","error");else if(void 0==t.attendance_range)swal("Error","Please Fill Option for attendance range","error");else if(void 0==t.date_attended)swal("Error","Please Fill Date Attended","error");else if(void 0==t.temperature)swal("Error","Please Fill Body Temperature","error");else if(void 0==t.hb)swal("Error","Please Fill HB","error");else if(void 0==t.bp)swal("Error","Please Fill BP","error");else{var i={facility_id:l,patient_id:a,user_id:o,attendance_range:t.attendance_range,date_attended:t.date_attended,temperature:t.temperature,hb:t.hb,bp:t.bp,followup_date:t.followup_date};e.post("/api/post_reattendance_registration",i).then(function(e){s.rch_4=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.post_chilreattendance_registration=function(t,a){if(void 0==t)swal("Error","Please Fill all Options","error");else if(void 0==t.attendance_range)swal("Error","Please Fill Option for Attendance Range","error");else if(void 0==t.date_attended)swal("Error","Please Fill Date Attended","error");else if(void 0==t.temperature)swal("Error","Please Fill Body Temperature","error");else if(void 0==t.hb)swal("Error","Please Fill HB","error");else if(void 0==t.bp)swal("Error","Please Fill BP","error");else{var i={facility_id:l,patient_id:a,user_id:o,date_attended:t.date_attended,attendance_range:t.attendance_range,temperature:t.temperature,hb:t.hb,bp:t.bp,followup_date:t.followup_date};e.post("/api/post_chilreattendance_registration",i).then(function(e){s.rch_4=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.breast_registration=function(t,a){if(void 0==t)swal("Error","Please Fill all Option for Breast status","error");else if(void 0==t.breast_rupture)swal("Error","Please Fill Option for Breast Rupture","error");else if(void 0==t.mastitis)swal("Error","Please enter option for Mastitis","error");else if(void 0==t.abscess)swal("Error","Please enter option for Abscess  ","error");else if(void 0==t.breast_contriction)swal("Error","Please enter option for Breast constriction ","error");else{var i={facility_id:l,patient_id:a,user_id:o,breast_rupture:t.breast_rupture,mastitis:t.mastitis,abscess:t.abscess,breast_contriction:t.breast_contriction};e.post("/api/breast_registration",i).then(function(e){s.rch_4=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.post_natal_observation_lists_registration=function(t){if(void 0==t)swal("Error","Please Fill all Option","error");else{var a={description:t.description};e.post("/api/post_natal_observation_lists_registration",a).then(function(e){s.parts=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):(swal("Response",t,"success"),s.observation_lists())})}},s.observation_lists=function(){e.get("/api/post_natal_observation_lists").then(function(e){s.descriptions=e.data})},s.observation_lists(),s.description_lists=function(t){e.get("/api/post_natal_observation_description_list/"+t).then(function(e){s.observations=e.data})},s.post_natal_observation_descriptions=function(t){if(console.log(t),void 0==t&&swal("Error","Please Fill all Option","error"),void 0==t.observation_id&&swal("Error","Please Choose Observation Part","error"),void 0==t.observation)swal("Error","Please Choose Observation","error");else{var a={observation_id:t.observation_id,observation:t.observation};e.post("/api/post_natal_observation_descriptions",a).then(function(e){s.descs=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success"),s.description_lists()})}},s.statuses=[],s.post_natal_observation_status=function(t,a){if(console.log(t,a),void 0==t)swal("Error","Please Fill all Option","error");else{var i;for(i=0;i<t.length;i++)void 0==t.status||s.statuses.push({client_id:a,facility_id:l,user_id:o,status:t.status,observation_id:t[i].id});console.log(s.statuses),e.post("/api/post_natal_observation_status",s.statuses).then(function(e){s.descs=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success"),s.statuses=[]})}},s.dehiscence_registration=function(t,a){if(void 0==t)swal("Error","Please Fill all Options","error");else if(void 0==t.dehiscence_join)swal("Error","Please Fill Option for Dehiscence Status","error");else if(void 0==t.mental_ability)swal("Error","Please enter option for Mental Status","error");else if(void 0==t.fistula)swal("Error","Please enter option for Fistula  ","error");else{var i={facility_id:l,patient_id:a,user_id:o,dehiscence_join:t.dehiscence_join,mental_ability:t.mental_ability,fistula:t.fistula};e.post("/api/dehiscence_registration",i).then(function(e){s.rch_4=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.post_additional_medication_registration=function(t,a){if(void 0==t)swal("Error","Please Fill all Options","error");else if(void 0==t.ferrous_sulphate)swal("Error","Please Fill Option for Ferrous Sulphate","error");else if(void 0==t.folic_acid)swal("Error","Please Fill Option for Folic Acid  Given","error");else if(void 0==t.vitamin_a)swal("Error","Please enter option for Vitamin A  Given ","error");else{var i={facility_id:l,patient_id:a,user_id:o,ferrous_sulphate:t.ferrous_sulphate,folic_acid:t.folic_acid,fs_quantity:t.fs_quantity,fa_quantity:t.fa_quantity,vitamin_a:t.vitamin_a,other_medics:t.other_medics};e.post("/api/post_additional_medication_registration",i).then(function(e){s.rch_4=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.post_family_planing_registration=function(t,a){if(void 0==t)swal("Error","Please Fill all Options","error");else if(void 0==t.counselling_given)swal("Error","Please Fill Option for Counselling column","error");else if(void 0==t.iec_material_given)swal("Error","Please Fill Option for IEC material column","error");else if(void 0==t.referral_for_family_planning)swal("Error","Please Fill Option for Referral column","error");else{var i={facility_id:l,patient_id:a,user_id:o,referral_for_family_planning:t.referral_for_family_planning,iec_material_given:t.iec_material_given,counselling_given:t.counselling_given};e.post("/api/post_family_planing_registration",i).then(function(e){s.rch_4=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.post_child_inv_registration=function(t,a){if(void 0==t)swal("Error","Please Fill all Options","error");else if(void 0==t.temperature)swal("Error","Please Fill Temperature","error");else if(void 0==t.weight)swal("Error","Please Fill Weight","error");else if(void 0==t.hb)swal("Error","Please Fill HB","error");else if(void 0==t.kmc)swal("Error","Please Fill KMC","error");else{var i={facility_id:l,patient_id:a,user_id:o,temperature:t.temperature,weight:t.weight,hb:t.hb,kmc:t.kmc};e.post("/api/post_child_inv_registration",i).then(function(e){s.rch_4=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Response",t,"success")})}},s.tt_vaccination_registration=function(t,a){var i="";if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t.number_of_tt_given)swal("Error","Please Enter number of TT given ","error");else if(void 0==t.enough)swal("Error","Please Choose Option For Quantity Given ","error");else if("NO"==t.enough&&void 0==t.vaccination_date)swal("Error","Please Enter Date for "+t.vaccination_id.vaccination_name,"error");else{"NO"==t.enough&&(i=t.vaccination_id.id).vaccination_name;var n={vaccination_id:i,number_of_tt_given:t.number_of_tt_given,enough:t.enough,tt_name:t.vaccination_name,vaccination_date:t.vaccination_date,patient_id:a,facility_id:l,user_id:o};e.post("/api/post_tt_vaccination_registration",n).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.child_vaccination_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill all Fields ","error");else if(void 0==t.vaccination_date)swal("Error","Please Enter Date for "+t.vaccination_id.vaccination_name,"error");else{var i={vaccination_id:t.vaccination_id.id,vaccination_date:t.vaccination_date,patient_id:a,facility_id:l,user_id:o};e.post("/api/child_vaccination_registration",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.child_infection_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill all Fields ","error");else if(void 0==t.navel)swal("Error","Please Fill for Novel status ","error");else if(void 0==t.mouth)swal("Error","Please Fill for Mouth status ","error");else if(void 0==t.skin)swal("Error","Please Fill for Skin status ","error");else if(void 0==t.eye)swal("Error","Please Fill for Eye status ","error");else if(void 0==t.jaundice)swal("Error","Please Fill for Jaundice status ","error");else if(void 0==t.high_infection)swal("Error","Please Fill for High Infection status ","error");else{var i={navel:t.navel,skin:t.skin,mouth:t.mouth,eye:t.eye,jaundice:t.jaundice,high_infection:t.high_infection,patient_id:a,facility_id:l,user_id:o};e.post("/api/child_infection_registration",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.post_natal_arv_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill all Fields ","error");else if(void 0==t.selectedItem.id)swal("Error","Please Select ARV Name ","error");else if(void 0==t.time)swal("Error","Please Enter Time of ARV Usage ","error");else{var i={arv_id:t.selectedItem.id,time:t.time,patient_id:a,facility_id:l,user_id:o};e.post("/api/post_natal_arv_registration",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.post_natal_feeding_registration=function(t,a){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill Feeding Type ","error");else{var i={feeding_type:t.feeding_type,patient_id:a,facility_id:l,user_id:o};e.post("/api/post_natal_feeding_registration",i).then(function(e){s.vaccines=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.child_referral_registration=function(t,a,i){if(void 0==a)swal("Error","Please choose Client First","error");else if(void 0==t)swal("Error","Please Fill All fields  ","error");else if(void 0==t.referral_id)swal("Error","Select Clinic for referring","error");else if(void 0==t.reason)swal("Error","Please Enter Reasons for  Referral ","error");else{var n={transfered_institution_id:t.referral_id,reason:t.reason,mother_id:1,patient_id:a,patient_id_table:i,sender_clinic_id:20,facility_id:l,user_id:o};e.post("/api/child_referral_registration",n).then(function(e){s.stds=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.RCH_recommendations_registration=function(t,a){if(void 0==t)swal("Error","Write Recommendations first","error");else{var i={opinion:t.opinion,opinion_type:2,facility_id:l,patient_id:a,user_id:o};e.post("/api/RCH_recommendations_registration",i).then(function(e){s.opinions=e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},s.Anti_natal_in_referral=function(t){e.post("/api/Anti_incoming_referral",t).then(function(e){s.selectedPatient=e.data}),s.ClinicQueue()}})}(),function(){"use strict";angular.module("authApp").controller("Rch_reoprtController",function(e,t,a,i,n,s,r){s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0;var o=a.currentUser.id,l=a.currentUser.facility_id;e.get("/api/getUsermenu/"+o).then(function(e){s.menu=e.data});new Date;var d={facility_id:l,start_date:"2017-01-01",end_date:"2017-12-01"};e.post("/api/getChildAttendanceReport",d).then(function(e){s.attendances=e.data}),e.post("/api/getChildfeedingReport",d).then(function(e){s.feeds=e.data,console.log(e.data)}),e.post("/api/getChilddewormgivenReport",d).then(function(e){s.deworms=e.data,console.log(e.data)}),s.pdf={src:"example.pdf"},s.data=null,e.get("/api/getUsermenu/"+o,{responseType:"arraybuffer"}).then(function(e){s.data=new Uint8Array(e.data)})})}(),function(){"use strict";angular.module("authApp").directive("ngFiles",["$parse",function(e){return{link:function(t,a,i){var n=e(i.ngFiles);a.on("change",function(e){n(t,{$files:e.target.files})})}}}]).controller("adminController",function(e,t,a,i,n,s,r,o){a.currentUser;var l=a.currentUser.id,d=a.currentUser.facility_id,c=new FormData;s.getTheFiles=function(e){angular.forEach(e,function(e,t){c.append(t,e)}),c.append("photo_for",l)},s.uploadFiles=function(){var t={method:"POST",url:"/api/fileupload",data:c,headers:{"Content-Type":void 0}};e(t).then(function(e){console.log(t),swal({title:"",html:$("<div>").addClass("some-class").text(""+e.data),animation:!1,customClass:"animated tada"})}).then(function(){})},s.runViews=function(){e.get("/api/userView/"+d).then(function(e){s.icons=e.data,e.status,o.success("","SYSTEM DATABASE ACTIVATED")})},s.setSystemData=function(){e.get("/api/getPerm").then(function(e){s.perms=e.data,console.log(s.perms)}),e.get("/api/geticon").then(function(e){s.icons=e.data}),e.get("/api/getUserImage/"+l).then(function(e){0!==e.data.length&&(s.photo="/uploads/"+e.data[0].photo_path)}),e.get("/api/getRoles").then(function(e){s.roles=e.data}),e.get("/api/user_list").then(function(e){s.users=e.data,console.log(s.users)})},s.savePermRoles=function(e){var t=s.labcartsxx;angular.forEach(t,function(e,t){console.log(t+": "+e)})},s.saveModules=function(t){var a={main_menu:1,module:t.module,title:t.title,glyphicons:t.glyphicons.icon_class};console.log(a),e.post("/api/addPermission",a).then(function(e){var t=e.status,a=e.data;swal({title:""+t,html:$("<div>").addClass("some-class").text(""+a),animation:!1,customClass:"animated tada"})}).then(function(e){swal({title:""+getstatus,html:$("<div>").addClass("some-class").text(""+getdata),animation:!1,customClass:"animated tada"})})},s.saveRoles=function(t){var a={title:t.title,parent:t.parent};console.log(a),e.post("/api/addRoles",a).then(function(e){var t=e.status,a=e.data;swal({title:""+t,html:$("<div>").addClass("some-class").text(""+a),animation:!1,customClass:"animated tada"})}).then(function(e){swal({title:""+getstatus,html:$("<div>").addClass("some-class").text(""+getdata),animation:!1,customClass:"animated tada"})})},s.logout=function(){localStorage.removeItem("user"),a.authenticated=!1,a.currentUser=null,event.preventDefault(),i.go("auth")};var u=a.currentUser.id;i.current.name;e.get("/api/getUsermenu/"+u).then(function(e){s.menu=e.data,console.log(s.menu)}),s.labcartsxx=[],s.checkTest=function(t,a){if(0==angular.isDefined(a))swal({title:"ERROR:",html:$("<div>").addClass("some-class").text("PLEASE SELECT THE ROLE ,FROM SEARCH BOX ABOVE BEFORE PROCEED"),animation:!1,customClass:"animated tada"});else{var i=t.id,n=a.role.id,r={permission_id:i,role_id:n,grant:1};if(e.get("/api/getPermName/"+i).then(function(t){s.perms=t.data,console.log(n),s.perms,e.post("/api/perm_role",r).then(function(e){var t=e.status,a=e.data;swal({title:""+t,html:$("<div>").addClass("some-class").text(""+a),animation:!1,customClass:"animated tada"})})}),1==t.selected);else if(0==t.selected){var o=s.labcartsxx.indexOf(t);s.labcartsxx.splice(o,1)}}},s.chooseUser=function(e){s.selectedUser=e,s.getAssignedPerms(e)},s.chooseRole=function(e){s.selectedRole=e,s.getAssignedRole(e)},s.getAssignedRole=function(t){var a=t.id;e.get("/api/getAssignedRole/"+a).then(function(e){s.savedRolePerms=e.data})},s.getAssignedPerms=function(t){var a=t.id;e.get("/api/getAssignedMenu/"+a).then(function(e){s.savedPerms=e.data})},s.removeAccess=function(t){console.log(t);var a=t.id,i=t.user_id,n={perm_id:a,title:t.title};e.post("/api/removeAccess",n).then(function(e){var t=e.data.data;o.success(t,"")}).finally(function(){e.get("/api/getAssignedMenu/"+i).then(function(e){s.savedPerms=e.data})})},s.removeRoleAccess=function(t){var a=t.id,i=t.role_id,n=t.title,r={role_name:t.role_name,permission_role_id:a,title:n};e.post("/api/removeRoleAccess",r).then(function(e){var t=e.data.data;o.success(t,"")}).finally(function(){e.get("/api/getAssignedRole/"+i).then(function(e){s.savedRolePerms=e.data})})},s.checkUserPerms=function(t,a,i){if(1==t)if(0==angular.isDefined(i))o.error("PLEASE SELECT THE USER ,FROM SEARCH BOX ABOVE BEFORE PROCEED","");else{var n=a.id,r=i.id;console.log(r);var l={permission_id:n,user_id:r,grant:1};e.get("/api/getPermName/"+n).then(function(t){s.perms=t.data,s.perms,e.post("/api/perm_user",l).then(function(e){e.status;var t=e.data.data;0==e.data.status?o.error(t,""):(s.getAssignedPerms(i),o.success(t,""))})})}},s.checkRolePerms=function(t,a,i){if(console.log(a),1==t)if(0==angular.isDefined(i))o.error("PLEASE SELECT THE ROLE ","");else{var n=a.id,r={permission_id:n,role_id:i.id,grant:1};e.get("/api/getPermName/"+n).then(function(t){s.perms=t.data,s.perms,e.post("/api/perm_role",r).then(function(e){e.status;var t=e.data.data;0==e.data.status?o.error(t,""):(s.getAssignedRole(i),o.success(t,""))})})}},s.mytime1=new Date,s.mytime2=new Date,s.AdmissionNotes="";angular.element(document).ready(function(){s.setSystemData(),s.setTabUserReg(1),o.success("Opening Admin Dashboard...",""),s.getProffesions()}),s.setTabUserReg=function(e){s.tab=e},s.setTabSystemMenu=function(e){s.tab=e},s.setTabPermUser=function(e){s.tab=e},s.setTabPermRole=function(e){s.getSystemActivity(),s.tab=e},s.user_list=function(){e.get("/api/user_list").then(function(e){s.users=e.data})},s.user_registration=function(t){e.post("/api/user_registration",t).then(function(e){s.user_list();var t=e.data;swal("Feedback..",t,"success")})},s.getFacilities=function(){e.get("/api/facility_list").then(function(e){s.facilities=e.data})},s.getSystemActivity=function(){e.get("/api/getSystemActivity").then(function(e){s.systemActivities=e.data})},e.get("/api/getUsermenu/"+u).then(function(e){s.menu=e.data}),s.isSet=function(e){return s.tab===e},s.oneAtATime=!0,s.addWardTypes=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter WARD TYPE","","error");e.post("/api/saveWardTypes",{ward_type_name:t.ward_type}).then(function(e){0==e.data.status?(s.wards=null,sweetAlert(e.data.data,"","error")):(s.wards=null,sweetAlert(e.data.data,"","success"))})},s.addDevices=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter DEVICE ","","error");var a={eraser:0,reagents:t.reagents,equipment_name:t.equip_name,equipment_status_id:t.equip_status,sub_department_id:t.subdepartment,facility_id:d,user_id:u};e.post("/api/addDevices",a).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.reagents=null,t.equip_name=null,sweetAlert(e.data.data,"","success"))})},s.addLabTest=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter TEST Name","","error");var a={erasor:0,equipment_id:t.equipment_id,minimum_limit:t.minimum_limit,panel_compoent_name:t.name,si_units:t.si_units,maximum_limit:t.maximum_limit,user_id:u};e.post("/api/addLabTest",a).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.name=null,t.si_units=null,sweetAlert(e.data.data,"","success"))})},s.addLabTestPanel=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter TEST PANEL ","","error");var a={erasor:0,item_id:t.item_id,equipment_id:t.equipment_id,minimum_limit:t.minimum_limit,panel_compoent_name:t.name,si_units:t.si_units,maximum_limit:t.maximum_limit,user_id:u};console.log(a),e.post("/api/addLabTestPanel",a).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.name=null,sweetAlert(e.data.data,"","success"))})},s.addLabPanel=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter LAB TEST PANEL","","error");var a={erasor:0,equipment_id:t.equipment_id,panel_name:t.name,user_id:u};e.post("/api/addLabPanel",a).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.name=null,t.si_units=null,sweetAlert(e.data.data,"","success"))})},s.PreOPCondition=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pre Operation Condition","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.case,information_category:"PRE-OPERTION CONDITION",nurse_id:u};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthBloodLoss=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter AMOUNT OF BLOOD COLLECTED","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.noted_amount,admission_id:a.admission_id,request_id:a.id,remarks:t.noted_amount,information_category:"BLOOD LOSS",nurse_id:u};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthFluidGiven=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter AMOUNT OF FLUID GIVEN","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.noted_amount_fluid,admission_id:a.admission_id,request_id:a.id,remarks:t.noted_amount_fluid,information_category:"FLUID GIVEN",nurse_id:u};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthUrineOutput=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter AMOUNT OF URINE OUTPUT","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.urine_output,admission_id:a.admission_id,request_id:a.id,remarks:t.urine_output,information_category:"URINE OUTPUT",nurse_id:u};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.urine_output=null,sweetAlert(e.data.data,"","success"))})},s.anaesthComplications=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Write any Compilcations found during Operations","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.complications,admission_id:a.admission_id,request_id:a.id,remarks:t.complications,information_category:"COMPLICATIONS",nurse_id:u};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.complications=null,sweetAlert(e.data.data,"","success"))})},s.anaesthPulseRate=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pulse Rate Associating Info","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");if(null==t.am_pm)return sweetAlert("IS IT AM/PM ? ","","error");if(null==t.hr)return sweetAlert("HOURS MISSED ","","error");if(null==t.mins)return sweetAlert("MINUTES MISSED ","","error");if(2!=t.mins.length)return sweetAlert("MINUTES MUST BE IN TWO DIGITS ","","error");if(t.mins>=60)return sweetAlert("MINUTES MUST BE LESS THAN 60 ","","error");if(t.mins<0)return sweetAlert("MINUTES MUST BE GREATER THAN 0 ","","error");if(null==t.read)return sweetAlert("EMPTY VALUE IN READ BOX  ","","error");var i={erasor:0,noted_value:t.read,admission_id:a.admission_id,request_id:a.id,am_pm:t.am_pm,mins:t.mins,hr:t.hr,information_category:"PULSE RATE",nurse_id:u};e.post("/api/addPrBp",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthSystolic=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pulse Rate Associating Info","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");if(null==t.am_pm)return sweetAlert("IS IT AM/PM ? ","","error");if(null==t.hr)return sweetAlert("HOURS MISSED ","","error");if(null==t.mins)return sweetAlert("MINUTES MISSED ","","error");if(2!=t.mins.length)return sweetAlert("MINUTES MUST BE IN TWO DIGITS ","","error");if(t.mins>=60)return sweetAlert("MINUTES MUST BE LESS THAN 60 ","","error");if(t.mins<0)return sweetAlert("MINUTES MUST BE GREATER THAN 0 ","","error");if(null==t.read)return sweetAlert("EMPTY VALUE IN READ BOX  ","","error");var i={erasor:0,noted_value:t.read,admission_id:a.admission_id,request_id:a.id,am_pm:t.am_pm,mins:t.mins,hr:t.hr,information_category:"SYSTOLIC PRESSURE",nurse_id:u};e.post("/api/addPrBp",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.read=null,sweetAlert(e.data.data,"","success"))})},s.anaesthDiastolic=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pulse Rate Associating Info","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");if(null==t.am_pm)return sweetAlert("IS IT AM/PM ? ","","error");if(null==t.hr)return sweetAlert("HOURS MISSED ","","error");if(null==t.mins)return sweetAlert("MINUTES MISSED ","","error");if(2!=t.mins.length)return sweetAlert("MINUTES MUST BE IN TWO DIGITS ","","error");if(t.mins>=60)return sweetAlert("MINUTES MUST BE LESS THAN 60 ","","error");if(t.mins<0)return sweetAlert("MINUTES MUST BE GREATER THAN 0 ","","error");if(null==t.read_diastolic)return sweetAlert("EMPTY VALUE IN READ BOX  ","","error");var i={erasor:0,noted_value:t.read_diastolic,admission_id:a.admission_id,request_id:a.id,am_pm:t.am_pm,mins:t.mins,hr:t.hr,information_category:"DIASTOLIC PRESSURE",nurse_id:u};e.post("/api/addPrBp",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.read_diastolic=null,sweetAlert(e.data.data,"","success"))})},s.anaesthIntubation=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter INTUBATION INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"INTUBATION",nurse_id:u};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthRespiration=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter RESPIRATION INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"RESPIRATION",nurse_id:u};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Respiration=null,sweetAlert(e.data.data,"","success"))})},s.anaesthLocal=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter LOCAL INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"LOCAL",nurse_id:u};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Respiration=null,sweetAlert(e.data.data,"","success"))})},s.anaesthPosition=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter POSITION INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"POSITION",nurse_id:u};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Respiration=null,sweetAlert(e.data.data,"","success"))})},s.anaesthNeedle=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter NEEDLE INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"NEEDLE",nurse_id:u};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Needle=null,sweetAlert(e.data.data,"","success"))})},s.anaesthEffect=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter NEEDLE INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"EFFECT",nurse_id:u};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Effect=null,sweetAlert(e.data.data,"","success"))})},s.saveHb=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Laboratory Status","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.laboratory,information_category:"LABORATORY STATUS",nurse_id:u};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.laboratory=null,sweetAlert(e.data.data,"","success"))})},s.savePreAnaestheticOrder=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter PRE ANAESTHETIC ORDER","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.pre_anaesthetic_order,information_category:"PRE ANAESTHETIC ORDER",nurse_id:u};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.pre_anaesthetic_order=null,sweetAlert(e.data.data,"","success"))})},s.saveAnaestheticTechniques=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter ANAESTHETIC TECHNIQUES","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.anaesthetic_technique,information_category:"ANAESTHETIC TECHNIQUES",nurse_id:u};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.anaesthetic_technique=null,sweetAlert(e.data.data,"","success"))})},s.savePhysicalStatus=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Physical Status","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");console.log(t);var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.physical_status,information_category:"PHYSICAL STATUS",nurse_id:u};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.laboratory=null,sweetAlert(e.data.data,"","success"))})},s.saveOral=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter LAST ORAL INTAKE","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");console.log(t);var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.oral,information_category:"LAST ORAL INTAKE",nurse_id:u};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.oral=null,sweetAlert(e.data.data,"","success"))})},s.saveNutritional=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter NUTRITIONAL STATUS","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");console.log(t);var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.nutrional,information_category:"NUTRITIONAL STATUS",nurse_id:u};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.nutrional=null,sweetAlert(e.data.data,"","success"))})};var p=[];s.showSearchWardTypes=function(t){return e.get("/api/searchWardTypes/"+t).then(function(e){p=e.data}),p};var _=[];s.showSearchWardClass=function(t){return e.get("/api/getWardClasses/"+t).then(function(e){_=e.data}),_};f=[];s.showSearchBedTypes=function(t){return e.get("/api/searchBedTypes/"+t).then(function(e){f=e.data}),f},s.getOutPutTypes=function(){e.get("/api/getOutPutTypes").then(function(e){s.getOutPutTypes=e.data})},s.getVital=function(){e.post("/api/getVital").then(function(e){s.getVitals=e.data})},s.saveAssociateHistory=function(t,a){if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");if(0==angular.isDefined(t))return sweetAlert("Please Enter History Records or NILL","","error");a.admission_id;var i={erasor:0,admission_id:a.admission_id,request_id:a.id,medical:t.medical,surgical:t.surgical,anaesthetic:t.anaesthetic,information_category:"ASSOCIATE HISTORY",nurse_id:u};e.post("/api/saveAssociateHistory",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.savePastHistory=function(t,a){if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");if(0==angular.isDefined(t))return sweetAlert("Please Enter History Records or NILL","","error");a.admission_id;var i={erasor:0,admission_id:a.admission_id,request_id:a.id,medical:t.medical,surgical:t.surgical,anaesthetic:t.anaesthetic,information_category:"PAST HISTORY",nurse_id:u};e.post("/api/savePastHistory",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.saveSocialSurgery=function(t,a){if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");if(0==angular.isDefined(t))return sweetAlert("Please Enter Social History Records or NILL","","error");a.admission_id;var i={erasor:0,admission_id:a.admission_id,request_id:a.id,chronic_illness:t.chronic_illness,substance_abuse:t.substance_abuse,adoption:t.adoption,others:t.others,other_information:"SOCIAL AND FAMILY HISTORY",nurse_id:u};e.post("/api/saveSocialHistory",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.saveDentalStatus=function(e,t,a){if(0==angular.isDefined(a))return sweetAlert("Select the Patient Before ENTERING DENTAL STATUS","","error");s.selectedPatient=a,console.log(s.selectedPatient),s.dentals={tooth_id:e,tooth_number:t};var i=angular.extend(s.selectedPatient,s.dentals);console.log(i),console.log(s.dentals),r.open({templateUrl:"/views/modules/nursing_care/dental_status.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return i}}})},s.saveCardivascularExaminations=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding Cardivascular System","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/cardivascular_examinations.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.saveGastroIntestineExaminations=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding Gastro Intestine System","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/gastrointestine.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.saveCentralNervousSystem=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding CENTRAL NERVOUS SYSTEM","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/centralNervousSystem.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.getDiagnosis=function(){e.get("/api/getDiagnosis").then(function(e){s.getDiagnosises=e.data})},s.getTeeth=function(t){if(e.get("/api/getTeethAbove").then(function(t){s.teethAboves=t.data,e.get("/api/getTeethBelow").then(function(e){s.teethBelows=e.data,console.log(s.teethBelows)})}),0==angular.isDefined(t))return sweetAlert("Select the Patient Before SETTING DENTAL STATUS","","error");var a=t.id;e.get("/api/getTeethStatusFromPatientAbove/"+a).then(function(e){s.teeth_patientsAboves=e.data}),e.get("/api/getTeethStatusFromPatientBelow/"+a).then(function(e){s.teeth_patientsBelows=e.data})},s.addImplementation=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Diagnosis for Implementations","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={targeted_plans:t.implementation,nurse_diagnosis_id:t.getDiagnos,admission_id:i,nursing_care_types:"IMPLEMENTATIONS",nurse_id:u};e.post("/api/addImplementations",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addEvaluations=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Diagnosis for Implementations","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={targeted_plans:t.evaluation,nurse_diagnosis_id:t.getDiagnos,admission_id:i,nursing_care_types:"EVALUATIONS",nurse_id:u};e.post("/api/addEvaluations",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addTimes=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Diagnosis for TIMING","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");console.log(t);var i=a.admission_id,n=t.time_day,t={targeted_plans:t.time+" "+n,nurse_diagnosis_id:t.getDiagnos,admission_id:i,nursing_care_types:"TIME",nurse_id:u,daytime:n};console.log(t),e.post("/api/addTimes",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.patientDischarge=function(e){s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/patientDischarge.html",size:"lg",animation:!0,controller:"patientDischargedModal",resolve:{object:function(){return t}}})},s.addOutPuts=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the OUTPUT TYPES","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={amount:t.amount,observation_output_type_id:t.types,admission_id:i,si_units:t.units,nurse_id:u};console.log(t),e.post("/api/addOutPuts",t).then(function(e){s.getOutPuts=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addIntravenous=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the INTRAVENOUS FLUID","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={intravenous_mils:t.amount,intravenous_types_id:t.types,admission_id:i};e.post("/api/addIntakeObservation",t).then(function(e){s.getIntravenous=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addIntakeFluid=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the ORAL FLUID TYPE TAKEN","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,n={oral_mils:t.amount,oral_types_id:t.types,admission_id:i};e.post("/api/addIntakeFluid",n).then(function(e){s.getIntravenous=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addWard=function(t,a){return 0==angular.isDefined(t)?sweetAlert("Please Enter WARD NAME","","error"):0==angular.isDefined(t.ward_type)?sweetAlert("Please Enter WARD TYPE","","error"):0==angular.isDefined(a)?sweetAlert("Please Enter WARD CLASS","","error"):0==angular.isDefined(a.ward_class_id)?sweetAlert("Please Enter WARD CLASS","","error"):void e.post("/api/saveWards",{ward_class_id:a.ward_class_id.item_id,ward_name:t.ward_name,ward_type_id:t.ward_type.id,ward_type_name:t.ward_type.ward_type_name,facility_id:d}).then(function(e){0==e.data.status?(s.wards=null,sweetAlert(e.data.data,"","error")):(s.wards=null,sweetAlert(e.data.data,"","success"))})},s.addBed=function(t,a){return 0==angular.isDefined(t)?sweetAlert("Please Enter BED NUMBER "+a,"","error"):0==angular.isDefined(t.bed_type)?sweetAlert("Please Enter BED TYPE "+a,"","error"):(console.log(t.bed_type),void e.post("/api/saveBeds",{bed_name:t.bed_number,bed_type_id:t.bed_type.id,ward_id:a,facility_id:d,eraser:1}).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")}))};var m=0,f=[],g=[];s.getWardDetails=function(t){e.get("/api/getWardOneInfo/"+t).then(function(e){g=e.data}),e.get("/api/getBedsNumber/"+t).then(function(e){m=e.data}),e.get("/api/getBeds/"+t).then(function(e){f=e.data;var t=angular.extend({},g,m);r.open({templateUrl:"/views/modules/nursing_care/manageWardBeds.html",size:"lg",animation:!0,controller:"wardManagementModal",resolve:{object:function(){return t}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})})},s.getBedDetails=function(t,a,i){e.get("/api/OnThisBed/"+t).then(function(e){if(f=e.data,0==e.data.status)sweetAlert(e.data.data,"","error");else{var t=i+" TAKEN BY "+e.data.data;sweetAlert(t,"","success")}})};var h="";s.getAdmissionNotes=function(t){e.post("/api/getInstructions",{patient_id:t}).then(function(e){s.AdmissionNotes=e.data,h=s.AdmissionNotes,console.dir(s.AdmissionNotes)})},s.getProffesions=function(){e.get("/api/professional_registration").then(function(e){s.professsionals=e.data})},s.giveBed=function(t,a,i,n,r){console.log(n),e.post("/api/giveBed",{bed_id:t,ward_id:i,admission_id:n,bed_available:r}).then(function(e){if(s.giveBeds=e.data,console.log(s.giveBeds),0==e.data.status)sweetAlert(e.data.data,"","error");else{var t=r+" SUCCESSFULLY ASSIGNED TO "+a;sweetAlert(t,"","success")}})},s.getAdmPatient=function(e){s.selectedPatient=e,console.log(s.selectedPatient)},s.getPatientsSentToTheatre=function(){e.get("/api/getPatientSentToTheatre").then(function(e){s.patientsSentToTheatres=e.data})},s.getAdmission=function(t,a,i){e.post("/api/getInstructions",{patient_id:t,ward_id:a}).then(function(e){s.AdmissionNotes=e.data,h=s.AdmissionNotes,console.dir(s.AdmissionNotes)}),e.get("/api/getPatientInfo/"+t).then(function(e){s.quick_registration=e.data;var t=angular.extend({},s.quick_registration,h);r.open({templateUrl:"/views/modules/nursing_care/bedAllocation.html",size:"lg",animation:!0,controller:"nursingCareModal",resolve:{object:function(){return t}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})})},s.assignToTheatre=function(t,a,i){e.get("/api/getFullAdmitedPatientInfo/"+i).then(function(e){s.admissions=e.data,console.log(e.data),console.log(i);var t=s.admissions;r.open({templateUrl:"/views/modules/nursing_care/postPatientsToTheatre.html",size:"lg",animation:!0,controller:"postPatientsToTheatreModal",resolve:{object:function(){return t}}})})}})}(),function(){"use strict";angular.module("authApp").directive("ngFiles",["$parse",function(e){return{link:function(t,a,i){var n=e(i.ngFiles);a.on("change",function(e){n(t,{$files:e.target.files})})}}}]).controller("rolesController",function(e,t,a,i,n,s,r){a.currentUser;var o=a.currentUser.id,l=a.currentUser.facility_id;s.messages_counts=0,s.messages=["Write your notification to staff members"];var d="Hi, "+a.currentUser.name;s.messages.push({time:(new Date).toISOString().replace(/T/," ").substr(0,19),text:d,own:"their"}),s.countNotifications=function(t){e.get("/api/getNotifications").then(function(e){var a=e.data[3],i=e.data[1][1];s.messages_counts=e.data[2],s.readMessages=a,s.messages.push({time:i.updated_at,text:i.message,own:"their"}),s.messages.push({time:void 0,text:t,own:"mine"}),r.success("","Message Sent"),s.my_text=null})},s.countNotifications(),s.add=function(t){var a={delete_sms:1,receiver_id:null,sender_id:u,message:t};e.post("/api/sendSmsToGroup",a).then(function(e){e.data[0][0];var a=e.data[1][1],i=e.data[2][0];s.messages_counts=e.data[3],s.messages.push({time:a.updated_at,text:a.message,own:"their"}),s.messages.push({time:i,text:t,own:"mine"}),r.success("","Message Sent"),s.my_text=null})};var c=new FormData;s.getTheFiles=function(e){angular.forEach(e,function(e,t){c.append(t,e)}),c.append("photo_for",o)},s.uploadFiles=function(){var t={method:"POST",url:"/api/fileupload",data:c,headers:{"Content-Type":void 0}};e(t).then(function(e){console.log(t),swal({title:"",html:$("<div>").addClass("some-class").text(""+e.data),animation:!1,customClass:"animated tada"})}).then(function(){})},s.runViews=function(){e.get("/api/userView/"+l).then(function(e){if(s.icons=e.data,200==e.status)t="ALL SYSTEM VIEWS WERE SUCCESSFULLY CREATED";else var t="SOME THING WENT WRONG,PLEASE CONTACT DATABASE ADMINISTRATOR TO REVIEW YOUR TABLE STRUCTURE";swal({title:"",html:$("<div>").addClass("some-class").text(""+t),animation:!1,customClass:"animated tada"})})},e.get("/api/getPerm").then(function(e){s.perms=e.data,console.log(s.perms)}),e.get("/api/geticon").then(function(e){s.icons=e.data}),e.get("/api/getUserImage/"+o).then(function(e){console.log(e),e.data.length>0&&(s.photo="/uploads/"+e.data[0].photo_path)}),e.get("/api/getRoles").then(function(e){s.roles=e.data}),e.get("/api/user_list").then(function(e){s.users=e.data,console.log(s.users)}),s.savePermRoles=function(e){var t=s.labcartsxx;angular.forEach(t,function(e,t){console.log(t+": "+e)})},s.saveModules=function(t){var a={main_menu:1,module:t.module,title:t.title,glyphicons:t.glyphicons.icon_class};console.log(a),e.post("/api/addPermission",a).then(function(e){var t=e.status,a=e.data;swal({title:""+t,html:$("<div>").addClass("some-class").text(""+a),animation:!1,customClass:"animated tada"})}).then(function(e){swal({title:""+getstatus,html:$("<div>").addClass("some-class").text(""+getdata),animation:!1,customClass:"animated tada"})})},s.saveRoles=function(t){var a={title:t.title,parent:t.parent};console.log(a),e.post("/api/addRoles",a).then(function(e){var t=e.status,a=e.data;swal({title:""+t,html:$("<div>").addClass("some-class").text(""+a),animation:!1,customClass:"animated tada"})}).then(function(e){swal({title:""+getstatus,html:$("<div>").addClass("some-class").text(""+getdata),animation:!1,customClass:"animated tada"})})},s.logout=function(){localStorage.removeItem("user"),a.authenticated=!1,a.currentUser=null,event.preventDefault(),i.go("auth")};var u=a.currentUser.id;i.current.name;e.get("/api/getUsermenu/"+u).then(function(e){s.menu=e.data,console.log(s.menu)}),s.labcartsxx=[],s.checkTest=function(t,a){if(0==angular.isDefined(a))swal({title:"ERROR:",html:$("<div>").addClass("some-class").text("PLEASE SELECT THE ROLE ,FROM SEARCH BOX ABOVE BEFORE PROCEED"),animation:!1,customClass:"animated tada"});else{var i=t.id,n=a.role.id,r={permission_id:i,role_id:n,grant:1};if(e.get("/api/getPermName/"+i).then(function(t){s.perms=t.data,console.log(n),s.perms,e.post("/api/perm_role",r).then(function(e){var t=e.status,a=e.data;swal({title:""+t,html:$("<div>").addClass("some-class").text(""+a),animation:!1,customClass:"animated tada"})})}),1==t.selected);else if(0==t.selected){var o=s.labcartsxx.indexOf(t);s.labcartsxx.splice(o,1)}}},s.checkUserPerms=function(t,a){if(0==angular.isDefined(a))swal({title:"ERROR:",html:$("<div>").addClass("some-class").text("PLEASE SELECT THE USER ,FROM SEARCH BOX ABOVE BEFORE PROCEED"),animation:!1,customClass:"animated tada"});else{var i=t.id,n=a.user.id;console.log(n);var r={permission_id:i,user_id:n,grant:1};e.get("/api/getPermName/"+i).then(function(t){s.perms=t.data,s.perms,e.post("/api/perm_user",r).then(function(e){e.status;var t=e.data;swal({title:"",html:$("<div>").addClass("some-class").text(""+t),animation:!1,customClass:"animated tada"})})})}}})}(),function(){"use strict";angular.module("authApp").controller("userSettingController",function(e,t,a,i,n,s){var r=a.currentUser.id;e.get("public/api/getUsermenu/"+r).then(function(e){s.menu=e.data}),e.get("public/api/patientsearch").then(function(e){s.patients=e.data}),e.get("public/api/facility_list").then(function(e){s.facilities=e.data}),e.get("public/api/professional_registration").then(function(e){s.professsionals=e.data}),s.user_list=function(){e.get("public/api/user_list").then(function(e){s.users=e.data})},s.user_list(),s.user_registration=function(t){e.post("public/api/user_registration",t).then(function(e){s.user_list();var t=e.data;swal("Feedback..",t,"success")})},s.user_update=function(t){swal({title:"Are you sure?",text:"  ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("public/api/user_update",t).then(function(e){s.user_list(),e.data,swal("Feedback..","User Details Updated..","success")})},function(e){"cancel"===e&&swal({timer:200,title:"Cancelled"})})},s.user_delete=function(t,a){swal({title:"Are you sure?",text:"  ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("public/api/user_delete/"+a).then(function(e){s.user_list(),e.data,swal("Feedback..","User Deleted....","error")})},function(e){"cancel"===e&&swal({timer:200,title:"Cancelled"})})},s.password=function(t){console.log(t);var a={password:t,user_id:r};console.log(a),e.post("public/api/check_password",a).then(function(e){s.passwordCheck=e.data,console.log(e.data)})},s.resset_password=function(t){var a=t.new_password,i=t.re_password,n={password:t.new_password,user_id:r};a==i?e.post("public/api/reset_password",n).then(function(e){var t=e.data;swal("",t,"success")}):swal("","Password Mismatch","error"),s.resset={},s.resset=""}})}(),function(){"use strict";angular.module("authApp").controller("countryController",function(e,t,a,i,n,s){s.getcountry_zone=function(){e.get("public/api/getcountry_zone").then(function(e){s.countryzones=e.data})},s.country_zone_registration=function(t){confirm("Are you sure you want to Register "+t.country_zone)&&e.post("public/api/country_zone_registration",t).then(function(e){})},s.updatecountryzone=function(t){if(console.log(t),!confirm("Are you sure you want to Update "+t.country_zone))return!1;e.post("public/api/update_country_zone",t).then(function(e){s.getcountry_zone()})},s.deletecountryzone=function(t){if(!confirm("Are you sure you want to delete "+t.country_zone))return!1;e.get("public/api/deletecountryzone/"+t.id).then(function(e){s.getcountry_zone()})},s.getcountry_zone(),s.getcountry=function(){e.get("public/api/getcountries").then(function(e){s.country=e.data})},s.country_name_registration=function(t){console.log(t),confirm("Are you sure you want to Register "+t.country_name)&&e.post("public/api/country_name_registration",t).then(function(e){s.getcountry()})},s.getcountry(),s.updatecountry=function(t){if(!confirm("Are you sure you want to Update "+t.country_name))return!1;e.post("public/api/update_country_name",t).then(function(e){s.getcountry()})},s.getcountry(),s.deletecountry=function(t){if(!confirm("Are you sure you want to delete "+t.country_name))return!1;e.get("public/api/deletecountry/"+t.id).then(function(e){s.getcountry()})},s.getcountry()})}(),function(){"use strict";angular.module("authApp").directive("userAvatar",function(){return{replace:!0,template:'<svg class="user-avatar" viewBox="0 0 128 128" height="64" width="64" pointer-events="none" display="block" > <path fill="#FF8A80" d="M0 0h128v128H0z"/> <path fill="#FFE0B2" d="M36.3 94.8c6.4 7.3 16.2 12.1 27.3 12.4 10.7-.3 20.3-4.7 26.7-11.6l.2.1c-17-13.3-12.9-23.4-8.5-28.6 1.3-1.2 2.8-2.5 4.4-3.9l13.1-11c1.5-1.2 2.6-3 2.9-5.1.6-4.4-2.5-8.4-6.9-9.1-1.5-.2-3 0-4.3.6-.3-1.3-.4-2.7-1.6-3.5-1.4-.9-2.8-1.7-4.2-2.5-7.1-3.9-14.9-6.6-23-7.9-5.4-.9-11-1.2-16.1.7-3.3 1.2-6.1 3.2-8.7 5.6-1.3 1.2-2.5 2.4-3.7 3.7l-1.8 1.9c-.3.3-.5.6-.8.8-.1.1-.2 0-.4.2.1.2.1.5.1.6-1-.3-2.1-.4-3.2-.2-4.4.6-7.5 4.7-6.9 9.1.3 2.1 1.3 3.8 2.8 5.1l11 9.3c1.8 1.5 3.3 3.8 4.6 5.7 1.5 2.3 2.8 4.9 3.5 7.6 1.7 6.8-.8 13.4-5.4 18.4-.5.6-1.1 1-1.4 1.7-.2.6-.4 1.3-.6 2-.4 1.5-.5 3.1-.3 4.6.4 3.1 1.8 6.1 4.1 8.2 3.3 3 8 4 12.4 4.5 5.2.6 10.5.7 15.7.2 4.5-.4 9.1-1.2 13-3.4 5.6-3.1 9.6-8.9 10.5-15.2M76.4 46c.9 0 1.6.7 1.6 1.6 0 .9-.7 1.6-1.6 1.6-.9 0-1.6-.7-1.6-1.6-.1-.9.7-1.6 1.6-1.6zm-25.7 0c.9 0 1.6.7 1.6 1.6 0 .9-.7 1.6-1.6 1.6-.9 0-1.6-.7-1.6-1.6-.1-.9.7-1.6 1.6-1.6z"/> <path fill="#E0F7FA" d="M105.3 106.1c-.9-1.3-1.3-1.9-1.3-1.9l-.2-.3c-.6-.9-1.2-1.7-1.9-2.4-3.2-3.5-7.3-5.4-11.4-5.7 0 0 .1 0 .1.1l-.2-.1c-6.4 6.9-16 11.3-26.7 11.6-11.2-.3-21.1-5.1-27.5-12.6-.1.2-.2.4-.2.5-3.1.9-6 2.7-8.4 5.4l-.2.2s-.5.6-1.5 1.7c-.9 1.1-2.2 2.6-3.7 4.5-3.1 3.9-7.2 9.5-11.7 16.6-.9 1.4-1.7 2.8-2.6 4.3h109.6c-3.4-7.1-6.5-12.8-8.9-16.9-1.5-2.2-2.6-3.8-3.3-5z"/> <circle fill="#444" cx="76.3" cy="47.5" r="2"/> <circle fill="#444" cx="50.7" cy="47.6" r="2"/> <path fill="#444" d="M48.1 27.4c4.5 5.9 15.5 12.1 42.4 8.4-2.2-6.9-6.8-12.6-12.6-16.4C95.1 20.9 92 10 92 10c-1.4 5.5-11.1 4.4-11.1 4.4H62.1c-1.7-.1-3.4 0-5.2.3-12.8 1.8-22.6 11.1-25.7 22.9 10.6-1.9 15.3-7.6 16.9-10.2z"/> </svg>'}}),angular.module("authApp").directive("avatarWithText",function(){return{replace:!0,templateUrl:"/views/avatar-with-title.html"}})}(),function(){"use strict";angular.module("authApp").directive("hamburger",[function(){return{restrict:"E",scope:!1,replace:!0,template:'<md-button ng-if="showHamburger()" ng-click="showLeft()" class="hamburger"><ng-md-icon icon="menu" size="48"></ng-md-icon></md-button>'}}]),angular.module("authApp").directive("appHeader",[function(){return{restrict:"E",scope:!1,replace:!0,templateUrl:"/views/app-header.html"}}])}(),function(){"use strict";angular.module("authApp").controller("maritalController",function(e,t,a,i,n,s){s.marital_registration=function(t){confirm("Are you sure you want to Register "+t.marital_status)&&e.post("public/api/marital_registration",t).then(function(e){})},s.getmarital_status=function(){e.get("public/api/getmarital_status").then(function(e){s.maritalstatus=e.data})},s.updatemaritalstatus=function(t){if(!confirm("Are you sure you want to Update "+t.marital_status))return!1;e.post("public/api/updatemaritalstatus",t).then(function(e){}),s.getmarital_status()},s.getmarital_status(),s.deletemaritalstatus=function(t){if(!confirm("Are you sure you want to delete "+t.marital_status))return!1;e.get("public/api/deletemaritalstatus/"+t.id).then(function(e){s.getmarital_status()})},s.getmarital_status()})}(),function(){"use strict";angular.module("authApp").controller("occupationController",function(e,t,a,i,n,s){s.getoccupation=function(){e.get("/api/getoccupation").then(function(e){s.occupation=e.data})},s.occupation_registration=function(t){confirm("Are you sure you want to Register "+t.occupation_name)&&e.post("/api/occupation_registration",t).then(function(e){}),s.getoccupation()},s.updateoccupation=function(t){if(!confirm("Are you sure you want to Update "+t.occupation_name))return!1;e.post("/api/updateoccupation",t).then(function(e){}),s.getoccupation()},s.getoccupation(),s.deleteoccupation=function(t){if(!confirm("Are you sure you want to delete "+t.occupation_name))return!1;e.get("/api/deleteoccupation/"+t.id).then(function(e){s.getoccupation()})},s.getoccupation()})}(),function(){"use strict";angular.module("authApp").controller("professionalController",function(e,t,a,i,n,s){s.getprofessional=function(){e.get("/api/professional_registration").then(function(e){s.professional=e.data})},s.professional_registration=function(t){confirm("Are you sure you want to Register "+t.prof_name)&&e.post("/api/professional_registration",t).then(function(e){s.getprofessional()})},s.update=function(t){if(!confirm("Are you sure you want to Update "+t.prof_name))return!1;e.post("/api/update_professional",t).then(function(e){s.good=t.prof_name+" Successful Updated",s.kol=e.status,s.getprofessional()})},s.deleteprof=function(t){if(!confirm("Are you sure you want to delete "+t.prof_name))return!1;e.get("/api/deleteprof/"+t.id).then(function(e){s.getprofessional()})}})}(),function(){"use strict";angular.module("authApp").controller("deviceModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.deviceSetting=s;var r=a.currentUser.id,o=a.currentUser.facility_id;e.equipmentOnOff=function(e,a){var i={equipment_name:a,equipment_status:e.status_name.id,user_id:r,facility_id:o};console.log(i),t.post("/api/equipmentOnOff",i).then(function(e){console.log(e.data),swal("Equipment","Updated Successfully!","success")})}}])}(),function(){"use strict";angular.module("authApp").directive("ngFiles",["$parse",function(e){return{link:function(t,a,i){var n=e(i.ngFiles);a.on("change",function(e){n(t,{$files:e.target.files})})}}}]),angular.module("authApp").controller("queManagementModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){console.log(s),e.XrayQue=s;a.currentUser.id,a.currentUser.facility_id;var r=new FormData;e.xrayUpload=function(e,a,i,n){console.log(e),console.log(a),console.log(i),console.log(n),r.append("explanation",e.explanation),r.append("mrn",i),r.append("order",a),r.append("patient_id",n);var s={method:"POST",url:"/api/xrayImage",data:r,headers:{"Content-Type":void 0}};t(s).then(function(e){console.log(s),swal({title:"",html:$("<div>").addClass("some-class").text(""+e.data),animation:!1,customClass:"animated tada"})}).then(function(){})}}])}(),function(){"use strict";angular.module("authApp").directive("ngFiles",["$parse",function(e){return{link:function(t,a,i){var n=e(i.ngFiles);a.on("change",function(e){n(t,{$files:e.target.files})})}}}]).controller("radiologyController",function(e,t,a,i,n,s,r,o,l,d){s.isNavCollapsed=!1,s.isCollapsed=!0,s.isCollapsedHorizontal=!0;var c=a.currentUser.id,u=a.currentUser.name,p=a.currentUser.facility_id,_=new FormData;s.getTheFiles=function(e){angular.forEach(e,function(e,t){_.append(t,e)})},e.get("/api/facility_list").then(function(e){s.facilities=e.data}),s.printUserMenu=function(t){e.get("/api/getUsermenu/"+t).then(function(e){s.menu=e.data,console.log(s.menu)})},s.getXrays=function(){e.get("/api/getXrayImage").then(function(e){s.Xrays=e.data})},s.getDiagnoses=function(t){console.log(t),e.get("/api/getdiagnosis/"+t).then(function(e){s.diagnosed=e.data})},s.getXrays(),s.getDiagnoses(),s.loadPatientRequest=function(e){s.selectedPatients=e,console.log(e)},s.imageStatus=function(t){console.log(t),e.get("/api/imageStatus/"+t).then(function(e){s.patient_orders=e.data,console.log(e.data)})},s.VerifyXray=function(t,a){console.log(a);var i={remarks:a,verify_user:c,id:t};console.log(i),e.post("/api/VerifyXrays",i).then(function(e){console.log(e.data),swal("Updated Successfully","Image  Verified!","success")})},s.DeleteXray=function(t){var a=c;console.log(a);var i={verify_user:a,id:t};console.log(a),e.post("/api/DeleteXray",i).then(function(e){console.log(e.data),swal("Deleted Successfully","Findings Removed","success")})},s.PatientsXray=function(){e.get("/api/PatientsXray").then(function(e){console.log(e.data),s.gpatientsXarayss=e.data})};var m=[];s.SearchPatientInXray=function(t){var a={searchKey:t,user_id:c,facility_id:p};return t.length>3&&e.post("/api/SearchPatientInXray",a).then(function(e){m=e.data}),m},s.loadPatientRequest1=function(t){var a={patient_id:t,facility_id:p};console.log(a),e.post("/api/loadPatientRadiologyRequest",a).then(function(e){s.requestPatient=e.data})},e.get("/api/getUserImage/"+c).then(function(e){s.photo="/uploads/"+e.data[0].photo_path,console.log(s.photo)});var f=a.currentUser.id;s.printUserMenu(f),e.get("/api/getradiologypatients").then(function(e){s.radiologyList=e.data}),s.SaveImages=function(t,a){if(console.log(t),void 0==t)swal(u,"Findings are Missed","error");else if(""==t)swal(u,"Findings are Missed","error");else{var i={order_id:a,description:t,post_user:c,confirmation_status:0,eraser:1};swal({title:u,text:"Are you sure you want to send this Findings",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, send it!"}).then(function(){e.post("/api/SaveImage",i).then(function(e){console.log(e.data),swal("Registered Successfully","Findings sent!","success")})})}},s.xrayImage=function(t,a,i){var n=c;console.log(n),_.append("explanation",t.explanation),_.append("mrn",i),_.append("order",a),_.append("post_user",n);var s={method:"POST",url:"/api/xrayImage",data:_,headers:{"Content-Type":void 0}};swal({title:u,text:"Are you sure you want to Upload Image",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, send it!"}).then(function(){e(s).then(function(e){console.log(s),swal({title:"",html:$("<div>").addClass("some-class").text(""+e.data),animation:!1,customClass:"animated tada"})}).then(function(){})})},s.loadPatientRequest=function(e){var t=angular.extend({},e);d.open({templateUrl:"/views/modules/radiology/XrayQueModal.html",size:"lg",animation:!0,controller:"queManagementModal",resolve:{object:function(){return t}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})},s.tabs=[{title:"Dynamic Title 1",content:"Dynamic content 1"},{title:"Dynamic Title 2",content:"Dynamic content 2",disabled:!0}],s.alertMe=function(){setTimeout(function(){l.swal("Use proper ways to avoid Mistakes",u,"error")})},s.model={name:"Tabs"},s.oneAtATime=!0,s.status={isCustomHeaderOpen:!1,isFirstOpen:!0,isFirstDisabled:!1}})}(),function(){"use strict";angular.module("authApp").controller("radiologyDepartmentController",function(e,t,a,i,n,s,r,o,l){a.currentUser;var d=a.currentUser.id,c=a.currentUser.name,u=a.currentUser.facility_id;s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e},s.equipments_list=function(){e.get("/api/getEquipmentStatus").then(function(e){s.equipments=e.data})},s.departments_list=function(){e.get("/api/getdepartments").then(function(e){s.departments=e.data})},s.departments_registered=function(){e.get("/api/getRegistered_departments").then(function(e){s.registered=e.data})},s.registered_list=function(){e.get("/api/getEquipments_list").then(function(e){s.getEquipmentStatus=e.data})},s.oneAtATime=!0,s.getStatus=function(){e.get("/api/getEquipments_status/"+u).then(function(e){s.statusEquipment=e.data})},s.sum=function(){for(var e=0,t=0;t<s.rejesta.length;t++)e+=s.rejesta[t].sub_total;return e},s.getRejesta=function(t){console.log(t),e.post("/api/getRejestaReport",{start:t.start,end:t.end,facility_id:u}).then(function(e){s.rejesta=e.data,s.selIdx=-1,s.detailedTotal=s.sum(),s.selData=function(e,t){s.selectedData=e,s.selIdx=t},s.isSelData=function(e){return s.selectedData===e}})},s.getrequestedInvestigation=function(t){console.log(t),e.post("/api/requestedInvestigation",{start:t.start,end:t.end,facility_id:u}).then(function(e){s.investigation=e.data})},s.getSkullInvestigation=function(t){console.log(t),e.post("/api/skullInvestigation",{start:t.start,end:t.end,facility_id:u}).then(function(e){s.skull=e.data})},s.getChestInvestigation=function(t){console.log(t),e.post("/api/chestInvestigation",{start:t.start,end:t.end,facility_id:u}).then(function(e){s.chest=e.data})},s.getAbdomenInvestigation=function(t){console.log(t),e.post("/api/abdomenInvestigation",{start:t.start,end:t.end,facility_id:u}).then(function(e){s.abdomen=e.data})},s.getSpineInvestigation=function(t){console.log(t),e.post("/api/spineInvestigation",{start:t.start,end:t.end,facility_id:u}).then(function(e){s.spine=e.data})},s.getPelvisInvestigation=function(t){console.log(t),e.post("/api/pelvisInvestigation",{start:t.start,end:t.end,facility_id:u}).then(function(e){s.pelvis=e.data})},s.getExtremitiesInvestigation=function(t){console.log(t),e.post("/api/extremitiesInvestigation",{start:t.start,end:t.end,facility_id:u}).then(function(e){s.extremities=e.data})},s.getHSGInvestigation=function(t){console.log(t),e.post("/api/HSGInvestigation",{start:t.start,end:t.end,facility_id:u}).then(function(e){s.hsg=e.data})},s.getRejestaReport=function(){e.get("/api/getRejestaReport/"+u).then(function(e){s.Rejesta_Report=e.data})},s.geuserdepartment=function(){e.get("/api/getUserDepartment/"+u).then(function(e){s.userdepartment=e.data})},s.getInvestigationData=function(){e.get("/api/investigationData").then(function(e){s.investigationData=e.data})},s.getServices=function(){e.get("/api/getServicedata").then(function(e){s.servicesData=e.data}),e.get("/api/getItemCategory").then(function(e){s.category=e.data})},s.deviceName=function(){e.get("/api/deviceName/"+u).then(function(e){s.devicesdata=e.data}),s.pagination=[],s.device_services=function(){e.get("/api/deviceServices/"+u).then(function(e){s.ServedDevice=e.data,s.pagination=e.data,s.viewby=10,s.ServedDevices=s.pagination.length,s.currentPage=1,s.itemsPerPage=s.viewby,s.maxSize=2,s.setPage=function(e){s.currentPage=e},s.setItemsPerPage=function(e){s.itemsPerPage=e,s.currentPage=1}})}},s.serviceDenied=function(){e.get("/api/deniedDevices/"+u).then(function(e){s.deniedDevices=e.data})},s.serviceonnoff=function(){e.get("/api/OnnOffDevices/"+u).then(function(e){s.onnoff=e.data})},s.departments_registered(),s.serviceonnoff(),s.equipments_list(),s.departments_list(),s.registered_list(),s.getStatus(),s.getServices(),s.getServices(),s.deviceName(),s.device_services(),s.serviceDenied(),s.geuserdepartment(),s.getInvestigationData(),s.printUserMenu=function(t){e.get("/api/getUsermenu/"+t).then(function(e){s.menu=e.data,console.log(s.menu)})},e.get("/api/getUserImage/"+d).then(function(e){s.photo="/uploads/"+e.data[0].photo_path,console.log(s.photo)});var p=a.currentUser.id,_=a.currentUser.facility_id;s.printUserMenu(p),s.departmentRegistration=function(t){if(console.log(t),void 0==t)swal("Department is missing","Register all required field!","error");else if(void 0==t.department_name.id)swal("Department is missing","Register Department!","error");else if(void 0==t.name)swal("Sub-Department is missing","Register sub dept!","error");else{var a={sub_department_name:t.name,department_id:t.department_name.id,eraser:1};console.log(a),e.post("/api/departmentRegistration",a).then(function(e){console.log(e.data);var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Success Registration",t,"success"),s.departments_list()})}},s.statusRegistration=function(t){var a={status_name:t.name,eraser:1};e.post("/api/statusRegistration",a).then(function(e){console.log(e.data),e.data.sent,0==e.data.status?l.error("Status Denied","Error"):l.success("Successfully","Status Registered"),s.equipments_list()})},s.InvestigationRegistration=function(t){var a={item_name:t.name,dept_id:3};console.log(a),e.post("/api/InvestigationRegistration",a).then(function(e){console.log(e.data);var t=e.data.msg;0==e.data.status?l.error(t,"Error"):l.success(t,"Success")})},s.InvestigationPart=function(t){console.log(t);var a=t.item_name.id,i=t.item_name.item_name,n=t.part.name,s=t.category.item_category_name;console.log(s);var r={item_id:a,item_name:i,item_category:s,sub_item_category:n};console.log(r),e.post("/api/InvestigationPart",r).then(function(e){console.log(e.data);var t=e.data.msg;0==e.data.status?l.error(t,"Error"):l.success(t,"Success")})},s.DeactivateUser=function(t){var a={id:t,del_user:d};console.log(a),e.post("/api/DeactivateUser",a).then(function(e){console.log(e.data),l.error("Deleted Successfully","User")})},s.equipmentRegistration=function(t){var a={equipment_name:t.name,description:t.description,equipment_status_id:t.status_name.id,facility_id:_,eraser:1,sub_department_id:t.sub_department_name.id,user_id:p};console.log(a),e.post("/api/equipmentRegistration",a).then(function(e){console.log(e.data),l.success("Successfully Registered","Equipment"),s.serviceonnoff()})},s.RadiologyUpdate=function(t,a,i,n){console.log(i);var r={statuses_id:a,descriptions:i,equipment_name:t.equipment_name,description_id:t.id,condition:t.condition,conditions:n,status_id:t.status_id,description:t.description,equipment_status_id:t.status_name.id,facility_id:_,user_id:p};console.log(r),e.post("/api/RadiologyUpdate",r).then(function(e){console.log(e.data),l.success("Updated Successfully","Equipment"),s.device_services()})},s.statusUpdate=function(t){t.status_name,console.log(t),e.post("/api/statusUpdate",t).then(function(e){console.log(e.data),l.success("Updated Successfully","Status"),s.equipments_list()})},s.departmentUpdate=function(t){var a=t.id,i=t.sub_department_name,n=t.department_id;console.log(a),console.log(n),console.log(i);var r={sub_department_name:i,id:a,department_id:n};console.log(r),e.post("/api/departmentUpdate",r).then(function(e){console.log(e.data),l.success("Successfully","Updated Successfully "),s.departments_list()})},s.states=[{name:"Skull",id:"1"},{name:"Chest",id:"2"},{name:"Abdomen",id:"3"},{name:"Spine",id:"4"},{name:"Extremities",id:"5"},{name:"HSG",id:"6"},{name:"Others Specify",id:"7"}],s.departmentDelete=function(t){console.log(t),swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){e.get("/api/departmentDelete/"+t).then(function(e){console.log(e.data),l.error("Deleted Successfully","Sub-department"),s.departments_list()})})},s.statusDelete=function(t){console.log(t),swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){e.get("/api/statusDelete/"+t).then(function(e){console.log(e.data),l.error("Deleted Successfuly"," Status"),s.equipments_list()})})};var m;s.ngModelOptionsSelected=function(e){if(!arguments.length)return m;m=e},s.modelOptions={debounce:{default:500,blur:250},getterSetter:!0},s.alertMe=function(){setTimeout(function(){r.swal("Use proper ways to avoid Mistakes",c,"error")})},s.model={name:"Tabs"},s.oneAtATime=!0,s.status={isCustomHeaderOpen:!1,isFirstOpen:!0,isFirstDisabled:!1},s.device_services=function(){e.get("/api/deviceServices/"+u).then(function(e){s.ServedDevice=e.data,s.viewby=5,s.ServedDevices=e.data.length,s.currentPage=1,s.maxSize=10,s.setPage=function(e){s.currentPage=e},s.setItemsPerPage=function(e){s.itemsPerPage=e,s.currentPage=1}})},s.device_services(),s.serviceRegistration=function(t){if(console.log(t),void 0==t.item_name)swal(c,"Service is missing","error");else if(void 0==t.sub_department_name)swal("Sub-Department is missing","Register all required field!","error");else if(void 0==t.item_name)swal("Service is missing","Register all required field!","error");else if(void 0==t.equipment_name)swal(c,"Register equipment name!","error");else{var a={sub_department_id:t.sub_department_name.id,equipment_id:t.equipment_name.equip_id,item_id:t.item_name.order_id,eraser:1};console.log(a),e.post("/api/serviceRegistration",a).then(function(e){console.log(e.data);var t=e.data.msg;0==e.data.status?l.error(t," Error"):l.success(t," Success Registration"),s.device_services()})}},s.userRegistration=function(t){if(void 0==t.name)swal(c,"Please fill required fields","error");else if(void 0==t.name)swal(c,"User is missing","error");else if(void 0==t.sub_department_name)swal(c,"Sub-Department is missing","error");else{var a={user_id:t.name.user_id,subdept_id:t.sub_department_name.id,assigned_by:d,grant:1};console.log(a),e.post("/api/userRegistration",a).then(function(e){console.log(e.data);var t=e.data.msg;0==e.data.status?l.error(t," Error"):(l.success(t," Registered"),swal("Success Registration",t,"success")),s.getUsersSubdepartments()})}},s.OpenDeviceModal=function(e){console.log(e);var t=e;o.open({templateUrl:"/views/modules/radiology/deviceModal.html",size:"lg",animation:!0,controller:"deviceModal",resolve:{object:function(){return t}}})},s.VerifyXray=function(t){console.log(t),e.get("/api/VerifyXray/"+t).then(function(e){console.log(e.data),swal("Updated Successfully","Image  Verified!","success"),s.getXrays()})},s.ServiceDelete=function(t){console.log(t),swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){e.get("/api/ServiceDelete/"+t).then(function(e){console.log(e.data),l.error("Deleted Successfully","Service"),s.device_services()})})}})}(),function(){"use strict";angular.module("authApp").controller("radiologyTestController",function(e,t,a,i,n,s){s.oneAtATime=!0,s.status={isCustomHeaderOpen:!1,isFirstOpen:!0,isFirstDisabled:!1},s.isNavCollapsed=!1,s.isCollapsed=!0,s.isCollapsedHorizontal=!0;a.currentUser;var r=a.currentUser.id;a.currentUser.facility_id;s.printUserMenu=function(t){e.get("/api/getUsermenu/"+t).then(function(e){s.menu=e.data,console.log(s.menu)})},e.get("/api/getUserImage/"+r).then(function(e){s.photo="/uploads/"+e.data[0].photo_path,console.log(s.photo)}),s.getXrays=function(){e.get("/api/getXrayImage").then(function(e){s.Xrays=e.data})},s.getServices=function(){e.get("/api/getServicedata").then(function(e){s.servicesData=e.data})},s.departments_list=function(){e.get("/api/getdepartments").then(function(e){s.departments=e.data})},s.device_services=function(){e.get("/api/deviceServices").then(function(e){s.ServedDevice=e.data,s.viewby=10,s.ServedDevices=e.data.length,s.currentPage=1,s.itemsPerPage=s.viewby,s.maxSize=5,s.setPage=function(e){s.currentPage=e},s.setItemsPerPage=function(e){s.itemsPerPage=e,s.currentPage=1}})},s.deviceName=function(){e.get("/api/deviceName").then(function(e){s.devicesdata=e.data})},s.serviceDenied=function(){e.get("/api/deniedDevices").then(function(e){s.deniedDevices=e.data})},s.getXrays(),s.getServices(),s.departments_list(),s.deviceName(),s.device_services(),s.serviceDenied();var o=a.currentUser.id;a.currentUser.facility_id;s.printUserMenu(o),s.imageStatus=function(t){console.log(t),e.get("/api/imageStatus/"+t).then(function(e){s.patient_orders=e.data,console.log(e.data)})},s.VerifyXray=function(t){console.log(t),e.get("/api/VerifyXray/"+t).then(function(e){console.log(e.data),swal("Updated Successfully","Image  Verified!","success"),s.getXrays()})},s.serviceRegistration=function(t){var a={sub_department_id:t.sub_department_name.id,equipment_id:t.equipment_name.id,item_id:t.item_name.id,eraser:1};console.log(a),e.post("/api/serviceRegistration",a).then(function(e){console.log(e.data),swal("Registered Successfully","Service  Registered!","success"),t="",s.device_services()})};var l;s.ngModelOptionsSelected=function(e){if(!arguments.length)return l;l=e},s.modelOptions={debounce:{default:500,blur:250},getterSetter:!0}})}(),function(){"use strict";angular.module("authApp").controller("radiologyViewController",function(e,t,a,i,n,s){s.isNavCollapsed=!1,s.isCollapsed=!0,s.isCollapsedHorizontal=!0;a.currentUser;var r=a.currentUser.id;a.currentUser.facility_id;s.printUserMenu=function(t){e.get("/api/getUsermenu/"+t).then(function(e){s.menu=e.data,console.log(s.menu)})},e.get("/api/getUserImage/"+r).then(function(e){s.photo="/uploads/"+e.data[0].photo_path,console.log(s.photo)}),s.getXrays=function(){e.get("/api/getXrayImage").then(function(e){s.Xrays=e.data})},s.getXrays();var o=a.currentUser.id;a.currentUser.facility_id;s.printUserMenu(o),s.imageStatus=function(t){console.log(t),e.get("/api/imageStatus/"+t).then(function(e){s.patient_orders=e.data,console.log(e.data)})},s.VerifyXray=function(t){console.log(t),e.get("/api/VerifyXray/"+t).then(function(e){console.log(e.data),swal("Updated Successfully","Image  Verified!","success"),s.getXrays()})}})}(),function(){"use strict";angular.module("authApp").controller("radiopatientsController",function(e,t,a,i,n,s,r,o,l){o.isNavCollapsed=!1,o.isCollapsed=!0,o.isCollapsedHorizontal=!0;a.currentUser;var d=a.currentUser.id,c=a.currentUser.facility_id;o.printUserMenu=function(t){e.get("/api/getUsermenu/"+t).then(function(e){o.menu=e.data,console.log(o.menu)})},e.get("/api/getUserImage/"+d).then(function(e){o.photo="/uploads/"+e.data[0].photo_path,console.log(o.photo)}),o.getXrays=function(){e.get("/api/getXrayImage").then(function(e){o.Xrays=e.data})},o.getXrays();var u=a.currentUser.id;a.currentUser.facility_id;o.printUserMenu(u),o.imageStatus=function(t){console.log(t),e.get("/api/imageStatus/"+t).then(function(e){o.patient_orders=e.data,console.log(e.data)})},o.RadioPatientsQue=function(e){var t=angular.extend({},e);l.open({templateUrl:"/views/modules/radiology/XrayQueModal.html",size:"lg",animation:!0,controller:"queManagementModal",resolve:{object:function(){return t}}}).result.then(function(e){o.quick_reg=e,console.log(o.quick_reg)})},o.PatientsXray=function(){e.get("/api/PatientsXray/"+c).then(function(e){console.log(e.data),o.gpatientsXarayss=e.data})},o.PatientsXray()})}(),function(){"use strict";angular.module("authApp").controller("facilityController",function(e,t,a,i,n,s,r){var o=a.currentUser.id;e.get("/api/getUsermenu/"+o).then(function(e){s.menu=e.data}),e.get("/api/region_registration").then(function(e){s.regions=e.data}),e.get("/api/council_type_list").then(function(e){s.council_types=e.data}),e.get("/api/council_list").then(function(e){s.councils=e.data}),e.get("/api/facility_type_list").then(function(e){s.facility_types=e.data}),s.facility_type_registration=function(t){e.post("/api/facility_type_registration",t).then(function(e){var t=e.data;swal("Feedback..",t,"success"),s.facility_type_list(),s.fading()})},s.facility_type_list=function(){e.get("/api/facility_type_list").then(function(e){s.facility_types=e.data})},s.facility_type_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/facility_type_update",t).then(function(e){s.facility_type_list(),e.data,swal("Feedback..","Updates Success...","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.facility_type_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/facility_type_delete/"+a).then(function(e){s.facility_type_list(),swal("Feedback..","Deleted...","warning")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.facility_registration=function(t){e.post("/api/facility_registration",t).then(function(e){s.facility_code="";var t=e.data;swal("Feedback..",t,"success")})},s.facility_list=function(){e.get("/api/facility_list").then(function(e){s.facilities=e.data})},s.facility_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/facility_update",t).then(function(e){s.facility_list(),e.data,swal("Feedback..","Updates Success...","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.facility_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/facility_delete/"+a).then(function(e){s.facility_list(),e.data,swal("Feedback..","Item Deleted...","warning")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.department_registration=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/department_registration",t).then(function(e){var t=e.data;swal("Feedback..",t,"success"),s.department.department_name,s.department_list()})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.department_list=function(){e.get("/api/department_list").then(function(e){s.departments=e.data})},e.get("/api/department_list").then(function(e){s.departments=e.data}),s.department_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/department_update",t).then(function(e){s.department_list(),e.data,swal("Feedback..","Updates Success...","success",2e3)})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.department_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/department_delete/"+a).then(function(e){s.department_list(),e.data,swal("Feedback..","Item Deleted...","warning")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})}})}(),function(){"use strict";angular.module("authApp").controller("regionController",function(e,t,a,i,n,s,r){var o=a.currentUser.id;e.get("/api/getUsermenu/"+o).then(function(e){s.menu=e.data}),s.region_registration=function(t){e.post("/api/region_registration",t).then(function(e){s.region_list();var t=e.data;swal("Feedback..",t,"success")})},s.region_list=function(){e.get("/api/region_registration").then(function(e){s.regions=e.data})},e.get("/api/region_registration").then(function(e){s.regions=e.data}),s.update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/update_region",t).then(function(e){s.e="",console.log(s.e),s.region_list(),swal("Feedback..","Updates Success...","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/delete/"+a).then(function(e){s.region_list(),swal("Feedback..","Deleted...","warning")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.council_type_registration=function(t){e.post("/api/council_type_registration",t).then(function(e){s.council_type_list();var t=e.data;swal("Feedback..",t,"success")})},s.council_type_list=function(){e.get("/api/council_type_list").then(function(e){s.council_types=e.data})},e.get("/api/council_type_list").then(function(e){s.council_types=e.data}),s.council_type_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/council_type_update",t).then(function(e){s.council_type_list(),swal("Feedback..","Updates Success...","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.council_type_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/council_type_delete/"+a).then(function(e){s.council_type_list(),swal("Feedback..","Deleted...","warning")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.council_registration=function(t){e.post("/api/council_registration",t).then(function(e){s.council_list();var t=e.data;swal("Feedback..",t,"success")})},s.council_list=function(){e.get("/api/council_list").then(function(e){s.councils=e.data})},e.get("/api/council_list").then(function(e){s.councils=e.data}),s.council_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/council_update",t).then(function(e){s.council_list(),swal("Feedback..","Updates Success...","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.council_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/council_delete/"+a).then(function(e){s.council_list(),swal("Feedback..","Deleted...","warning")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.residence_registration=function(t){e.post("/api/residence_registration",t).then(function(e){s.residence_list();var t=e.data;swal("Feedback..",t,"success")})},s.residence_list=function(){e.get("/api/residence_list").then(function(e){s.residences=e.data})},s.residence_list(),s.residence_update=function(t){var a={id:t.residence_id,residence_name:t.residence_name,council_id:t.council_id};swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/residence_update",a).then(function(e){s.residence_list(),swal("Feedback..","Updates Success...","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.residence_delete=function(t,a){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.get("/api/residence_delete/"+a).then(function(e){s.residence_list(),swal("Feedback..","Deleted...","warning")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})}})}(),function(){"use strict";angular.module("authApp").controller("tribeController",function(e,t,a,i,n,s){s.gettribe_name=function(){e.get("/api/gettribe_name").then(function(e){s.tribename=e.data})},s.tribe_registration=function(t){confirm("Are you sure you want to Register "+t.tribe_name)&&e.post("/api/tribe_registration",t).then(function(e){s.gettribe_name()})},s.updatetribe=function(t){if(!confirm("Are you sure you want to Update "+t.tribe_name))return!1;e.post("/api/updatetribe",t).then(function(e){s.good=t.tribe_name+" Successful Updated",s.gettribe_name()})},s.deletetribe=function(t){if(!confirm("Are you sure you want to delete "+t.tribe_name))return!1;e.get("/api/deletetribe/"+t.id).then(function(e){s.deleted=t.id+" Successful Deleted",s.gettribe_name()})},s.gettribe_name()})}(),function(){"use strict";angular.module("authApp").controller("VitalSignController",function(e,t,a,i,n,s,r,o,l,d){o.isNavCollapsed=!1,o.isCollapsed=!0,o.isCollapsedHorizontal=!0;a.currentUser;var c=a.currentUser.id,u=a.currentUser.facility_id;o.regex=/\s/g,o.printUserMenu=function(t){e.get("/api/getUsermenu/"+t).then(function(e){o.menu=e.data,console.log(o.menu)})},e.get("/api/getUserImage/"+c).then(function(e){o.photo="/uploads/"+e.data[0].photo_path,console.log(o.photo)}),e.get("/api/getVitals").then(function(e){o.Vitals=e.data});var p=a.currentUser.id;a.currentUser.facility_id;o.printUserMenu(p),o.tabs=[];var _=[];o.showSearch=function(t){return e.post("/api/getVitalsPatients",{search:t,facility_id:u}).then(function(e){_=e.data}),_},o.states=[{name:"Body Weight",unit:"Kg",value:"weight",status:"1"},{name:"Height/Length",unit:"cm",value:"height",status:"2"},{name:"Body Temperature",unit:"",value:"temperature",status:"3"},{name:"Systolic Pressure",unit:"mmHg",value:"systolic",status:"4"},{name:"Diastolic Pressure",unit:"mmHg",value:"diastolic",status:"5"},{name:"Respiratory Rate",unit:"Breaths/Min",value:"respiratory",status:"6"},{name:"Pulse Rate",unit:"Breaths/Min",value:"pulse",status:"7"},{name:"Oxygen Saturation",unit:"Beats/Min",value:"oxygen",status:"8"}],o.VitalQue=function(e){var t=angular.extend({},e);l.open({templateUrl:"/views/modules/VitalSign/vitalModal.html",size:"lg",animation:!0,controller:"vitalModal",windowClass:"app-modal-window",resolve:{object:function(){return t}}}).result.then(function(e){o.quick_reg=e,console.log(o.quick_reg)})},o.getVitalPatient_id=function(t){console.log(t),e.get("/api/getVitalsAccount/"+t).then(function(e){o.accountVital=e.data})},o.vitalsDate=function(t){console.log(t),e.get("/api/getVitalsDate/"+t).then(function(e){o.vitalDatas=e.data})},o.oneAtATime=!0,o.vitalRegister=function(t){var a,i=[];o.Vitals.forEach(function(e){a=e.vital_name.replace(o.regex,"_"),""!=$("#"+a).val()&&(i.push({vital_sign_id:e.vital_id,vital_sign_value:$("#"+a).val(),patient_id:t,registered_by:p}),$("#"+a).val(""))}),console.log(i),i.length>0&&e.post("/api/VitalSignRegister",i).then(function(e){var t=e.data.msg,a=e.data.notification;0==e.data.status?d.error(a,t):d.success(a,t)})},o.getPatientData=function(e){console.log(e),o.selectedPatient=e},o.getPatientData1=function(e){console.log(e),o.selectedPatient=e},o.x_axis=[],o.y_axis=[],o.viewVitals=function(t){console.log(t),e.get("/api/viewVitals/"+t).then(function(e){o.vitalData=e.data;for(var t=0;t<o.vitalData.length;t++)o.x_axis.push(e.data[t].time_attended),o.y_axis.push(e.data[t].Body_temperature);console.log(o.y_axis),o.labels=o.x_axis,o.data=o.y_axis})},o.viewVitals=function(t){console.log(t),e.get("/api/viewVitals/"+t).then(function(e){o.vitalData=e.data,o.x_axis=[],o.y_axis=[];for(var t=0;t<o.vitalData.length;t++)o.x_axis.push(e.data[t].time_attended),o.y_axis.push(e.data[t].Body_temperature);console.log(o.y_axis),o.labels=o.x_axis,o.data=o.y_axis})},o.viewDiastolicPressure=function(t){console.log(t),e.get("/api/viewDiastolicPressure/"+t).then(function(e){o.vitalData=e.data,o.vitalData=e.data,o.valuex=[],o.valuey=[];for(var t=0;t<o.vitalData.length;t++)o.valuex.push(e.data[t].time_attended),o.valuey.push(e.data[t].Diastolic_pressure);console.log(o.valuey),o.labels=o.valuex,o.data=o.valuey})},o.viewTemperature=function(t){console.log(t),e.get("/api/viewTemperature/"+t).then(function(e){o.vitalData=e.data,o.vitalData=e.data,o.valuex=[],o.valuey=[];for(var t=0;t<o.vitalData.length;t++)o.valuex.push(e.data[t].time_attended),o.valuey.push(e.data[t].Body_temperature);console.log(o.valuey),o.labels=o.valuex,o.data=o.valuey})},o.viewPulseRate=function(t){console.log(t),e.get("/api/viewPulseRate/"+t).then(function(e){o.vitalData=e.data,o.vitalData=e.data,o.valuex=[],o.valuey=[];for(var t=0;t<o.vitalData.length;t++)o.valuex.push(e.data[t].time_attended),o.valuey.push(e.data[t].Pulse_rate);console.log(o.valuey),o.labels=o.valuex,o.data=o.valuey})},o.patients=function(){e.get("/api/vitalSignsUsers/"+u).then(function(e){o.observationusers=e.data})},o.cancel=function(){o.patients()},o.patients(),o.viewSystolicPressure=function(t){console.log(t),e.get("/api/viewSystolicPressure/"+t).then(function(e){o.vitalData=e.data,o.valueX=[],o.ValueY=[];for(var t=0;t<o.vitalData.length;t++)o.valueX.push(e.data[t].time_attended),o.ValueY.push(e.data[t].Systolic_pressure);console.log(o.ValueY),o.labels=o.valueX,o.data=o.ValueY})},o.alertMe=function(){setTimeout(function(){$window.swal("Use proper ways to avoid Mistakes",username,"error")})},o.model={name:"Tabs"},o.oneAtATime=!0;var m;o.ngModelOptionsSelected=function(e){if(!arguments.length)return m;m=e},o.modelOptions={debounce:{default:500,blur:250},getterSetter:!0},o.status={isCustomHeaderOpen:!1,isFirstOpen:!0,isFirstDisabled:!1}})}(),function(){"use strict";angular.module("authApp").controller("vitalModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){console.log(s),e.vitalQue=s;a.currentUser.id,a.currentUser.facility_id;t.get("/api/getVitals").then(function(t){e.Vitals=t.data})}])}(),function(){"use strict";angular.module("authApp").controller("admissionModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.admissionDetails=s,e.users=s;var r=a.currentUser.id,o=a.currentUser.facility_id,l=s.bill_id,d=s.id;angular.element(document).ready(function(){t.post("/api/getConsultation",{dept_id:d,patient_category_id:l,facility_id:o}).then(function(t){e.consultations=t.data})}),e.admitPatient=function(e,a){if(null!=a){var i={patient_id:e.patient_id,admission_status_id:1,facility_id:e.facility_id,user_id:r,instructions:a.instructions,prescriptions:a.prescriptions,ward_id:e.ward_id};t.post("/api/admitPatient",i).then(function(t){0==t.data.status?swal(t.data.data,"","error"):swal("Patient successfully admitted to "+e.ward_full_name,"","success")}),n.dismiss()}else swal("Ooopss Sorry!","Please write admission notes and prescription instructions","error")},e.internalTransfer=function(a,i){if(a.sender_clinic_id!=a.id){var s={sender_clinic_id:a.sender_clinic_id,doctor_requesting_id:r,summary:i.instructions,consultation_id:a.item_id,received:0,visit_id:a.visit_id,dept_id:d};t.post("/api/postToClinics",s).then(function(e){}),e.notes=null,swal(a.first_name+" "+a.middle_name+" "+a.last_name+" transferred to "+a.department_name,"","success"),n.dismiss()}else swal("Oops you can not transfer this patient to "+a.department_name,"you can only transfer patients to other clinics, not your clinic","error")}}])}(),function(){"use strict";angular.module("authApp").controller("ipdController",["$scope","$http","$state","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){e.selectedPatient=r,e.patientBills=r;var o=i.currentUser.id,l=i.currentUser.facility_id,d=r.patient_id;e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t},e.toto=function(){for(var t=0,a=0;a<e.patientBills.length;a++)t+=e.patientBills[a].quantity*e.patientBills[a].price-e.patientBills[a].discount;return t},e.cancelBill=function(e){t.post("/api/cancelBillItem",{id:e.id,patient_id:e.patient_id,facility_id:l,user_id:o}).then(function(t){swal(e.item_name+" Has been cancelled for this patient","","success")})},e.oneAtATime=!0,e.closeModal=function(){s.dismiss()},e.templates=[{name:"Admission",url:"admission.html"},{name:"Internal Referral",url:"internal.html"},{name:"External Referral",url:"referral.html"},{name:"Deceased",url:"deceased.html"}];var c=[];e.showSearch=function(e){return t.post("/api/getOpdPatients",{facility_id:l}).then(function(e){c=e.data}),c};var u=[];e.showSearch=function(e){return t.post("/api/getOpdInvPatients",{facility_id:l}).then(function(e){u=e.data}),u},angular.element(document).ready(function(){e.setTab(1),t.post("/api/previousVisits",{patient_id:d}).then(function(t){e.patientsVisits=t.data}),t.post("/api/getResults",{patient_id:d,dept_id:3}).then(function(t){e.radiology=t.data}),t.post("/api/getResults",{patient_id:d,dept_id:2}).then(function(t){e.labInvestigations=t.data})}),e.getPatientReport=function(a){t.post("/api/prevHistory",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevHistory=t.data}),t.post("/api/getPrevDiagnosis",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevDiagnosis=t.data}),t.post("/api/getPrevRos",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevRos=t.data}),t.post("/api/getPrevBirth",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevBirth=t.data}),t.post("/api/getPrevObs",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevObs=t.data}),t.post("/api/getPrevFamily",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevFamily=t.data}),t.post("/api/getPrevPhysical",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevPhysical=t.data}),t.post("/api/getInvestigationResults",{patient_id:a.patient_id,date_attended:a.date_attended,dept_id:2}).then(function(t){e.labInvestigations=t.data}),t.post("/api/getInvestigationResults",{patient_id:a.patient_id,date_attended:a.date_attended,dept_id:3}).then(function(t){e.radiologyResults=t.data}),t.post("/api/getPastMedicine",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevMedicines=t.data}),t.post("/api/getPastProcedures",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.pastProcedures=t.data})},e.getVitalTime=function(a,i){t.post("/api/vitalsTime",{patient_id:i.patient_id,date_attended:a.date_attended}).then(function(t){e.vitalsTime=t.data})};var p=[];e.getVitalData=function(e,a){t.post("/api/patientVitals",{patient_id:a.patient_id,time_attended:e.time_attended}).then(function(e){p=e.data;var t=angular.extend({},p,a);n.open({templateUrl:"/views/modules/ClinicalServices/vitalSigns.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return t}}})})},e.getDiagnosis=function(a){t.post("/api/getPrevDiagnosis",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevDiagnosis=t.data})},e.getHistory=function(a){t.post("/api/prevHistory",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevHistory=t.data})},e.getRos=function(a){t.post("/api/getPrevRos",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevRos=t.data})},e.getBirth=function(a){t.post("/api/getPrevBirth",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevBirth=t.data})},e.getObs=function(a){t.post("/api/getPrevObs",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevObs=t.data})},e.getFamily=function(a){t.post("/api/getPrevFamily",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevFamily=t.data})},e.getPhysical=function(a){t.post("/api/getPrevPhysical",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevPhysical=t.data})};var _=[];e.complaints=function(e){return t.post("/api/chiefComplaints",{search:e}).then(function(e){_=e.data}),_};var m=[];e.showCardio=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Cardiovascular"}).then(function(e){m=e.data}),m};var f=[];e.showRespiratory=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Respiratory"}).then(function(e){f=e.data}),f};var g=[];e.showGastro=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Gastrointerstinal"}).then(function(e){g=e.data}),g};var h=[];e.showMusculo=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Musculoskeletal"}).then(function(e){h=e.data}),h};var v=[];e.showGenito=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Genitourinary"}).then(function(e){v=e.data}),v};var y=[];e.showCNS=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Central Nervous System"}).then(function(e){y=e.data}),y};var w=[];e.showEndo=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Endocrine"}).then(function(e){w=e.data}),w};var b=[];e.showAllergy=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Allergy"}).then(function(e){b=e.data}),b};P=[];e.showMedication=function(e){return t.post("/api/pastMedications",{search:e,category:"Medication"}).then(function(e){P=e.data}),P};var P=[];e.showIllness=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Past Medical History"}).then(function(e){P=e.data}),P};var S=[];e.showAdmission=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Admission History"}).then(function(e){S=e.data}),S};var A=[];e.showImmune=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Immunisation"}).then(function(e){A=e.data}),A};var D=[];e.showInspection=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Inspection"}).then(function(e){D=e.data}),D};var E=[];e.showPalpation=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Palpation"}).then(function(e){E=e.data}),E};var C=[];e.showPercussion=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Percussion"}).then(function(e){C=e.data}),C};var T=[];e.showAuscultation=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Auscultation"}).then(function(e){T=e.data}),T};var O=[];e.showDiagnosis=function(e){return t.post("/api/getDiagnosis",{search:e}).then(function(e){O=e.data}),O},e.allergyChecker=function(e){t.post("/api/getAllergy",{patient_id:e.patient_id}).then(function(e){swal("This Patient is allergic to "+e.data[0].descriptions,"","info")})},e.getSubDepts=function(a){t.post("/api/getSubDepts",{department_id:a}).then(function(t){e.subDepartments=t.data})},e.getTests=function(a,i){if(0!=angular.isDefined(i)){var n=i.bill_id;3==i.main_category_id&&(n=1),t.post("/api/getPanels",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.panels=t.data}),t.post("/api/getSingleTests",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.singleTests=t.data}),t.post("/api/getTests",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.labTests=t.data,t.data.length>0?swal("Items with red marks are currently not available..","But You can still order them if necessary","info"):swal("If  no Tests displayed under this category..","Please, Contact Lab manager","info")})}else swal("Please...select Patient first","","error")},e.investigationOrders=[],e.unavailableOrders=[],e.orders=function(t,a,i){var n="";if(null!=i.patient_id){if(1==a){for(s=0;s<e.investigationOrders.length;s++)if(e.investigationOrders[s].item_id==t.item_id)return void swal(t.item_name+"  already in your order list!");if(1!=t.on_off){for(var s=0;s<e.unavailableOrders.length;s++)if(e.unavailableOrders[s].item_id==t.item_id)return void swal(t.item_name+"  already in your order list!");return void e.unavailableOrders.push({facility_id:l,visit_date_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name})}1!=i.main_category_id&&(n=i.bill_id),e.investigationOrders.push({requesting_department_id:5,admission_id:i.admission_id,facility_id:l,item_type_id:t.item_type_id,item_price_id:t.item_price_id,status_id:1,account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name,priority:"",clinical_note:"",payment_filter:n}),console.log(e.investigationOrders)}}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveInvestigation=function(a){if(""!=e.investigationOrders||null!=e.unavailableOrders){for(var i=0;i<e.investigationOrders.length;i++)e.investigationOrders[i].priority=a.priority,e.investigationOrders[i].clinical_note=a.clinical_note;""!=e.investigationOrders&&(t.post("/api/postInvestigations",e.investigationOrders).then(function(e){}),e.investigationOrders=[]),t.post("/api/postUnavailableInvestigations",e.unavailableOrders).then(function(e){}),swal("Investigation order successfully saved!","","success"),e.unavailableOrders=[],$("#clinical_summary").val(""),$("#priority").val(""),$("#x").val(""),$("#prio_radi").val("")}else swal("You dont have Items to save!","Please select Items first!")},e.getLabResults=function(a){var i={patient_id:a.patient_id,date_attended:a.date_attended,dept_id:a.dept_id};t.post("/api/getInvestigationResults",i).then(function(t){e.labResults=t.data})},e.getRadResults=function(a){var i={patient_id:a.patient_id,date_attended:a.date_attended,dept_id:a.dept_id};t.post("/api/getInvestigationResults",i).then(function(t){e.radResults=t.data})},e.complaintz=[],e.addComplaint=function(t,a,i){if(null!=i.patient_id){for(var n=0;n<e.complaintz.length;n++)if(e.complaintz[n].id==t.id)return void swal(t.description+" already in your wish list!");e.complaintz.push({admission_id:i.admission_id,patient_id:i.patient_id,facility_id:l,visit_date_id:i.account_id,user_id:o,description:t.name,id:t.id,duration:a.durationqty,duration_unit:a.durationunit,status:"Chief Complaints"}),$("#complaint").val(""),$("#duration_qty").val(""),$("#duration_unit").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveComplaints=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].other_complaints=i.other_complaints,a[n].hpi=i.hpi;t.post("/api/postHistory",a).then(function(e){}),swal("Complaints successfully saved!","","success"),e.complaintz=[],$("#other_complaints").val(""),$("#hpi").val("")}else swal("Oops Data not saved!","Please fill all necessary fields, click 'Add' Button then 'Save Complaints' Button to save data..","error")},e.rosTemp=[],e.reviewOfSystems=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems2=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems3=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems4=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems5=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems6=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems7=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveRoS=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].review_summary=i;t.post("/api/postRoS",a).then(function(e){}),swal("Review of systems data successfully Saved!","","success"),e.rosTemp=[]}else swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.pastTemp=[],e.pastMedicals=function(t,a){null!=a.patient_id?e.pastTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals3=function(t,a){null!=a.patient_id?e.pastTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals4=function(t,a){null!=a.patient_id?e.pastTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals5=function(t,a){null!=a.patient_id?e.pastTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.savePastMedical=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].other_past_medicals=i;t.post("/api/postPastMed",a).then(function(e){}),swal("Past medical history data successfully Saved!","","success"),e.pastTemp=[]}else swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.saveBirthHistory=function(e,a){if(null!=a.patient_id){var i={admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,antenatal:e.antenatal,natal:e.natal,post_natal:e.post_natal,nutrition:e.nutrition,growth:e.growth,development:e.development};t.post("/api/birthHistory",i).then(function(e){swal("Birth history data Successfully Saved!","","success")}),$("#antenatal").val(""),$("#natal").val(""),$("#post_natal").val(""),$("#nutrition").val(""),$("#growth").val(""),$("#development").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveObsGyn=function(e,a){if(null!=a.patient_id){var i={admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,menarche:e.menarche,menopause:e.menopause,menstrual_cycles:e.menstrual_cycles,pad_changes:e.pad_changes,recurrent_menstruation:e.recurrent_menstruation,contraceptives:e.contraceptives,pregnancy:e.pregnancy,lnmp:e.lnmp,gravidity:e.gravidity,parity:e.parity,living_children:e.living_children};t.post("/api/postObs",i).then(function(e){swal("Obstetrics and gynaecological data Successfully Saved!","","success")}),$("#menarche").val(""),$("#menopause").val(""),$("#menstrual_cycles").val(""),$("#pads").val(""),$("#recurrent_menstruation").val(""),$("#contraceptives").val(""),$("#pregnancy").val(""),$("#lnmp").val(""),$("#gravidity").val(""),$("#parity").val(""),$("#living_children").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.removeFromSelection=function(e,t){var a=t.indexOf(e);t.splice(a,1)},e.physicalMusculoskeletal=[],e.physicalRespiratory=[],e.physicalCardiovascular=[],e.physicalGastrointestinal=[],e.physicalGenitourinary=[],e.physicalCNS=[],e.physicalEndocrine=[],e.physicalMusculo=function(t,a,i){null!=a.patient_id?e.physicalMusculoskeletal.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalResp=function(t,a,i){null!=a.patient_id?e.physicalRespiratory.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalCardio=function(t,a,i){null!=a.patient_id?e.physicalCardiovascular.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalGastro=function(t,a,i){null!=a.patient_id?e.physicalGastrointestinal.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalGenito=function(t,a,i){null!=a.patient_id?e.physicalGenitourinary.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalCns=function(t,a,i){null!=a.patient_id?e.physicalCNS.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalEndo=function(t,a,i){null!=a.patient_id?e.physicalEndocrine.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.savePhysicalExamination=function(a){""!=a?(t.post("/api/postPhysical",a).then(function(e){}),swal(a[0].system+"  system data successfully Saved!","","success"),e.physicalMusculoskeletal=[],e.physicalRespiratory=[],e.physicalCardiovascular=[],e.physicalGastrointestinal=[],e.physicalGenitourinary=[],e.physicalCNS=[],e.physicalEndocrine=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.saveLocalExams=function(e,a){if(null!=a){var i={admission_id:e.admission_id,patient_id:e.patient_id,visit_date_id:e.account_id,user_id:o,facility_id:l,local_examination:a};t.post("/api/postLocalPhysical",i).then(function(e){}),swal("Local Examination","data for this patient saved","success"),$("#local_exam").val("")}else swal("Please write examination for this patient first","","error")},e.saveSocialCommunity=function(e,a){if(null!=a.patient_id){var i={patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,chronic_illness:e.chronic_illness,substance_abuse:e.substance_abuse,adoption:e.adoption,others:e.others};t.post("/api/familyHistory",i).then(function(e){swal("Family and social history data successfully Saved!","","success")}),$("#chronic_illness").val(""),$("#substance_abuse").val(""),$("#adoption").val(""),$("#others").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.diagnosisTemp=[],e.addProv=function(t,a,i){null!=a.patient_id?e.diagnosisTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.addDiff=function(t,a,i){null!=a.patient_id?e.diagnosisTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.addConf=function(t,a,i){null!=a.patient_id?e.diagnosisTemp.push({admission_id:a.admission_id,patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveDiagnosis=function(a){""!=a?(t.post("/api/postDiagnosis",a).then(function(e){swal("Diagnosis data successfully Saved!","","success")}),e.diagnosisTemp=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},t.get("/api/getWards/"+l).then(function(t){e.wards=t.data}),t.get("/api/getSpecialClinics/"+l).then(function(t){e.clinics=t.data});var I=[];e.showFacility=function(e){return t.get("/api/getFacilities",{searchKey:e}).then(function(e){I=e.data}),I},e.exReferral=function(a,i,n){if(null!=i&&null!=n){var s={summary:n.summary,patient_id:a.patient_id,from_facility_id:l,sender_id:o,to_facility_id:i.id,referral_type:1,status:1};t.post("/api/postReferral",s).then(function(t){e.ref,swal("Patient Referred successfully","","success")})}else swal("Please fill all fields and click save","","error")},e.internalTransfer=function(e,t){var a={sender_clinic_id:5,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,medical_record_number:t.medical_record_number,gender:t.gender,dob:t.dob,visit_id:t.account_id},i=angular.extend({},e,a);n.open({templateUrl:"/views/modules/ClinicalServices/internalTransfer.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return i}}});s.dismiss()},e.contNotes=function(a,i){if(null!=a){var n={notes:a.notes,patient_id:i.patient_id,user_id:o,facility_id:l};t.post("/api/postNotes",n).then(function(e){}),t.post("/api/getNotes",{patient_id:i.patient_id}).then(function(t){e.prevNotes=t.data}),e.note=null,swal("Continuation notes successfully saved!","","success")}else swal("Please write continuation notes for this patient","then click save notes button","error")};var M=[];e.medicines=[],e.medicinesOs=[],e.searchItems=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getMedicine",{search:e,facility_id:l,patient_category_id:i}).then(function(e){M=e.data}),M;swal("Please search patient to be prescribed before searching Medicine!")}};var U=[];e.checkDosage=function(a,i){var n=a.item_name;t.post("/api/dosageChecker",{item_id:a.item_id,patient_id:i}).then(function(t){if(console.log(t.data),t.data.length>0){var a=t.data[0].duration-t.data[0].days;e.dosageCheck=t.data,swal("ATTENTION",n+" In Dosage Progress "+a+" day(s) remained to Complete this Dosage","info")}})},e.addMedicine=function(a,i,n){var s="",r=i.main_category_id,d=a.dose*a.duration*24/a.frequency;if(null!=i)if(null!=n)if(null!=a.instructions){for(var c=0;c<e.medicines.length;c++)if(e.medicines[c].item_id==n.item_id)return void swal(n.item_name+" already in your order list!");1!=r&&0==n.exemption_status&&(s=i.bill_id),3==r&&1==n.exemption_status&&(s=""),2==r&&1==n.exemption_status&&(s=i.bill_id),3==r&&(r=1),t.post("/api/balanceCheck",{main_category_id:r,item_id:n.item_id,facility_id:l}).then(function(t){if(U=t.data,console.log(U),U.length>0&&U[0].balance>=d)e.medicines.push({facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:d,status_id:1,dose:a.dose,frequency:a.frequency,duration:a.duration,instructions:a.instructions,out_of_stock:"",payment_filter:s,account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name,dose_formulation:n.dose_formulation});else if(U.length<1||U[0].balance<d){if(1!=confirm("This Item is not available in Store..Do you want to prescribe anyway?"))return void swal("canceled","Choose different Item for Prescription","info");for(var r=0;r<e.medicinesOs.length;r++)if(e.medicinesOs[r].item_id==n.item_id)return void swal("Item already in your order list!");e.medicinesOs.push({facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:d,status_id:1,dose:a.dose,frequency:a.frequency,duration:a.duration,instructions:a.instructions,out_of_stock:"OS",account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name}),swal("Item added under Out of Stock category","","success")}}),$("#item_search").val(""),$("#dose").val(""),$("#frequency").val(""),$("#duration").val(""),$("#instruction").val("")}else swal("Please Write Instructions and click 'Add to List' Button","","error");else swal("Please search and select medicine!");else swal("Please search and select Patient to prescribe")},e.saveMedicine=function(){""!=e.medicines||""!=e.medicinesOs?(""!=e.medicines&&(t.post("/api/postMedicines",e.medicines).then(function(e){}),e.medicines=[]),t.post("/api/outOfStockMedicine",e.medicinesOs).then(function(e){}),swal("Patient successfully prescribed!","","success"),e.medicinesOs=[]):swal("No Items to Save,Please choose items..","","error")},e.prevMedics=function(a){t.post("/api/getPrevMedicine",{patient_id:a.patient_id}).then(function(t){e.prevMedicines=t.data})},e.prevProcedure=function(a){t.post("/api/getPrevProcedures",{patient_id:a.patient_id}).then(function(t){e.prevProcedures=t.data})};var R=[],B=[];e.supplies=[],e.suppliesOS=[],e.searchMediSupplies=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getMedicalSupplies",{search:e,facility_id:l,patient_category_id:i}).then(function(e){R=e.data}),R;swal("Please search patient before searching medical supplies!")}},e.addSupplies=function(a,i,n){var s="",r=a.main_category_id,d=i;if(null!=a)if(null!=n){for(var c=0;c<e.supplies.length;c++)if(e.supplies[c].item_id==n.item_id)return void swal(n.item_name+" already in your order list!","","info");1!=r&&0==n.exemption_status&&(s=a.bill_id),3==r&&1==n.exemption_status&&(s=""),2==r&&1==n.exemption_status&&(s=a.bill_id),3==r&&(r=1),t.post("/api/balanceCheck",{main_category_id:r,item_id:n.item_id,facility_id:l}).then(function(t){if((B=t.data).length<1)swal(n.item_name+" is not available in store.","Contact store manager","info");else if(B.length>0&&B[0].balance>=d)e.supplies.push({out_of_stock:"",payment_filter:s,admission_id:"",facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:i,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name});else if(B.length<1||B[0].balance<d){if(1!=confirm("This Item is not available in Store..Do you want to select it anyway?","","info"))return void swal("canceled","Choose different Item","info");for(var r=0;r<e.suppliesOS.length;r++)if(e.suppliesOS[r].item_id==n.item_id)return void swal(n.item_name+" already in your order list!");e.suppliesOS.push({out_of_stock:"OS",payment_filter:s,admission_id:"",facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:i,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name}),swal("Item added under Out of Stock category","","success")}}),$("#supplies").val(""),$("#qty").val("")}else swal("Please search and select Medical supplies!","","error");else swal("Please search and select Patient","","error")},e.saveSupplies=function(){""!=e.supplies||""!=e.suppliesOS?(""!=e.supplies&&(t.post("/api/postMedicalSupplies",e.supplies).then(function(e){}),e.supplies=[]),t.post("/api/outOfStockMedicalSupplies",e.suppliesOS).then(function(e){}),swal("Patient's medical supplies successfully saved!","","success"),e.suppliesOS=[]):swal("No Items to Save,Please choose items..","","error")};var F=[];e.procedures=[],e.searchProcedures=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getPatientProcedures",{search:e,facility_id:l,patient_category_id:i}).then(function(e){F=e.data}),F;swal("Please search patient before searching procedures!")}},e.getDefaultProcedures=function(a){var i=a.bill_id;null!=i?(3==a.main_category_id&&(i=1),t.post("/api/getProcedures",{facility_id:l,patient_category_id:i}).then(function(t){e.defaultProcedures=t.data})):swal("Please search patient before searching procedures!")},e.addProcedure=function(t,a){var i="",n=a.main_category_id;if(null!=a.patient_id)if(null!=t.item_id){for(var s=0;s<e.procedures.length;s++)if(e.procedures[s].item_id==t.item_id)return void swal(t.item_name+" already in your order list!","","info");1!=n&&0==t.exemption_status&&(i=a.bill_id),3==n&&1==t.exemption_status&&(i=""),2==n&&1==t.exemption_status&&(i=a.bill_id),e.procedures.push({payment_filter:i,admission_id:a.admission_id,facility_id:l,item_type_id:t.item_type_id,item_price_id:t.price_id,quantity:1,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name})}else swal("Please search and select Procedure!");else swal("Please search and select Patient to prescribe")},e.saveProcedures=function(a){t.post("/api/postPatientProcedures",a).then(function(e){}),swal("Patient procedures successfully saved!","","success"),e.procedures=[]},e.deceased=function(e,a){if(0!=angular.isDefined(a)){var i={first_name:e.first_name,middle_name:e.middle_name,last_name:e.last_name,patient_id:e.patient_id,user_id:o,facility_id:l,immediate_cause:a.immediate_cause,underlying_cause:a.underlying_cause,dept_id:5};t.post("/api/postDeceased",i).then(function(t){0==t.data.status?swal(t.data.data,"","error"):swal(e.first_name+" "+e.last_name+" sent to Last office","","success")}),$("#immediate_cause").val(""),$("#underlying_cause").val(""),swal(e.first_name+" "+e.last_name+" sent to Last office","","success")}else swal("An error occurred","Data not saved...Please write causes of death and click send to last office button","error")}}])}(),function(){angular.module("authApp").controller("ipdQueueController",function(e,t,a,i,n){i.currentUser.id;var s=i.currentUser.facility_id;e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t},angular.element(document).ready(function(){a.post("/api/getIpdPatients",{facility_id:s}).then(function(t){e.inpatients=t.data})});var r=[];e.showSearch=function(e){return a.post("/api/getAllIpdPatients",{searchKey:e,facility_id:s}).then(function(e){r=e.data}),r},e.getIpdModal=function(e){var t=e;n.open({templateUrl:"/views/modules/ClinicalServices/in_patients.html",size:"lg",animation:!0,controller:"ipdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})},e.getTreatmentModal=function(e){var t=e;n.open({templateUrl:"/views/modules/ClinicalServices/treatmentModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})},e.billsCancellation=function(){a.post("/api/getBillList",{facility_id:s}).then(function(t){e.patientBill=t.data})},e.getBillModal=function(e){a.post("/api/cancelPatientBill",{patient_id:e.patient_id,facility_id:s}).then(function(e){var t=e.data;n.open({templateUrl:"/views/modules/ClinicalServices/billCancellationModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})}})}(),function(){"use strict";angular.module("authApp").controller("opdController",["$scope","$http","$state","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){e.selectedPatient=r,e.patientBills=r;var o=i.currentUser.id,l=i.currentUser.facility_id,d=r.patient_id;e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t},e.toto=function(){for(var t=0,a=0;a<e.patientBills.length;a++)t+=e.patientBills[a].quantity*e.patientBills[a].price-e.patientBills[a].discount;return t},e.cancelBill=function(e){t.post("/api/cancelBillItem",{id:e.id,patient_id:e.patient_id,facility_id:l,user_id:o}).then(function(t){swal(e.item_name+" Has been cancelled for this patient","","success")})},e.oneAtATime=!0,e.closeModal=function(){s.dismiss()},e.templates=[{name:"Admission",url:"admission.html"},{name:"Internal Referral",url:"internal.html"},{name:"External Referral",url:"referral.html"},{name:"Deceased",url:"deceased.html"}];var c=[];e.showSearch=function(e){return t.post("/api/getOpdPatients",{facility_id:l}).then(function(e){c=e.data}),c};var u=[];e.showSearch=function(e){return t.post("/api/getOpdInvPatients",{facility_id:l}).then(function(e){u=e.data}),u},angular.element(document).ready(function(){e.setTab(1),t.post("/api/previousVisits",{patient_id:d}).then(function(t){e.patientsVisits=t.data}),t.post("/api/getResults",{patient_id:d,dept_id:3}).then(function(t){e.radiology=t.data}),t.post("/api/getResults",{patient_id:d,dept_id:2}).then(function(t){e.labInvestigations=t.data}),t.get("/api/getWards/"+l).then(function(t){e.wards=t.data}),t.get("/api/getSpecialClinics").then(function(t){e.clinics=t.data})}),e.getPatientReport=function(a){t.post("/api/prevHistory",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevHistory=t.data}),t.post("/api/getPrevDiagnosis",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevDiagnosis=t.data}),t.post("/api/getPrevRos",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevRos=t.data}),t.post("/api/getPrevBirth",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevBirth=t.data}),t.post("/api/getPrevObs",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevObs=t.data}),t.post("/api/getPrevFamily",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevFamily=t.data}),t.post("/api/getPrevPhysical",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevPhysical=t.data}),t.post("/api/prevInvestigationResults",{patient_id:a.patient_id,date_attended:a.date_attended,dept_id:2}).then(function(t){e.labInvestigationsz=t.data}),t.post("/api/getInvestigationResults",{patient_id:a.patient_id,date_attended:a.date_attended,dept_id:3}).then(function(t){e.radiologyResults=t.data}),t.post("/api/getPastMedicine",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevMedicines=t.data}),t.post("/api/getPastProcedures",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.pastProcedures=t.data}),t.post("/api/getAllergies",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.allergies=t.data})},e.getVitalTime=function(a,i){t.post("/api/vitalsTime",{patient_id:i.patient_id,date_attended:a.date_attended}).then(function(t){e.vitalsTime=t.data})};var p=[];e.getVitalData=function(e,a){t.post("/api/patientVitals",{patient_id:a.patient_id,time_attended:e.time_attended}).then(function(e){p=e.data;var t=angular.extend({},p,a);n.open({templateUrl:"/views/modules/ClinicalServices/vitalSigns.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return t}}})})};var _=[];e.complaints=function(e){return t.post("/api/chiefComplaints",{search:e}).then(function(e){_=e.data}),_};var m=[];e.showCardio=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Cardiovascular"}).then(function(e){m=e.data}),m};var f=[];e.showRespiratory=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Respiratory"}).then(function(e){f=e.data}),f};var g=[];e.showGastro=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Gastrointerstinal"}).then(function(e){g=e.data}),g};var h=[];e.showMusculo=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Musculoskeletal"}).then(function(e){h=e.data}),h};var v=[];e.showGenito=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Genitourinary"}).then(function(e){v=e.data}),v};var y=[];e.showCNS=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Central Nervous System"}).then(function(e){y=e.data}),y};var w=[];e.showEndo=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Endocrine"}).then(function(e){w=e.data}),w};var b=[];e.showAllergy=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Allergy"}).then(function(e){b=e.data}),b};P=[];e.showMedication=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Medication"}).then(function(e){P=e.data}),P};var P=[];e.showIllness=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Past Medical History"}).then(function(e){P=e.data}),P};var S=[];e.showAdmission=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Admission History"}).then(function(e){S=e.data}),S};var A=[];e.showImmune=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Immunisation"}).then(function(e){A=e.data}),A};var D=[];e.showInspection=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Inspection"}).then(function(e){D=e.data}),D};var E=[];e.showPalpation=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Palpation"}).then(function(e){E=e.data}),E};var C=[];e.showPercussion=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Percussion"}).then(function(e){C=e.data}),C};var T=[];e.showAuscultation=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Auscultation"}).then(function(e){T=e.data}),T};var O=[];e.showDiagnosis=function(e){return t.post("/api/getDiagnosis",{search:e}).then(function(e){O=e.data}),O},e.allergyChecker=function(e){t.post("/api/getAllergy",{patient_id:e.patient_id}).then(function(e){swal("This Patient is allergic to "+e.data[0].descriptions,"","info")})},e.getSubDepts=function(a){t.post("/api/getSubDepts",{department_id:a}).then(function(t){e.subDepartments=t.data})},e.getTests=function(a,i){if(0!=angular.isDefined(i)){var n=i.bill_id;3==i.main_category_id&&(n=1),t.post("/api/getPanels",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.panels=t.data}),t.post("/api/getSingleTests",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.singleTests=t.data}),t.post("/api/getTests",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.labTests=t.data,t.data.length>0?swal("Items with red marks are currently not available..","But You can still order them if necessary","info"):swal("If  no Tests displayed under this category..","Please, Contact Lab manager","info")})}else swal("Please...select Patient first","","error")},e.investigationOrders=[],e.unavailableOrders=[],e.orders=function(t,a,i){var n="";if(null!=i.patient_id){if(1==a){for(s=0;s<e.investigationOrders.length;s++)if(e.investigationOrders[s].item_id==t.item_id)return void swal(t.item_name+"  already in your order list!");if(1!=t.on_off){for(var s=0;s<e.unavailableOrders.length;s++)if(e.unavailableOrders[s].item_id==t.item_id)return void swal(t.item_name+"  already in your order list!");return void e.unavailableOrders.push({facility_id:l,visit_date_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name})}1!=i.main_category_id&&(n=i.bill_id),e.investigationOrders.push({requesting_department_id:1,admission_id:"",facility_id:l,item_type_id:t.item_type_id,item_price_id:t.item_price_id,status_id:1,account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name,priority:"",clinical_note:"",payment_filter:n}),console.log(e.investigationOrders)}}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveInvestigation=function(a){if(""!=e.investigationOrders||null!=e.unavailableOrders){for(var i=0;i<e.investigationOrders.length;i++)e.investigationOrders[i].priority=a.priority,e.investigationOrders[i].clinical_note=a.clinical_note;""!=e.investigationOrders&&(t.post("/api/postInvestigations",e.investigationOrders).then(function(e){}),e.investigationOrders=[]),t.post("/api/postUnavailableInvestigations",e.unavailableOrders).then(function(e){}),swal("Investigation order successfully saved!","","success"),e.unavailableOrders=[],$("#clinical_summary").val(""),$("#priority").val(""),$("#x").val(""),$("#prio_radi").val("")}else swal("You dont have Items to save!","Please select Items first!")},e.getLabResults=function(a){var i={patient_id:a.patient_id,date_attended:a.date_attended,dept_id:a.dept_id};t.post("/api/getInvestigationResults",i).then(function(t){e.labResults=t.data[0],e.labPanels=t.data[1]})},e.getPanelContents=function(a){t.post("/api/getPanelComponentResults",{item_id:a.item_id,order_id:a.order_id}).then(function(t){e.componentResults=t.data})},e.getRadResults=function(a){var i={patient_id:a.patient_id,date_attended:a.date_attended,dept_id:a.dept_id};t.post("/api/getInvestigationResults",i).then(function(t){e.radResults=t.data})},e.complaintz=[],e.addComplaint=function(t,a,i){if(null!=i.patient_id){for(var n=0;n<e.complaintz.length;n++)if(e.complaintz[n].id==t.id)return void swal(t.description+" already in your wish list!");e.complaintz.push({admission_id:"",patient_id:i.patient_id,facility_id:l,visit_date_id:i.account_id,user_id:o,description:t.name,id:t.id,duration:a.durationqty,duration_unit:a.durationunit,status:"Chief Complaints"}),$("#complaint").val(""),$("#duration_qty").val(""),$("#duration_unit").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveComplaints=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].other_complaints=i.other_complaints,a[n].hpi=i.hpi;t.post("/api/postHistory",a).then(function(e){}),swal("Complaints successfully saved!","","success"),e.complaintz=[],$("#other_complaints").val(""),$("#hpi").val("")}else swal("Oops Data not saved!","Please fill all necessary fields, click 'Add' Button then 'Save Complaints' Button to save data..","error")},e.rosTemp=[],e.reviewOfSystems=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#cardio").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems2=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#respiratory").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems3=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#gastrointestinal").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems4=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#musculoskeletal").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems5=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#genitourinary").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems6=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#cns").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems7=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#endocrine").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveRoS=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].review_summary=i;t.post("/api/postRoS",a).then(function(e){}),swal("Review of systems data successfully Saved!","","success"),e.rosTemp=[],$("#review_summary").val("")}else swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.pastTemp=[],e.pastMedicals=function(t,a){null!=a.patient_id?(e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#allergy").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals3=function(t,a){null!=a.patient_id?(e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#illness").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals4=function(t,a){null!=a.patient_id?(e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#admission").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals5=function(t,a){null!=a.patient_id?(e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#immunisation").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.savePastMedical=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].other_past_medicals=i;t.post("/api/postPastMed",a).then(function(e){}),swal("Past medical history data successfully Saved!","","success"),e.pastTemp=[],$("#other_past_medicals").val("")}else swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.saveBirthHistory=function(e,a){if(null!=a.patient_id){var i={admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,antenatal:e.antenatal,natal:e.natal,post_natal:e.post_natal,nutrition:e.nutrition,growth:e.growth,development:e.development};t.post("/api/birthHistory",i).then(function(e){swal("Birth history data Successfully Saved!","","success")}),$("#antenatal").val(""),$("#natal").val(""),$("#post_natal").val(""),$("#nutrition").val(""),$("#growth").val(""),$("#development").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveObsGyn=function(e,a){if(null!=a.patient_id){var i={admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,menarche:e.menarche,menopause:e.menopause,menstrual_cycles:e.menstrual_cycles,pad_changes:e.pad_changes,recurrent_menstruation:e.recurrent_menstruation,contraceptives:e.contraceptives,pregnancy:e.pregnancy,lnmp:e.lnmp,gravidity:e.gravidity,parity:e.parity,living_children:e.living_children};t.post("/api/postObs",i).then(function(e){swal("Obstetrics and gynaecological data Successfully Saved!","","success")}),$("#menarche").val(""),$("#menopause").val(""),$("#menstrual_cycles").val(""),$("#pads").val(""),$("#recurrent_menstruation").val(""),$("#contraceptives").val(""),$("#pregnancy").val(""),$("#lnmp").val(""),$("#gravidity").val(""),$("#parity").val(""),$("#living_children").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.removeFromSelection=function(e,t){var a=t.indexOf(e);t.splice(a,1)},e.physicalMusculoskeletal=[],e.physicalRespiratory=[],e.physicalCardiovascular=[],e.physicalGastrointestinal=[],e.physicalGenitourinary=[],e.physicalCNS=[],e.physicalEndocrine=[],e.physicalMusculo=function(t,a,i){null!=a.patient_id?(e.physicalMusculoskeletal.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#musc_inspect").val(""),$("#musc_palpate").val(""),$("#musc_percu").val(""),$("#musc_ausc").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalResp=function(t,a,i){null!=a.patient_id?(e.physicalRespiratory.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#resp_inspect").val(""),$("#resp_palpate").val(""),$("#resp_percus").val(""),$("#resp_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalCardio=function(t,a,i){null!=a.patient_id?(e.physicalCardiovascular.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#cardio_inspect").val(""),$("#cardio_palpate").val(""),$("#cardio_percus").val(""),$("#cardio_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalGastro=function(t,a,i){null!=a.patient_id?(e.physicalGastrointestinal.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#gastro_inspect").val(""),$("#gastro_palpate").val(""),$("#gastro_percus").val(""),$("#gastro_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalGenito=function(t,a,i){null!=a.patient_id?(e.physicalGenitourinary.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#genito_inspect").val(""),$("#genito_palpate").val(""),$("#genito_percus").val(""),$("#genito_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalCns=function(t,a,i){null!=a.patient_id?(e.physicalCNS.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#cns_inspect").val(""),$("#cns_palpate").val(""),$("#cns_percus").val(""),$("#cns_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalEndo=function(t,a,i){null!=a.patient_id?(e.physicalEndocrine.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#endo_inspect").val(""),$("#endo_palpate").val(""),$("#endo_percus").val(""),$("#endo_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.savePhysicalExamination=function(a){""!=a?(t.post("/api/postPhysical",a).then(function(e){}),swal(a[0].system+"  system data successfully Saved!","","success"),e.physicalMusculoskeletal=[],e.physicalRespiratory=[],e.physicalCardiovascular=[],e.physicalGastrointestinal=[],e.physicalGenitourinary=[],e.physicalCNS=[],e.physicalEndocrine=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.saveLocalExams=function(e,a){if(null!=a){var i={admission_id:"",patient_id:e.patient_id,visit_date_id:e.account_id,user_id:o,facility_id:l,local_examination:a};t.post("/api/postLocalPhysical",i).then(function(e){}),swal("Local Examination","data for this patient saved","success"),$("#local_exam").val("")}else swal("Please write examination for this patient first","","error")},e.saveSocialCommunity=function(e,a){if(null!=a.patient_id){var i={patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,chronic_illness:e.chronic_illness,substance_abuse:e.substance_abuse,adoption:e.adoption,others:e.others};t.post("/api/familyHistory",i).then(function(e){swal("Family and social history data successfully Saved!","","success")}),$("#chronic_illness").val(""),$("#substance_abuse").val(""),$("#adoption").val(""),$("#others").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.diagnosisTemp=[],e.addProv=function(t,a,i){null!=a.patient_id?e.diagnosisTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.addDiff=function(t,a,i){null!=a.patient_id?e.diagnosisTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.addConf=function(t,a,i){null!=a.patient_id?e.diagnosisTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveDiagnosis=function(a){""!=a?(t.post("/api/postDiagnosis",a).then(function(e){swal("Diagnosis data successfully Saved!","","success")}),e.diagnosisTemp=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")};var I=[];e.showFacility=function(e){return t.get("/api/getFacilities",{searchKey:e}).then(function(e){I=e.data}),I},e.exReferral=function(a,i,n){if(null!=i&&null!=n){var s={summary:n.summary,patient_id:a.patient_id,from_facility_id:l,sender_id:o,to_facility_id:i.id,referral_type:1,status:1};t.post("/api/postReferral",s).then(function(t){e.ref,swal("Patient Referred successfully","","success")})}else swal("Please fill all fields and click save","","error")},e.patientAdmission=function(e,t){if(0!=angular.isDefined(t)){var a=angular.extend({},e,t);n.open({templateUrl:"/views/modules/ClinicalServices/admission.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return a}}})}else swal("Oops! something went wrong..","Please search and select Patient then click ward button to admit patient!")},e.internalTransfer=function(e,t){var a=angular.extend({},e,t);n.open({templateUrl:"/views/modules/ClinicalServices/internalTransfer.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return a}}});s.dismiss()};var M=[];e.medicines=[],e.medicinesOs=[],e.searchItems=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getMedicine",{search:e,facility_id:l,patient_category_id:i}).then(function(e){M=e.data}),M;swal("Please search patient to be prescribed before searching Medicine!")}};var U=[];e.checkDosage=function(a,i){var n=a.item_name;t.post("/api/dosageChecker",{item_id:a.item_id,patient_id:i}).then(function(t){if(t.data.length>0){var a=t.data[0].duration-t.data[0].days;e.dosageCheck=t.data,swal("ATTENTION",n+" In Dosage Progress "+a+" day(s) remained to Complete a Dosage","info")}})},e.addMedicine=function(a,i,n){var s="",r=i.main_category_id,d=a.dose*a.duration*24/a.frequency;if(null!=i)if(null!=n)if(null!=a.instructions){for(var c=0;c<e.medicines.length;c++)if(e.medicines[c].item_id==n.item_id)return void swal(n.item_name+" already in your order list!");1!=r&&0==n.exemption_status&&(s=i.bill_id),3==r&&1==n.exemption_status&&(s=""),2==r&&1==n.exemption_status&&(s=i.bill_id),3==r&&(r=1),t.post("/api/balanceCheck",{main_category_id:r,item_id:n.item_id,facility_id:l}).then(function(t){if((U=t.data).length<1)swal(n.item_name+" is not available in store.","Contact store manager","info");else if(U.length>0&&U[0].balance>=d)e.medicines.push({facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:d,status_id:1,dose:a.dose,frequency:a.frequency,duration:a.duration,instructions:a.instructions,out_of_stock:"",payment_filter:s,account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name,dose_formulation:n.dose_formulation});else if(U.length<1||U[0].balance<d){if(1!=confirm("This Item is not available in Store..Do you want to prescribe anyway?"))return void swal("canceled","Choose different Item for Prescription","info");for(var r=0;r<e.medicinesOs.length;r++)if(e.medicinesOs[r].item_id==n.item_id)return void swal("Item already in your order list!");e.medicinesOs.push({facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:d,status_id:1,dose:a.dose,frequency:a.frequency,duration:a.duration,instructions:a.instructions,out_of_stock:"OS",account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name}),swal("Item added under Out of Stock category","","success")}}),$("#item_search").val(""),$("#dose").val(""),$("#frequency").val(""),$("#duration").val(""),$("#instruction").val("")}else swal("Please Write Instructions and click 'Add to List' Button","","error");else swal("Please search and select medicine!");else swal("Please search and select Patient to prescribe")},e.saveMedicine=function(){""!=e.medicines||""!=e.medicinesOs?(""!=e.medicines&&(t.post("/api/postMedicines",e.medicines).then(function(e){}),e.medicines=[]),t.post("/api/outOfStockMedicine",e.medicinesOs).then(function(e){}),swal("Patient successfully prescribed!","","success"),e.medicinesOs=[]):swal("No Items to Save,Please choose items..","","error")},e.prevMedics=function(a){t.post("/api/getPrevMedicine",{patient_id:a.patient_id}).then(function(t){e.prevMedicines=t.data})},e.prevProcedure=function(a){t.post("/api/getPrevProcedures",{patient_id:a.patient_id}).then(function(t){e.prevProcedures=t.data})};var R=[],B=[];e.supplies=[],e.suppliesOS=[],e.searchMediSupplies=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getMedicalSupplies",{search:e,facility_id:l,patient_category_id:i}).then(function(e){R=e.data}),R;swal("Please search patient before searching medical supplies!")}},e.addSupplies=function(a,i,n){var s="",r=a.main_category_id,d=i;if(null!=a)if(null!=n){for(var c=0;c<e.supplies.length;c++)if(e.supplies[c].item_id==n.item_id)return void swal(n.item_name+" already in your order list!","","info");1!=r&&0==n.exemption_status&&(s=a.bill_id),3==r&&1==n.exemption_status&&(s=""),2==r&&1==n.exemption_status&&(s=a.bill_id),3==r&&(r=1),t.post("/api/balanceCheck",{main_category_id:r,item_id:n.item_id,facility_id:l}).then(function(t){if((B=t.data).length<1)swal(n.item_name+" is not available in store.","Contact store manager","info");else if(B.length>0&&B[0].balance>=d)e.supplies.push({out_of_stock:"",payment_filter:s,admission_id:"",facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:i,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name});else if(B.length<1||B[0].balance<d){if(1!=confirm("This Item is not available in Store..Do you want to select it anyway?","","info"))return void swal("canceled","Choose different Item","info");for(var r=0;r<e.suppliesOS.length;r++)if(e.suppliesOS[r].item_id==n.item_id)return void swal(n.item_name+" already in your order list!");e.suppliesOS.push({out_of_stock:"OS",payment_filter:s,admission_id:"",facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:i,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name}),swal("Item added under Out of Stock category","","success")}}),$("#supplies").val(""),$("#qty").val("")}else swal("Please search and select Medical supplies!","","error");else swal("Please search and select Patient","","error")},e.saveSupplies=function(){""!=e.supplies||""!=e.suppliesOS?(""!=e.supplies&&(t.post("/api/postMedicalSupplies",e.supplies).then(function(e){}),e.supplies=[]),t.post("/api/outOfStockMedicalSupplies",e.suppliesOS).then(function(e){}),swal("Patient's medical supplies successfully saved!","","success"),e.suppliesOS=[]):swal("No Items to Save,Please choose items..","","error")};var F=[];e.procedures=[],e.searchProcedures=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getPatientProcedures",{search:e,facility_id:l,patient_category_id:i}).then(function(e){F=e.data}),F;swal("Please search patient before searching procedures!")}},e.getDefaultProcedures=function(a){var i=a.bill_id;null!=i?(3==a.main_category_id&&(i=1),t.post("/api/getProcedures",{facility_id:l,patient_category_id:i}).then(function(t){e.defaultProcedures=t.data})):swal("Please search patient before searching procedures!")},e.addProcedure=function(t,a){var i="",n=a.main_category_id;if(null!=a.patient_id)if(null!=t.item_id){for(var s=0;s<e.procedures.length;s++)if(e.procedures[s].item_id==t.item_id)return void swal(t.item_name+" already in your order list!","","info");1!=n&&0==t.exemption_status&&(i=a.bill_id),3==n&&1==t.exemption_status&&(i=""),2==n&&1==t.exemption_status&&(i=a.bill_id),e.procedures.push({payment_filter:i,admission_id:"",facility_id:l,item_type_id:t.item_type_id,item_price_id:t.price_id,quantity:1,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name})}else swal("Please search and select Procedure!");else swal("Please search and select Patient to prescribe")},e.saveProcedures=function(a){t.post("/api/postPatientProcedures",a).then(function(e){}),swal("Patient procedures successfully saved!","","success"),e.procedures=[]},e.deceased=function(e,a){if(0!=angular.isDefined(a)){var i={first_name:e.first_name,middle_name:e.middle_name,last_name:e.last_name,patient_id:e.patient_id,user_id:o,facility_id:l,immediate_cause:a.immediate_cause,underlying_cause:a.underlying_cause,dept_id:1};t.post("/api/postDeceased",i).then(function(t){0==t.data.status?swal(t.data.data,"","error"):swal(e.first_name+" "+e.last_name+" sent to Last office","","success")}),$("#immediate_cause").val(""),$("#underlying_cause").val("")}else swal("An error occurred","Data not saved...Please write causes of death and click send to last office button","error")}}])}(),function(){angular.module("authApp").controller("opdQueueController",function(e,t,a,i,n){i.currentUser.id;var s=i.currentUser.facility_id;e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t},angular.element(document).ready(function(){e.setTab(1),a.post("/api/getOpdPatients",{facility_id:s}).then(function(t){e.patientData=t.data}),a.post("/api/investigationList",{facility_id:s}).then(function(t){e.patientInvData=t.data})});var r=[];e.showSearch=function(e){return a.post("/api/getAllOpdPatients",{searchKey:e,facility_id:s}).then(function(e){r=e.data}),r};var o=[];e.showSearch2=function(e){return console.log(e),a.post("/api/getAllInvPatients",{searchKey:e,facility_id:s}).then(function(e){o=e.data}),o},e.getConsultationModal=function(e){var t=e;n.open({templateUrl:"/views/modules/ClinicalServices/consultationModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})},e.getTreatmentModal=function(e){var t=e;n.open({templateUrl:"/views/modules/ClinicalServices/consultationModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})},e.billsCancellation=function(){a.post("/api/getBillList",{facility_id:s}).then(function(t){e.patientBill=t.data})},e.getBillModal=function(e){a.post("/api/cancelPatientBill",{patient_id:e.patient_id,facility_id:s}).then(function(e){var t=e.data;n.open({templateUrl:"/views/modules/ClinicalServices/billCancellationModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})}})}(),function(){"use strict";angular.module("authApp").controller("casualtyRoomController",function(e,t,a,i,n,s,r,o,l){o.isNavCollapsed=!1,o.isCollapsed=!0,o.isCollapsedHorizontal=!0;a.currentUser;var d=a.currentUser.id,c=a.currentUser.facility_id,u=[],p=[],_=[];o.printUserMenu=function(t){e.get("/api/getUsermenu/"+t).then(function(e){o.menu=e.data,console.log(o.menu)})},e.get("/api/getUserImage/"+d).then(function(e){o.photo="/uploads/"+e.data[0].photo_path,console.log(o.photo)});var m=a.currentUser.id;a.currentUser.facility_id;o.printUserMenu(m),o.tabs=[],o.alertMe=function(){setTimeout(function(){$window.swal("Use proper ways to avoid Mistakes",username,"error")})},o.model={name:"Tabs"};o.oneAtATime=!0,o.status={isCustomHeaderOpen:!1,isFirstOpen:!0,isFirstDisabled:!1},o.viewItem=function(e){o.quick_registration=e,console.log(e.first_name),l.open({templateUrl:"/views/modules/emergency/emergencyencounterModal.html",size:"lg",animation:!0,controller:"emergencyModal",resolve:{quick_registration:function(){return console.log(o.quick_registration),o.quick_registration}}}).result.then(function(e){o.quick_reg=e,console.log(o.quick_reg)})},o.openDialogForServices=function(e){console.log(e),o.quick_registration=e,console.log(o.quick_registration),l.open({templateUrl:"/views/modules/emergency/emergencyencounterModal.html",size:"lg",animation:!0,controller:"emergencyModal",resolve:{quick_registration:function(){return o.cardDetails=o.quick_registration,console.log(o.cardDetails),o.quick_registration}}}).result.then(function(e){o.quick_reg=e,console.log(o.quick_reg)})},o.patient_urgent_registratione=function(t){var a=t.first_name,i=t.middle_name,n=t.last_name,s=t.gender,r=t.dob,l=t.mobile_number;if(0==angular.isDefined(a))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");if(0==angular.isDefined(i))return sweetAlert("Please Enter MIDDLE NAME before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter LAST NAME before SAVING","","error");if(0==angular.isDefined(t.resedence_id))return sweetAlert("Please type the Residence Name and choose from the suggestions","","error");var d={first_name:a,middle_name:i,last_name:n,dob:r,gender:s,mobile_number:l,residence_id:t.resedence_id.residence_id,facility_id:c,user_id:m};e.post("/api/urgency_registration",d).then(function(e){o.quick_registration=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):(o.patient=null,d=o.quick_registration,o.viewItem(d))})},o.showSearchResidences=function(t){return e.get("/api/searchResidencesEm/"+t).then(function(e){_=e.data}),_},o.patientService=function(){var t={patient_category:o.encounter.payment_category.patient_category,item_name:o.encounter};return console.log(o.encounter),e.post("/api/searchPatientServicesEm",t).then(function(e){p=e.data}),console.log(_),p},o.searchPatientCategory=function(t){return e.get("/api/searchPatientCategoryEm/"+t).then(function(e){u=e.data}),u},o.getPricedItems=function(t){console.log(t),e.get("/api/getPricedItemsEm/"+t).then(function(e){o.services=e.data})}})}(),function(){"use strict";angular.module("authApp").directive("ngFiles",["$parse",function(e){return{link:function(t,a,i){var n=e(i.ngFiles);a.on("change",function(e){n(t,{$files:e.target.files})})}}}]).controller("emergencyController",function(e,t,a,i,n,s,r,o,l){var d=new FormData;o.getTheFiles=function(e){angular.forEach(e,function(e,t){d.append(t,e)})},o.isNavCollapsed=!1,o.isCollapsed=!0,o.isCollapsedHorizontal=!0;a.currentUser;var c,u=a.currentUser.id,p=a.currentUser.facility_id,_=[],m=[],f=[],g=[];o.ngModelOptionsSelected=function(e){if(!arguments.length)return c;c=e},o.modelOptions={debounce:{default:500,blur:250},getterSetter:!0},o.Gender=[{gender:"Male",status:"1"},{gender:"Female",status:"2"}],o.Insurances=[{insurance:"NHIF",status:"1"},{insurance:"CHIF",status:"2"}],o.verification=function(t){e.get("https://verification.nhif.or.tz/NHIFService/breeze/Verification/GetCard?CardNo="+t).then(function(e){console.log(e),"Active"==e.data.StatusDescription?(o.patient.first_name=e.data.FirstName,o.patient.middle_name=e.data.MiddleName,o.patient.last_name=e.data.LastName,o.patient.gender=e.data.Gender,o.patient.dob=e.data.DateOfBirth.substr(0,e.data.DateOfBirth.indexOf("T")),o.nhif_patient={first_name:e.data.FirstName,middle_name:e.data.MiddleName,last_name:e.data.LastName,gender:e.data.Gender,dob:e.data.DateOfBirth},swal("CARD VALID")):swal("kalipe pesa kijana")})},e.get("/api/getInsurances").then(function(e){o.insurances=e.data}),o.printUserMenu=function(t){e.get("/api/getUsermenu/"+t).then(function(e){o.menu=e.data,console.log(o.menu)})},e.get("/api/getUserImage/"+u).then(function(e){o.photo="/uploads/"+e.data[0].photo_path,console.log(o.photo)});var h=a.currentUser.id;a.currentUser.facility_id;o.printUserMenu(h),o.tabs=[],o.alertMe=function(){setTimeout(function(){$window.swal("Use proper ways to avoid Mistakes",username,"error")})},o.model={name:"Tabs"},o.getPatients=function(t){return console.log(t),e.get("/api/getSeachedPatientsEm/"+t).then(function(e){g=e.data,console.log(o.patients)}),g},o.oneAtATime=!0,o.patient_quick_registration=function(t){var a=t.first_name,i=t.middle_name,n=t.last_name,s=t.gender,r=t.dob,d=t.mobile_number;if(0==angular.isDefined(a))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");if(0==angular.isDefined(i))return sweetAlert("Please Enter MIDDLE NAME before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter LAST NAME before SAVING","","error");if(0==angular.isDefined(t.resedence_id))return sweetAlert("Please type the Residence Name and choose from the suggestions","","error");var c={first_name:a,middle_name:i,last_name:n,dob:r,gender:s,mobile_number:d,residence_id:t.resedence_id.residence_id,facility_id:p,user_id:h};e.post("/api/quick_registration",c).then(function(e){if(o.quick_registration=e.data,console.log(o.quick_registration),0==e.data.status)sweetAlert(e.data.data,"","error");else{var t={patientData:e.data[0],accounts_number:e.data[1][0],residences:e.data[2][0],getLastVisit:e.data[3]};o.patient=null,l.open({templateUrl:"/views/modules/emergency/emergencyencounterModal.html",size:"lg",animation:!0,controller:"emergencyModal",resolve:{object:function(){return console.log(t),t}}})}})},o.showSearchResidences=function(t){return e.get("/api/searchResidences/"+t).then(function(e){f=e.data}),f},o.patientService=function(){var t={patient_category:o.encounter.payment_category.patient_category,item_name:o.encounter};return console.log(o.encounter),e.post("/api/searchPatientServices",t).then(function(e){m=e.data}),console.log(f),m},o.getPricedItems=function(t){console.log(t),e.get("/api/getPricedItems/"+t).then(function(e){o.services=e.data})},o.searchPatientCategory=function(t){return e.get("/api/searchPatientCategory/"+t).then(function(e){_=e.data}),_},o.viewItem=function(e){o.quick_registration=e,console.log(e.first_name),l.open({templateUrl:"/views/modules/emergency/emergencyencounterModal.html",size:"lg",animation:!0,controller:"emergencyModal",resolve:{quick_registration:function(){return console.log(o.quick_registration),o.quick_registration}}}).result.then(function(e){o.quick_reg=e,console.log(o.quick_reg)})},o.openDialogForServices=function(e){console.log(e),o.quick_registration=e,console.log(o.quick_registration),l.open({templateUrl:"/views/modules/emergency/emergencyencounterModal.html",size:"lg",animation:!0,controller:"emergencyModal",resolve:{quick_registration:function(){return o.cardDetails=o.quick_registration,console.log(o.cardDetails),o.quick_registration}}}).result.then(function(e){o.quick_reg=e,console.log(o.quick_reg)})},o.patient_emergency_registration=function(t){var a=t.first_name,i=t.middle_name,n=t.last_name,s=t.gender.gender,r=t.dob,l=t.mobile_number;if(0==angular.isDefined(a))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");if(0==angular.isDefined(i))return sweetAlert("Please Enter MIDDLE NAME before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter LAST NAME before SAVING","","error");if(0==angular.isDefined(t.resedence_id))return sweetAlert("Please type the Residence Name and choose from the suggestions","","error");var d={first_name:a,middle_name:i,last_name:n,dob:r,gender:s,mobile_number:l,residence_id:t.resedence_id.residence_id,facility_id:p,user_id:h};e.post("/api/patient_emergence_registration",d).then(function(e){o.quick_registration=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):(o.patient=null,d=o.quick_registration,o.viewItem(d))})},o.patient_quick_registration=function(t){var a=t.first_name,i=t.middle_name,n=t.last_name,s=t.gender.gender,r=t.dob,d=t.mobile_number;if(0==angular.isDefined(a))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");if(0==angular.isDefined(i))return sweetAlert("Please Enter MIDDLE NAME before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter LAST NAME before SAVING","","error");if(0==angular.isDefined(t.resedence_id))return sweetAlert("Please type the Residence Name and choose from the suggestions","","error");var c={first_name:a,middle_name:i,last_name:n,dob:r,gender:s,mobile_number:d,residence_id:t.resedence_id.residence_id,facility_id:p,user_id:h};e.post("/api/quick_registrationEm",c).then(function(e){if(o.quick_registration=e.data,console.log(o.quick_registration),0==e.data.status)sweetAlert(e.data.data,"","error");else{var t={patientData:e.data[0],accounts_number:e.data[1][0],residences:e.data[2][0],getLastVisit:e.data[3]};o.patient=null,l.open({templateUrl:"/views/modules/emergency/emergencyencounterModal.html",size:"lg",animation:!0,controller:"emergencyModal",resolve:{object:function(){return console.log(t),t}}})}})},o.exemption_type_list=function(){e.get("/api/exemption_type_list").then(function(e){o.exemption_types=e.data})},o.exemption_type_list(),e.get("/api/getexemption_services/"+p).then(function(e){o.exemption_services=e.data}),o.exemption_registration=function(t,i){console.log(i,t);var n=2,s="..";if(void 0==t)swal("Feedback..","FILL ALL FIELDS","error");else if(void 0==t.exemption_type_id)swal("Feedback..","Please Select Exemption Category ","error");else if(void 0==t.exemption_reason)swal("Feedback..","Please Fill  Reason(s) for This exemption ","error");else if(void 0==t.service)swal("Feedback..","Please Choose Service ","error");else{var r=i.id,c=t.service.patient_category,u=t.service,p=t.service.service_id,_=t.service.price_id,m=t.service.item_type_id,f=r,g=t.service.facility_id,h=a.currentUser.id,v={payment_filter:t.exemption_type_id,item_type_id:m,patient_category:c,main_category_id:3,bill_id:t.exemption_type_id,service_category:u,service_id:p,price_id:_,patient_id:f,facility_id:g,user_id:h},n=2,y=t.exemption_type_id,w=t.exemption_reason,h=a.currentUser.id,g=a.currentUser.facility_id,f=r,n=n,y=t.exemption_type_id,w=t.exemption_reason,s=s;t.description,d.append("exemption_type_id",y),d.append("exemption_reason",w),d.append("user_id",h),d.append("facility_id",g),d.append("patient_id",f),d.append("reason_for_revoke",s),d.append("status_id",n),e({method:"POST",url:"/api/patient_exemption",data:d,headers:{"Content-Type":void 0}}).then(function(t){t.data.msg,o.ok=t.data.status,t.data.status,e.post("/api/enteremergencyEncounter",v).then(function(t){o.registrationReport=t.data,0==t.data.status?sweetAlert(t.data.data,"","error"):(e.get("/api/getPatientInfo/"+f).then(function(e){o.patientsInfo=e.data}),l.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{patientData:function(){return o.patientData}}}))})}).then(function(){})}}})}(),function(){"use strict";angular.module("authApp").controller("emergencyModal",["$scope","$http","$state","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){e.selectedPatient=r,e.patientBills=r;var o=i.currentUser.id,l=i.currentUser.facility_id,d=r.patient_id;e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t},e.duration=[{duration:"1"},{duration:"2"},{duration:"3"},{duration:"4"},{duration:"5"},{duration:"6"},{duration:"7"},{duration:"8"},{duration:"9"},{duration:"10"},{duration:"11"},{duration:"12"}],e.unit=[{unit:"hours"},{unit:"days"},{unit:"weeks"},{unit:"months"},{unit:"years"}];var c;e.ngModelOptionsSelected=function(e){if(!arguments.length)return c;c=e},e.modelOptions={debounce:{default:500,blur:250},getterSetter:!0},e.toto=function(){for(var t=0,a=0;a<e.patientBills.length;a++)t+=e.patientBills[a].quantity*e.patientBills[a].price-e.patientBills[a].discount;return t},e.cancelBill=function(e){t.post("/api/cancelBillItem",{id:e.id,patient_id:e.patient_id,facility_id:l,user_id:o}).then(function(t){swal(e.item_name+" Has been cancelled for this patient","","success")})},e.oneAtATime=!0,e.closeModal=function(){s.dismiss()},e.templates=[{name:"Admission",url:"admission.html"},{name:"Internal Referral",url:"internal.html"},{name:"External Referral",url:"referral.html"},{name:"Deceased",url:"deceased.html"}];var u=[];e.showSearch=function(e){return t.post("/api/getOpdPatients",{facility_id:l}).then(function(e){u=e.data}),u};var p=[];e.showSearch=function(e){return t.post("/api/getOpdInvPatients",{facility_id:l}).then(function(e){p=e.data}),p},angular.element(document).ready(function(){e.setTab(1),t.post("/api/vitalsDate",{patient_id:d}).then(function(t){e.vitalsDate=t.data}),t.post("/api/prevDiagnosis",{patient_id:d}).then(function(t){e.diagnosis=t.data}),t.post("/api/prevFamilyHistory",{patient_id:d}).then(function(t){e.familyHistory=t.data}),t.post("/api/prevBirthHistory",{patient_id:d}).then(function(t){e.birthHistory=t.data}),t.post("/api/prevHistoryExaminations",{patient_id:d}).then(function(t){e.historyExaminations=t.data}),t.post("/api/prevObsGyn",{patient_id:d}).then(function(t){e.obsHistory=t.data}),t.post("/api/getResults",{patient_id:d,dept_id:3}).then(function(t){e.radiology=t.data}),t.post("/api/prevRoS",{patient_id:d}).then(function(t){e.ros=t.data}),t.post("/api/prevPhysicalExaminations",{patient_id:d}).then(function(t){e.physicalExaminations=t.data}),t.post("/api/getResults",{patient_id:d,dept_id:2}).then(function(t){e.labInvestigations=t.data})}),e.getVitalTime=function(a,i){t.post("/api/vitalsTime",{patient_id:i.patient_id,date_attended:a.date_attended}).then(function(t){e.vitalsTime=t.data})};var _=[];e.getVitalData=function(e,a){t.post("/api/patientVitals",{patient_id:a.patient_id,time_attended:e.time_attended}).then(function(e){_=e.data;var t=angular.extend({},_,a);n.open({templateUrl:"/views/modules/ClinicalServices/vitalSigns.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return t}}})})},e.getDiagnosis=function(a){t.post("/api/getPrevDiagnosis",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevDiagnosis=t.data})},e.getHistory=function(a){t.post("/api/prevHistory",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevHistory=t.data})},e.getRos=function(a){t.post("/api/getPrevRos",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevRos=t.data})},e.getBirth=function(a){t.post("/api/getPrevBirth",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevBirth=t.data})},e.getObs=function(a){t.post("/api/getPrevObs",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevObs=t.data})},e.getFamily=function(a){t.post("/api/getPrevFamily",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevFamily=t.data})},e.getPhysical=function(a){t.post("/api/getPrevPhysical",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevPhysical=t.data})};var m=[];e.complaints=function(e){return t.post("/api/chiefComplaints",{search:e}).then(function(e){m=e.data}),m};var f=[];e.showCardio=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Cardiovascular"}).then(function(e){f=e.data}),f};var g=[];e.showRespiratory=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Respiratory"}).then(function(e){g=e.data}),g};var h=[];e.showGastro=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Gastrointerstinal"}).then(function(e){h=e.data}),h};var v=[];e.showMusculo=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Musculoskeletal"}).then(function(e){v=e.data}),v};var y=[];e.showGenito=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Genitourinary"}).then(function(e){y=e.data}),y};var w=[];e.showCNS=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Central Nervous System"}).then(function(e){w=e.data}),w};var b=[];e.showEndo=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Endocrine"}).then(function(e){b=e.data}),b};var P=[];e.showAllergy=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Allergy"}).then(function(e){P=e.data}),P};S=[];e.showMedication=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Medication"}).then(function(e){S=e.data}),S};var S=[];e.showIllness=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Past Medical History"}).then(function(e){S=e.data}),S};var A=[];e.showAdmission=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Admission History"}).then(function(e){A=e.data}),A};var D=[];e.showImmune=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Immunisation"}).then(function(e){D=e.data}),D};var E=[];e.showInspection=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Inspection"}).then(function(e){E=e.data}),E};var C=[];e.showPalpation=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Palpation"}).then(function(e){C=e.data}),C};var T=[];e.showPercussion=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Percussion"}).then(function(e){T=e.data}),T};var O=[];e.showAuscultation=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Auscultation"}).then(function(e){O=e.data}),O};var I=[];e.showDiagnosis=function(e){return t.post("/api/getDiagnosis",{search:e}).then(function(e){I=e.data}),I},e.allergyChecker=function(e){t.post("/api/getAllergy",{patient_id:e.patient_id}).then(function(e){swal("This Patient is allergic to "+e.data[0].descriptions,"","info")})},e.getSubDepts=function(a){t.post("/api/getSubDepts",{department_id:a}).then(function(t){e.subDepartments=t.data})},e.getTests=function(a,i){if(0!=angular.isDefined(i)){var n=i.bill_id;3==i.main_category_id&&(n=1),t.post("/api/getPanels",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.panels=t.data}),t.post("/api/getSingleTests",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.singleTests=t.data}),t.post("/api/getTests",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.labTests=t.data,t.data.length>0?swal("Items with red marks are currently not available..","But You can still order them if necessary","info"):swal("If  no Tests displayed under this category..","Please, Contact Lab manager","info")})}else swal("Please...select Patient first","","error")},e.investigationOrders=[],e.unavailableOrders=[],e.orders=function(t,a,i){var n="";if(null!=i.patient_id){if(1==a){for(s=0;s<e.investigationOrders.length;s++)if(e.investigationOrders[s].item_id==t.item_id)return void swal(t.item_name+"  already in your order list!");if(1!=t.on_off){for(var s=0;s<e.unavailableOrders.length;s++)if(e.unavailableOrders[s].item_id==t.item_id)return void swal(t.item_name+"  already in your order list!");return void e.unavailableOrders.push({facility_id:l,visit_date_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name})}1!=i.main_category_id&&(n=i.bill_id),e.investigationOrders.push({requesting_department_id:1,admission_id:"",facility_id:l,item_type_id:t.item_type_id,item_price_id:t.item_price_id,status_id:1,account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name,priority:"",clinical_note:"",payment_filter:n}),console.log(e.investigationOrders)}}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveInvestigation=function(a){if(""!=e.investigationOrders||null!=e.unavailableOrders){for(var i=0;i<e.investigationOrders.length;i++)e.investigationOrders[i].priority=a.priority,e.investigationOrders[i].clinical_note=a.clinical_note;""!=e.investigationOrders&&(t.post("/api/postInvestigations",e.investigationOrders).then(function(e){}),e.investigationOrders=[]),t.post("/api/postUnavailableInvestigations",e.unavailableOrders).then(function(e){}),swal("Investigation order successfully saved!"),e.unavailableOrders=[]}else swal("You dont have Items to save!","Please select Items first!")},e.getLabResults=function(a){var i={patient_id:a.patient_id,date_attended:a.date_attended,dept_id:a.dept_id};t.post("/api/getInvestigationResults",i).then(function(t){e.labResults=t.data})},e.getRadResults=function(a){var i={patient_id:a.patient_id,date_attended:a.date_attended,dept_id:a.dept_id};t.post("/api/getInvestigationResults",i).then(function(t){e.radResults=t.data})},e.complaintz=[],e.addComplaint=function(t,a,i){if(null!=i.patient_id){for(var n=0;n<e.complaintz.length;n++)if(e.complaintz[n].id==t.id)return void swal(t.description+" already in your wish list!");e.complaintz.push({admission_id:"",patient_id:i.patient_id,facility_id:l,visit_date_id:i.account_id,user_id:o,description:t.name,id:t.id,duration:a.durationqty.duration,duration_unit:a.durationunit.unit,status:"Chief Complaints"})}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveComplaints=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].other_complaints=i.other_complaints,a[n].hpi=i.hpi;t.post("/api/postHistory",a).then(function(e){}),swal("Complaints successfully saved!","","success"),e.complaintz=[]}else swal("Oops Data not saved!","Please fill all necessary fields, click 'Add' Button then 'Save Complaints' Button to save data..","error")},e.rosTemp=[],e.reviewOfSystems=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems2=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems3=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems4=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems5=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems6=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems7=function(t,a){null!=a.patient_id?e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveRoS=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].review_summary=i;t.post("/api/postRoS",a).then(function(e){}),swal("Review of systems data successfully Saved!","","success"),e.rosTemp=[]}else swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.pastTemp=[],e.pastMedicals=function(t,a){null!=a.patient_id?e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals3=function(t,a){null!=a.patient_id?e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals4=function(t,a){null!=a.patient_id?e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals5=function(t,a){null!=a.patient_id?e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.savePastMedical=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].other_past_medicals=i;t.post("/api/postPastMed",a).then(function(e){}),swal("Past medical history data successfully Saved!","","success"),e.pastTemp=[]}else swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.saveBirthHistory=function(e,a){if(null!=a.patient_id){var i={admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,antenatal:e.antenatal,natal:e.natal,post_natal:e.post_natal,nutrition:e.nutrition,growth:e.growth,development:e.development};t.post("/api/birthHistory",i).then(function(e){swal("Birth history data Successfully Saved!","","success")})}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveObsGyn=function(e,a){if(null!=a.patient_id){var i={admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,menarche:e.menarche,menopause:e.menopause,menstrual_cycles:e.menstrual_cycles,pad_changes:e.pad_changes,recurrent_menstruation:e.recurrent_menstruation,contraceptives:e.contraceptives,pregnancy:e.pregnancy,lnmp:e.lnmp,gravidity:e.gravidity,parity:e.parity,living_children:e.living_children};t.post("/api/postObs",i).then(function(e){swal("Obstetrics and gynaecological data Successfully Saved!","","success")})}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.removeFromSelection=function(e,t){var a=t.indexOf(e);t.splice(a,1)},e.physicalMusculoskeletal=[],e.physicalRespiratory=[],e.physicalCardiovascular=[],e.physicalGastrointestinal=[],e.physicalGenitourinary=[],e.physicalCNS=[],e.physicalEndocrine=[],e.physicalMusculo=function(t,a,i){null!=a.patient_id?e.physicalMusculoskeletal.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalResp=function(t,a,i){null!=a.patient_id?e.physicalRespiratory.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalCardio=function(t,a,i){null!=a.patient_id?e.physicalCardiovascular.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalGastro=function(t,a,i){null!=a.patient_id?e.physicalGastrointestinal.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalGenito=function(t,a,i){null!=a.patient_id?e.physicalGenitourinary.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalCns=function(t,a,i){null!=a.patient_id?e.physicalCNS.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalEndo=function(t,a,i){null!=a.patient_id?e.physicalEndocrine.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.savePhysicalExamination=function(a){""!=a?(t.post("/api/postPhysical",a).then(function(e){}),swal(a[0].system+"  system data successfully Saved!","","success"),e.physicalMusculoskeletal=[],e.physicalRespiratory=[],e.physicalCardiovascular=[],e.physicalGastrointestinal=[],e.physicalGenitourinary=[],e.physicalCNS=[],e.physicalEndocrine=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.saveLocalExams=function(e,a){if(null!=a){var i={admission_id:"",patient_id:e.patient_id,visit_date_id:e.account_id,user_id:o,facility_id:l,local_examination:a};t.post("/api/postLocalPhysical",i).then(function(e){}),swal("Local Examination","data for this patient saved","success")}else swal("Please write examination for this patient first","","error")},e.saveSocialCommunity=function(e,a){if(null!=a.patient_id){var i={patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,chronic_illness:e.chronic_illness,substance_abuse:e.substance_abuse,adoption:e.adoption,others:e.others};t.post("/api/familyHistory",i).then(function(e){swal("Family and social history data successfully Saved!","","success")})}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.provisionalDiagnosis=[],e.differentialDiagnosis=[],e.confirmedDiagnosis=[],e.addProv=function(t,a,i){null!=a.patient_id?e.provisionalDiagnosis.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.addDiff=function(t,a,i){null!=a.patient_id?e.differentialDiagnosis.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.addConf=function(t,a,i){null!=a.patient_id?e.confirmedDiagnosis.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveDiagnosis=function(a){""!=a?(t.post("/api/postDiagnosis",a).then(function(e){swal(a[0].status+"  diagnosis data successfully Saved!","","success")}),e.provisionalDiagnosis=[],e.differentialDiagnosis=[],e.confirmedDiagnosis=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},t.get("/api/getWards/"+l).then(function(t){e.wards=t.data}),t.get("/api/getSpecialClinics/"+l).then(function(t){e.clinics=t.data}),e.patientAdmission=function(e,t){if(0!=angular.isDefined(t)){var a=angular.extend({},e,t);n.open({templateUrl:"/views/modules/ClinicalServices/admission.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return a}}})}else swal("Oops! something went wrong..","Please search and select Patient then click ward button to admit patient!")},e.internalTransfer=function(e,t){var a={sender_clinic_id:1,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,medical_record_number:t.medical_record_number,gender:t.gender,dob:t.dob,visit_id:t.account_id},i=angular.extend({},e,a);n.open({templateUrl:"/views/modules/ClinicalServices/internalTransfer.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return i}}});s.dismiss()};var M=[];e.medicines=[],e.medicinesOs=[],e.searchItems=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getMedicine",{search:e,facility_id:l,patient_category_id:i}).then(function(e){M=e.data}),M;swal("Please search patient to be prescribed before searching Medicine!")}};var U=[];e.checkDosage=function(a,i){var n=a.item_name;t.post("/api/dosageChecker",{item_id:a.item_id,patient_id:i}).then(function(t){if(console.log(t.data),t.data.length>0){var a=t.data[0].duration-t.data[0].days;e.dosageCheck=t.data,swal("ATTENTION",n+" In Dosage Progress "+a+" day(s) remained to Complete a Dosage","info")}})},e.addMedicine=function(a,i,n){t.post("/api/getPrevMedicine",{patient_id:a.patient_id}).then(function(t){e.prevMedicines=t.data});var s="",r=i.main_category_id,d=a.dose*a.duration*24/a.frequency;if(null!=i)if(null!=n)if(null!=a.instructions){for(var c=0;c<e.medicines.length;c++)if(e.medicines[c].item_id==n.item_id)return void swal(n.item_name+" already in your order list!");1!=r&&(s=i.bill_id),3==r&&(r=1),t.post("/api/balanceCheck",{main_category_id:r,item_id:n.item_id,facility_id:l}).then(function(t){if(U=t.data,console.log(U),U.length>0&&U[0].balance>=d)e.medicines.push({facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:d,status_id:1,dose:a.dose,frequency:a.frequency,duration:a.duration,instructions:a.instructions,out_of_stock:"",payment_filter:s,account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name,dose_formulation:n.dose_formulation});else if(U.length<1||U[0].balance<d){if(1!=confirm("This Item is not available in Store..Do you want to prescribe anyway?"))return void swal("canceled","Choose different Item for Prescription");for(var r=0;r<e.medicinesOs.length;r++)if(e.medicinesOs[r].item_id==n.item_id)return void swal("Item already in your order list!");e.medicinesOs.push({facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:d,status_id:1,dose:a.dose,frequency:a.frequency,duration:a.duration,instructions:a.instructions,out_of_stock:"OS",account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name}),swal("Item added under Out of Stock category","","success")}})}else swal("Please Write Instructions and click 'Add to List' Button","","error");else swal("Please search and select medicine!");else swal("Please search and select Patient to prescribe")},e.saveMedicine=function(){""!=e.medicines||""!=e.medicinesOs?(""!=e.medicines&&(t.post("/api/postMedicines",e.medicines).then(function(e){}),e.medicines=[]),t.post("/api/outOfStockMedicine",e.medicinesOs).then(function(e){}),swal("Patient successfully prescribed!","","success"),e.medicinesOs=[]):swal("No Items to Save,Please choose items..","","error")},e.prevMedics=function(a){t.post("/api/getPrevMedicine",{patient_id:a.patient_id}).then(function(t){e.prevMedicines=t.data})},e.prevProcedure=function(a){t.post("/api/getPrevProcedures",{patient_id:a.patient_id}).then(function(t){e.prevProcedures=t.data})};var R=[];e.procedures=[],e.searchProcedures=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getPatientProcedures",{search:e,facility_id:l,patient_category_id:i}).then(function(e){R=e.data}),R;swal("Please search patient before searching procedures!")}},e.getDefaultProcedures=function(a){var i=a.bill_id;null!=i?(3==a.main_category_id&&(i=1),t.post("/api/getProcedures",{facility_id:l,patient_category_id:i}).then(function(t){e.defaultProcedures=t.data})):swal("Please search patient before searching procedures!")},e.addProcedure=function(t,a){var i="";if(null!=a.patient_id)if(null!=t.item_id){for(var n=0;n<e.procedures.length;n++)if(e.procedures[n].item_id==t.item_id)return void swal(t.item_name+" already in your order list!","","info");1!=a.main_category_id&&(i=a.bill_id),e.procedures.push({payment_filter:i,admission_id:"",facility_id:l,item_type_id:t.item_type_id,item_price_id:t.price_id,quantity:1,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name})}else swal("Please search and select Procedure!");else swal("Please search and select Patient to prescribe")},e.saveProcedures=function(a){t.post("/api/postPatientProcedures",a).then(function(e){}),swal("Patient procedures successfully saved!","","success"),e.procedures=[]},e.deceased=function(a,i){if(0!=angular.isDefined(i)){var n={patient_id:a.patient_id,user_id:o,facility_id:l,immediate_cause:i.immediate_cause,underlying_cause:i.underlying_cause};t.post("/api/postDeceased",n).then(function(e){}),e.corpse=null,swal(a.first_name+" "+a.last_name+" sent to Last office","","success")}else swal("An error occurred","Data not saved...Please write causes of death and click send to last office button","error")}}])}(),function(){angular.module("authApp").controller("emergencyQueueController",function(e,t,a,i,n){i.currentUser.id;var s=i.currentUser.facility_id;e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t},a.post("/api/getOpdPatients",{facility_id:s}).then(function(t){e.patientData=t.data}),a.post("/api/investigationList",{facility_id:s}).then(function(t){e.patientInvData=t.data});var r=[];e.showSearch=function(e){return a.post("/api/getAllOpdPatients",{searchKey:e,facility_id:s}).then(function(e){r=e.data}),r};var o=[];e.showSearch2=function(e){return console.log(e),a.post("/api/getAllInvPatients",{searchKey:e,facility_id:s}).then(function(e){o=e.data}),o},e.getConsultationModal=function(e){var t=e;n.open({templateUrl:"/views/modules/ClinicalServices/consultationModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})},e.getTreatmentModal=function(e){var t=e;n.open({templateUrl:"/views/modules/ClinicalServices/treatmentModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})},e.billsCancellation=function(){a.post("/api/getBillList",{facility_id:s}).then(function(t){e.patientBill=t.data})},e.getBillModal=function(e){a.post("/api/cancelPatientBill",{patient_id:e.patient_id,facility_id:s}).then(function(e){var t=e.data;n.open({templateUrl:"/views/modules/ClinicalServices/billCancellationModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})}})}(),function(){"use strict";angular.module("authApp").controller("emergencydepartmentController",function(e,t,a,i,n,s,r,o,l){o.isNavCollapsed=!1,o.isCollapsed=!0,o.isCollapsedHorizontal=!0,o.isCollapsedHorizontal=!1;a.currentUser;var d,c=a.currentUser.id,u=a.currentUser.name,p=a.currentUser.facility_id;o.oneAtATime=!0,o.templates=[{name:"ICU",url:"icu.html"},{name:"Wards",url:"ward.html"},{name:"Discharge",url:"deceased.html"},{name:"Deceased",url:"mortuary.html"}],o.mytime=new Date,o.hstep=1,o.mstep=2,o.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},o.ismeridian=!0,o.toggleMode=function(){o.ismeridian=!o.ismeridian},o.update=function(){var e=new Date;e.setHours(14),e.setMinutes(0),o.mytime=e},o.ngModelOptionsSelected=function(e){if(!arguments.length)return d;d=e},o.modelOptions={debounce:{default:500,blur:250},getterSetter:!0},o.printUserMenu=function(t){e.get("/api/getUsermenu/"+t).then(function(e){o.menu=e.data,console.log(o.menu)})},e.get("/api/getUserImage/"+c).then(function(e){o.photo="/uploads/"+e.data[0].photo_path,console.log(o.photo)});var _=a.currentUser.id;a.currentUser.facility_id;o.printUserMenu(_);var m=[];o.showSearch=function(t){return e.post("/api/getEmPatients",{search:t,facility_id:p}).then(function(e){m=e.data}),m},o.openDialogForVitals=function(e){console.log(e),o.quick_registration=e,console.log(o.quick_registration),l.open({templateUrl:"/views/modules/emergency/emergencyvitalsModal.html",animation:!0,controller:"emergencyModal",windowClass:"app-modal-window",resolve:{quick_registration:function(){return o.cardDetails=o.quick_registration,console.log(o.cardDetails),o.quick_registration}}}).result.then(function(e){o.quick_reg=e,console.log(o.quick_reg)})},o.states=[{name:"Body Weight",unit:"Kg",value:"weight",status:"1"},{name:"Height/Length",unit:"cm",value:"height",status:"2"},{name:"Body Temperature",unit:"",value:"temperature",status:"3"},{name:"Systolic Pressure",unit:"mmHg",value:"systolic",status:"4"},{name:"Diastolic Pressure",unit:"mmHg",value:"diastolic",status:"5"},{name:"Respiratory Rate",unit:"Breaths/Min",value:"respiratory",status:"6"},{name:"Pulse Rate",unit:"Breaths/Min",value:"pulse",status:"7"},{name:"Oxygen Saturation",unit:"Beats/Min",value:"oxygen",status:"8"}],o.VitalSignRegister=function(t,a){var i=t.Body_weight,n=t.height_length,s=t.Body_temperature,r=t.Systolic_pressure,o=t.Diastolic_pressure,l=t.Respiratory_rate,d=t.pulse_rate,u=t.Oxygen_saturation,_={id:a,Body_weight:i,height_length:n,Body_temperature:s,Systolic_pressure:r,Diastolic_pressure:o,Respiratory_rate:l,time_attended:t.time_attended,Pulse_rate:d,facility_id:p,Oxygen_saturation:u,registered_by:c};console.log(_),e.post("/api/VitalSignRegister",_).then(function(e){console.log(e.data),swal("Vital Sign Sent Successfully","Successfully Registered","success"),t.Body_weight=null,t.height_length=null,t.Body_temperature=null,t.Systolic_pressure=null,t.Diastolic_pressure=null,t.Respiratory_rate=null,t.pulse_rate=null,t.Oxygen_saturation=null})},o.VitalRegister=function(t,a){console.log(t);var i=t.number,n=t.time,s=t.name.value,r=t.name.unit,o=t.name.status;console.log(s),console.log(i),console.log(o);var l={vital_sign:s,vital_data:i,facility_id:p,status:o,time_attended:n,unit:r,registered_by:c,patient_id:a};swal({title:u,text:"Confirm Vital Signs",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Confirmed!"}).then(function(){e.post("/api/VitalRegister",l).then(function(e){console.log(e.data),t.number=null;var a=e.data.msg;0==e.data.status?swal("Error",a,"error"):swal("Vital Sign Sent",a,"success")})})},o.x_axis=[],o.y_axis=[],o.viewVitals=function(t){console.log(t),e.get("/api/viewVitals/"+t).then(function(e){o.vitalData=e.data;for(var t=0;t<o.vitalData.length;t++)o.x_axis.push(e.data[t].time_attended),o.y_axis.push(e.data[t].Body_temperature);console.log(o.y_axis),o.labels=o.x_axis,o.data=o.y_axis})},o.viewVitals=function(t){console.log(t),e.get("/api/viewVitals/"+t).then(function(e){o.vitalData=e.data,o.x_axis=[],o.y_axis=[];for(var t=0;t<o.vitalData.length;t++)o.x_axis.push(e.data[t].time_attended),o.y_axis.push(e.data[t].Body_temperature);console.log(o.y_axis),o.labels=o.x_axis,o.data=o.y_axis})},o.viewDiastolicPressure=function(t){console.log(t),e.get("/api/viewDiastolicPressure/"+t).then(function(e){o.vitalData=e.data,o.vitalData=e.data,o.valuex=[],o.valuey=[];for(var t=0;t<o.vitalData.length;t++)o.valuex.push(e.data[t].time_attended),o.valuey.push(e.data[t].Diastolic_pressure);console.log(o.valuey),o.labels=o.valuex,o.data=o.valuey})},o.viewTemperature=function(t){console.log(t),e.get("/api/viewTemperature/"+t).then(function(e){o.vitalData=e.data,o.vitalData=e.data,o.valuex=[],o.valuey=[];for(var t=0;t<o.vitalData.length;t++)o.valuex.push(e.data[t].time_attended),o.valuey.push(e.data[t].Body_temperature);console.log(o.valuey),o.labels=o.valuex,o.data=o.valuey})},o.viewPulseRate=function(t){console.log(t),e.get("/api/viewPulseRate/"+t).then(function(e){o.vitalData=e.data,o.vitalData=e.data,o.valuex=[],o.valuey=[];for(var t=0;t<o.vitalData.length;t++)o.valuex.push(e.data[t].time_attended),o.valuey.push(e.data[t].Pulse_rate);console.log(o.valuey),o.labels=o.valuex,o.data=o.valuey})},o.viewSystolicPressure=function(t){console.log(t),e.get("/api/viewSystolicPressure/"+t).then(function(e){o.vitalData=e.data,o.valueX=[],o.ValueY=[];for(var t=0;t<o.vitalData.length;t++)o.valueX.push(e.data[t].time_attended),o.ValueY.push(e.data[t].Systolic_pressure);console.log(o.ValueY),o.labels=o.valueX,o.data=o.ValueY})},o.Resus=function(t){var a={id:t,facility:p};console.log(a),e.post("/api/Resus",a).then(function(e){console.log(e.data),swal(u,"Patient  Sent Resuscitation Room","success")})},o.patients=function(){e.get("/api/emergenceUsers/"+p).then(function(e){o.observationusers=e.data,o.selectedPatient=""})},o.savePastSurgicalProcedure=function(){e.post("/api/savePastSurgicalProcedure",o.records).then(function(e){o.surgical=e.data})},o.SaveSummary=function(t,a){var i=t.mode_arrival,n=t.referred,s=t.complain,r=t.disposition,o=t.condition,l=t.acuity,d=t.arrival,_=t.decision,m=t.departure,f=t.dispoType,g=t.rm,h=t.timeleft,v=t.triage,y=t.visit;if(0==angular.isDefined(i))return sweetAlert("Please Fill Mode of Arrival","","error");if(0==angular.isDefined(n))return sweetAlert("Please Fill Referred Field","","error");if(0==angular.isDefined(s))return sweetAlert("Please Fill Complain Field","","error");if(0==angular.isDefined(r))return sweetAlert("Please Fill Disposition Field","","error");if(0==angular.isDefined(o))return sweetAlert("Please Fill Condition  Field","","error");if(0==angular.isDefined(l))return sweetAlert("Please Fill Acuity  Field","","error");if(0==angular.isDefined(d))return sweetAlert("Please Fill Arrival  Field","","error");if(0==angular.isDefined(_))return sweetAlert("Please Fill Decision  Field","","error");if(0==angular.isDefined(m))return sweetAlert("Please Fill Departure  Field","","error");if(0==angular.isDefined(f))return sweetAlert("Please Fill Disposition Type  Field","","error");if(0==angular.isDefined(g))return sweetAlert("Please Fill Rm  Field","","error");if(0==angular.isDefined(h))return sweetAlert("Please Fill Time Left  Field","","error");if(0==angular.isDefined(v))return sweetAlert("Please Fill Triage  Field","","error");if(0==angular.isDefined(y))return sweetAlert("Please Fill Visit  Field","","error");console.log(i),console.log(a);var w={patient_id:a,mode_departure:m,referred_by:n,chief_complaint:s,disposition:r,condition_dispo:o,acuity:l,arrival:d,dispo_decision:_,emergency_arrival:i,emmergency_dispo:f,rm:g,time_left:h,triage_impression:v,visit_type:y,registered_by:c,facility_id:p};console.log(w),e.post("/api/SaveSummary",w).then(function(e){console.log(e.data),swal(u,"Visit Summary Sent ","success")})},o.SaveAppearance=function(t,a){console.log(t),console.log(a);var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Appearance",system:"Emergency",facility_id:p};console.log(i),e.post("/api/SaveAppearance",i).then(function(e){o.surgical=e.data,swal("Data Succesfully Saved!")})},o.SaveAirway=function(t,a){console.log(t),console.log(a);var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Airway",system:"Emergency",facility_id:p};e.post("/api/SaveAirway",i).then(function(e){o.surgical=e.data,swal("Data Succesfully Saved!")})},o.SaveBreathing=function(t,a){console.log(t),console.log(a);var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Breathing",system:"Emergency",facility_id:p};e.post("/api/SaveBreathing",i).then(function(e){o.surgical=e.data,swal("Data Succesfully Saved!")})},o.SaveCirculation=function(t,a){var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Circulation",system:"Emergency",facility_id:p};e.post("/api/SaveCirculation",i).then(function(e){o.surgical=e.data,swal("Data Succesfully Saved!")})},o.SaveResponsiveness=function(t,a){var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Disability",system:"Emergency",facility_id:p};e.post("/api/SaveResponsiveness",i).then(function(e){o.surgical=e.data,swal("Data Succesfully Saved!")})},o.SaveIntervention=function(t,a){var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Intervention",system:"Emergency",facility_id:p};e.post("/api/SaveIntervention",i).then(function(e){o.surgical=e.data,swal("Data Succesfully Saved!")})},o.SaveExposure=function(t,a){var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Exposure",system:"Emergency",facility_id:p};e.post("/api/SaveExposure",i).then(function(e){o.surgical=e.data,swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){})})},o.cancel=function(){o.patients()},o.patients(),o.patientAdmission=function(e,t){if(null!=t){var a=angular.extend({},e,t);l.open({templateUrl:"/views/modules/ClinicalServices/admission.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return a}}})}else swal("Oops! something went wrong..","Please search and select Patient then click ward button to admit patient!")},e.post("/api/getOpdPatientsEm",{facility_id:p}).then(function(e){o.patientData=e.data}),o.retrieve=function(){e.post("/api/investigationListEm",{facility_id:p}).then(function(e){o.patientInvData=e.data})};var f=[];o.showSearch=function(t){return e.post("/api/getAllOpdPatientsEm",{searchKey:t,facility_id:p}).then(function(e){f=e.data}),f};var g=[];o.showSearch2=function(t){return console.log(t),e.post("/api/getAllInvPatients",{searchKey:t,facility_id:p}).then(function(e){g=e.data}),g},o.getConsultationModal=function(e){var t=e;l.open({templateUrl:"/views/modules/emergency/emergencyTabsModal.html",size:"lg",animation:!0,controller:"emergencyModal",windowClass:"app-modal-window",resolve:{object:function(){return t}}})},o.vitalsDates=function(t){console.log(t),e.get("/api/getVitalsDate/"+t).then(function(e){o.vitalDatas=e.data})},o.getTreatmentModal=function(e){var t=e;l.open({templateUrl:"/views/modules/emergency/emergencyTabsModal.html",size:"lg",animation:!0,controller:"emergencyModal",windowClass:"app-modal-window",resolve:{object:function(){return t}}})},o.billsCancellation=function(){e.post("/api/getBillList",{facility_id:p}).then(function(e){o.patientBill=e.data})},o.getBillModal=function(t){e.post("/api/cancelPatientBill",{patient_id:t.patient_id,facility_id:p}).then(function(e){var t=e.data;l.open({templateUrl:"/views/modules/ClinicalServices/billCancellationModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})}})}(),function(){"use strict";angular.module("authApp").controller("emergencyprintCard",["$scope","$http","$rootScope","$uibModalInstance","object",function(e,t,a,i,n){e.patientData=n.patientsInfo,e.patientResidences=n.residences,console.log(e.patientData),e.cancel=function(){i.dismiss()},e.enterEncounter=function(i,n,s){if(0==angular.isDefined(i))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(i.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(i.payment_services))return sweetAlert("Please Select Service","","error");console.log(i);var r=i.payment_category.patient_category,o=i.payment_services,l=i.payment_services.service_id,d=i.payment_services.price_id,c={item_type_id:i.payment_services.item_type_id,patient_category:r,service_category:o,service_id:l,price_id:d,patient_id:n,facility_id:s=s,user_id:a.currentUser.id};t.post("/api/enterEncounterEm",c).then(function(t){e.registrationReport=t.data,0==t.data.status?sweetAlert(t.data.data,"","error"):(sweetAlert(t.data.data,"","success"),c="")})}}])}(),function(){"use strict";angular.module("authApp").directive("ngFiles",["$parse",function(e){return{link:function(t,a,i){var n=e(i.ngFiles);a.on("change",function(e){n(t,{$files:e.target.files})})}}}]).controller("normalRegistrationController",function(e,t,a,i,n,s,r,o,l){var d=new FormData;o.getTheFiles=function(e){angular.forEach(e,function(e,t){d.append(t,e)})},o.isNavCollapsed=!1,o.isCollapsed=!0,o.isCollapsedHorizontal=!0;a.currentUser;var c=a.currentUser.id,u=a.currentUser.facility_id,p=[],_=[],m=[],f=[];e.get("/api/getInsurances").then(function(e){o.insurances=e.data}),o.verification=function(t){e.get("https://verification.nhif.or.tz/NHIFService/breeze/Verification/GetCard?CardNo="+t).then(function(e){console.log(e),"Active"==e.data.StatusDescription?(o.patient.first_name=e.data.FirstName,o.patient.middle_name=e.data.MiddleName,o.patient.last_name=e.data.LastName,o.patient.gender=e.data.Gender,o.patient.dob=e.data.DateOfBirth.substr(0,e.data.DateOfBirth.indexOf("T")),o.nhif_patient={first_name:e.data.FirstName,middle_name:e.data.MiddleName,last_name:e.data.LastName,gender:e.data.Gender,dob:e.data.DateOfBirth},swal("CARD VALID")):swal("kalipe pesa kijana")})},o.printUserMenu=function(t){e.get("/api/getUsermenu/"+t).then(function(e){o.menu=e.data,console.log(o.menu)})},e.get("/api/getUserImage/"+c).then(function(e){o.photo="/uploads/"+e.data[0].photo_path,console.log(o.photo)});var g=a.currentUser.id;a.currentUser.facility_id;o.printUserMenu(g),o.tabs=[],o.getPatients=function(t){return t.length>3&&e.get("/api/getSearchedCasualty/"+t).then(function(e){f=e.data,console.log(o.patients)}),console.log(t),f},o.alertMe=function(){setTimeout(function(){$window.swal("Use proper ways to avoid Mistakes",username,"error")})},o.model={name:"Tabs"},o.oneAtATime=!0,o.status={isCustomHeaderOpen:!1,isFirstOpen:!0,isFirstDisabled:!1},o.showSearchResidences=function(t){return e.get("/api/searchResidences/"+t).then(function(e){m=e.data}),m},o.patientService=function(){var t={patient_category:o.encounter.payment_category.patient_category,item_name:o.encounter};return console.log(o.encounter),e.post("/api/searchPatientServices",t).then(function(e){_=e.data}),console.log(m),_},o.getPricedItems=function(t){console.log(t),e.get("/api/getPricedItems/"+t).then(function(e){o.services=e.data})},o.searchPatientCategory=function(t){return e.get("/api/searchPatientCategory/"+t).then(function(e){p=e.data}),p},o.viewItem=function(e){o.quick_registration=e,console.log(e.first_name),l.open({templateUrl:"/views/modules/emergency/emergencyencounterModal.html",size:"lg",animation:!0,controller:"emergencyModal",resolve:{quick_registration:function(){return console.log(o.quick_registration),o.quick_registration}}}).result.then(function(e){o.quick_reg=e,console.log(o.quick_reg)})},o.openDialogForServices=function(e){console.log(e),o.quick_registration=e,console.log(o.quick_registration),l.open({templateUrl:"/views/modules/emergency/emergencyencounterModal.html",size:"lg",animation:!0,controller:"emergencyModal",resolve:{quick_registration:function(){return o.cardDetails=o.quick_registration,console.log(o.cardDetails),o.quick_registration}}}).result.then(function(e){o.quick_reg=e,console.log(o.quick_reg)})},o.openDialogForUrgency=function(e){console.log(e),o.quick_registration=e,console.log(o.quick_registration),l.open({templateUrl:"/views/modules/emergency/emergencyencounterModal.html",size:"lg",animation:!0,controller:"urgencyModal",resolve:{quick_registration:function(){return o.cardDetails=o.quick_registration,console.log(o.cardDetails),o.quick_registration}}}).result.then(function(e){o.quick_reg=e,console.log(o.quick_reg)})},o.patient_urgency_registration=function(t){var a=t.first_name,i=t.middle_name,n=t.last_name,s=t.gender,r=t.dob,l=t.mobile_number;if(0==angular.isDefined(a))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");if(0==angular.isDefined(i))return sweetAlert("Please Enter MIDDLE NAME before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter LAST NAME before SAVING","","error");if(0==angular.isDefined(t.resedence_id))return sweetAlert("Please type the Residence Name and choose from the suggestions","","error");var d={first_name:a,middle_name:i,last_name:n,dob:r,gender:s,mobile_number:l,residence_id:t.resedence_id.residence_id,facility_id:u,user_id:g};e.post("/api/urgency_registration",d).then(function(e){o.quick_registration=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):(o.patient=null,d=o.quick_registration,o.viewItem(d))})},o.exemption_type_list=function(){e.get("/api/exemption_type_list").then(function(e){o.exemption_types=e.data})},o.exemption_type_list(),e.get("/api/getexemption_services/"+u).then(function(e){o.exemption_services=e.data}),o.exemption_registration=function(t,i){console.log(i,t);var n=2,s="..";if(void 0==t)swal("Feedback..","FILL ALL FIELDS","error");else if(void 0==t.exemption_type_id)swal("Feedback..","Please Select Exemption Category ","error");else if(void 0==t.exemption_reason)swal("Feedback..","Please Fill  Reason(s) for This exemption ","error");else if(void 0==t.service)swal("Feedback..","Please Choose Service ","error");else{var r=i.id,c=t.service.patient_category,u=t.service,p=t.service.service_id,_=t.service.price_id,m=t.service.item_type_id,f=r,g=t.service.facility_id,h=a.currentUser.id,v={payment_filter:t.exemption_type_id,item_type_id:m,patient_category:c,main_category_id:3,bill_id:t.exemption_type_id,service_category:u,service_id:p,price_id:_,patient_id:f,facility_id:g,user_id:h},n=2,y=t.exemption_type_id,w=t.exemption_reason,h=a.currentUser.id,g=a.currentUser.facility_id,f=r,n=n,y=t.exemption_type_id,w=t.exemption_reason,s=s;t.description,d.append("exemption_type_id",y),d.append("exemption_reason",w),d.append("user_id",h),d.append("facility_id",g),d.append("patient_id",f),d.append("reason_for_revoke",s),d.append("status_id",n),e({method:"POST",url:"/api/patient_exemption",data:d,headers:{"Content-Type":void 0}}).then(function(t){t.data.msg,o.ok=t.data.status,t.data.status,e.post("/api/urgencyEncounter",v).then(function(t){o.registrationReport=t.data,0==t.data.status?sweetAlert(t.data.data,"","error"):(e.get("/api/getPatientInfo/"+f).then(function(e){o.patientsInfo=e.data}),l.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{patientData:function(){return o.patientData}}}))})}).then(function(){})}}})}(),function(){"use strict";angular.module("authApp").controller("observationRoomController",function(e,t,a,i,n,s,r,o,l){o.isNavCollapsed=!1,o.isCollapsed=!0,o.isCollapsedHorizontal=!0;a.currentUser;var d=a.currentUser.id,c=a.currentUser.facility_id,u=[],p=[],_=[];o.printUserMenu=function(t){e.get("/api/getUsermenu/"+t).then(function(e){o.menu=e.data,console.log(o.menu)})},e.get("/api/getUserImage/"+d).then(function(e){o.photo="/uploads/"+e.data[0].photo_path,console.log(o.photo)});var m=a.currentUser.id;a.currentUser.facility_id;o.printUserMenu(m),o.tabs=[],o.alertMe=function(){setTimeout(function(){$window.swal("Use proper ways to avoid Mistakes",username,"error")})},o.model={name:"Tabs"},o.oneAtATime=!0,o.status={isCustomHeaderOpen:!1,isFirstOpen:!0,isFirstDisabled:!1},o.viewItem=function(e){o.quick_registration=e,console.log(e.first_name),l.open({templateUrl:"/views/modules/emergency/emergencyencounterModal.html",size:"lg",animation:!0,controller:"emergencyModal",resolve:{quick_registration:function(){return console.log(o.quick_registration),o.quick_registration}}}).result.then(function(e){o.quick_reg=e,console.log(o.quick_reg)})},o.openDialogForServices=function(e){console.log(e),o.quick_registration=e,console.log(o.quick_registration),l.open({templateUrl:"/views/modules/emergency/emergencyencounterModal.html",size:"lg",animation:!0,controller:"emergencyModal",resolve:{quick_registration:function(){return o.cardDetails=o.quick_registration,console.log(o.cardDetails),o.quick_registration}}}).result.then(function(e){o.quick_reg=e,console.log(o.quick_reg)})},o.patient_urgent_registratione=function(t){var a=t.first_name,i=t.middle_name,n=t.last_name,s=t.gender,r=t.dob,l=t.mobile_number;if(0==angular.isDefined(a))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");if(0==angular.isDefined(i))return sweetAlert("Please Enter MIDDLE NAME before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter LAST NAME before SAVING","","error");if(0==angular.isDefined(t.resedence_id))return sweetAlert("Please type the Residence Name and choose from the suggestions","","error");var d={first_name:a,middle_name:i,last_name:n,dob:r,gender:s,mobile_number:l,residence_id:t.resedence_id.residence_id,facility_id:c,user_id:m};e.post("/api/urgency_registration",d).then(function(e){o.quick_registration=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):(o.patient=null,d=o.quick_registration,o.viewItem(d))})},o.showSearchResidences=function(t){return e.get("/api/searchResidencesEm/"+t).then(function(e){_=e.data}),_},o.patientService=function(){var t={patient_category:o.encounter.payment_category.patient_category,item_name:o.encounter};return console.log(o.encounter),e.post("/api/searchPatientServices",t).then(function(e){p=e.data}),console.log(_),p},o.searchPatientCategory=function(t){return e.get("/api/searchPatientCategoryEm/"+t).then(function(e){u=e.data}),u},o.getPricedItems=function(t){console.log(t),e.get("/api/getPricedItems/"+t).then(function(e){o.services=e.data})}})}(),function(){"use strict";angular.module("authApp").controller("treatmentDepartmentController",function(e,t,a,i,n,s,r,o,l){o.isNavCollapsed=!1,o.isCollapsed=!0,o.isCollapsedHorizontal=!0,o.isCollapsedHorizontal=!1;a.currentUser;var d,c=a.currentUser.id,u=a.currentUser.name,p=a.currentUser.facility_id;o.oneAtATime=!0,o.templates=[{name:"Resuscitation",url:"resuscitation.html"},{name:"Wards",url:"ward.html"},{name:"Discharge",url:"deceased.html"},{name:"Deceased",url:"mortuary.html"}],o.mytime=new Date,o.hstep=1,o.mstep=2,o.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},o.ismeridian=!0,o.toggleMode=function(){o.ismeridian=!o.ismeridian},o.update=function(){var e=new Date;e.setHours(14),e.setMinutes(0),o.mytime=e},o.ngModelOptionsSelected=function(e){if(!arguments.length)return d;d=e},o.modelOptions={debounce:{default:500,blur:250},getterSetter:!0},o.printUserMenu=function(t){e.get("/api/getUsermenu/"+t).then(function(e){o.menu=e.data,console.log(o.menu)})},e.get("/api/getUserImage/"+c).then(function(e){o.photo="/uploads/"+e.data[0].photo_path,console.log(o.photo)}),e.get("/api/getWards").then(function(e){o.wards=e.data});var _=a.currentUser.id;a.currentUser.facility_id;o.printUserMenu(_);var m=[];o.showSearch=function(t){return e.post("/api/getTretPatients",{search:t,facility_id:p}).then(function(e){m=e.data}),m},o.openDialogForVitals=function(e){console.log(e),o.quick_registration=e,console.log(o.quick_registration),l.open({templateUrl:"/views/modules/emergency/emergencyvitalsModal.html",animation:!0,controller:"emergencyModal",windowClass:"app-modal-window",resolve:{quick_registration:function(){return o.cardDetails=o.quick_registration,console.log(o.cardDetails),o.quick_registration}}}).result.then(function(e){o.quick_reg=e,console.log(o.quick_reg)})},o.states=[{name:"Body Weight",unit:"Kg",value:"weight",status:"1"},{name:"Height/Length",unit:"cm",value:"height",status:"2"},{name:"Body Temperature",unit:"",value:"temperature",status:"3"},{name:"Systolic Pressure",unit:"mmHg",value:"systolic",status:"4"},{name:"Diastolic Pressure",unit:"mmHg",value:"diastolic",status:"5"},{name:"Respiratory Rate",unit:"Breaths/Min",value:"respiratory",status:"6"},{name:"Pulse Rate",unit:"Breaths/Min",value:"pulse",status:"7"},{name:"Oxygen Saturation",unit:"Beats/Min",value:"oxygen",status:"8"}],o.VitalSignRegister=function(t,a){var i=t.Body_weight,n=t.height_length,s=t.Body_temperature,r=t.Systolic_pressure,o=t.Diastolic_pressure,l=t.Respiratory_rate,d=t.pulse_rate,u=t.Oxygen_saturation,_={id:a,Body_weight:i,height_length:n,Body_temperature:s,Systolic_pressure:r,Diastolic_pressure:o,Respiratory_rate:l,time_attended:t.time_attended,Pulse_rate:d,facility_id:p,Oxygen_saturation:u,registered_by:c};console.log(_),e.post("/api/VitalSignRegister",_).then(function(e){console.log(e.data),swal("Vital Sign Sent Successfully","Successfully Registered","success"),t.Body_weight=null,t.height_length=null,t.Body_temperature=null,t.Systolic_pressure=null,t.Diastolic_pressure=null,t.Respiratory_rate=null,t.pulse_rate=null,t.Oxygen_saturation=null})},o.VitalRegister=function(t,a){console.log(t);var i=t.number,n=t.time,s=t.name.value,r=t.name.unit,o=t.name.status;console.log(s),console.log(i),console.log(o);var l={vital_sign:s,vital_data:i,facility_id:p,status:o,time_attended:n,unit:r,registered_by:c,patient_id:a};swal({title:u,text:"Confirm Vital Signs",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Confirmed!"}).then(function(){e.post("/api/VitalRegister",l).then(function(e){console.log(e.data),t.number=null;var a=e.data.msg;0==e.data.status?swal("Error",a,"error"):swal("Vital Sign Sent",a,"success")})})},o.x_axis=[],o.y_axis=[],o.viewVitals=function(t){console.log(t),e.get("/api/viewVitals/"+t).then(function(e){o.vitalData=e.data;for(var t=0;t<o.vitalData.length;t++)o.x_axis.push(e.data[t].time_attended),o.y_axis.push(e.data[t].Body_temperature);console.log(o.y_axis),o.labels=o.x_axis,o.data=o.y_axis})},o.viewVitals=function(t){console.log(t),e.get("/api/viewVitals/"+t).then(function(e){o.vitalData=e.data,o.x_axis=[],o.y_axis=[];for(var t=0;t<o.vitalData.length;t++)o.x_axis.push(e.data[t].time_attended),o.y_axis.push(e.data[t].Body_temperature);console.log(o.y_axis),o.labels=o.x_axis,o.data=o.y_axis})},o.viewDiastolicPressure=function(t){console.log(t),e.get("/api/viewDiastolicPressure/"+t).then(function(e){o.vitalData=e.data,o.vitalData=e.data,o.valuex=[],o.valuey=[];for(var t=0;t<o.vitalData.length;t++)o.valuex.push(e.data[t].time_attended),o.valuey.push(e.data[t].Diastolic_pressure);console.log(o.valuey),o.labels=o.valuex,o.data=o.valuey})},o.viewTemperature=function(t){console.log(t),e.get("/api/viewTemperature/"+t).then(function(e){o.vitalData=e.data,o.vitalData=e.data,o.valuex=[],o.valuey=[];for(var t=0;t<o.vitalData.length;t++)o.valuex.push(e.data[t].time_attended),o.valuey.push(e.data[t].Body_temperature);console.log(o.valuey),o.labels=o.valuex,o.data=o.valuey})},o.viewPulseRate=function(t){console.log(t),e.get("/api/viewPulseRate/"+t).then(function(e){o.vitalData=e.data,o.vitalData=e.data,o.valuex=[],o.valuey=[];for(var t=0;t<o.vitalData.length;t++)o.valuex.push(e.data[t].time_attended),o.valuey.push(e.data[t].Pulse_rate);console.log(o.valuey),o.labels=o.valuex,o.data=o.valuey})},o.viewSystolicPressure=function(t){console.log(t),e.get("/api/viewSystolicPressure/"+t).then(function(e){o.vitalData=e.data,o.valueX=[],o.ValueY=[];for(var t=0;t<o.vitalData.length;t++)o.valueX.push(e.data[t].time_attended),o.ValueY.push(e.data[t].Systolic_pressure);console.log(o.ValueY),o.labels=o.valueX,o.data=o.ValueY})},o.Resus=function(t){var a={patient_id:t,facility:p};console.log(a),e.post("/api/Resus",a).then(function(e){var t=e.data;console.log(t),swal(u,"Patient  Sent Resuscitation Room","success")})},o.patients=function(){e.get("/api/observationUsers/"+p).then(function(e){o.observationusers=e.data,o.selectedPatient=""})},o.SaveSummary=function(t,a){var i=t.mode_arrival,n=t.referred,s=t.complain,r=t.disposition,o=t.condition,l=t.acuity,d=t.arrival,_=t.decision,m=t.departure,f=t.dispoType,g=t.rm,h=t.timeleft,v=t.triage,y=t.visit;if(0==angular.isDefined(i))return sweetAlert("Please Fill Mode of Arrival","","error");if(0==angular.isDefined(n))return sweetAlert("Please Fill Referred Field","","error");if(0==angular.isDefined(s))return sweetAlert("Please Fill Complain Field","","error");if(0==angular.isDefined(r))return sweetAlert("Please Fill Disposition Field","","error");if(0==angular.isDefined(o))return sweetAlert("Please Fill Condition  Field","","error");if(0==angular.isDefined(l))return sweetAlert("Please Fill Acuity  Field","","error");if(0==angular.isDefined(d))return sweetAlert("Please Fill Arrival  Field","","error");if(0==angular.isDefined(_))return sweetAlert("Please Fill Decision  Field","","error");if(0==angular.isDefined(m))return sweetAlert("Please Fill Departure  Field","","error");if(0==angular.isDefined(f))return sweetAlert("Please Fill Disposition Type  Field","","error");if(0==angular.isDefined(g))return sweetAlert("Please Fill Rm  Field","","error");if(0==angular.isDefined(h))return sweetAlert("Please Fill Time Left  Field","","error");if(0==angular.isDefined(v))return sweetAlert("Please Fill Triage  Field","","error");if(0==angular.isDefined(y))return sweetAlert("Please Fill Visit  Field","","error");console.log(i),console.log(a);var w={patient_id:a,mode_departure:m,referred_by:n,chief_complaint:s,disposition:r,condition_dispo:o,acuity:l,arrival:d,dispo_decision:_,emergency_arrival:i,emmergency_dispo:f,rm:g,time_left:h,triage_impression:v,visit_type:y,registered_by:c,facility_id:p};console.log(w),e.post("/api/SaveSummary",w).then(function(e){console.log(e.data),swal(u,"Visit Summary Sent ","success")})},o.SaveAppearance=function(t,a){console.log(t),console.log(a);var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Appearance",system:"Emergency",facility_id:p};console.log(i),e.post("/api/SaveAppearance",i).then(function(e){o.surgical=e.data,swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){})})},o.SaveAirway=function(t,a){console.log(t),console.log(a);var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Airway",system:"Emergency",facility_id:p};e.post("/api/SaveAirway",i).then(function(e){o.surgical=e.data,swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){})})},o.SaveBreathing=function(t,a){console.log(t),console.log(a);var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Breathing",system:"Emergency",facility_id:p};e.post("/api/SaveBreathing",i).then(function(e){o.surgical=e.data,swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){})})},o.SaveCirculation=function(t,a){var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Circulation",system:"Emergency",facility_id:p};e.post("/api/SaveCirculation",i).then(function(e){o.surgical=e.data,swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){})})},o.SaveResponsiveness=function(t,a){var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Disability",system:"Emergency",facility_id:p};e.post("/api/SaveResponsiveness",i).then(function(e){o.surgical=e.data,swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){})})},o.SaveExposure=function(t,a){var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Exposure",system:"Emergency",facility_id:p};e.post("/api/SaveExposure",i).then(function(e){o.surgical=e.data,swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){})})},o.SaveIntervention=function(t,a){var i={observation:t,admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:_,category:"Intervention",system:"Emergency",facility_id:p};e.post("/api/SaveIntervention",i).then(function(e){o.surgical=e.data,swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){})})},o.cancel=function(){o.patients()},o.patients(),o.patientAdmission=function(e,t){if(null!=t){var a=angular.extend({},e,t);l.open({templateUrl:"/views/modules/ClinicalServices/admission.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return a}}})}else swal("Oops! something went wrong..","Please search and select Patient then click ward button to admit patient!")},o.getPatientData1=function(e){console.log(e),o.selectedPatient=e.data,o.observationusers=""},o.records=[],o.addSurgical=function(e,t,a){console.log(e),console.log(t),console.log(a),o.records.push({descriptions:e,admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,status:"Surgical",facility_id:p}),console.log(o.records)},o.remove=function(e){o.records.splice(e,1)},o.savePastSurgicalProcedure=function(){console.log(o.records),e.post("/api/savePastSurgicalProcedure",o.records).then(function(e){o.surgical=e.data,swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){})})},o.getPatientData=function(t){e.post("/api/vitalsDate",{patient_id:t.patient_id}).then(function(e){o.vitalsDate=e.data}),e.post("/api/prevDiagnosis",{patient_id:t.patient_id}).then(function(e){o.diagnosis=e.data}),e.post("/api/prevFamilyHistory",{patient_id:t.patient_id}).then(function(e){o.familyHistory=e.data}),e.post("/api/prevBirthHistory",{patient_id:t.patient_id}).then(function(e){o.birthHistory=e.data}),e.post("/api/prevHistoryExaminations",{patient_id:t.patient_id}).then(function(e){o.historyExaminations=e.data}),e.post("/api/prevObsGyn",{patient_id:t.patient_id}).then(function(e){o.obsHistory=e.data}),e.post("/api/getResults",{patient_id:t.patient_id,dept_id:3}).then(function(e){o.radiology=e.data}),e.post("/api/prevRoS",{patient_id:t.patient_id}).then(function(e){o.ros=e.data}),e.post("/api/prevPhysicalExaminations",{patient_id:t.patient_id}).then(function(e){o.physicalExaminations=e.data}),e.post("/api/getResults",{patient_id:t.patient_id,dept_id:2}).then(function(e){o.labInvestigations=e.data}),o.selectedPatient=t,o.observationusers=""};var f=[];o.complaints=function(t){return e.post("/api/chiefComplaints",{search:t}).then(function(e){f=e.data}),f};var g=[];o.showCardio=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Cardiovascular"}).then(function(e){g=e.data}),g};var h=[];o.showRespiratory=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Respiratory"}).then(function(e){h=e.data}),h};var v=[];o.showGastro=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Gastrointerstinal"}).then(function(e){v=e.data}),v};var y=[];o.showMusculo=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Musculoskeletal"}).then(function(e){y=e.data}),y};var w=[];o.showGenito=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Genitourinary"}).then(function(e){w=e.data}),w};var b=[];o.showCNS=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Central Nervous System"}).then(function(e){b=e.data}),b};var P=[];o.showEndo=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Endocrine"}).then(function(e){P=e.data}),P};var S=[];o.showAllergy=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Allergy"}).then(function(e){S=e.data}),S};A=[];o.showMedication=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Medication"}).then(function(e){A=e.data}),A};var A=[];o.showIllness=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Past Medical History"}).then(function(e){A=e.data}),A};var D=[];o.showAdmission=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Admission History"}).then(function(e){D=e.data}),D};var E=[];o.showImmune=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Immunisation"}).then(function(e){E=e.data}),E};var C=[];o.showInspection=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Inspection"}).then(function(e){C=e.data}),C};var T=[];o.showPalpation=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Palpation"}).then(function(e){T=e.data}),T};var O=[];o.showPercussion=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Percussion"}).then(function(e){O=e.data}),O};var I=[];o.showAuscultation=function(t){return e.post("/api/reviewOfSystems",{search:t,category:"Auscultation"}).then(function(e){I=e.data}),I};var M=[];o.showDiagnosis=function(t){return e.post("/api/getDiagnosis",{search:t}).then(function(e){M=e.data}),M},o.allergyChecker=function(t){e.post("/api/getAllergy",{patient_id:t.patient_id}).then(function(e){swal("This Patient is allergic to "+e.data[0].descriptions,"","info")})},o.getSubDepts=function(t){e.post("/api/getSubDepts",{department_id:t}).then(function(e){o.subDepartments=e.data})},o.getTests=function(t,a){if(0!=angular.isDefined(a)){var i=a.bill_id;3==a.main_category_id&&(i=1),e.post("/api/getPanels",{patient_category_id:i,sub_dept_id:t,facility_id:p}).then(function(e){o.panels=e.data}),e.post("/api/getTests",{patient_category_id:i,sub_dept_id:t,facility_id:p}).then(function(e){o.labTests=e.data})}else swal("select Patient first","","error")},o.investigationOrders=[],o.unavailableOrders=[],o.orders=function(e,t,a){var i="";if(null!=a.patient_id){if(1==t){for(n=0;n<o.investigationOrders.length;n++)if(o.investigationOrders[n].item_id==e.item_id)return void swal("Item already in your order list!");if(1!=e.on_off){for(var n=0;n<o.unavailableOrders.length;n++)if(o.unavailableOrders[n].item_id==e.item_id)return void swal("Item already in your order list!");return void o.unavailableOrders.push({facility_id:p,visit_date_id:a.account_id,patient_id:a.patient_id,user_id:_,item_id:e.item_id,item_name:e.item_name})}1!=a.main_category_id&&(i=a.bill_id),o.investigationOrders.push({admission_id:"",facility_id:p,item_type_id:e.item_type_id,item_price_id:e.item_price_id,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:_,item_id:e.item_id,item_name:e.item_name,priority:"",clinical_note:"",payment_filter:i}),console.log(o.investigationOrders)}}else swal("Ooops!! no Patient selected","Please search and select patient first..")},o.saveInvestigation=function(t){if(""!=o.investigationOrders||null!=o.unavailableOrders){for(var a=0;a<o.investigationOrders.length;a++)o.investigationOrders[a].priority=t.priority,o.investigationOrders[a].clinical_note=t.clinical_note;""!=o.investigationOrders&&(e.post("/api/postInvestigations",o.investigationOrders).then(function(e){}),o.investigationOrders=[],o.inv),e.post("/api/postUnavailableInvestigations",o.unavailableOrders).then(function(e){}),swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){}),o.unavailableOrders=[]}else swal("You dont have Items to save!","Please select Items first!")},o.getLabResults=function(t){var a={patient_id:t.patient_id,date_attended:t.date_attended,dept_id:t.dept_id};e.post("/api/getInvestigationResults",a).then(function(e){o.labResults=e.data})},o.getRadResults=function(t){var a={patient_id:t.patient_id,date_attended:t.date_attended,dept_id:t.dept_id};e.post("/api/getInvestigationResults",a).then(function(e){o.radResults=e.data})},o.complaintz=[],o.addComplaint=function(e,t,a){if(null!=a.patient_id){for(var i=0;i<o.complaintz.length;i++)if(o.complaintz[i].id==e.id)return void swal("Item already in your wish list!");o.complaintz.push({admission_id:"",patient_id:a.patient_id,facility_id:p,visit_date_id:a.account_id,user_id:_,description:e.name,id:e.id,duration:t.durationqty,duration_unit:t.durationunit,status:"Chief Complaints"})}else swal("Ooops!! no Patient selected","Please search and select patient first..")},o.saveComplaints=function(t,a){""!=t?e.post("/api/postHistory",t).then(function(t){var i=t.data,n={other_complaints:a.other_complaints,description:a.hpi,history_exam_id:i,status:"HPI"};e.post("/api/historyRecords",n).then(function(e){swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){}),o.complaintz=[]})}):swal("Oops Data not saved!","Please fill all necessary fields, click 'Add' Button then 'Save Complaints' Button to save data..")},o.cardiocasucular=[],o.respiratory=[],o.gastrointestinal=[],o.musculoskeletal=[],o.genitourinary=[],o.cns=[],o.endocrine=[],o.reviewOfSystems=function(e,t){null!=t.patient_id?o.cardiocasucular.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system_id:e.id,name:e.name,status:e.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.reviewOfSystems2=function(e,t){null!=t.patient_id?o.respiratory.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system_id:e.id,name:e.name,status:e.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.reviewOfSystems3=function(e,t){null!=t.patient_id?o.gastrointestinal.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system_id:e.id,name:e.name,status:e.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.reviewOfSystems4=function(e,t){null!=t.patient_id?o.musculoskeletal.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system_id:e.id,name:e.name,status:e.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.reviewOfSystems5=function(e,t){null!=t.patient_id?o.genitourinary.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system_id:e.id,name:e.name,status:e.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.reviewOfSystems6=function(e,t){null!=t.patient_id?o.cns.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system_id:e.id,name:e.name,status:e.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.reviewOfSystems7=function(e,t){null!=t.patient_id?o.endocrine.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system_id:e.id,name:e.name,status:e.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.saveRoS=function(t){""!=t?(e.post("/api/postRoS",t).then(function(e){}),swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){}),o.cardiocasucular=[],o.respiratory=[],o.gastrointestinal=[],o.musculoskeletal=[],o.genitourinary=[],o.cns=[],o.endocrine=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},o.allergy=[],o.medications=[],o.illness=[],o.admissions=[],o.immunisation=[],o.pastMedicals=function(e,t){null!=t.patient_id?o.allergy.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system_id:e.id,name:e.name,status:e.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.pastMedicals2=function(e,t){null!=t.patient_id?o.medications.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system_id:e.id,name:e.name,status:e.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.pastMedicals3=function(e,t){null!=t.patient_id?o.illness.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system_id:e.id,name:e.name,status:e.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.pastMedicals4=function(e,t){null!=t.patient_id?o.admissions.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system_id:e.id,name:e.name,status:e.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.pastMedicals5=function(e,t){null!=t.patient_id?o.immunisation.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system_id:e.id,name:e.name,status:e.category}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.savePastMedical=function(t){""!=t?(e.post("/api/postPastMed",t).then(function(e){}),swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){}),o.allergy=[],o.medications=[],o.illness=[],o.admissions=[],o.immunisation=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},o.saveBirthHistory=function(t,a){if(null!=a.patient_id){var i={admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:p,user_id:_,antenatal:t.antenatal,natal:t.natal,post_natal:t.post_natal,nutrition:t.nutrition,growth:t.growth,development:t.development};e.post("/api/birthHistory",i).then(function(e){swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){})})}else swal("Ooops!! no Patient selected","Please search and select patient first..")},o.saveObsGyn=function(t,a){if(null!=a.patient_id){var i={admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:p,user_id:_,menarche:t.menarche,menopause:t.menopause,menstrual_cycles:t.menstrual_cycles,pad_changes:t.pad_changes,recurrent_menstruation:t.recurrent_menstruation,contraceptives:t.contraceptives,pregnancy:t.pregnancy,lnmp:t.lnmp,gravidity:t.gravidity,parity:t.parity,living_children:t.living_children};e.post("/api/postObs",i).then(function(e){swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){})})}else swal("Ooops!! no Patient selected","Please search and select patient first..")},o.removeFromSelection=function(e,t){var a=t.indexOf(e);t.splice(a,1)},o.physicalMusculoskeletal=[],o.physicalRespiratory=[],o.physicalCardiovascular=[],o.physicalGastrointestinal=[],o.physicalGenitourinary=[],o.physicalCNS=[],o.physicalEndocrine=[],o.physicalMusculo=function(e,t,a){null!=t.patient_id?o.physicalMusculoskeletal.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system:a,category:e.category,observation:e.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.physicalResp=function(e,t,a){null!=t.patient_id?o.physicalRespiratory.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system:a,category:e.category,observation:e.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.physicalCardio=function(e,t,a){null!=t.patient_id?o.physicalCardiovascular.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system:a,category:e.category,observation:e.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.physicalGastro=function(e,t,a){null!=t.patient_id?o.physicalGastrointestinal.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system:a,category:e.category,observation:e.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.physicalGenito=function(e,t,a){null!=t.patient_id?o.physicalGenitourinary.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system:a,category:e.category,observation:e.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.physicalCns=function(e,t,a){null!=t.patient_id?o.physicalCNS.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system:a,category:e.category,observation:e.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.physicalEndo=function(e,t,a){null!=t.patient_id?o.physicalEndocrine.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,user_id:_,facility_id:p,system:a,category:e.category,observation:e.name}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.savePhysicalExamination=function(t){""!=t?(e.post("/api/postPhysical",t).then(function(e){}),swal("Data Succesfully Saved!"),o.physicalMusculoskeletal=[],o.physicalRespiratory=[],o.physicalCardiovascular=[],o.physicalGastrointestinal=[],o.physicalGenitourinary=[],o.physicalCNS=[],o.physicalEndocrine=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},o.saveSocialCommunity=function(t,a){if(null!=a.patient_id){var i={patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:p,user_id:_,chronic_illness:t.chronic_illness,substance_abuse:t.substance_abuse,adoption:t.adoption,others:t.others};e.post("/api/familyHistory",i).then(function(e){swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){})})}else swal("Ooops!! no Patient selected","Please search and select patient first..")},o.provisionalDiagnosis=[],o.differentialDiagnosis=[],o.confirmedDiagnosis=[],o.addProv=function(e,t,a){null!=t.patient_id?o.provisionalDiagnosis.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,facility_id:p,user_id:_,diagnosis_description_id:e.id,description:e.description,status:a}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.addDiff=function(e,t,a){null!=t.patient_id?o.differentialDiagnosis.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,facility_id:p,user_id:_,diagnosis_description_id:e.id,description:e.description,status:a}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.addConf=function(e,t,a){null!=t.patient_id?o.confirmedDiagnosis.push({admission_id:"",patient_id:t.patient_id,visit_date_id:t.account_id,facility_id:p,user_id:_,diagnosis_description_id:e.id,description:e.description,status:a}):swal("Ooops!! no Patient selected","Please search and select patient first..")},o.saveDiagnosis=function(t){""!=t?(e.post("/api/postDiagnosis",t).then(function(e){swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){})}),o.provisionalDiagnosis=[],o.differentialDiagnosis=[],o.confirmedDiagnosis=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.get("/api/getWards").then(function(e){o.wards=e.data}),o.patientAdmission=function(e,t){if(0!=angular.isDefined(t)){var a=angular.extend({},e,t);l.open({templateUrl:"/views/modules/ClinicalServices/admission.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return a}}})}else swal("Oops! something went wrong..","Please search and select Patient then click ward button to admit patient!")};var U=[];o.medicines=[],o.medicinesOs=[],o.searchItems=function(t,a){var i=a.bill_id;if(null!=i)return 3==a.main_category_id&&(i=1),e.post("/api/getMedicine",{search:t,facility_id:p,patient_category_id:i}).then(function(e){U=e.data}),U;swal("Please search patient to be prescribed before searching Medicine!")};var R=[];o.addMedicine=function(t,a,i){var n="",s=a.main_category_id,r=t.dose*t.duration*24/t.frequency;if(null!=a)if(null!=i)if(null!=t.instructions){for(var l=0;l<o.medicines.length;l++)if(o.medicines[l].item_id==i.item_id)return void swal("Item already in your order list!");1!=s&&(n=a.bill_id),3==s&&(s=1),e.post("/api/balanceCheck",{main_category_id:s,item_id:i.item_id,facility_id:p}).then(function(e){if((R=e.data)[0].balance>=r)o.medicines.push({facility_id:p,item_type_id:i.item_type_id,item_price_id:i.price_id,quantity:r,status_id:1,dose:t.dose,frequency:t.frequency,duration:t.duration,instructions:t.instructions,out_of_stock:"",payment_filter:n,account_number_id:a.account_id,patient_id:a.patient_id,user_id:_,item_id:i.item_id,item_name:i.item_name});else if(R[0].balance<r){if(1!=confirm("This Item is not available in Store..Do you want to prescribe anyway?"))return void swal("canceled","Choose different Item for Prescription");for(var s=0;s<o.medicinesOs.length;s++)if(o.medicinesOs[s].item_id==i.item_id)return void swal("Item already in your order list!");o.medicinesOs.push({facility_id:p,item_type_id:i.item_type_id,item_price_id:i.price_id,quantity:r,status_id:1,dose:t.dose,frequency:t.frequency,duration:t.duration,instructions:t.instructions,out_of_stock:"OS",account_number_id:a.account_id,patient_id:a.patient_id,user_id:_,item_id:i.item_id,item_name:i.item_name}),console.log(o.medicinesOs),swal("Item added under OS category")}})}else swal("Please Write Instructions and click 'Add to List' Button","","error");else swal("Please search and select medicine!");else swal("Please search and select Patient to prescribe")},o.saveMedicine=function(){""!=o.medicines||""!=o.medicinesOs?(""!=o.medicines&&(e.post("/api/postMedicines",o.medicines).then(function(e){}),o.medicines=[]),e.post("/api/outOfStockMedicine",o.medicinesOs).then(function(e){}),swal("Patient successfully prescribed!"),o.medicinesOs=[]):swal("No Items to Save","","error")};var B=[];o.procedures=[],o.searchProcedures=function(t,a){var i=a.bill_id;if(null!=i)return 3==a.main_category_id&&(i=1),e.post("/api/getPatientProcedures",{search:t,facility_id:p,patient_category_id:i}).then(function(e){B=e.data}),B;swal("Please search patient before searching procedures!")},o.addProcedure=function(e,t){var a="";if(null!=t.patient_id)if(null!=e.item_id){for(var i=0;i<o.procedures.length;i++)if(o.procedures[i].item_id==e.item_id)return void swal("Item already in your order list!");1!=t.main_category_id&&(a=t.bill_id),o.procedures.push({payment_filter:a,admission_id:"",facility_id:p,item_type_id:e.item_type_id,item_price_id:e.price_id,quantity:1,status_id:1,account_number_id:t.account_id,patient_id:t.patient_id,user_id:_,item_id:e.item_id,item_name:e.item_name})}else swal("Please search and select Procedure!");else swal("Please search and select Patient to prescribe")},o.saveProcedures=function(t){e.post("/api/postPatientProcedures",t).then(function(e){}),swal({title:"Successfully Registration",text:"Data Saved",timer:2e3}).then(function(){},function(e){}),o.procedures=[]}})}(),function(){"use strict";angular.module("authApp").controller("urgencyModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","quick_registration",function(e,t,a,i,n,s){e.quick_registration=s,console.log(e.quick_registration),e.patientData=e.quick_registration;var r={patient_id:e.quick_registration.id,facility_id:e.quick_registration.facility_id};t.post("/api/printLastVisit",r).then(function(t){e.patient_last_visit=t.data,console.log(e.patient_last_visit)}),e.enterEncounter=function(n,s,r){if(0==angular.isDefined(n))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_services))return sweetAlert("Please Select Service","","error");console.log(n);var o=n.payment_category.patient_category,l=n.payment_services,d=n.payment_services.service_id,c=n.payment_services.price_id,u=n.payment_services.item_type_id,p=s,r=r,_=a.currentUser.id,m=n.payment_category.patient_category_id,f={item_type_id:u,patient_category:o,main_category_id:n.payment_category.patient_main_category_id,bill_id:m,service_category:l,service_id:d,price_id:c,patient_id:p,facility_id:r,user_id:_};t.post("/api/urgencyEncounter",f).then(function(a){if(e.registrationReport=a.data,0==a.data.status)sweetAlert(a.data.data,"","error");else{t.get("/api/getPatientInfo/"+p).then(function(t){e.patientsInfo=t.data});i.open({templateUrl:"/views/modules/emergency/emergencyprintCard.html",size:"lg",animation:!0,controller:"emergencyprintCard",resolve:{patientData:function(){return e.patientData}}})}})},e.cancel=function(){console.log("done and cleared"),n.dismiss()},e.closeAllModals=function(){console.log("done and cleared"),n.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("icuController",function(e,t,a,i){var n=a.currentUser.id,s=a.currentUser.facility_id;t.get("/api/getUsermenu/"+n).then(function(t){e.menu=t.data}),t.post("/api/icuPatients",{facility_id:s}).then(function(t){e.icuPatients=t.data}),e.set_diastolic=function(e){return e.diastolic_pressure>59&&e.diastolic_pressure<81?{color:"green"}:e.diastolic_pressure>79&&e.diastolic_pressure<91?{color:"yellow"}:e.diastolic_pressure>90&&e.diastolic_pressure<101?{color:"red"}:e.diastolic_pressure>39&&e.diastolic_pressure<60?{color:"blue"}:void 0},e.set_systolic=function(e){return e.systolic_pressure>89&&e.systolic_pressure<121?{color:"green"}:e.systolic_pressure>120&&e.systolic_pressure<141?{color:"yellow"}:e.systolic_pressure>140&&e.systolic_pressure<191?{color:"red"}:e.systolic_pressure>69&&e.systolic_pressure<91?{color:"blue"}:void 0},e.set_temp=function(e){return e.temperature>=36.5&&e.temperature<37.6?{color:"green"}:e.temperature>37.5&&e.temperature<38.3?{color:"yellow"}:e.temperature>40&&e.temperature<41.5?{color:"red"}:e.temperature<35?{color:"red"}:void 0},e.diagnosis=function(e){var t=e;i.open({templateUrl:"/views/modules/icu/diagnosisModal.html",size:"lg",animation:!0,controller:"icuModals",resolve:{object:function(){return t}}})},e.vitals=function(e){var t=e;i.open({templateUrl:"/views/modules/icu/vitalsModal.html",size:"lg",animation:!0,controller:"icuModals",resolve:{object:function(){return t}}})},e.invResults=function(e){var t=e;i.open({templateUrl:"/views/modules/icu/investigationModal.html",size:"lg",animation:!0,controller:"icuModals",resolve:{object:function(){return t}}})},e.medication=function(e){var t=e;i.open({templateUrl:"/views/modules/icu/medicationModal.html",size:"lg",animation:!0,controller:"icuModals",resolve:{object:function(){return t}}})},e.summary=function(e){var t=e;i.open({templateUrl:"/views/modules/icu/continuationModal.html",size:"lg",animation:!0,controller:"icuModals",resolve:{object:function(){return t}}})},e.disposition=function(e){var t=e;i.open({templateUrl:"/views/modules/icu/dispositionModal.html",size:"lg",animation:!0,controller:"icuModals",resolve:{object:function(){return t}}})}})}(),function(){"use strict";angular.module("authApp").controller("icuModals",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){var r=a.currentUser.facility_id;e.patientDetails=s,t.post("/api/prevDiagnosis",{patient_id:s.patient_id}).then(function(t){e.diagnosisData=t.data}),t.post("/api/getResults",{patient_id:s.patient_id,dept_id:2}).then(function(t){e.labInvestigations=t.data}),t.post("/api/getResults",{patient_id:s.patient_id,dept_id:3}).then(function(t){e.radiology=t.data}),e.oneAtATime=!0,t.post("/api/icuVitals",{patient_id:s.patient_id,facility_id:r}).then(function(t){e.icuVitals=t.data,console.log(t.data)}),e.getDiagnosis=function(a){t.post("/api/getPrevDiagnosis",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevDiagnosis=t.data})}}])}(),function(){"use strict";angular.module("authApp").controller("claimsModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){var r=a.currentUser.facility_id,o=a.currentUser.id;e.claims=s;var l=0;e.claims;var d=s.date_attended,c=s.patient_id;console.log(d),console.log(c),t.get("/api/getUsermenu/"+o).then(function(t){e.menu=t.data}),angular.element(document).ready(function(){e.claimsData=[],t.post("/api/investigationDone",{facility_id:r,patient_id:c,date_attended:d}).then(function(t){for(var a=0;a<t.data.length;a++)e.claimsData.push({item_name:t.data[0][a].item_name,inv_code:t.data[0][a].inv_code,price:t.data[0][a].price,doctor_name:t.data[0][a].user_name,mobile_number:t.data[0][a].mobile_number,profession:t.data[0][a].prof_name,medicine:t.data[1][a].medicine,medi_code:t.data[1][a].medi_code,quantity:t.data[1][a].quantity,sub_med_total:t.data[1][a].sub_med_total,procedure_name:t.data[2][a].procedure_name,proc_code:t.data[2][a].proc_code,proc_price:t.data[2][a].proc_price,procedure_category:t.data[2][a].procedure_category});e.MedTotal1=e.medTotal(e.claimsData),e.invTotal1=e.medTotal(e.claimsData),e.procTotal1=e.procTotal(e.claimsData)})}),t.post("/api/getConfirmed",{patient_id:c,date_attended:d}).then(function(t){e.diagnosis=t.data,console.log(t.data)}),t.get("/api/getConsultationFee/"+r).then(function(t){e.fee=t.data,l=t.data[0].price}),e.invTotal=function(){for(var t=0,a=0;a<e.claimsData.length;a++)t+=e.claimsData[a].price;return t},e.medTotal=function(){for(var t=0,a=0;a<e.claimsData.length;a++)t+=e.claimsData[a].sub_med_total;return t},e.procTotal=function(){for(var t=0,a=0;a<e.claimsData.length;a++)t+=e.claimsData[a].proc_price;return t},e.grandTotal=function(){return e.medTotal()+e.invTotal()+e.procTotal()},e.printInvoice=function(){var e=document.getElementById("contentToPrint"),t=window.open("","PrintWindow","width=750,height=650,top=50,left=50,toolbars=no,scrollbars=yes,status=no,resizable=yes");t.document.title="Print Receipt: GoT-HOMIS",t.document.writeln(e.innerHTML),t.document.close(),setTimeout(function(){t.focus(),t.print(),t.close()},2e3),$state.reload()}}])}(),function(){"use strict";angular.module("authApp").controller("insuranceController",function(e,t,a,i){var n=t.currentUser.id,s=t.currentUser.facility_id;e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t},a.get("/api/getUsermenu/"+n).then(function(t){e.menu=t.data}),e.getDates=function(t){a.post("/api/getNhifDates",{start:t.start,end:t.end,facility_id:s}).then(function(t){e.insurance_attendence=t.data})},e.getPatients=function(t){a.post("/api/getInsurancePatients",{date_attended:t.date_attended,facility_id:s}).then(function(t){e.patients=t.data})},e.getClaimForm=function(e){var t=e;console.log(e),i.open({templateUrl:"/views/modules/insurance/claimForm.html",size:"lg",animation:!0,controller:"claimsModal",windowClass:"app-modal-window",resolve:{object:function(){return t}}})}})}(),function(){"use strict";angular.module("authApp").controller("addItemsModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance",function(e,t,a,i,n){var s=a.currentUser.facility_id;t.get("/api/inventoryItemTypes/"+s).then(function(t){e.itemTypes=t.data}),e.saveItem=function(a){if(""!=angular.isDefined(a.item_name))if(""!=angular.isDefined(a.item_type_id)){var i={item_name:a.item_name,item_type_id:a.item_type_id,facility_id:s};t.post("/api/postNewItem",i).then(function(e){}),e.items=null,swal("Item saved","","success")}else swal("Please choose Iem type then click save","","error");else swal("Please Type Item name","","error")}}])}(),function(){"use strict";angular.module("authApp").controller("inventoryController",function(e,t,a,i){var n=t.currentUser.id,s=t.currentUser.facility_id;e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t};var r=[];e.showSearch=function(e){return a.post("/api/inventoryItems",{searchKey:e,facility_id:s}).then(function(e){r=e.data}),r};var o=[];e.showItemsReceived=function(e){return a.post("/api/inventoryReceivedItems",{searchKey:e,facility_id:s}).then(function(e){o=e.data,console.log(o)}),o};var l=[];e.showUsers=function(e){return a.post("/api/itemReceivers",{search:e,facility_id:s}).then(function(e){l=e.data}),l};var d=[];e.showLocations=function(e){return a.post("/api/inventoryLocations",{search:e,facility_id:s}).then(function(e){d=e.data}),d},e.saveItemtypes=function(t){a.post("/api/itemTypes",{item_type_name:t.item_type_name,item_type_code:t.item_type_code,facility_id:s}).then(function(e){}),swal("Data Saved"),e.item=null},e.saveLocation=function(t){a.post("/api/locations",{location_name:t.location_name,location_code:t.location_code,facility_id:s}).then(function(e){}),swal("Data Saved"),e.location=null},e.newItems=function(){i.open({templateUrl:"/views/modules/inventory/addItemsModal.html",size:"lg",animation:!0,controller:"addItemsModal"})},e.receiveItem=function(t){var i={item_id:t.selectedItem.id,user_id:n,facility_id:s,batch:t.batch,quantity:t.quantity,cost_price:t.cost_price,description:t.description,asset_number:t.asset_number,serial_number:t.serial_number,supplier:t.supplier};a.post("/api/receiveItem",i).then(function(e){}),swal("Item successfully received","","success"),e.receive=null},e.issueItem=function(e){var t={user_id:n,facility_id:s,quantity:e.quantity,item_received_id:e.selectedItem.received_id,issuing_officer_id:s,receiver_id:e.receiver_id.id,location_id:e.location_id.id};a.post("/api/issueItem",t).then(function(e){})}})}(),function(){"use strict";angular.module("authApp").controller("LabPanelComponetsController",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","toastr","object",function(e,t,a,i,n,s,r){a.currentUser.facility_id;var o=a.currentUser.id;e.results={sections:[]},e.results.sections=r.getPanelComponets,e.getPanelComponets=r.getPanelComponets,e.regex=/\s/g,e.closeModal=function(){n.dismiss()},e.approveComponent=function(a){var i=[];if(e.getPanelComponets.forEach(function(e){i.push({panel_name:e.panel,component_name:e.panel_compoent_name,component_id:e.id,order_id:e.order_id,item_id:e.item_id,minimum_limit:e.minimum_limit,maximum_limit:e.maximum_limit,si_units:e.si_units,sample_no:e.sample_no,user_id:o,component_name_value:e.component_name_value})}),i.length!=e.getPanelComponets.length)return s.error("","All fields are required.");t.post("/api/approveComponentsResults",i).then(function(t){0==t.status?s.error("",t.data.data):s.success("","Results Approveds"),e.closeModal()})},e.saveComponent=function(a){var i,n=[];if(e.getPanelComponets.forEach(function(t){i=t.panel_compoent_name.replace(e.regex,"_"),""!=$("#"+i).val()&&n.push({panel_name:t.panel,component_name:t.panel_compoent_name,component_id:t.id,order_id:t.order_id,item_id:t.item_id,minimum_limit:t.minimum_limit,maximum_limit:t.maximum_limit,si_units:t.si_units,sample_no:t.sample_no,user_id:o,component_name_value:$("#"+i).val()})}),n.length!=e.getPanelComponets.length)return s.error("","All fields are required.");t.post("/api/saveComponentsResults",n).then(function(t){0==t.status?s.error("",t.data.data):s.success("","Results Saved "),e.closeModal()})},e.cancel=function(){console.log("done and cleared"),n.dismiss()},e.confirmRejectResults=function(e){var t=e;i.open({templateUrl:"/views/modules/laboratory/confirmRejectResults.html",size:"lg",animation:!0,controller:"printSampleNumberBarcode",resolve:{object:function(){return t}}})}}])}(),function(){"use strict";angular.module("authApp").controller("LabTestRequestPatient",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){var r=a.currentUser.facility_id,o=a.currentUser.id;e.singleTests=s.singleTests,e.PanelsTests=s.PanelsTests,e.patientPaticulars=s.getTestRequest,e.getTestRequests=s.getTestRequest,e.getTestRequest=s.getTestRequest,console.log(e.getTestRequests),e.cancel=function(){n.dismiss()},e.getTestComponents=function(a,n){var s={order_id:n,panel_name:a};t.post("/api/getPanelComponets",s).then(function(t){e.getPanelComponets=t.data;var a={getPanelComponets:e.getPanelComponets};i.open({templateUrl:"/views/modules/laboratory/enterComponentsResults.html",size:"lg",animation:!0,controller:"LabPanelComponetsController",resolve:{object:function(){return a}}})})},e.getTestComponentsResults=function(a,n,s,r){var o={sample_no:a,item_id:n,order_id:r,panel_name:s};console.log(o),t.post("/api/getPanelComponetsResults",o).then(function(t){e.getPanelComponets=t.data;var a={getPanelComponets:e.getPanelComponets};i.open({templateUrl:"/views/modules/laboratory/verifyComponentsResults.html",size:"lg",animation:!0,controller:"LabPanelComponetsController",resolve:{object:function(){return a}}})})};var l="",l=e.patientPaticulars.admission_id;t.get("/api/patientWardBed/"+l).then(function(t){e.getAdmisionInfos=t.data[0],console.log(e.getAdmisionInfos)}),e.saveSampleNumber=function(e,t){return 0==angular.isDefined(t)?sweetAlert("Select TEST to be done","","error"):sweetAlert("TEST request "+t,"","success")},e.generateSampleNumber=function(a,n,s,l){var d={sample_type:a,order_control:null,order_validator_id:o,last_name:n,facility_id:r,request_id:l};t.post("/api/generateSampleNumber",d).then(function(t){if(0==t.data.status)sweetAlert(t.data.data,"","error");else{e.sampleResposes=t.data;var a=e.sampleResposes,n=(a.barcode,a.last_name,a.sample_number,{last_name:a.last_name,sub_department_name:s,sample_number:a.sample_number,image_code:a.barcode});i.open({templateUrl:"/views/modules/laboratory/barcode_print_out.html",size:"lg",animation:!0,controller:"barcodeModal",windowClass:"app-modal-window",resolve:{object:function(){return n}}})}})},e.playAudio=function(){new Audio("/notification/thrown.mp3").play()},e.reGenerateSampleNumber=function(a,i,n){if(0==angular.isDefined(n))return sweetAlert("Select TEST to be done","","error");e.playAudio();var s={order_control:1,order_validator_id:o,last_name:a,facility_id:r,request_id:n};t.post("/api/generateSampleNumber",s).then(function(t){if(0==t.data.status)sweetAlert(t.data.data,"","error");else{e.samples=t.data;var a=e.samples,n='<div class="row"><div class="form-group col-md-9">'+i+a.barcode+a.last_name+"-"+a.sample_number+" </div></div>";swal({title:"",text:"",customClass:"swal-wide",html:n})}})},e.closeModal=function(){n.dismiss()},e.confirmReject=function(e){var t=e;i.open({templateUrl:"/views/modules/laboratory/printBarcodeSampleNumber.html",size:"lg",animation:!0,controller:"printSampleNumberBarcode",resolve:{object:function(){return t}}})},e.confirmRejectResults=function(e){var t=e;i.open({templateUrl:"/views/modules/laboratory/confirmRejectResults.html",size:"lg",animation:!0,controller:"printSampleNumberBarcode",resolve:{object:function(){return t}}})}}])}(),function(){"use strict";angular.module("authApp").controller("SampleTestingModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){var r=a.currentUser.facility_id,o=a.currentUser.id;e.singleTests=s.singleTests,e.PanelsTests=s.PanelsTests,e.patientPaticulars=s.patientPaticulars,e.getTestComponents=function(a,n){var s={order_id:n,panel_name:a};t.post("/api/getPanelComponets",s).then(function(t){e.getPanelComponets=t.data;var a={getPanelComponets:e.getPanelComponets};i.open({templateUrl:"/views/modules/laboratory/enterComponentsResults.html",size:"lg",animation:!0,controller:"LabPanelComponetsController",resolve:{object:function(){return a}}})})},e.getTestComponentsResults=function(a,n,s,r){var o={sample_no:a,item_id:n,order_id:r,panel_name:s};console.log(o),t.post("/api/getPanelComponetsResults",o).then(function(t){e.getPanelComponets=t.data;var a={getPanelComponets:e.getPanelComponets};i.open({templateUrl:"/views/modules/laboratory/verifyComponentsResults.html",size:"lg",animation:!0,controller:"LabPanelComponetsController",resolve:{object:function(){return a}}})})};var l="",l=e.patientPaticulars.admission_id;t.get("/api/patientWardBed/"+l).then(function(t){e.getAdmisionInfos=t.data[0],console.log(e.getAdmisionInfos)}),e.saveSampleNumber=function(e,t){return 0==angular.isDefined(t)?sweetAlert("Select TEST to be done","","error"):sweetAlert("TEST request "+t,"","success")},e.generateSampleNumber=function(a,i,n,s){var l={sample_type:a,order_control:null,order_validator_id:o,last_name:i,facility_id:r,request_id:s};t.post("/api/generateSampleNumber",l).then(function(t){if(0==t.data.status)sweetAlert(t.data.data,"","error");else{e.sampleResposes=t.data;var a=e.sampleResposes,i='<div id="printable"><div class="row"><div class="form-group col-md-9">'+n+a.barcode+a.last_name+"-"+a.sample_number+" </div></div></div>";swal({title:"",text:"",customClass:"swal-wide",html:i})}})},e.playAudio=function(){new Audio("/notification/thrown.mp3").play()},e.reGenerateSampleNumber=function(a,i,n){if(0==angular.isDefined(n))return sweetAlert("Select TEST to be done","","error");e.playAudio();var s={order_control:1,order_validator_id:o,last_name:a,facility_id:r,request_id:n};t.post("/api/generateSampleNumber",s).then(function(t){if(0==t.data.status)sweetAlert(t.data.data,"","error");else{e.samples=t.data;var a=e.samples,n='<div class="row"><div class="form-group col-md-9">'+i+a.barcode+a.last_name+"-"+a.sample_number+" </div></div>";swal({title:"",text:"",customClass:"swal-wide",html:n})}})},e.closeModal=function(){n.dismiss()},e.confirmReject=function(e){var t=e;i.open({templateUrl:"/views/modules/laboratory/printBarcodeSampleNumber.html",size:"lg",animation:!0,controller:"printSampleNumberBarcode",resolve:{object:function(){return t}}})},e.confirmRejectResults=function(e){var t=e;i.open({templateUrl:"/views/modules/laboratory/confirmRejectResults.html",size:"lg",animation:!0,controller:"printSampleNumberBarcode",resolve:{object:function(){return t}}})}}])}(),function(){"use strict";angular.module("authApp").controller("barcodeModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){a.currentUser.facility_id,a.currentUser.id;e.sample_number=s.sample_number,e.image_code=s.image_code,e.last_name=s.last_name,e.sub_department_name=s.sub_department_name,e.closeModal=function(){n.dismiss()}}])}(),function(){"use strict";angular.module("authApp").controller("equipmentsInfo",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.equipment=s,t.get("/api/getEquipementStatus").then(function(t){e.getEquipementStatuses=t.data}),e.saveNewDeviceStatus=function(a,i){if(0==angular.isDefined(a))return sweetAlert("Select DEVICE Status","","error");var s={equipment_status_id:a.equip_status,id:i.id};t.post("/api/saveNewDeviceStatus",s).then(function(a){if(0==a.data.status)sweetAlert(a.data.data,"","error");else{t.get("/api/getEquipementList").then(function(t){e.equipementLists=t.data});var s="Working status for "+i.equipment_name+" was successfully Changed";n.dismiss(),sweetAlert(s,"","success")}})}}])}(),function(){"use strict";angular.module("authApp").controller("labController",function(e,t,a,i,n,s,r,o){var l=a.currentUser.facility_id,d=a.currentUser.id;s.mytime1=new Date,s.mytime2=new Date,s.AdmissionNotes="";angular.element(document).ready(function(){s.setTabSamples(1),s.getTestsAvailable(),s.getEquipementList(),s.setTabSamplesProcessor(1)}),e.get("/api/getUsermenu/"+d).then(function(e){s.menu=e.data}),s.getSms=function(t,a){e.get("http://kiuta.co.tz/oneapi-php-master/examples.php?mobile="+t+"&sms="+a).then(function(e){o.success("","SMS SENT TO NASSORO")},function(e,a){o.success("","SMS SENT TO "+t)})},s.getEquipmentInfo=function(e){console.log(e);var t=angular.extend(e);r.open({templateUrl:"/views/modules/laboratory/equipmentsInfo.html",size:"lg",animation:!0,controller:"equipmentsInfo",resolve:{object:function(){return t}}})},s.setTabEquipments=function(t){s.tab=t,s.getEquipementList(),e.get("/api/getEquipementStatus").then(function(t){s.getEquipementStatuses=t.data,e.get("/api/getLabDepartments").then(function(e){s.LabDepartments=e.data})})},s.setTabPendingResults=function(e){s.tab=e},s.setTabBloodBank=function(t){s.tab=t,s.getEquipementList(),e.get("/api/getEquipementStatus").then(function(t){s.getEquipementStatuses=t.data,e.get("/api/getLabDepartments").then(function(e){s.LabDepartments=e.data})})},s.setTabSamples=function(t){s.tab=t,s.getCollectedSample(),s.getLabTestRequests(),s.getCancelledSample(),s.getLabDepartments(),e.get("/api/getEquipementStatus").then(function(t){s.getEquipementStatuses=t.data,e.get("/api/getLabDepartments").then(function(e){s.LabDepartments=e.data})})},s.setTabRejectSample=function(e){s.getCancelledSample(),s.tab=e},s.setTabSamplesProcessor=function(t){s.tab=t,s.getCollectedSample(),s.getCancelledSample(),s.getCollectedSampleDepartments(),s.getLabResults(),s.getApprovedResults(),e.get("/api/getEquipementStatus").then(function(t){s.getEquipementStatuses=t.data,e.get("/api/getLabDepartments").then(function(e){s.LabDepartments=e.data})})},s.setTabCollected=function(e){s.tab=e,s.getCollectedSample()},s.setTabTestPrice=function(e){s.tab=e},s.setTabResultsAprrove=function(t){s.tab=t,s.getCollectedSample(),s.getCancelledSample(),s.getCollectedSampleDepartments(),s.getLabResultsVerify(),s.getLabResults(),e.get("/api/getEquipementStatus").then(function(t){s.getEquipementStatuses=t.data,e.get("/api/getLabDepartments").then(function(e){s.LabDepartments=e.data})})},s.setTabLabTests=function(t){s.tab=t,e.get("/api/getEquipementStatus").then(function(t){s.getEquipementStatuses=t.data,e.get("/api/getLabDepartments").then(function(e){s.LabDepartments=e.data})})},s.getLabDepartments=function(){e.get("/api/getLabDepartments").then(function(e){s.labDepartments=e.data,console.log(s.labDepartments)})},s.getCollectedSampleDepartments=function(){e.get("/api/getCollectedSampleDepartments").then(function(e){s.labDepartmentCollectedSamples=e.data,console.log(s.labDepartmentCollectedSamples)})},s.getLabResults=function(){e.get("/api/getLabResults").then(function(e){s.LabResults=e.data})},s.validateLabResultsPerOrder=function(t){e.get("/api/validateLabResultsPerOrder/"+t).then(function(e){s.validateLabResults=e.data})},s.validateLabResultsPerRequest=function(t){s.dataLoading=!0,e.get("/api/validateLabResultsPerRequest/"+t).then(function(e){var t=e.data[0],a=e.data[1],i={patientPaticulars:e.data[2],singleTests:t,PanelsTests:a};r.open({templateUrl:"/views/modules/laboratory/getResultsToVerify.html",size:"lg",animation:!0,controller:"SampleTestingModal",resolve:{object:function(){return i}}})}).finally(function(){s.dataLoading=!1})},s.getLabResultsVerify=function(){e.get("/api/validateLabResults").then(function(e){s.verifyLabResults=e.data})},s.getLabCollectedSample=function(t){s.dataLoading=!0,console.log(t),e.get("/api/getLabCollectedSample/"+t).then(function(e){s.getLabCollectedSamples=e.data}).finally(function(){s.dataLoading=!1})},s.getLabTestRequests=function(){e.get("/api/LabTestRequest/"+l).then(function(e){s.LabTestRequests=e.data,console.log(s.LabTestRequests)})},s.getCollectedSample=function(){e.get("/api/getCollectedSample").then(function(e){s.collectedSamples=e.data})},s.getCancelledSample=function(){e.get("/api/getCancelledSample").then(function(e){s.cancelledSamples=e.data})},s.getTestRequestAll=function(t){s.getLabTestRequests();var a=t.order_id;e.get("/api/LabTestRequestPatient/"+a).then(function(e){var t={patientPaticulars:e.data[0],getTestRequest:e.data[0],singleTests:e.data[0]};r.open({templateUrl:"/views/modules/laboratory/LabTestRequestPatient.html",size:"lg",animation:!0,controller:"LabTestRequestPatient",resolve:{object:function(){return t}}})})},s.saveTestResults=function(t,a){console.log(t);var i=t.sample_no,n=t.last_name,r=(t.sub_department_name,t.request_id),a=a;if(0==angular.isDefined(a))return sweetAlert("Enter Results for Sample# "+i,"","error");s.playAudio();var o={results:a,sample_no:i,order_control:3,verified_by:d,last_name:n,facility_id:l,request_id:r};e.post("/api/sendLabResult",o).then(function(e){if(0==e.data.status)sweetAlert(e.data.data,"","error");else{s.playAudio();var t="Results for  Sample No."+i+"  Was successfully Saved";sweetAlert(t,"","success")}})},s.approveTestResults=function(t){console.log(t);var a=t.sample_no,i=t.last_name,n=t.sub_department_name,r=t.mobile_number,o="Salamu "+i+", majibu kutoka  "+n+" maabara yametumwa kwa daktari.",c=t.request_id,u="Patient Result Approved";if(0==angular.isDefined(u))return sweetAlert("Enter Results for Sample# "+a+" before Approving","","error");s.playAudio();var p={results:u,sample_no:a,order_control:3,verified_by:d,last_name:i,facility_id:l,request_id:c};e.post("/api/approveLabResult",p).then(function(e){if(0==e.data.status)sweetAlert(e.data.data,"","error");else{s.playAudio();var t="Results for  Sample No."+a+"  Was successfully Approved";sweetAlert(t,"","success")}}),e.get("/api/processMobileNumber/"+r).then(function(e){var t=e.data;s.getSms(t,o)})},s.getSamplesToTest=function(t){s.dataLoading=!0,e.get("/api/getLabCollectedSamplePerOrderNumber/"+t).then(function(e){var t=e.data[0],a=e.data[1],i={patientPaticulars:e.data[2],singleTests:t,PanelsTests:a};r.open({templateUrl:"/views/modules/laboratory/getSamplesToTest.html",size:"lg",animation:!0,controller:"SampleTestingModal",resolve:{object:function(){return i}}})}).finally(function(){s.dataLoading=!1})},s.getSamplesToTestUsingSampleNo=function(t){s.dataLoading=!0,e.get("/api/getLabCollectedSamplePerSampleNumber/"+t).then(function(e){var t=e.data[0],a=e.data[1],i={patientPaticulars:e.data[2],singleTests:t,PanelsTests:a};r.open({templateUrl:"/views/modules/laboratory/getSamplesToTest.html",size:"lg",animation:!0,controller:"SampleTestingModal",resolve:{object:function(){return i}}})}).finally(function(){s.dataLoading=!1})},s.getApprovedResults=function(){s.dataLoading=!0,e.get("/api/getApprovedResults").then(function(e){s.approvedResults=e.data}).finally(function(){s.dataLoading=!1})},s.reCollectTestRequests=function(t){var a=t.order_id;console.log(a),e.get("/api/getCanceledTest/"+a).then(function(e){var t={getTestRequest:e.data};console.log(t),r.open({templateUrl:"/views/modules/laboratory/LabTestRequestPatient.html",size:"lg",animation:!0,controller:"LabTestRequestPatient",resolve:{object:function(){return t}}})})},s.getEquipementList=function(){e.get("/api/getEquipementList").then(function(e){s.equipementLists=e.data})},s.getTestPanels=function(){e.get("/api/getTestPanel").then(function(e){s.testPanels=e.data})},s.getTestsAvailable=function(){e.get("/api/LabTests").then(function(e){s.LabTests=e.data})},s.setTabObservation=function(t){s.tab=t,e.get("/api/getAprovedAdmissionList").then(function(e){s.admitted=e.data})},s.setTabNursingCare=function(t){s.tab=t,e.get("/api/getAprovedAdmissionList").then(function(e){s.admitted=e.data})},s.setTabWardtypes=function(t){s.tab=t,e.post("/api/getWardTypes").then(function(e){s.getWardTypes=e.data})},s.setTabTreatment=function(t){s.tab=t,e.get("/api/getAprovedAdmissionList").then(function(e){s.admitted=e.data})},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0,s.addWardTypes=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter WARD TYPE","","error");e.post("/api/saveWardTypes",{ward_type_name:t.ward_type}).then(function(e){0==e.data.status?(s.wards=null,sweetAlert(e.data.data,"","error")):(s.wards=null,sweetAlert(e.data.data,"","success"))})},s.addDevices=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter DEVICE ","","error");var a={eraser:0,reagents:t.reagents,equipment_name:t.equip_name,equipment_status_id:t.equip_status,sub_department_id:t.subdepartment,facility_id:l,user_id:d};e.post("/api/addDevices",a).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.reagents=null,t.equip_name=null,sweetAlert(e.data.data,"","success"))})},s.addLabTest=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter TEST Name","","error");var a={erasor:0,equipment_id:t.equipment_id,minimum_limit:t.minimum_limit,panel_compoent_name:t.name,si_units:t.si_units,maximum_limit:t.maximum_limit,user_id:d};e.post("/api/addLabTest",a).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.name=null,t.si_units=null,sweetAlert(e.data.data,"","success"))})},s.addLabTestPanel=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter TEST PANEL ","","error");var a={erasor:0,item_id:t.item_id,equipment_id:t.equipment_id,minimum_limit:t.minimum_limit,panel_compoent_name:t.name,si_units:t.si_units,maximum_limit:t.maximum_limit,user_id:d};console.log(a),e.post("/api/addLabTestPanel",a).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.name=null,sweetAlert(e.data.data,"","success"))})},s.addLabPanel=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter LAB TEST PANEL","","error");var a={erasor:0,equipment_id:t.equipment_id,panel_name:t.name,user_id:d};e.post("/api/addLabPanel",a).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.name=null,t.si_units=null,sweetAlert(e.data.data,"","success"))})},s.PreOPCondition=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pre Operation Condition","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.case,information_category:"PRE-OPERTION CONDITION",nurse_id:d};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthBloodLoss=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter AMOUNT OF BLOOD COLLECTED","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.noted_amount,admission_id:a.admission_id,request_id:a.id,remarks:t.noted_amount,information_category:"BLOOD LOSS",nurse_id:d};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthFluidGiven=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter AMOUNT OF FLUID GIVEN","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.noted_amount_fluid,admission_id:a.admission_id,request_id:a.id,remarks:t.noted_amount_fluid,information_category:"FLUID GIVEN",nurse_id:d};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthUrineOutput=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter AMOUNT OF URINE OUTPUT","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.urine_output,admission_id:a.admission_id,request_id:a.id,remarks:t.urine_output,information_category:"URINE OUTPUT",nurse_id:d};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.urine_output=null,sweetAlert(e.data.data,"","success"))})},s.anaesthComplications=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Write any Compilcations found during Operations","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.complications,admission_id:a.admission_id,request_id:a.id,remarks:t.complications,information_category:"COMPLICATIONS",nurse_id:d};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.complications=null,sweetAlert(e.data.data,"","success"))})},s.anaesthPulseRate=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pulse Rate Associating Info","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");if(null==t.am_pm)return sweetAlert("IS IT AM/PM ? ","","error");if(null==t.hr)return sweetAlert("HOURS MISSED ","","error");if(null==t.mins)return sweetAlert("MINUTES MISSED ","","error");if(2!=t.mins.length)return sweetAlert("MINUTES MUST BE IN TWO DIGITS ","","error");if(t.mins>=60)return sweetAlert("MINUTES MUST BE LESS THAN 60 ","","error");if(t.mins<0)return sweetAlert("MINUTES MUST BE GREATER THAN 0 ","","error");if(null==t.read)return sweetAlert("EMPTY VALUE IN READ BOX  ","","error");var i={erasor:0,noted_value:t.read,admission_id:a.admission_id,request_id:a.id,am_pm:t.am_pm,mins:t.mins,hr:t.hr,information_category:"PULSE RATE",nurse_id:d};e.post("/api/addPrBp",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthSystolic=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pulse Rate Associating Info","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");if(null==t.am_pm)return sweetAlert("IS IT AM/PM ? ","","error");if(null==t.hr)return sweetAlert("HOURS MISSED ","","error");if(null==t.mins)return sweetAlert("MINUTES MISSED ","","error");if(2!=t.mins.length)return sweetAlert("MINUTES MUST BE IN TWO DIGITS ","","error");if(t.mins>=60)return sweetAlert("MINUTES MUST BE LESS THAN 60 ","","error");if(t.mins<0)return sweetAlert("MINUTES MUST BE GREATER THAN 0 ","","error");if(null==t.read)return sweetAlert("EMPTY VALUE IN READ BOX  ","","error");var i={erasor:0,noted_value:t.read,admission_id:a.admission_id,request_id:a.id,am_pm:t.am_pm,mins:t.mins,hr:t.hr,information_category:"SYSTOLIC PRESSURE",nurse_id:d};e.post("/api/addPrBp",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.read=null,sweetAlert(e.data.data,"","success"))})},s.anaesthDiastolic=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pulse Rate Associating Info","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");if(null==t.am_pm)return sweetAlert("IS IT AM/PM ? ","","error");if(null==t.hr)return sweetAlert("HOURS MISSED ","","error");if(null==t.mins)return sweetAlert("MINUTES MISSED ","","error");if(2!=t.mins.length)return sweetAlert("MINUTES MUST BE IN TWO DIGITS ","","error");if(t.mins>=60)return sweetAlert("MINUTES MUST BE LESS THAN 60 ","","error");if(t.mins<0)return sweetAlert("MINUTES MUST BE GREATER THAN 0 ","","error");if(null==t.read_diastolic)return sweetAlert("EMPTY VALUE IN READ BOX  ","","error");var i={erasor:0,noted_value:t.read_diastolic,admission_id:a.admission_id,request_id:a.id,am_pm:t.am_pm,mins:t.mins,hr:t.hr,information_category:"DIASTOLIC PRESSURE",nurse_id:d};e.post("/api/addPrBp",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.read_diastolic=null,sweetAlert(e.data.data,"","success"))})},s.anaesthIntubation=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter INTUBATION INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"INTUBATION",nurse_id:d};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthRespiration=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter RESPIRATION INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"RESPIRATION",nurse_id:d};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Respiration=null,sweetAlert(e.data.data,"","success"))})},s.anaesthLocal=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter LOCAL INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"LOCAL",nurse_id:d};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Respiration=null,sweetAlert(e.data.data,"","success"))})},s.anaesthPosition=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter POSITION INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"POSITION",nurse_id:d};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Respiration=null,sweetAlert(e.data.data,"","success"))})},s.anaesthNeedle=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter NEEDLE INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"NEEDLE",nurse_id:d};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Needle=null,sweetAlert(e.data.data,"","success"))})},s.anaesthEffect=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter NEEDLE INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"EFFECT",nurse_id:d};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Effect=null,sweetAlert(e.data.data,"","success"))})},s.saveHb=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Laboratory Status","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.laboratory,information_category:"LABORATORY STATUS",nurse_id:d};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.laboratory=null,sweetAlert(e.data.data,"","success"))})},s.savePreAnaestheticOrder=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter PRE ANAESTHETIC ORDER","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.pre_anaesthetic_order,information_category:"PRE ANAESTHETIC ORDER",nurse_id:d};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.pre_anaesthetic_order=null,sweetAlert(e.data.data,"","success"))})},s.saveAnaestheticTechniques=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter ANAESTHETIC TECHNIQUES","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.anaesthetic_technique,information_category:"ANAESTHETIC TECHNIQUES",nurse_id:d};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.anaesthetic_technique=null,sweetAlert(e.data.data,"","success"))})},s.savePhysicalStatus=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Physical Status","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");console.log(t);var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.physical_status,information_category:"PHYSICAL STATUS",nurse_id:d};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.laboratory=null,sweetAlert(e.data.data,"","success"))})},s.saveOral=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter LAST ORAL INTAKE","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");console.log(t);var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.oral,information_category:"LAST ORAL INTAKE",nurse_id:d};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.oral=null,sweetAlert(e.data.data,"","success"))})},s.saveNutritional=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter NUTRITIONAL STATUS","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");console.log(t);var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.nutrional,information_category:"NUTRITIONAL STATUS",nurse_id:d};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.nutrional=null,sweetAlert(e.data.data,"","success"))})};var c=[];s.showSearchWardTypes=function(t){return e.get("/api/searchWardTypes/"+t).then(function(e){c=e.data}),c};var u=[];s.showSearchWardClass=function(t){return e.get("/api/getWardClasses/"+t).then(function(e){u=e.data}),u};_=[];s.showSearchBedTypes=function(t){return e.get("/api/searchBedTypes/"+t).then(function(e){_=e.data}),_},s.getOutPutTypes=function(){e.get("/api/getOutPutTypes").then(function(e){s.getOutPutTypes=e.data})},s.getVital=function(){e.post("/api/getVital").then(function(e){s.getVitals=e.data})},s.saveAssociateHistory=function(t,a){if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");if(0==angular.isDefined(t))return sweetAlert("Please Enter History Records or NILL","","error");a.admission_id;var i={erasor:0,admission_id:a.admission_id,request_id:a.id,medical:t.medical,surgical:t.surgical,anaesthetic:t.anaesthetic,information_category:"ASSOCIATE HISTORY",nurse_id:d};e.post("/api/saveAssociateHistory",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.savePastHistory=function(t,a){if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");if(0==angular.isDefined(t))return sweetAlert("Please Enter History Records or NILL","","error");a.admission_id;var i={erasor:0,admission_id:a.admission_id,request_id:a.id,medical:t.medical,surgical:t.surgical,anaesthetic:t.anaesthetic,information_category:"PAST HISTORY",nurse_id:d};e.post("/api/savePastHistory",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.saveSocialSurgery=function(t,a){if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");if(0==angular.isDefined(t))return sweetAlert("Please Enter Social History Records or NILL","","error");a.admission_id;var i={erasor:0,admission_id:a.admission_id,request_id:a.id,chronic_illness:t.chronic_illness,substance_abuse:t.substance_abuse,adoption:t.adoption,others:t.others,other_information:"SOCIAL AND FAMILY HISTORY",nurse_id:d};e.post("/api/saveSocialHistory",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.saveDentalStatus=function(e,t,a){if(0==angular.isDefined(a))return sweetAlert("Select the Patient Before ENTERING DENTAL STATUS","","error");s.selectedPatient=a,console.log(s.selectedPatient),s.dentals={tooth_id:e,tooth_number:t};var i=angular.extend(s.selectedPatient,s.dentals);console.log(i),console.log(s.dentals),r.open({templateUrl:"/views/modules/nursing_care/dental_status.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return i}}})},s.saveCardivascularExaminations=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding Cardivascular System","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/cardivascular_examinations.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.saveGastroIntestineExaminations=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding Gastro Intestine System","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/gastrointestine.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.saveCentralNervousSystem=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding CENTRAL NERVOUS SYSTEM","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/centralNervousSystem.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.getDiagnosis=function(){e.get("/api/getDiagnosis").then(function(e){s.getDiagnosises=e.data})},s.getTeeth=function(t){if(e.get("/api/getTeethAbove").then(function(t){s.teethAboves=t.data,e.get("/api/getTeethBelow").then(function(e){s.teethBelows=e.data,console.log(s.teethBelows)})}),0==angular.isDefined(t))return sweetAlert("Select the Patient Before SETTING DENTAL STATUS","","error");var a=t.id;e.get("/api/getTeethStatusFromPatientAbove/"+a).then(function(e){s.teeth_patientsAboves=e.data}),e.get("/api/getTeethStatusFromPatientBelow/"+a).then(function(e){s.teeth_patientsBelows=e.data})},s.addImplementation=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Diagnosis for Implementations","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={targeted_plans:t.implementation,nurse_diagnosis_id:t.getDiagnos,admission_id:i,nursing_care_types:"IMPLEMENTATIONS",nurse_id:d};e.post("/api/addImplementations",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addEvaluations=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Diagnosis for Implementations","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={targeted_plans:t.evaluation,nurse_diagnosis_id:t.getDiagnos,admission_id:i,nursing_care_types:"EVALUATIONS",nurse_id:d};e.post("/api/addEvaluations",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addTimes=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Diagnosis for TIMING","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");console.log(t);var i=a.admission_id,n=t.time_day,t={targeted_plans:t.time+" "+n,nurse_diagnosis_id:t.getDiagnos,admission_id:i,nursing_care_types:"TIME",nurse_id:d,daytime:n};console.log(t),e.post("/api/addTimes",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.patientDischarge=function(e){s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/patientDischarge.html",size:"lg",animation:!0,controller:"patientDischargedModal",resolve:{object:function(){return t}}})},s.addOutPuts=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the OUTPUT TYPES","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={amount:t.amount,observation_output_type_id:t.types,admission_id:i,si_units:t.units,nurse_id:d};console.log(t),e.post("/api/addOutPuts",t).then(function(e){s.getOutPuts=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addIntravenous=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the INTRAVENOUS FLUID","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={intravenous_mils:t.amount,intravenous_types_id:t.types,admission_id:i};e.post("/api/addIntakeObservation",t).then(function(e){s.getIntravenous=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addIntakeFluid=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the ORAL FLUID TYPE TAKEN","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,n={oral_mils:t.amount,oral_types_id:t.types,admission_id:i};e.post("/api/addIntakeFluid",n).then(function(e){s.getIntravenous=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addWard=function(t,a){return 0==angular.isDefined(t)?sweetAlert("Please Enter WARD NAME","","error"):0==angular.isDefined(t.ward_type)?sweetAlert("Please Enter WARD TYPE","","error"):0==angular.isDefined(a)?sweetAlert("Please Enter WARD CLASS","","error"):0==angular.isDefined(a.ward_class_id)?sweetAlert("Please Enter WARD CLASS","","error"):void e.post("/api/saveWards",{ward_class_id:a.ward_class_id.item_id,ward_name:t.ward_name,ward_type_id:t.ward_type.id,ward_type_name:t.ward_type.ward_type_name,facility_id:l}).then(function(e){0==e.data.status?(s.wards=null,sweetAlert(e.data.data,"","error")):(s.wards=null,sweetAlert(e.data.data,"","success"))})},s.addBed=function(t,a){return 0==angular.isDefined(t)?sweetAlert("Please Enter BED NUMBER "+a,"","error"):0==angular.isDefined(t.bed_type)?sweetAlert("Please Enter BED TYPE "+a,"","error"):(console.log(t.bed_type),void e.post("/api/saveBeds",{bed_name:t.bed_number,bed_type_id:t.bed_type.id,ward_id:a,facility_id:l,eraser:1}).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")}))};var p=0,_=[],m=[];s.getWardDetails=function(t){e.get("/api/getWardOneInfo/"+t).then(function(e){m=e.data}),e.get("/api/getBedsNumber/"+t).then(function(e){p=e.data}),e.get("/api/getBeds/"+t).then(function(e){_=e.data;var t=angular.extend({},m,p);r.open({templateUrl:"/views/modules/nursing_care/manageWardBeds.html",size:"lg",animation:!0,controller:"wardManagementModal",resolve:{object:function(){return t}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})})},s.getBedDetails=function(t,a,i){e.get("/api/OnThisBed/"+t).then(function(e){if(_=e.data,0==e.data.status)sweetAlert(e.data.data,"","error");else{var t=i+" TAKEN BY "+e.data.data;sweetAlert(t,"","success")}})};var f="";s.getAdmissionNotes=function(t){e.post("/api/getInstructions",{patient_id:t}).then(function(e){s.AdmissionNotes=e.data,f=s.AdmissionNotes,console.dir(s.AdmissionNotes)})},s.giveBed=function(t,a,i,n,r){console.log(n),e.post("/api/giveBed",{bed_id:t,ward_id:i,admission_id:n,bed_available:r}).then(function(e){if(s.giveBeds=e.data,console.log(s.giveBeds),0==e.data.status)sweetAlert(e.data.data,"","error");else{var t=r+" SUCCESSFULLY ASSIGNED TO "+a;sweetAlert(t,"","success")}})},s.getAdmPatient=function(e){s.selectedPatient=e,console.log(s.selectedPatient)},s.getPatientsSentToTheatre=function(){e.get("/api/getPatientSentToTheatre").then(function(e){s.patientsSentToTheatres=e.data})},s.getAdmission=function(t,a,i){e.post("/api/getInstructions",{patient_id:t,ward_id:a}).then(function(e){s.AdmissionNotes=e.data,f=s.AdmissionNotes,console.dir(s.AdmissionNotes)}),e.get("/api/getPatientInfo/"+t).then(function(e){s.quick_registration=e.data;var t=angular.extend({},s.quick_registration,f);r.open({templateUrl:"/views/modules/nursing_care/bedAllocation.html",size:"lg",animation:!0,controller:"nursingCareModal",resolve:{object:function(){return t}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})})},s.assignToTheatre=function(t,a,i){e.get("/api/getFullAdmitedPatientInfo/"+i).then(function(e){s.admissions=e.data,console.log(e.data),console.log(i);var t=s.admissions;r.open({templateUrl:"/views/modules/nursing_care/postPatientsToTheatre.html",size:"lg",animation:!0,controller:"postPatientsToTheatreModal",resolve:{object:function(){return t}}})})}})}(),function(){"use strict";angular.module("authApp").controller("laboratorySettingController",function(e,t,a,i,n,s,r){s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e},angular.element(document).ready(function(){s.setTab(1)});var o=[];s.showItemtest=function(t){var a={SearchUnit:t};return e.post("/api/getunit",a).then(function(e){o=e.data}),o};var l=[];s.showColor=function(t){var a={SearchColor:t};return e.post("/api/getcolor",a).then(function(e){l=e.data}),l};var d=[];s.showTestindicator=function(t){var a={SearchIndicator:t};return e.post("/api/getindicator",a).then(function(e){d=e.data}),d};var c=[];s.showSample=function(t){var a={SearchSample:t};return e.post("/api/getsample",a).then(function(e){c=e.data}),c};var u=[];s.showEqstatus=function(t){var a={SearchEqstatus:t};return e.post("/api/getequpstatus",a).then(function(e){u=e.data}),u};var p=[];s.showFacility=function(t){var a={SearchFacility:t};return e.post("/api/getfacility",a).then(function(e){p=e.data}),p};var _=[];s.showSubdep=function(t){var a={SearchSubdepartment:t};return e.post("/api/getsubdepartments",a).then(function(e){_=e.data}),_};var m=[];s.showequipment=function(t){var a={SearchEquipment:t};return e.post("/api/getequipements",a).then(function(e){m=e.data}),m},e.get("/api/get_department").then(function(e){s.department=e.data}),e.get("/api/getequipement_status").then(function(e){s.equip_status=e.data});var f=[];s.showPatient=function(t){var a={SearchPatient:t};return e.post("/api/getpatient",a).then(function(e){f=e.data}),f};var g=[];s.showService=function(t){var a={SearchService:t};return e.post("/api/getservice",a).then(function(e){g=e.data}),g};var h=s.currentUser.id;s.service_selected=[],s.onSelect=function(e){s.service_selected.push({id:e.service.id,Service_Name:e.service.item_name,patient_id:e.selectedpatient.id,doctor_id:h})},s.remove=function(e){s.service_selected.splice(e,1)},s.send_to_lab=function(){var t=s.service_selected;console.log(t),e.post("/api/send_to_lab",t).then(function(e){})},s.getsample_status=function(){e.get("/api/getsample_status").then(function(e){s.sample_status=e.data})},s.sample_status_registration=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter Sample Status","","error");var a={status:t.sample_name};e.post("/api/sample_status_registration",a).then(function(e){var t=e.data.status,i=e.data.msg;0==t?swal("Oops!!",i,"error"):(swal("success",i,"success"),a="")})},s.sample_status_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){var a={status:t.sample_status};e.post("/api/sample_status_update",a).then(function(e){e.data,swal("Feedback..","Updates Success...","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.sample_status_delete=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter Sample Status","","error");var t={status:t.sample_status};e.get("/api/sample_status_delete/"+t).then(function(e){var t=e.data.status,a=e.data.msgs;0==t?swal("Oops!!",a,"error"):swal("success",a,"success")})},s.getequipement_status=function(){e.get("/api/getequipement_status").then(function(e){s.equip_status=e.data})},s.equipment_status_registration=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter Equipment Status","","error");var a=t;e.post("/api/equipment_status_registration",a).then(function(e){var a=e.data.status,i=e.data.msg;0==a?swal("Oops!!",i,"error"):(swal("success",i,"success"),t="")})},s.equipement_status_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/equipement_status_update",t).then(function(e){e.data,swal("Feedback..","Updates Success...","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.equipement_status_delete=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter Sample Status","","error");var t=t;e.get("/api/equipement_status_delete/"+t.id).then(function(e){var a=e.data.status,i=e.data.msgs;0==a?swal("Oops!!",i,"error"):(swal("success",i,"success"),t="")})},e.get("/api/getequipement").then(function(e){s.equipment=e.data}),s.getequipement=function(){e.get("/api/getequipement").then(function(e){s.equipment=e.data})};var v=a.currentUser.facility_id;s.equipment_registration=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter Below Details","","error");if(0==angular.isDefined(t.equipment_name))return sweetAlert("Please Enter Equipment Name","","error");if(0==angular.isDefined(t.reagents))return sweetAlert("Please Enter Equipment Reagents","","error");if(0==angular.isDefined(t.minimum_limit))return sweetAlert("Please Enter Equipment Minimum Limit","","error");if(0==angular.isDefined(t.maximum_limit))return sweetAlert("Please Enter Equipment Maximum Limit","","error");if(0==angular.isDefined(t.item_units))return sweetAlert("Please Enter Equipment SI-Unit","","error");if(0==angular.isDefined(t.id))return sweetAlert("Please Select Equipment Status","","error");var a={equipment_name:t.equipment_name,reagents:t.reagents,minimum_limit:t.minimum_limit,maximum_limit:t.maximum_limit,si_unit:t.item_units.id,id:t.id,facility_id:v};console.log(a),e.post("/api/equipment_registration",a).then(function(e){s.equipmentt=e.data,s.equip="";var a=e.data.status,i=e.data.msg;0==a?swal("Oops!!",i,"error"):(swal("success",i,"success"),t="")})},s.equipement_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){if(0==angular.isDefined(t))return sweetAlert("Please Enter Below Details","","error");if(0==angular.isDefined(t.equipment_name))return sweetAlert("Please Enter Equipment Name","","error");if(0==angular.isDefined(t.reagents))return sweetAlert("Please Enter Equipment Reagents","","error");if(0==angular.isDefined(t.minimum_limit))return sweetAlert("Please Enter Equipment Minimum Limit","","error");if(0==angular.isDefined(t.maximum_limit))return sweetAlert("Please Enter Equipment Maximum Limit","","error");if(0==angular.isDefined(t.item_unit))return sweetAlert("Please Enter Equipment SI-Unit","","error");if(0==angular.isDefined(t.equipment_id))return sweetAlert("Please Select Equipment Status","","error");if(0==angular.isDefined(t.eqstatus))return sweetAlert("Please Select Equipment Status","","error");if(0==angular.isDefined(t.facilitys))return sweetAlert("Please Select Facility","","error");var a={equipment_name:t.equipment_name,reagents:t.reagents,minimum_limit:t.minimum_limit,maximum_limit:t.maximum_limit,si_unit:t.item_unit.id,id:t.equipment_id,equipment_status_id:t.eqstatus.id,facility_id:t.facilitys.id};e.post("/api/equipement_update",a).then(function(e){e.data,swal("Feedback..","Updates Success...","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.equipement_delete=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter Sample Status","","error");var t=t;e.get("/api/equipement_delete/"+t.id).then(function(e){var a=e.data.status,i=e.data.msgs;0==a?swal("Oops!!",i,"error"):(swal("success",i,"success"),t="")})},s.get_department=function(){e.get("/api/get_department").then(function(e){s.department=e.data})},s.getsub_department=function(){e.get("/api/getsub_department").then(function(e){s.subdepartment=e.data})},s.sub_department_registration=function(t){return 0==angular.isDefined(t)?sweetAlert("Please Enter Sub Department and Select Department","","error"):0==angular.isDefined(t.sub_department)?sweetAlert("Please Enter Sub Department Name","","error"):0==angular.isDefined(t.id)?sweetAlert("Select Department","","error"):void e.post("/api/sub_department_registration",t).then(function(e){var a=e.data.status,i=e.data.msg;0==a?swal("Oops!!",i,"error"):(swal("success",i,"success"),t="")})},s.sub_department_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){e.post("/api/sub_department_update",t).then(function(e){e.data,swal("Feedback..","Updates Success...","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.sub_department_delete=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Select Sub Department","","error");var a=t.sub_department_id;e.get("/api/sub_department_delete/"+a).then(function(e){var t=e.data.status,a=e.data.msgs;0==t?swal("Oops!!",a,"error"):swal("success",a,"success")})};var y=[];s.showItem=function(t){var a={SearchItem:t};return e.post("/api/getitem",a).then(function(e){y=e.data}),y},s.get_lab_test=function(){e.post("/api/get_lab_test").then(function(e){s.lab_test=e.data})},s.lab_test_registration=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Select Datas","","error");if(0==angular.isDefined(t.item))return sweetAlert("Please Select Item","","error");if(0==angular.isDefined(t.subdepartmnt))return sweetAlert("Please Select Sub Department","","error");if(0==angular.isDefined(t.equipmt))return sweetAlert("Please Select Equipment","","error");var a={item_id:t.id,item_name:t.item,sub_department_id:t.subdepartmnt,equipment_id:t.equipmt};e.post("/api/lab_test_registrationlab_test_registration",a).then(function(e){var a=e.data.status,i=e.data.msg;0==a?swal("Oops!!",i,"error"):(swal("success",i,"success"),t="")})},s.createLabsOrderNo=function(t){var a={patient_id:t.patient_id,order_id:t.order_id,lab_test_id:t.lab_test_id,facility_id:t.facility_id};e.post("/api/createLabsOrderNo",a).then(function(e){s.order_number=e.data})},s.getpatientlaborder=function(t){var a={patient_id:t.patient_id,order_id:t.order_id};e.post("/api/getpatientlaborder",a).then(function(e){s.patientlaborder=e.data})},s.savepatientlaborder=function(t,a){var i={patient_id:a.patient_id,order_id:a.order_id,lab_test_id:a.lab_test_id,facility_id:a.facility_id,lab_order_id:a.tbl_lab_order_id,sample_no:t};e.post("/api/savepatientlaborder",i).then(function(e){var t=e.data.status,a=e.data.msgs;0==t?swal("Oops!!",a,"error"):(swal("success",a,"success"),i="")})},s.postpatientlaborder=function(t){var a={patient_id:t.patient_id,order_id:t.order_id,lab_test_id:t.lab_test_id,facility_id:t.facility_id,sample_no:t.sample_no};e.post("/api/postpatientlaborder",a).then(function(e){s.loadpostresultform=e.data})},s.test_unit_registration=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter Test Unit","","error");var a={unit:t};e.post("/api/test_unit_registration",a).then(function(e){var t=e.data.status,a=e.data.msg;0==t?swal("Oops!!",a,"error"):swal("success",a,"success")})},s.gettest_unit=function(){e.get("/api/gettest_unit").then(function(e){s.gettestunit=e.data})},s.test_unit_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){var a={unit:t.unit,id:t.id};e.post("/api/test_unit_update",a).then(function(e){var t=e.data.status,a=e.data.msg;0==t?swal("Oops!!",a,"error"):swal("success",a,"success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.test_unit_delete=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Select value","","error");t.unit,t.id,e.get("/api/test_unit_delete/"+t.id+","+t.unit).then(function(e){var t=e.data.status,a=e.data.msgs;0==t?swal("Oops!!",a,"error"):swal("success",a,"success")})},s.test_sample_registration=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter Sample","","error");var a={sample_to_collect:t};e.post("/api/test_sample_registration",a).then(function(e){var t=e.data.status,a=e.data.msg;0==t?swal("Oops!!",a,"error"):swal("success",a,"success")})},s.get_test_sample=function(){e.get("/api/get_test_sample").then(function(e){s.gettestsample=e.data})},s.testsample_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){var a={sample_to_collect:t.sample_to_collect,id:t.id};e.post("/api/testsample_update",a).then(function(e){var t=e.data.status,a=e.data.msg;0==t?swal("Oops!!",a,"error"):swal("success",a,"success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.testsample_delete=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Select value","","error");var a={sample_to_collect:t.sample_to_collect,id:t.id};console.log(a),e.get("/api/testsample_delete/"+t.id+","+t.sample_to_collect).then(function(e){var t=e.data.status,a=e.data.msgs;0==t?swal("Oops!!",a,"error"):swal("success",a,"success")})},s.test_indicator_registration=function(t){var a={indicator:t.indicator,color_id:t.color.id};e.post("/api/test_indicator_registration",a).then(function(e){var t=e.data.status,a=e.data.msg;0==t?swal("Oops!!",a,"error"):swal("success",a,"success")})},s.test_panel_registration=function(t){var a={panel_name:t.itmpname,item_test_range:t.itmtstrng,item_unit:t.item_indicator.id,Test_indicator:t.item_unit.id};e.post("/api/test_panel_registration",a).then(function(e){var t=e.data.status,a=e.data.msg;0==t?swal("Oops!!",a,"error"):swal("success",a,"success")})},s.gettest_panel=function(){e.get("/api/gettest_panel").then(function(e){s.gettestpanel=e.data})},s.test_panel_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){var a={panel_name:t.panel_name,id:t.test_panel_id,Item_test_range:t.Item_test_range,Item_unit:t.item_units.id,Test_indicator:t.item_indicator.id};e.post("/api/test_panel_update",a).then(function(e){swal("Feedback..","Updates Success...","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.test_panel_delete=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Select value","","error");t.panel_name,t.test_panel_id,e.get("/api/test_panel_delete/"+t.test_panel_id+","+t.panel_name).then(function(e){console.log(e.data);var t=e.data.status,a=e.data.msgs;0==t?swal("Oops!!",a,"error"):swal("success",a,"success")})},s.getlab_test_indicator=function(){e.get("/api/getlab_test_indicator").then(function(e){s.gettestindicator=e.data})},s.test_indicator_update=function(t){swal({title:"Are you sure?",text:" ",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){var a={indicator:t.indicator,color_id:t.color.id,id:t.id};e.post("/api/test_indicator_update",a).then(function(e){swal("Feedback..","Updates Success...","success")})},function(e){"cancel"===e&&swal("Cancelled"," ","error")})},s.test_indicator_delete=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Select value","","error");t.indicator,t.id,e.get("/api/test_indicator_delete/"+t.id+","+t.indicator).then(function(e){var t=e.data.status,a=e.data.msgs;0==t?swal("Oops!!",a,"error"):swal("success",a,"success")})},s.lab_test_registration=function(t){var a={item_name:t.item.item_name,item_id:t.item.id,item_test_range:t.range,unit:t.item_units.id,item_test_indicator:t.item_indicator.id,sample_to_collect:t.sample.id,sub_department_id:t.sub_department.id,equipment_id:t.equipment.id};e.post("/api/lab_test_registration",a).then(function(e){var t=e.data.status,a=e.data.msg;0==t?swal("Oops!!",a,"error"):swal("success",a,"success")})},s.getequipement_status()})}(),function(){"use strict";angular.module("authApp").controller("patientresultcontroller",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.loadpostresultform=s,console.log(s);var r=e.currentUser.id;e.send_lab_result=function(a){if(0==angular.isDefined(a.results))return sweetAlert("You cannot post empty results","","error");console.log(a);var i={order_id:a.patientorder[0].laborderid,result:a.results,item_name:a.patientorder[0].item_name,user_id:r};console.log(i),t.post("/api/send_lab_result",i).then(function(t){e.patientresults=t.data;var a=t.data.status,i=t.data.msg;0==a?swal("Oops!!",i,"error"):swal("success",i,"success")})}}])}(),function(){"use strict";angular.module("authApp").controller("printSampleNumberBarcode",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){var r=a.currentUser.facility_id,o=a.currentUser.id;e.samples_numbers=s,e.getCancelledSampleReason=function(){t.get("/api/getSampleStatus").then(function(t){e.sampleStatuses=t.data})},e.saveComponent=function(a){t.post("/api/saveComponentsResults").then(function(t){e.sampleStatuses=t.data})},console.log(e.samples_numbers),e.getCancelledSampleReason(),e.playAudio=function(){new Audio("/notification/thrown.mp3").play()},e.sampleReject=function(e,a){var i=e.sample_no,n=e.last_name,s=(e.sub_department_name,e.request_id),l=a.reason;if(0==angular.isDefined(s))return sweetAlert("Select TEST to be done","","error");var d={reason:l,sample_no:i,order_control:3,order_validator_id:o,last_name:n,facility_id:r,request_id:s};t.post("/api/sampleCancel",d).then(function(e){if(0==e.data.status)sweetAlert(e.data.data,"","error");else{var t=" Sample No."+i+"  Was successfully Cancelled ";sweetAlert(t,"","success")}})},e.resultReject=function(a,i){var n=a.sample_no,s=a.last_name,l=(a.sub_department_name,a.confirmation_status,a.request_id);if(0==angular.isDefined(i))return sweetAlert("Write Reason for rejecting Results for Sampl# "+n,"","error");var d=i.reason;e.playAudio();var c={cancel_reason:d,sample_no:n,confirmation_status:0,order_control:3,order_validator_id:o,last_name:s,facility_id:r,request_id:l};t.post("/api/resultsCancel",c).then(function(t){if(0==t.data.status)sweetAlert(t.data.data,"","error");else{e.playAudio();var a="Results for Sample No."+n+"  Was successfully Rejected";sweetAlert(a,"","success")}})}}])}(),function(){"use strict";angular.module("authApp").controller("corpseDisposedModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.corpsePaticulars=s;var r=e.corpsePaticulars.mortuary_id;t.get("/api/getCabintesWithNoCorpses/"+r).then(function(t){e.cabinets_availables=t.data,console.log(e.cabinets_availables)}),e.enterEncounter=function(n,s,r){if(0==angular.isDefined(n))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_services))return sweetAlert("Please Select Service","","error");console.log(n);var o=n.payment_category.patient_category,l=n.payment_services,d=n.payment_services.service_id,c=n.payment_services.price_id,u=n.payment_services.item_type_id,p=s,r=r,_=a.currentUser.id,m={item_type_id:u,patient_category:o,service_category:l,service_id:d,price_id:c,patient_id:p,facility_id:r,user_id:_};t.post("/api/enterEncounter",m).then(function(a){if(e.registrationReport=a.data,0==a.data.status)sweetAlert(a.data.data,"","error");else{t.get("/api/getPatientInfo/"+p).then(function(t){e.patientsInfo=t.data});i.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{patientData:function(){return e.patientData}}})}})},e.cancel=function(){console.log("done and cleared"),n.dismiss()},e.closeAllModals=function(){console.log("done and cleared"),n.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("mortuaryCareModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.mortuaryPaticulars=s,e.corpsePaticulars=s[0];var r=e.mortuaryPaticulars[0].mortuary_id;t.get("/api/getCabintesWithNoCorpses/"+r).then(function(t){e.cabinets_availables=t.data,console.log(e.cabinets_availables)}),e.giveCabinet=function(i,n){var s=a.currentUser.facility_id,r=(a.currentUser.id,{corpse_admission_id:n.corpse_admission_id,cabinet_id:i.id,facility_id:s,user_id:a.currentUser.id});t.post("/api/giveCabinetCorpse",r).then(function(t){1==t.data.status&&(e.cancel(),sweetAlert(t.data.data,"","success"))})},e.enterEncounter=function(n,s,r){if(0==angular.isDefined(n))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_services))return sweetAlert("Please Select Service","","error");console.log(n);var o=n.payment_category.patient_category,l=n.payment_services,d=n.payment_services.service_id,c=n.payment_services.price_id,u=n.payment_services.item_type_id,p=s,r=r,_=a.currentUser.id,m={item_type_id:u,patient_category:o,service_category:l,service_id:d,price_id:c,patient_id:p,facility_id:r,user_id:_};t.post("/api/enterEncounter",m).then(function(a){if(e.registrationReport=a.data,0==a.data.status)sweetAlert(a.data.data,"","error");else{t.get("/api/getPatientInfo/"+p).then(function(t){e.patientsInfo=t.data});i.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{patientData:function(){return e.patientData}}})}})},e.cancel=function(){console.log("done and cleared"),n.dismiss()},e.closeAllModals=function(){console.log("done and cleared"),n.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("mortuaryController",function(e,t,a,i,n,s,r){var o=a.currentUser.facility_id,l=a.currentUser.id;s.mytime1=new Date,s.mytime2=new Date,s.AdmissionNotes="";angular.element(document).ready(function(){s.setTabWards(1),s.getMortuary(),s.getCabinetsLists(),s.getApprovedCorpses(),s.getCorpseServices(),s.getPendingOutsideCorpses()}),s.openModalTime=function(e){r.open({animation:s.animationsEnabled,templateUrl:"/views/modules/nursing_care/timepicker.html",controller:"TimePicker",size:e,resolve:{time:function(){return s.mytime}}}).result.then(function(e){s.mytime=e},function(){console.log("Modal dismissed at: "+new Date)})},s.toggleAnimation=function(){s.animationsEnabled=!s.animationsEnabled},e.get("/api/getUsermenu/"+l).then(function(e){s.menu=e.data}),s.setTabAdmission=function(t){s.tab=t,e.post("/api/getPendingAdmissionList").then(function(e){s.admin=e.data,console.log(s.admin)}),e.get("/api/getAprovedAdmissionList").then(function(e){s.admitted=e.data}),e.get("/api/getPatientSentToTheatre").then(function(e){s.patientsSentToTheatres=e.data})},s.setTabattendedPatientTheatre=function(t){s.tab=t,e.get("/api/attendPatientTheatre").then(function(e){s.attendPatientTheatres=e.data})},s.setTabWards=function(t){s.tab=t,s.setTabAdmission(1),e.get("/api/getWards/"+o).then(function(e){s.getWards=e.data})},s.setTabDischarge=function(t){s.tab=t,e.get("/api/getWards/"+o).then(function(e){s.getWards=e.data})},s.setTabObservation=function(t){s.tab=t,e.get("/api/getAprovedAdmissionList").then(function(e){s.admitted=e.data})},s.setTabNursingCare=function(t){s.tab=t,e.get("/api/getAprovedAdmissionList").then(function(e){s.admitted=e.data})},s.setTabMortuaryClass=function(e){s.tab=e,s.getMortuaryClass()},s.setTabMortuaryDisposition=function(e){s.tab=e,s.getPendingCorpses(),s.getPendingOutsideCorpses(),s.getApprovedCorpses()},s.setTabMortuaryService=function(e){s.tab=e,s.getApprovedCorpses(),s.getCorpseServices()},s.setTabCorpseDischarge=function(e){s.tab=e,s.getApprovedCorpses()},s.getDisposedCorpse=function(e){s.disposedCorpse=e},s.getCorpseServices=function(){e.get("/api/getMortuaryServises").then(function(e){s.corpseServices=e.data})},s.addCorpseService=function(t,a,i){if(console.log(i),0==angular.isDefined(i))return sweetAlert("Please Select Corpse First","","error");var n={item_name:t,service_number:a,corpse_admission_id:i.corpse_admission_id,user_id:l};e.post("/api/addCorpseService",n).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.setTabTreatment=function(t){s.tab=t,e.get("/api/getAprovedAdmissionList").then(function(e){s.admitted=e.data})},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0,s.addMortuaryClass=function(t){if(s.dataLoading=!0,0==angular.isDefined(t))return s.dataLoading=!1,sweetAlert("Enter MORTUARY Class ","","error");e.post("/api/addMortuaryClass",{mortuary_class:t.class}).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.class=null,sweetAlert(e.data.data,"","success"))}).finally(function(){s.dataLoading=!1})},s.addTimesQue=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pre-Medication ","","error");var i={erasor:0,noted_value:t.time+" "+t.time_day,admission_id:a.admission_id,request_id:a.id,remarks:t.remarks,information_category:"PRE MEDICATION",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreMedication=null,sweetAlert(e.data.data,"","success"))})},s.PreOPCondition=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pre Operation Condition","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.case,information_category:"PRE-OPERTION CONDITION",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthBloodLoss=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter AMOUNT OF BLOOD COLLECTED","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.noted_amount,admission_id:a.admission_id,request_id:a.id,remarks:t.noted_amount,information_category:"BLOOD LOSS",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthFluidGiven=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter AMOUNT OF FLUID GIVEN","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.noted_amount_fluid,admission_id:a.admission_id,request_id:a.id,remarks:t.noted_amount_fluid,information_category:"FLUID GIVEN",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthUrineOutput=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter AMOUNT OF URINE OUTPUT","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.urine_output,admission_id:a.admission_id,request_id:a.id,remarks:t.urine_output,information_category:"URINE OUTPUT",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.urine_output=null,sweetAlert(e.data.data,"","success"))})},s.anaesthComplications=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Write any Compilcations found during Operations","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.complications,admission_id:a.admission_id,request_id:a.id,remarks:t.complications,information_category:"COMPLICATIONS",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.complications=null,sweetAlert(e.data.data,"","success"))})},s.anaesthPulseRate=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pulse Rate Associating Info","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");if(null==t.am_pm)return sweetAlert("IS IT AM/PM ? ","","error");if(null==t.hr)return sweetAlert("HOURS MISSED ","","error");if(null==t.mins)return sweetAlert("MINUTES MISSED ","","error");if(2!=t.mins.length)return sweetAlert("MINUTES MUST BE IN TWO DIGITS ","","error");if(t.mins>=60)return sweetAlert("MINUTES MUST BE LESS THAN 60 ","","error");if(t.mins<0)return sweetAlert("MINUTES MUST BE GREATER THAN 0 ","","error");if(null==t.read)return sweetAlert("EMPTY VALUE IN READ BOX  ","","error");var i={erasor:0,noted_value:t.read,admission_id:a.admission_id,request_id:a.id,am_pm:t.am_pm,mins:t.mins,hr:t.hr,information_category:"PULSE RATE",nurse_id:l};e.post("/api/addPrBp",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthSystolic=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pulse Rate Associating Info","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");if(null==t.am_pm)return sweetAlert("IS IT AM/PM ? ","","error");if(null==t.hr)return sweetAlert("HOURS MISSED ","","error");if(null==t.mins)return sweetAlert("MINUTES MISSED ","","error");if(2!=t.mins.length)return sweetAlert("MINUTES MUST BE IN TWO DIGITS ","","error");if(t.mins>=60)return sweetAlert("MINUTES MUST BE LESS THAN 60 ","","error");if(t.mins<0)return sweetAlert("MINUTES MUST BE GREATER THAN 0 ","","error");if(null==t.read)return sweetAlert("EMPTY VALUE IN READ BOX  ","","error");var i={erasor:0,noted_value:t.read,admission_id:a.admission_id,request_id:a.id,am_pm:t.am_pm,mins:t.mins,hr:t.hr,information_category:"SYSTOLIC PRESSURE",nurse_id:l};e.post("/api/addPrBp",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.read=null,sweetAlert(e.data.data,"","success"))})},s.anaesthDiastolic=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pulse Rate Associating Info","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");if(null==t.am_pm)return sweetAlert("IS IT AM/PM ? ","","error");if(null==t.hr)return sweetAlert("HOURS MISSED ","","error");if(null==t.mins)return sweetAlert("MINUTES MISSED ","","error");if(2!=t.mins.length)return sweetAlert("MINUTES MUST BE IN TWO DIGITS ","","error");if(t.mins>=60)return sweetAlert("MINUTES MUST BE LESS THAN 60 ","","error");if(t.mins<0)return sweetAlert("MINUTES MUST BE GREATER THAN 0 ","","error");if(null==t.read_diastolic)return sweetAlert("EMPTY VALUE IN READ BOX  ","","error");var i={erasor:0,noted_value:t.read_diastolic,admission_id:a.admission_id,request_id:a.id,am_pm:t.am_pm,mins:t.mins,hr:t.hr,information_category:"DIASTOLIC PRESSURE",nurse_id:l};e.post("/api/addPrBp",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.read_diastolic=null,sweetAlert(e.data.data,"","success"))})},s.anaesthIntubation=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter INTUBATION INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"INTUBATION",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthRespiration=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter RESPIRATION INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"RESPIRATION",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Respiration=null,sweetAlert(e.data.data,"","success"))})},s.anaesthLocal=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter LOCAL INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"LOCAL",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Respiration=null,sweetAlert(e.data.data,"","success"))})},s.anaesthPosition=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter POSITION INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"POSITION",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Respiration=null,sweetAlert(e.data.data,"","success"))})},s.anaesthNeedle=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter NEEDLE INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"NEEDLE",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Needle=null,sweetAlert(e.data.data,"","success"))})},s.anaesthEffect=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter NEEDLE INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"EFFECT",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Effect=null,sweetAlert(e.data.data,"","success"))})},s.saveHb=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Laboratory Status","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.laboratory,information_category:"LABORATORY STATUS",nurse_id:l};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.laboratory=null,sweetAlert(e.data.data,"","success"))})},s.savePreAnaestheticOrder=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter PRE ANAESTHETIC ORDER","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.pre_anaesthetic_order,information_category:"PRE ANAESTHETIC ORDER",nurse_id:l};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.pre_anaesthetic_order=null,sweetAlert(e.data.data,"","success"))})},s.saveAnaestheticTechniques=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter ANAESTHETIC TECHNIQUES","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.anaesthetic_technique,information_category:"ANAESTHETIC TECHNIQUES",nurse_id:l};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.anaesthetic_technique=null,sweetAlert(e.data.data,"","success"))})},s.savePhysicalStatus=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Physical Status","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");console.log(t);var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.physical_status,information_category:"PHYSICAL STATUS",nurse_id:l};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.laboratory=null,sweetAlert(e.data.data,"","success"))})},s.saveOral=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter LAST ORAL INTAKE","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");console.log(t);var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.oral,information_category:"LAST ORAL INTAKE",nurse_id:l};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.oral=null,sweetAlert(e.data.data,"","success"))})},s.saveNutritional=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter NUTRITIONAL STATUS","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");console.log(t);var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.nutrional,information_category:"NUTRITIONAL STATUS",nurse_id:l};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.nutrional=null,sweetAlert(e.data.data,"","success"))})};var d=[];s.showSearchMortuaryClass=function(t){return e.get("/api/getMortuaryClasses/"+t).then(function(e){d=e.data}),d};var c=[];s.showSearchBedTypes=function(t){return e.get("/api/searchBedTypes/"+t).then(function(e){c=e.data}),c},s.getPendingCorpses=function(){e.get("/api/getPendingCorpses/"+o).then(function(e){s.pendingCorpses=e.data,console.log(s.pendingCorpses)})},s.getPendingOutsideCorpses=function(){e.get("/api/getPendingOutsideCorpses/"+o).then(function(e){s.PendingOutsideCorpses=e.data})},s.giveCorpseCabinet=function(t){console.log(t);var a=t.corpse_admission_id;e.get("/api/getPendingOutsideCorpseInfo/"+a).then(function(e){var t=e.data;r.open({templateUrl:"/views/modules/mortuary/cabinetAllocation.html",size:"lg",animation:!0,controller:"mortuaryCareModal",resolve:{object:function(){return t}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})})},s.getApprovedCorpses=function(){e.get("/api/getApprovedCorpses/"+o).then(function(e){s.approvedCorpses=e.data})},s.getVital=function(){e.post("/api/getVital").then(function(e){s.getVitals=e.data})},s.saveAssociateHistory=function(t,a){if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");if(0==angular.isDefined(t))return sweetAlert("Please Enter History Records or NILL","","error");a.admission_id;var i={erasor:0,admission_id:a.admission_id,request_id:a.id,medical:t.medical,surgical:t.surgical,anaesthetic:t.anaesthetic,information_category:"ASSOCIATE HISTORY",nurse_id:l};e.post("/api/saveAssociateHistory",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.savePastHistory=function(t,a){if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");if(0==angular.isDefined(t))return sweetAlert("Please Enter History Records or NILL","","error");a.admission_id;var i={erasor:0,admission_id:a.admission_id,request_id:a.id,medical:t.medical,surgical:t.surgical,anaesthetic:t.anaesthetic,information_category:"PAST HISTORY",nurse_id:l};e.post("/api/savePastHistory",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.saveSocialSurgery=function(t,a){if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");if(0==angular.isDefined(t))return sweetAlert("Please Enter Social History Records or NILL","","error");a.admission_id;var i={erasor:0,admission_id:a.admission_id,request_id:a.id,chronic_illness:t.chronic_illness,substance_abuse:t.substance_abuse,adoption:t.adoption,others:t.others,other_information:"SOCIAL AND FAMILY HISTORY",nurse_id:l};e.post("/api/saveSocialHistory",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.saveRespiratoryExaminations=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding Respiratory System","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/physical_examinations.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.saveDentalStatus=function(e,t,a){if(0==angular.isDefined(a))return sweetAlert("Select the Patient Before ENTERING DENTAL STATUS","","error");s.selectedPatient=a,console.log(s.selectedPatient),s.dentals={tooth_id:e,tooth_number:t};var i=angular.extend(s.selectedPatient,s.dentals);console.log(i),console.log(s.dentals),r.open({templateUrl:"/views/modules/nursing_care/dental_status.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return i}}})},s.saveCardivascularExaminations=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding Cardivascular System","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/cardivascular_examinations.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.saveGastroIntestineExaminations=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding Gastro Intestine System","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/gastrointestine.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.saveCentralNervousSystem=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding CENTRAL NERVOUS SYSTEM","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/centralNervousSystem.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.getDiagnosis=function(){e.get("/api/getDiagnosis").then(function(e){s.getDiagnosises=e.data})},s.getTeeth=function(t){if(e.get("/api/getTeethAbove").then(function(t){s.teethAboves=t.data,e.get("/api/getTeethBelow").then(function(e){s.teethBelows=e.data,console.log(s.teethBelows)})}),0==angular.isDefined(t))return sweetAlert("Select the Patient Before SETTING DENTAL STATUS","","error");var a=t.id;e.get("/api/getTeethStatusFromPatientAbove/"+a).then(function(e){s.teeth_patientsAboves=e.data}),e.get("/api/getTeethStatusFromPatientBelow/"+a).then(function(e){s.teeth_patientsBelows=e.data})},s.getDrugs=function(){e.get("/api/getDrugs").then(function(e){s.getDrugs=e.data})},s.getCabinetsLists=function(){e.get("/api/getCabinetsLists/"+o).then(function(e){s.cabinetsLists=e.data})},s.getMortuaryClass=function(){e.get("/api/getMortuaryClassLists/"+o).then(function(e){s.getMortuaryClasses=e.data})},s.addVitals=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the Vital Signs","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");console.log(a);var i=a.admission_id,n={observed_amount:t.amount,observation_type_id:t.types,admission_id:i};e.post("/api/addVitals",n).then(function(e){s.getVitals=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addDrugs=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the DRUGS","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,n={how_often:t.drugs_given,type_of_drugs_dosage_id:t.types,admission_id:i};e.post("/api/addDrugs",n).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addGoals=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Nursing Diagnosis","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");console.log(a);var i=a.admission_id,t={targeted_plans:t.patient_goals,nurse_diagnosis_id:t.types,admission_id:i,nursing_care_types:"PATIENT GOALS",nurse_id:l};e.post("/api/addGoals",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addImplementation=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Diagnosis for Implementations","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={targeted_plans:t.implementation,nurse_diagnosis_id:t.getDiagnos,admission_id:i,nursing_care_types:"IMPLEMENTATIONS",nurse_id:l};e.post("/api/addImplementations",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addEvaluations=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Diagnosis for Implementations","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={targeted_plans:t.evaluation,nurse_diagnosis_id:t.getDiagnos,admission_id:i,nursing_care_types:"EVALUATIONS",nurse_id:l};e.post("/api/addEvaluations",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addTimes=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Diagnosis for TIMING","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");console.log(t);var i=a.admission_id,n=t.time_day,t={targeted_plans:t.time+" "+n,nurse_diagnosis_id:t.getDiagnos,admission_id:i,nursing_care_types:"TIME",nurse_id:l,daytime:n};console.log(t),e.post("/api/addTimes",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.patientDischarge=function(e){s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/patientDischarge.html",size:"lg",animation:!0,controller:"patientDischargedModal",resolve:{object:function(){return t}}})},s.addOutPuts=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the OUTPUT TYPES","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={amount:t.amount,observation_output_type_id:t.types,admission_id:i,si_units:t.units,nurse_id:l};console.log(t),e.post("/api/addOutPuts",t).then(function(e){s.getOutPuts=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addIntravenous=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the INTRAVENOUS FLUID","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={intravenous_mils:t.amount,intravenous_types_id:t.types,admission_id:i};e.post("/api/addIntakeObservation",t).then(function(e){s.getIntravenous=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addIntakeFluid=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the ORAL FLUID TYPE TAKEN","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,n={oral_mils:t.amount,oral_types_id:t.types,admission_id:i};e.post("/api/addIntakeFluid",n).then(function(e){s.getIntravenous=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addMortuary=function(t,a){return 0==angular.isDefined(t)?sweetAlert("Please Enter MORTUARY NAME BEFORE SAVING...","","error"):0==angular.isDefined(a)?sweetAlert("Please Enter MORTUARY CLASS","","error"):(console.log(t),console.log(a),void e.post("/api/addMortuary",{mortuary_class_id:a.mortuary_class_id.item_id,mortuary_name:t.mortuary_name,user_id:l,facility_id:o}).then(function(e){0==e.data.status?(s.mortuary=null,sweetAlert(e.data.data,"","error")):(s.mortuary=null,sweetAlert(e.data.data,"","success"))}))},s.addCabinet=function(t,a){return 0==angular.isDefined(t)?sweetAlert("Please Enter CABINET NAME ","","error"):0==angular.isDefined(a)?sweetAlert("Selected Mortuary Flushed in the Local storage Please Restart ","","error"):void e.post("/api/saveCabinets",{cabinet_name:t.cabinet_number,capacity:t.capacity,mortuary_id:a,user_id:l,eraser:1}).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.getCabinetsLists(),sweetAlert(e.data.data,"","success"))})},s.getMortuaryDetails=function(t){e.get("/api/getMortuaryOneInfo/"+t).then(function(e){s.mortuary=e.data}),e.get("/api/getCabinets/"+t).then(function(e){s.Cabinets=e.data;var t=s.mortuary;r.open({templateUrl:"/views/modules/mortuary/manageMortuaryCabinates.html",size:"lg",animation:!0,controller:"mortuaryManagementModal",resolve:{object:function(){return t}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})})},s.getBedDetails=function(t,a,i){e.get("/api/OnThisBed/"+t).then(function(e){if(c=e.data,0==e.data.status)sweetAlert(e.data.data,"","error");else{var t=i+" TAKEN BY "+e.data.data;sweetAlert(t,"","success")}})};var u="";s.getAdmissionNotes=function(t){e.post("/api/getInstructions",{patient_id:t}).then(function(e){s.AdmissionNotes=e.data,u=s.AdmissionNotes,console.dir(s.AdmissionNotes)})},s.giveBed=function(t,a,i,n,r){console.log(n),e.post("/api/giveBed",{bed_id:t,ward_id:i,admission_id:n,bed_available:r}).then(function(e){if(s.giveBeds=e.data,console.log(s.giveBeds),0==e.data.status)sweetAlert(e.data.data,"","error");else{var t=r+" SUCCESSFULLY ASSIGNED TO "+a;sweetAlert(t,"","success")}})},s.getAdmPatient=function(e){s.selectedPatient=e,console.log(s.selectedPatient)},s.getMortuary=function(){e.get("/api/getMortuaryList").then(function(e){s.getMortuaryLists=e.data})},s.getDisposed=function(e){var t=e;r.open({templateUrl:"/views/modules/mortuary/cabinetAllocation.html",size:"lg",animation:!0,controller:"corpseDisposedModal",resolve:{object:function(){return t}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})},s.assignToTheatre=function(t,a,i){e.get("/api/getFullAdmitedPatientInfo/"+i).then(function(e){s.admissions=e.data,console.log(e.data),console.log(i);var t=s.admissions;r.open({templateUrl:"/views/modules/nursing_care/postPatientsToTheatre.html",size:"lg",animation:!0,controller:"postPatientsToTheatreModal",resolve:{object:function(){return t}}})})}})}(),function(){"use strict";angular.module("authApp").controller("mortuaryManagementModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.mortuary=s;var r=e.mortuary.id;t.get("/api/getCabinetNumber/"+r).then(function(t){e.getCabinetNumber=t.data}),t.get("/api/getCabinets/"+r).then(function(t){e.getCabinets=t.data}),e.cancel=function(){console.log("done and cleared"),n.dismiss()},e.closeAllModals=function(){console.log("done and cleared"),n.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("TimePicker",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","time",function(e,t,a,i,n,s){e.mytime=new Date,e.hstep=1,e.mstep=15,e.mytime="",e.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},e.ismeridian=!0,e.mytime=s,e.selected={mytime:e.mytime},e.toggleMode=function(){e.ismeridian=!e.ismeridian},e.update=function(){var t=new Date;t.setHours(14),t.setMinutes(0),e.mytime=t},e.changed=function(){console.log("Time changed to: "+e.mytime)},e.clear=function(){e.mytime=null},e.ok=function(){n.close(e.mytime)},e.cancel=function(){n.dismiss("cancel")}}])}(),function(){"use strict";angular.module("authApp").controller("nursingCareController",function(e,t,a,i,n,s,r){var o=a.currentUser.facility_id,l=a.currentUser.id;s.mytime1=new Date,s.mytime2=new Date,s.AdmissionNotes="";angular.element(document).ready(function(){s.setTabWards(1)}),s.openModalTime=function(e){r.open({animation:s.animationsEnabled,templateUrl:"/views/modules/nursing_care/timepicker.html",controller:"TimePicker",size:e,resolve:{time:function(){return s.mytime}}}).result.then(function(e){s.mytime=e},function(){console.log("Modal dismissed at: "+new Date)})},s.toggleAnimation=function(){s.animationsEnabled=!s.animationsEnabled},e.get("/api/getUsermenu/"+l).then(function(e){s.menu=e.data}),s.setTabAdmission=function(t){s.tab=t,e.post("/api/getPendingAdmissionList").then(function(e){s.admin=e.data,console.log(s.admin)}),e.get("/api/getAprovedAdmissionList").then(function(e){s.admitted=e.data}),e.get("/api/getPatientSentToTheatre").then(function(e){s.patientsSentToTheatres=e.data})},s.setTabattendedPatientTheatre=function(t){s.tab=t,e.get("/api/attendPatientTheatre").then(function(e){s.attendPatientTheatres=e.data})},s.getDischargedPatients=function(){e.get("/api/getDischargedLists/"+o).then(function(e){s.dischargedPatients=e.data})},s.setTabWards=function(t){s.tab=t,s.setTabAdmission(1),e.get("/api/getWards/"+o).then(function(e){s.getWards=e.data})},s.setTabDischarge=function(t){s.tab=t,s.getDischargedPatients(),e.get("/api/getWards/"+o).then(function(e){s.getWards=e.data})},s.setTabObservation=function(t){s.tab=t,e.get("/api/getAprovedAdmissionList").then(function(e){s.admitted=e.data})},s.setTabNursingCare=function(t){s.tab=t,e.get("/api/getAprovedAdmissionList").then(function(e){s.admitted=e.data})},s.setTabWardtypes=function(t){s.tab=t,e.post("/api/getWardTypes").then(function(e){s.getWardTypes=e.data})},s.setTabTreatment=function(t){s.tab=t,e.get("/api/getAprovedAdmissionList").then(function(e){s.admitted=e.data})},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0,s.addWardTypes=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter WARD TYPE","","error");e.post("/api/saveWardTypes",{ward_type_name:t.ward_type}).then(function(e){0==e.data.status?(s.wards=null,sweetAlert(e.data.data,"","error")):(s.wards=null,sweetAlert(e.data.data,"","success"))})},s.addTimesQue=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pre-Medication ","","error");var i={erasor:0,noted_value:t.time+" "+t.time_day,admission_id:a.admission_id,request_id:a.id,remarks:t.remarks,information_category:"PRE MEDICATION",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreMedication=null,sweetAlert(e.data.data,"","success"))})},s.PreOPCondition=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pre Operation Condition","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.case,information_category:"PRE-OPERTION CONDITION",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthBloodLoss=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter AMOUNT OF BLOOD COLLECTED","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.noted_amount,admission_id:a.admission_id,request_id:a.id,remarks:t.noted_amount,information_category:"BLOOD LOSS",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthFluidGiven=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter AMOUNT OF FLUID GIVEN","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.noted_amount_fluid,admission_id:a.admission_id,request_id:a.id,remarks:t.noted_amount_fluid,information_category:"FLUID GIVEN",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthUrineOutput=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter AMOUNT OF URINE OUTPUT","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.urine_output,admission_id:a.admission_id,request_id:a.id,remarks:t.urine_output,information_category:"URINE OUTPUT",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.urine_output=null,sweetAlert(e.data.data,"","success"))})},s.anaesthComplications=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Write any Compilcations found during Operations","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.complications,admission_id:a.admission_id,request_id:a.id,remarks:t.complications,information_category:"COMPLICATIONS",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.complications=null,sweetAlert(e.data.data,"","success"))})},s.anaesthPulseRate=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pulse Rate Associating Info","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");if(null==t.am_pm)return sweetAlert("IS IT AM/PM ? ","","error");if(null==t.hr)return sweetAlert("HOURS MISSED ","","error");if(null==t.mins)return sweetAlert("MINUTES MISSED ","","error");if(2!=t.mins.length)return sweetAlert("MINUTES MUST BE IN TWO DIGITS ","","error");if(t.mins>=60)return sweetAlert("MINUTES MUST BE LESS THAN 60 ","","error");if(t.mins<0)return sweetAlert("MINUTES MUST BE GREATER THAN 0 ","","error");if(null==t.read)return sweetAlert("EMPTY VALUE IN READ BOX  ","","error");var i={erasor:0,noted_value:t.read,admission_id:a.admission_id,request_id:a.id,am_pm:t.am_pm,mins:t.mins,hr:t.hr,information_category:"PULSE RATE",nurse_id:l};e.post("/api/addPrBp",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthSystolic=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pulse Rate Associating Info","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");if(null==t.am_pm)return sweetAlert("IS IT AM/PM ? ","","error");if(null==t.hr)return sweetAlert("HOURS MISSED ","","error");if(null==t.mins)return sweetAlert("MINUTES MISSED ","","error");if(2!=t.mins.length)return sweetAlert("MINUTES MUST BE IN TWO DIGITS ","","error");if(t.mins>=60)return sweetAlert("MINUTES MUST BE LESS THAN 60 ","","error");if(t.mins<0)return sweetAlert("MINUTES MUST BE GREATER THAN 0 ","","error");if(null==t.read)return sweetAlert("EMPTY VALUE IN READ BOX  ","","error");var i={erasor:0,noted_value:t.read,admission_id:a.admission_id,request_id:a.id,am_pm:t.am_pm,mins:t.mins,hr:t.hr,information_category:"SYSTOLIC PRESSURE",nurse_id:l};e.post("/api/addPrBp",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.read=null,sweetAlert(e.data.data,"","success"))})},s.anaesthDiastolic=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Pulse Rate Associating Info","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");if(null==t.am_pm)return sweetAlert("IS IT AM/PM ? ","","error");if(null==t.hr)return sweetAlert("HOURS MISSED ","","error");if(null==t.mins)return sweetAlert("MINUTES MISSED ","","error");if(2!=t.mins.length)return sweetAlert("MINUTES MUST BE IN TWO DIGITS ","","error");if(t.mins>=60)return sweetAlert("MINUTES MUST BE LESS THAN 60 ","","error");if(t.mins<0)return sweetAlert("MINUTES MUST BE GREATER THAN 0 ","","error");if(null==t.read_diastolic)return sweetAlert("EMPTY VALUE IN READ BOX  ","","error");var i={erasor:0,noted_value:t.read_diastolic,admission_id:a.admission_id,request_id:a.id,am_pm:t.am_pm,mins:t.mins,hr:t.hr,information_category:"DIASTOLIC PRESSURE",nurse_id:l};e.post("/api/addPrBp",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.read_diastolic=null,sweetAlert(e.data.data,"","success"))})},s.anaesthIntubation=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter INTUBATION INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"INTUBATION",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.PreOPCondition=null,sweetAlert(e.data.data,"","success"))})},s.anaesthRespiration=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter RESPIRATION INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"RESPIRATION",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Respiration=null,sweetAlert(e.data.data,"","success"))})},s.anaesthLocal=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter LOCAL INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"LOCAL",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Respiration=null,sweetAlert(e.data.data,"","success"))})},s.anaesthPosition=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter POSITION INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"POSITION",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Respiration=null,sweetAlert(e.data.data,"","success"))})},s.anaesthNeedle=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter NEEDLE INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"NEEDLE",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Needle=null,sweetAlert(e.data.data,"","success"))})},s.anaesthEffect=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter NEEDLE INFO","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select Patient Before Proceed","","error");var i={erasor:0,noted_value:t.condition,admission_id:a.admission_id,request_id:a.id,remarks:t.condition,information_category:"EFFECT",nurse_id:l};e.post("/api/addTimesQue",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.Effect=null,sweetAlert(e.data.data,"","success"))})},s.saveHb=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Laboratory Status","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.laboratory,information_category:"LABORATORY STATUS",nurse_id:l};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.laboratory=null,sweetAlert(e.data.data,"","success"))})},s.savePreAnaestheticOrder=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter PRE ANAESTHETIC ORDER","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.pre_anaesthetic_order,information_category:"PRE ANAESTHETIC ORDER",nurse_id:l};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.pre_anaesthetic_order=null,sweetAlert(e.data.data,"","success"))})},s.saveAnaestheticTechniques=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter ANAESTHETIC TECHNIQUES","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.anaesthetic_technique,information_category:"ANAESTHETIC TECHNIQUES",nurse_id:l};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.anaesthetic_technique=null,sweetAlert(e.data.data,"","success"))})},s.savePhysicalStatus=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter Physical Status","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");console.log(t);var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.physical_status,information_category:"PHYSICAL STATUS",nurse_id:l};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.laboratory=null,sweetAlert(e.data.data,"","success"))})},s.saveOral=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter LAST ORAL INTAKE","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");console.log(t);var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.oral,information_category:"LAST ORAL INTAKE",nurse_id:l};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.oral=null,sweetAlert(e.data.data,"","success"))})},s.saveNutritional=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Enter NUTRITIONAL STATUS","","error");if(0==angular.isDefined(a))return sweetAlert("Please Enter Patient Selected","","error");console.log(t);var i={erasor:0,admission_id:a.admission_id,request_id:a.id,value_noted:t.nutrional,information_category:"NUTRITIONAL STATUS",nurse_id:l};e.post("/api/saveStatusAnaesthetic",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(t.nutrional=null,sweetAlert(e.data.data,"","success"))})};var d=[];s.showSearchWardTypes=function(t){return e.get("/api/searchWardTypes/"+t).then(function(e){d=e.data}),d};var c=[];s.showSearchWardClass=function(t){return e.get("/api/getWardClasses/"+t).then(function(e){c=e.data}),c};p=[];s.showSearchBedTypes=function(t){return e.get("/api/searchBedTypes/"+t).then(function(e){p=e.data}),p},s.getOutPutTypes=function(){e.get("/api/getOutPutTypes").then(function(e){s.getOutPutTypes=e.data})},s.getVital=function(){e.post("/api/getVital").then(function(e){s.getVitals=e.data})},s.saveAssociateHistory=function(t,a){if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");if(0==angular.isDefined(t))return sweetAlert("Please Enter History Records or NILL","","error");a.admission_id;var i={erasor:0,admission_id:a.admission_id,request_id:a.id,medical:t.medical,surgical:t.surgical,anaesthetic:t.anaesthetic,information_category:"ASSOCIATE HISTORY",nurse_id:l};e.post("/api/saveAssociateHistory",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.savePastHistory=function(t,a){if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");if(0==angular.isDefined(t))return sweetAlert("Please Enter History Records or NILL","","error");a.admission_id;var i={erasor:0,admission_id:a.admission_id,request_id:a.id,medical:t.medical,surgical:t.surgical,anaesthetic:t.anaesthetic,information_category:"PAST HISTORY",nurse_id:l};e.post("/api/savePastHistory",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.saveSocialSurgery=function(t,a){if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");if(0==angular.isDefined(t))return sweetAlert("Please Enter Social History Records or NILL","","error");a.admission_id;var i={erasor:0,admission_id:a.admission_id,request_id:a.id,chronic_illness:t.chronic_illness,substance_abuse:t.substance_abuse,adoption:t.adoption,others:t.others,other_information:"SOCIAL AND FAMILY HISTORY",nurse_id:l};e.post("/api/saveSocialHistory",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.saveRespiratoryExaminations=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding Respiratory System","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/physical_examinations.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.saveDentalStatus=function(e,t,a){if(0==angular.isDefined(a))return sweetAlert("Select the Patient Before ENTERING DENTAL STATUS","","error");s.selectedPatient=a,console.log(s.selectedPatient),s.dentals={tooth_id:e,tooth_number:t};var i=angular.extend(s.selectedPatient,s.dentals);console.log(i),console.log(s.dentals),r.open({templateUrl:"/views/modules/nursing_care/dental_status.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return i}}})},s.saveCardivascularExaminations=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding Cardivascular System","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/cardivascular_examinations.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.saveGastroIntestineExaminations=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding Gastro Intestine System","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/gastrointestine.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.saveCentralNervousSystem=function(e){if(0==angular.isDefined(e))return sweetAlert("Select the Patient Before Adding CENTRAL NERVOUS SYSTEM","","error");s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/centralNervousSystem.html",size:"lg",animation:!0,controller:"physicalExaminations",resolve:{object:function(){return t}}})},s.getDiagnosis=function(){e.get("/api/getDiagnosis").then(function(e){s.getDiagnosises=e.data})},s.getTeeth=function(t){if(e.get("/api/getTeethAbove").then(function(t){s.teethAboves=t.data,e.get("/api/getTeethBelow").then(function(e){s.teethBelows=e.data,console.log(s.teethBelows)})}),0==angular.isDefined(t))return sweetAlert("Select the Patient Before SETTING DENTAL STATUS","","error");var a=t.id;e.get("/api/getTeethStatusFromPatientAbove/"+a).then(function(e){s.teeth_patientsAboves=e.data}),e.get("/api/getTeethStatusFromPatientBelow/"+a).then(function(e){s.teeth_patientsBelows=e.data})},s.getDrugs=function(){e.get("/api/getDrugs").then(function(e){s.getDrugs=e.data})},s.getIntakeFluid=function(){e.get("/api/getIntakeSolutions").then(function(e){s.getIntakeFluids=e.data})},s.addVitals=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the Vital Signs","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");console.log(a);var i=a.admission_id,n={observed_amount:t.amount,observation_type_id:t.types,admission_id:i};e.post("/api/addVitals",n).then(function(e){s.getVitals=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addDrugs=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the DRUGS","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,n={how_often:t.drugs_given,type_of_drugs_dosage_id:t.types,admission_id:i};e.post("/api/addDrugs",n).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addGoals=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Nursing Diagnosis","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");console.log(a);var i=a.admission_id,t={targeted_plans:t.patient_goals,nurse_diagnosis_id:t.types,admission_id:i,nursing_care_types:"PATIENT GOALS",nurse_id:l};e.post("/api/addGoals",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addImplementation=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Diagnosis for Implementations","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={targeted_plans:t.implementation,nurse_diagnosis_id:t.getDiagnos,admission_id:i,nursing_care_types:"IMPLEMENTATIONS",nurse_id:l};e.post("/api/addImplementations",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addEvaluations=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Diagnosis for Implementations","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={targeted_plans:t.evaluation,nurse_diagnosis_id:t.getDiagnos,admission_id:i,nursing_care_types:"EVALUATIONS",nurse_id:l};e.post("/api/addEvaluations",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addTimes=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select Diagnosis for TIMING","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");console.log(t);var i=a.admission_id,n=t.time_day,t={targeted_plans:t.time+" "+n,nurse_diagnosis_id:t.getDiagnos,admission_id:i,nursing_care_types:"TIME",nurse_id:l,daytime:n};console.log(t),e.post("/api/addTimes",t).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.patientDischarge=function(e){s.selectedPatient=e,console.log(s.selectedPatient);var t=s.selectedPatient;r.open({templateUrl:"/views/modules/nursing_care/patientDischarge.html",size:"lg",animation:!0,controller:"patientDischargedModal",resolve:{object:function(){return t}}})},s.addOutPuts=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the OUTPUT TYPES","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={amount:t.amount,observation_output_type_id:t.types,admission_id:i,si_units:t.units,nurse_id:l};console.log(t),e.post("/api/addOutPuts",t).then(function(e){s.getOutPuts=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addIntravenous=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the INTRAVENOUS FLUID","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,t={intravenous_mils:t.amount,intravenous_types_id:t.types,admission_id:i};e.post("/api/addIntakeObservation",t).then(function(e){s.getIntravenous=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addIntakeFluid=function(t,a){if(0==angular.isDefined(t))return sweetAlert("Please Select the ORAL FLUID TYPE TAKEN","","error");if(0==angular.isDefined(a))return sweetAlert("Please Select the Patient From list on the Left panel","","error");var i=a.admission_id,n={oral_mils:t.amount,oral_types_id:t.types,admission_id:i};e.post("/api/addIntakeFluid",n).then(function(e){s.getIntravenous=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},s.addWard=function(t,a){return 0==angular.isDefined(t)?sweetAlert("Please Enter WARD NAME","","error"):0==angular.isDefined(t.ward_type)?sweetAlert("Please Enter WARD TYPE","","error"):0==angular.isDefined(a)?sweetAlert("Please Enter WARD CLASS","","error"):0==angular.isDefined(a.ward_class_id)?sweetAlert("Please Enter WARD CLASS","","error"):void e.post("/api/saveWards",{ward_class_id:a.ward_class_id.item_id,ward_name:t.ward_name,ward_type_id:t.ward_type.id,ward_type_name:t.ward_type.ward_type_name,facility_id:o}).then(function(e){0==e.data.status?(s.wards=null,sweetAlert(e.data.data,"","error")):(s.wards=null,sweetAlert(e.data.data,"","success"))})},s.addBed=function(t,a){return 0==angular.isDefined(t)?sweetAlert("Please Enter BED NUMBER "+a,"","error"):0==angular.isDefined(t.bed_type)?sweetAlert("Please Enter BED TYPE "+a,"","error"):(console.log(t.bed_type),void e.post("/api/saveBeds",{bed_name:t.bed_number,bed_type_id:t.bed_type.id,ward_id:a,facility_id:o,eraser:1}).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")}))};var u=0,p=[],_=[];s.getWardDetails=function(t){e.get("/api/getWardOneInfo/"+t).then(function(e){_=e.data}),e.get("/api/getBedsNumber/"+t).then(function(e){u=e.data}),e.get("/api/getBeds/"+t).then(function(e){p=e.data;var t=angular.extend({},_,u);r.open({templateUrl:"/views/modules/nursing_care/manageWardBeds.html",size:"lg",animation:!0,controller:"wardManagementModal",resolve:{object:function(){return t}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})})},s.getBedDetails=function(t,a,i){e.get("/api/OnThisBed/"+t).then(function(e){if(p=e.data,0==e.data.status)sweetAlert(e.data.data,"","error");else{var t=i+" TAKEN BY "+e.data.data;sweetAlert(t,"","success")}})};var m="";s.getAdmissionNotes=function(t){e.post("/api/getInstructions",{patient_id:t}).then(function(e){s.AdmissionNotes=e.data,m=s.AdmissionNotes,console.dir(s.AdmissionNotes)})},s.giveBed=function(t,a,i,n,r){console.log(n),e.post("/api/giveBed",{bed_id:t,ward_id:i,admission_id:n,bed_available:r}).then(function(e){if(s.giveBeds=e.data,console.log(s.giveBeds),0==e.data.status)sweetAlert(e.data.data,"","error");else{var t=r+" SUCCESSFULLY ASSIGNED TO "+a;sweetAlert(t,"","success")}})},s.getAdmPatient=function(e){s.selectedPatient=e,console.log(s.selectedPatient)},s.getPatientsSentToTheatre=function(){e.get("/api/getPatientSentToTheatre").then(function(e){s.patientsSentToTheatres=e.data})},s.getAdmission=function(t,a,i){e.post("/api/getInstructions",{patient_id:t,ward_id:a}).then(function(e){s.AdmissionNotes=e.data,m=s.AdmissionNotes,console.dir(s.AdmissionNotes)}),e.get("/api/getPatientInfo/"+t).then(function(e){s.quick_registration=e.data;var t=angular.extend({},s.quick_registration,m);r.open({templateUrl:"/views/modules/nursing_care/bedAllocation.html",size:"lg",animation:!0,controller:"nursingCareModal",resolve:{object:function(){return t}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})})},s.assignToTheatre=function(t,a,i){e.get("/api/getFullAdmitedPatientInfo/"+i).then(function(e){s.admissions=e.data,console.log(e.data),console.log(i);var t=s.admissions;r.open({templateUrl:"/views/modules/nursing_care/postPatientsToTheatre.html",size:"lg",animation:!0,controller:"postPatientsToTheatreModal",resolve:{object:function(){return t}}})})}})}(),function(){"use strict";angular.module("authApp").controller("nursingCareModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.patientPaticulars=s,e.doctorPaticulars=s[0];var r=e.patientPaticulars[0].ward_id;t.get("/api/getBedsWithNoPatients/"+r).then(function(t){e.beds_availables=t.data,console.log(e.beds_availables)}),e.enterEncounter=function(n,s,r){if(0==angular.isDefined(n))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_services))return sweetAlert("Please Select Service","","error");console.log(n);var o=n.payment_category.patient_category,l=n.payment_services,d=n.payment_services.service_id,c=n.payment_services.price_id,u=n.payment_services.item_type_id,p=s,r=r,_=a.currentUser.id,m={item_type_id:u,patient_category:o,service_category:l,service_id:d,price_id:c,patient_id:p,facility_id:r,user_id:_};t.post("/api/enterEncounter",m).then(function(a){if(e.registrationReport=a.data,0==a.data.status)sweetAlert(a.data.data,"","error");else{t.get("/api/getPatientInfo/"+p).then(function(t){e.patientsInfo=t.data});i.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{patientData:function(){return e.patientData}}})}})},e.cancel=function(){console.log("done and cleared"),n.dismiss()},e.closeAllModals=function(){console.log("done and cleared"),n.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("nursingCareController",function(e,t,a,i,n,s,r){a.currentUser.facility_id,a.currentUser.id;var o=[];s.showSearchMarital=function(t){return e.get("/api/getMaritalStatus/"+t).then(function(e){o=e.data}),console.log(o),o}})}(),function(){"use strict";angular.module("authApp").controller("patientDischargedModal",["$filter","$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){t.patientPaticulars=r;var o=i.currentUser.facility_id;i.currentUser.id;t.today=function(){t.dt=new Date},t.today(),t.clear=function(){t.dt=null},t.options={customClass:function(e){var a=e.date;if("day"===e.mode)for(var i=new Date(a).setHours(0,0,0,0),n=0;n<t.events.length;n++)if(i===new Date(t.events[n].date).setHours(0,0,0,0))return t.events[n].status;return""},minDate:new Date,showWeeks:!0},t.toggleMin=function(){t.options.minDate=t.options.minDate?null:new Date},t.toggleMin(),t.setDate=function(e,a,i){t.dt=new Date(e,a,i)};var l=new Date;l.setDate(l.getDate()+1);var d=new Date(l);d.setDate(l.getDate()+1),t.events=[{date:l,status:"full"},{date:d,status:"partially"}];var c=t.patientPaticulars.admission_id;a.get("/api/getFullAdmitedPatientInfo/"+c).then(function(e){t.admissions=e.data,console.log(t.admissions)}),t.getDischargedPatients=function(){a.get("/api/getDischargedLists/"+o).then(function(e){t.dischargedPatients=e.data})},t.enterEncounter=function(e,s,r){if(0==angular.isDefined(e))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(e.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(e.payment_services))return sweetAlert("Please Select Service","","error");console.log(e);var o=e.payment_category.patient_category,l=e.payment_services,d=e.payment_services.service_id,c=e.payment_services.price_id,u=e.payment_services.item_type_id,p=s,r=r,_=i.currentUser.id,m={item_type_id:u,patient_category:o,service_category:l,service_id:d,price_id:c,patient_id:p,facility_id:r,user_id:_};a.post("/api/enterEncounter",m).then(function(e){if(t.registrationReport=e.data,0==e.data.status)sweetAlert(e.data.data,"","error");else{a.get("/api/getPatientInfo/"+p).then(function(e){t.patientsInfo=e.data});n.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{patientData:function(){return t.patientData}}})}})},t.addDischarge=function(n,s,r){if(0==angular.isDefined(n))return sweetAlert("Provide Discharge Notes","","error");if(0==angular.isDefined(s))return sweetAlert("Please Select Patient","","error");var o=e("date")(r,"yyyy-MM-dd"),l={permission_date:e("date")(new Date,"yyyy-MM-dd"),nurse_id:i.currentUser.id,confirm:1,admission_id:s,domestic_dosage:n,followup_date:o};a.post("/api/addDischargeNotes",l).then(function(e){t.dischargeNotes=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):(t.getDischargedPatients(),sweetAlert(e.data.data,"","success"))})},t.cancel=function(){console.log("done and cleared"),s.dismiss()},t.closeAllModals=function(){console.log("done and cleared"),s.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("physicalExaminations",["$filter","$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){t.admissions=r,console.log(t.admissions);i.currentUser.facility_id;var o=i.currentUser.id;t.saveResipratorySystem=function(e,t){if(0==angular.isDefined(e))return sweetAlert("Please Enter value at least one field","","error");console.log(t);var i={erasor:0,admission_id:t.admission_id,request_id:t.id,inspection:e.inspection,palpation:e.palpation,auscultation:e.auscultation,percussion:e.percussion,other_information:"RESPIRATORY HISTORY",nurse_id:o};console.log(i),a.post("/api/saveResipratorySystem",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.dismiss(),sweetAlert(e.data.data,"","success"))})},t.addDentalInfo=function(e,t){if(0==angular.isDefined(e))return sweetAlert("Please Enter value at least one field","","error");var i={erasor:0,admission_id:t.admission_id,request_id:t.id,inspection:e.inspection,palpation:e.palpation,auscultation:e.auscultation,percussion:e.percussion,other_information:"DENTAL STATUS",nurse_id:o};console.log(i),a.post("/api/saveResipratorySystem",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.dismiss(),sweetAlert(e.data.data,"","success"))})},t.addDentalInfo=function(e,t){if(0==angular.isDefined(e))return sweetAlert("Please Select Dental Status","","error");i="";if(2==e.dental_status)i="numberCircle";else if(1==e.dental_status)i="missedDental";else if(3==e.dental_status)var i="decayedDental";console.log(t.tooth_id);var n={erasor:0,admission_id:t.admission_id,request_id:t.id,dental_id:t.tooth_id,dental_status:e.dental_status,css_class:i,other_information:"DENTAL STATUS",nurse_id:o};a.post("/api/saveTeethStatus",n).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.dismiss(),sweetAlert(e.data.data,"","success"))})},t.saveCardivascularSystem=function(e,t){if(0==angular.isDefined(e))return sweetAlert("Please Enter value at least one field","","error");console.log(t);var i={erasor:0,admission_id:t.admission_id,request_id:t.id,inspection:e.inspection,palpation:e.palpation,auscultation:e.auscultation,percussion:e.percussion,other_information:"CARDIVASCULAR SYSTEM",nurse_id:o};console.log(i),a.post("/api/saveResipratorySystem",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.dismiss(),sweetAlert(e.data.data,"","success"))})},t.saveGastroIntestineExaminations=function(e,t){if(0==angular.isDefined(e))return sweetAlert("Please Enter value at least one field","","error");console.log(t);var i={erasor:0,admission_id:t.admission_id,request_id:t.id,inspection:e.inspection,palpation:e.palpation,auscultation:e.auscultation,percussion:e.percussion,other_information:"Gastro Intestine",nurse_id:o};console.log(i),a.post("/api/saveResipratorySystem",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.dismiss(),sweetAlert(e.data.data,"","success"))})},t.saveCentralNervousSystemExaminations=function(e,t){if(0==angular.isDefined(e))return sweetAlert("Please Enter value at least one field","","error");console.log(t);var i={erasor:0,admission_id:t.admission_id,request_id:t.id,inspection:e.inspection,palpation:e.palpation,auscultation:e.auscultation,percussion:e.percussion,other_information:"CENTRAL NERVOUS SYSTEM",nurse_id:o};console.log(i),a.post("/api/saveResipratorySystem",i).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):(s.dismiss(),sweetAlert(e.data.data,"","success"))})},t.today=function(){t.dt=new Date},t.today(),t.clear=function(){t.dt=null},t.options={customClass:function(e){var a=e.date;if("day"===e.mode)for(var i=new Date(a).setHours(0,0,0,0),n=0;n<t.events.length;n++)if(i===new Date(t.events[n].date).setHours(0,0,0,0))return t.events[n].status;return""},minDate:new Date,showWeeks:!0},t.toggleMin=function(){t.options.minDate=t.options.minDate?null:new Date},t.toggleMin(),t.setDate=function(e,a,i){t.dt=new Date(e,a,i)};var l=new Date;l.setDate(l.getDate()+1);var d=new Date(l);d.setDate(l.getDate()+1),t.events=[{date:l,status:"full"},{date:d,status:"partially"}],t.enterEncounter=function(e,s,r){if(0==angular.isDefined(e))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(e.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(e.payment_services))return sweetAlert("Please Select Service","","error");console.log(e);var o=e.payment_category.patient_category,l=e.payment_services,d=e.payment_services.service_id,c=e.payment_services.price_id,u=e.payment_services.item_type_id,p=s,r=r,_=i.currentUser.id,m={item_type_id:u,patient_category:o,service_category:l,service_id:d,price_id:c,patient_id:p,facility_id:r,user_id:_};a.post("/api/enterEncounter",m).then(function(e){if(t.registrationReport=e.data,0==e.data.status)sweetAlert(e.data.data,"","error");else{a.get("/api/getPatientInfo/"+p).then(function(e){t.patientsInfo=e.data});n.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{patientData:function(){return t.patientData}}})}})},t.addDischarge=function(n,s,r){if(0==angular.isDefined(n))return sweetAlert("Provide Discharge Notes","","error");if(0==angular.isDefined(s))return sweetAlert("Please Select Patient","","error");var o=e("date")(r,"yyyy-MM-dd"),l={permission_date:e("date")(new Date,"yyyy-MM-dd"),nurse_id:i.currentUser.id,confirm:1,admission_id:s,domestic_dosage:n,followup_date:o};a.post("/api/addDischargeNotes",l).then(function(e){t.dischargeNotes=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},t.cancel=function(){console.log("done and cleared"),s.dismiss()},t.closeAllModals=function(){console.log("done and cleared"),s.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("postPatientsToTheatreModal",["$filter","$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){t.admissions=r,t.today=function(){t.dt=new Date},t.today(),t.clear=function(){t.dt=null},t.options={customClass:function(e){var a=e.date;if("day"===e.mode)for(var i=new Date(a).setHours(0,0,0,0),n=0;n<t.events.length;n++)if(i===new Date(t.events[n].date).setHours(0,0,0,0))return t.events[n].status;return""},minDate:new Date,showWeeks:!0},t.toggleMin=function(){t.options.minDate=t.options.minDate?null:new Date},t.toggleMin(),t.setDate=function(e,a,i){t.dt=new Date(e,a,i)};var o=new Date;o.setDate(o.getDate()+1);var l=new Date(o);l.setDate(o.getDate()+1),t.events=[{date:o,status:"full"},{date:l,status:"partially"}],t.enterTheatre=function(t,n,s){if(0==angular.isDefined(t))return sweetAlert("Provide Doctor Prescriptions","","error");if(0==angular.isDefined(n))return sweetAlert("Please Select Patient","","error");var r=e("date")(s,"yyyy-MM-dd"),o={received:0,posted_date:e("date")(new Date,"yyyy-MM-dd"),nurse_id:i.currentUser.id,confirm:1,admission_id:n,prescriptions:t,operation_date:r};a.post("/api/enterTheatre",o).then(function(e){0==e.data.status?sweetAlert(e.data.data,"","error"):sweetAlert(e.data.data,"","success")})},t.cancel=function(){console.log("done and cleared"),s.dismiss()},t.closeAllModals=function(){console.log("done and cleared"),s.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("wardManagementModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.wards=s;var r=s[0].ward_id;t.get("/api/getBeds/"+r).then(function(t){e.beds=t.data,console.log(e.beds)}),e.enterEncounter=function(n,s,r){if(0==angular.isDefined(n))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_services))return sweetAlert("Please Select Service","","error");console.log(n);var o=n.payment_category.patient_category,l=n.payment_services,d=n.payment_services.service_id,c=n.payment_services.price_id,u=n.payment_services.item_type_id,p=s,r=r,_=a.currentUser.id,m={item_type_id:u,patient_category:o,service_category:l,service_id:d,price_id:c,patient_id:p,facility_id:r,user_id:_};t.post("/api/enterEncounter",m).then(function(a){if(e.registrationReport=a.data,0==a.data.status)sweetAlert(a.data.data,"","error");else{t.get("/api/getPatientInfo/"+p).then(function(t){e.patientsInfo=t.data});i.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{patientData:function(){return e.patientData}}})}})},e.cancel=function(){console.log("done and cleared"),n.dismiss()},e.closeAllModals=function(){console.log("done and cleared"),n.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("paymentsController",function(e,t,a,i,n){var s=i.currentUser.facility_id,r=i.currentUser.id;a.get("/api/getUsermenu/"+r).then(function(t){e.menu=t.data});var o=[];e.showSearch=function(e){return a.post("/api/patientsToPoS",{search:e,facility_id:s}).then(function(e){o=e.data}),o};var l=[];e.searchItems=function(e,t){var i=t.patient_category_id;if(null!=i)return 3==t.main_category_id&&(i=1),a.post("/api/itemsToPoS",{search:e,patient_category_id:i,facility_id:s}).then(function(e){l=e.data}),l;swal("Please search patient first!","","error")},e.reloadBills=function(){a.get("/api/getBills/"+s).then(function(t){e.billsData=t.data})},a.get("/api/getBills/"+s).then(function(t){e.billsData=t.data}),e.getBill=function(t){a.get("/api/getPatientBill/"+t.patient_id).then(function(t){e.patientBills=t.data})};var d=[];e.getBillModal=function(e){if(0==angular.isDefined(e.patient_id))return sweetAlert("Please Click on the Patient you want to charge!","","error");a.post("/api/getPatientBill",{patient_id:e.patient_id,receipt_number:e.receipt_number}).then(function(e){var t=d=e.data;n.open({templateUrl:"/views/modules/payments/billsModal.html",size:"lg",animation:!0,controller:"receiptsController",resolve:{object:function(){return t}}})})},e.itemData=[];var c=[];e.addItem=function(t,i,n){var o=2,l="",d=t.main_category_id;if(null!=t&&null!=i&&null!=n){for(var u=0;u<e.itemData.length;u++)if(e.itemData[u].item_id==i.item_id)return swal(i.item_name+" already in your order list!","","info"),$("#item").val(""),void $("#qty").val("");var p=i.price*n;3==t.main_category_id&&0==i.exemption_status&&(p=0),3==t.main_category_id&&1==i.exemption_status&&(p=p),1!=t.main_category_id&&0==i.exemption_status&&(o=1,l=t.patient_category_id),1!=t.main_category_id&&1==i.exemption_status&&(o=2,l=""),3==t.main_category_id&&(d=1),4==i.dept_id?a.post("/api/balanceCheck",{main_category_id:d,item_id:i.item_id,facility_id:s}).then(function(a){if(!((c=a.data).length<1))return c.length>0&&c[0].balance>=n?(e.itemData.push({dept_id:i.dept_id,item_id:i.item_id,item_name:i.item_name,sub_total:p,receipt_number:"",item_type_id:i.item_type_id,quantity:n,price:i.price,item_price_id:i.price_id,user_id:r,patient_id:t.patient_id,medical_record_number:t.medical_record_number,account_number:t.account_number,account_number_id:t.account_id,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,status_id:o,payment_filter:l,facility_id:s,discount:0,discount_by:r}),void(e.toto=e.getTotal())):void(n>c[0].balance&&swal("Quantity for "+i.item_name+" is not sufficient in store.","There are only "+c[0].balance+" items remained in store","info"));swal(i.item_name+" is not available in store.","Contact store manager","info")}):(e.itemData.push({dept_id:i.dept_id,item_id:i.item_id,item_name:i.item_name,sub_total:p,receipt_number:"",item_type_id:i.item_type_id,quantity:n,price:i.price,item_price_id:i.price_id,user_id:r,patient_id:t.patient_id,medical_record_number:t.medical_record_number,account_number:t.account_number,account_number_id:t.account_id,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,status_id:o,payment_filter:l,facility_id:s,discount:0,discount_by:r}),e.toto=e.getTotal()),$("#item").val(""),$("#qty").val("")}else swal("Please search Patient and Item the click 'Add' Button")},e.removeItem=function(t){var a=e.itemData.indexOf(t);e.itemData.splice(a,1),e.toto=e.getTotal()},e.getTotal=function(){for(var t=0,a=0;a<e.itemData.length;a++)t+=e.itemData[a].sub_total;return t},e.processSales=function(){var t=e.getTotal();swal({title:"Are you sure you want to complete this transaction with a sum of "+t+" Tshs? .Process cannot be undone",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!  ",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){var t="";a.post("/api/saveFromPoS",e.itemData).then(function(a){t=a.data;for(var i=0;i<e.itemData.length;i++)e.itemData[i].receipt_number=t;var s=e.itemData;n.open({templateUrl:"/views/modules/payments/posReceipts.html",size:"lg",animation:!0,controller:"posReceipts",resolve:{object:function(){return s}}}),e.itemData=[],e.toto=e.getTotal()})},function(e){"cancel"===e&&swal("Transaction cancelled","Carefully prepare another transaction","info")})}})}(),function(){"use strict";angular.module("authApp").controller("posReceipts",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.date=new Date,e.bill=s;a.currentUser.facility_id;var r=a.currentUser.id;t.get("/api/getUsermenu/"+r).then(function(t){e.menu=t.data}),e.getTotal=function(){for(var e=0,t=0;t<s.length;t++)e+=s[t].sub_total;return e},e.printInvoice=function(){var e=document.getElementById("contentToPrint"),t=window.open("","PrintWindow","width=750,height=650,top=50,left=50,toolbars=no,scrollbars=yes,status=no,resizable=yes");t.document.title="Print Receipt: GoT-HOMIS",t.document.writeln(e.innerHTML),t.document.close(),setTimeout(function(){t.focus(),t.print(),t.close()},2e3)}}])}(),function(){"use strict";angular.module("authApp").controller("printReceipt",["$scope","$state","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){e.date=new Date;var o=i.currentUser.id;i.currentUser.facility_id;a.get("/api/getUsermenu/"+o).then(function(t){e.menu=t.data}),e.bill=r,e.getTotal=function(){for(var t=0,a=0;a<e.bill.length;a++)t+=e.bill[a].quantity*e.bill[a].price-e.bill[a].discount;return t},e.printInvoice=function(){var e=document.getElementById("contentToPrint"),a=window.open("","PrintWindow","width=750,height=650,top=50,left=50,toolbars=no,scrollbars=yes,status=no,resizable=yes");a.document.title="Print Receipt: GoT-HOMIS",a.document.writeln(e.innerHTML),a.document.close(),setTimeout(function(){a.focus(),a.print(),a.close()},2e3),t.reload()}}])}(),function(){"use strict";angular.module("authApp").controller("receiptsController",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){var r=a.currentUser.id;t.get("/api/getUsermenu/"+r).then(function(t){e.menu=t.data}),e.patientBills=s,e.toto=function(){for(var t=0,a=0;a<e.patientBills.length;a++)t+=e.patientBills[a].quantity*e.patientBills[a].price-e.patientBills[a].discount;return t};var o=a.currentUser.facility_id;e.proccessBill=function(a){if(null!=a){t.post("/api/updateBills",{user_id:r,invoice_id:a[0].receipt_number}).then(function(e){}),t.get("/api/getBills/"+o).then(function(t){e.billsData=t.data});var s=a;i.open({templateUrl:"/views/modules/payments/receipts.html",size:"lg",animation:!0,controller:"printReceipt",resolve:{object:function(){return s}}});n.dismiss()}else swal("Please choose Patient and payment method to continue!")}}])}(),function(){"use strict";angular.module("authApp").controller("reportsController",function(e,t,a,i){var n=a.currentUser.id,s=a.currentUser.facility_id;t.setTab=function(e){t.tab=e},t.isSet=function(e){return t.tab===e},e.get("/api/getUsermenu/"+n).then(function(e){t.menu=e.data}),t.getDepartmental=function(a){e.post("/api/getDepartmentalReports",{start:a.start,end:a.end,facility_id:s}).then(function(e){t.departments=e.data,t.depGrandTotal=t.depTotal()})},t.sum=function(){for(var e=0,a=0;a<t.detailedData.length;a++)e+=t.detailedData[a].sub_total;return e},t.depTotal=function(){for(var e=0,a=0;a<t.departments.length;a++)e+=t.departments[a].total;return e},t.cashierTtl=function(){for(var e=0,a=0;a<t.cashiers.length;a++)e+=t.cashiers[a].sub_total;return e},t.getDate=function(a){e.post("/api/getDetailedReports",{start:a.start,end:a.end,facility_id:s}).then(function(e){t.detailedData=e.data,t.selIdx=-1,t.detailedTotal=t.sum(),t.selData=function(e,a){t.selectedData=e,t.selIdx=a},t.isSelData=function(e){return t.selectedData===e}})},t.getDetailedData=function(a,i){e.post("/api/detailedData",{receipt_number:a.receipt_number,start:i.start,end:i.end}).then(function(e){t.getDetailedReports=e.data})},t.getCashiers=function(a){e.post("/api/getCashierReports",{start:a.start,end:a.end,facility_id:s}).then(function(e){t.cashiers=e.data,t.depGrandTotal=t.cashierTtl()})};t.getReceipt=function(a,n){e.post("/api/detailedData",{receipt_number:a.receipt_number,start:n.start,end:n.end}).then(function(e){t.getDetailedReports=e.data,i.open({templateUrl:"/views/modules/payments/receipts.html",size:"lg",animation:!0,controller:"printReceipt",resolve:{object:function(){return t.getDetailedReports}}})})}})}(),function(){"use strict";angular.module("authApp").controller("referralController",function(e,t,a,i,n){var s=t.currentUser.facility_id;t.currentUser.id;i.post("/api/incomingReferrals",{facility_id:s}).then(function(t){e.referrals=t.data,e.oneAtATime=!0}),e.getReferrals=function(t){i.post("/api/getReferrals",{sender_facility_id:t.sender_facility_id}).then(function(t){e.patients=t.data})},e.acceptReferral=function(e){var t=e;n.open({templateUrl:"/views/modules/referral/referralModal.html",size:"lg",animation:!0,controller:"referralModal",resolve:{object:function(){return t}}}),i.post("/api/updateReferals",{patient_id:e.patient_id}).then(function(e){}),a.reload()}})}(),function(){"use strict";angular.module("authApp").controller("referralModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){var r=a.currentUser.facility_id;e.patientDetails=s;var o=[];e.searchPatientCategory=function(e){return t.get("/api/searchPatientCategory/"+e).then(function(e){o=e.data}),o},e.getPricedItems=function(a){console.log(a),t.get("/api/getPricedItems/"+a).then(function(t){e.services=t.data})},e.enterEncounter=function(n,s){if(0==angular.isDefined(n))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_services))return sweetAlert("Please Select Service","","error");console.log(n),console.log(s);var o=n.payment_category.patient_category,l=n.payment_services,d=n.payment_services.service_id,c=n.payment_services.price_id,u=n.payment_services.item_type_id,p=s.patient_id,_=a.currentUser.id,m=n.payment_category.patient_category_id,f={item_type_id:u,patient_category:o,main_category_id:n.payment_category.patient_main_category_id,bill_id:m,service_category:l,service_id:d,price_id:c,patient_id:p,facility_id:r,user_id:_};t.post("/api/enterEncounter",f).then(function(a){if(e.registrationReport=a.data,0==a.data.status)sweetAlert(a.data.data,"","error");else{t.get("/api/getPatientInfo/"+p).then(function(t){e.patientsInfo=t.data});i.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{patientData:function(){return e.patientDetails}}})}})}}])}(),function(){"use strict";angular.module("authApp").controller("completeRegistrationModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","selectedPatient",function(e,t,a,i,n,s){e.selectedPatient=s;var r=a.currentUser.facility_id,o=a.currentUser.id;e.cancel=function(){console.log("done and cleared"),n.dismiss()},e.completeRegistration=function(a,n){console.log(a);var s=a.first_name,l=a.middle_name,d=a.last_name,c=a.gender,u=a.dob,p=a.mobile_number,_=a.id,m=a.residence_id;if(0==angular.isDefined(n.occupation))return sweetAlert("Please Enter Occupations and choose from the suggestions","","error");if(0==angular.isDefined(n.tribe))return sweetAlert("Please Enter Tribe and choose from the suggestions","","error");if(0==angular.isDefined(n.country))return sweetAlert("Please Enter Country and choose from the suggestions","","error");if(0==angular.isDefined(n.next_kin_residence))return sweetAlert("Please Enter Next of kin Residences and choose from the suggestions","","error");if(0==angular.isDefined(n.relationship))return sweetAlert("Please Enter Relationships and choose from the suggestions","","error");var f=n.marital.id,g=n.occupation.id,h=n.tribe.id,v=n.country.id,y=n.next_of_kin_name,w=n.next_kin_residence.residence_id,b=n.relationship.relationship,P=n.mobile_number_next_kin,S={residence_id:m,patient_id:_,first_name:s,middle_name:l,last_name:d,dob:u,gender:c,mobile_number:p,facility_id:r,user_id:o,marital_status:f,occupation_id:g,tribe:h,country_id:v,next_of_kin_name:y,next_of_kin_resedence_id:w,relationship:b,mobile_number_next_kin:P};t.post("/api/complete_registration",S).then(function(t){if(0==t.data.status)sweetAlert(t.data.data,"","error");else{console.log(t.data[2]);var a={patientData:t.data[0][0],accounts_number:t.data[1][0],residences:t.data[2][0],getLastVisit:t.data[3]};e.cancel(),e.patient=null,e.others=null;i.open({templateUrl:"/views/modules/registration/encounterModal.html",size:"lg",animation:!0,controller:"registrationModal",resolve:{object:function(){return a}}})}})},e.closeAllModals=function(){console.log("done and cleared"),n.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").directive("ngFiles",["$parse",function(e){return{link:function(t,a,i){var n=e(i.ngFiles);a.on("change",function(e){n(t,{$files:e.target.files})})}}}]).controller("formController",function(e,t,a,i,n,s,r){s.formData={},s.processForm=function(){alert("awesome!")};var o=new FormData;s.getTheFiles=function(e){angular.forEach(e,function(e,t){o.append(t,e)})};var l=a.currentUser.facility_id,d=a.currentUser.id;s.verification=function(t){s.dataLoading=!0,e.get("https://verification.nhif.or.tz/NHIFService/breeze/Verification/GetCard?CardNo="+t).then(function(e){if("Active"==e.data.StatusDescription)s.patient.date_of_birth=e.data.DateOfBirth.substr(0,e.data.DateOfBirth.indexOf("T")),s.nhif_patient={first_name:e.data.FirstName,middle_name:e.data.MiddleName,last_name:e.data.LastName,gender:e.data.Gender,dob:s.patient.date_of_birth,AuthorizationNo:e.data.AuthorizationNo},s.dataLoading=!1,s.quick_registration=s.nhif_patient,r.open({templateUrl:"/views/modules/registration/insuarance.html",size:"lg",animation:!0,controller:"registrationModal",resolve:{quick_registration:function(){return console.log(s.quick_registration),s.quick_registration}}});else{if("Revoked"!=e.data.StatusDescription)return s.dataLoading=!1,sweetAlert("CARD NUMBER "+t+" NOT FOUND IN NHIF DATABASE","","error");s.dataLoading=!1,swal("CARD NOT ACTIVE")}}).finally(function(){s.dataLoading=!1})};var c=[],u=[],p=[],_=[],m=[],f=[],g=[],h=[],v=[],y=[],w=[];s.showSearchMarital=function(t){return e.get("/api/getMaritalStatus/"+t).then(function(e){f=e.data}),console.log(f),f},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0,s.showNextForm=function(e){s.tab=e,alert("next form")},s.showSearchTribe=function(t){return e.get("/api/getTribe/"+t).then(function(e){g=e.data}),g},s.showSearchOccupation=function(t){return e.get("/api/getOccupation/"+t).then(function(e){h=e.data}),h},s.getCountry=function(t){return e.get("/api/getCountry/"+t).then(function(e){v=e.data}),v},s.getRelationships=function(t){return e.get("/api/getRelationships/"+t).then(function(e){y=e.data}),y},e.get("/api/getInsurances").then(function(e){s.insurances=e.data}),s.getPatients=function(t){return console.log(t),e.get("/api/getSeachedPatients/"+t).then(function(e){m=e.data,console.log(s.patients)}),m},s.showSearchNextResidences=function(t){return e.get("/api/searchResidences/"+t).then(function(e){u=e.data}),u},s.showSearchResidences=function(t){return e.get("/api/searchResidences/"+t).then(function(e){c=e.data}),c},s.patientService=function(){var t={patient_category:s.encounter.payment_category.patient_category,item_name:s.encounter};return console.log(s.encounter),e.post("/api/searchPatientServices",t).then(function(e){_=e.data}),console.log(c),_},s.patientInsuaranceService=function(t){var a={patient_category:"NHIF",item_name:t};return console.log(a),e.post("/api/searchPatientServices",a).then(function(e){w=e.data}),w},s.searchPatientCategory=function(t){return e.get("/api/searchPatientCategory/"+t).then(function(e){p=e.data}),p},s.viewItem=function(e){s.quick_registration=e,console.log(e.first_name),r.open({templateUrl:"/views/modules/registration/encounterModal.html",size:"lg",animation:!0,controller:"registrationModal",resolve:{quick_registration:function(){return console.log(s.quick_registration),s.quick_registration}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})},s.postCorpseMortuary=function(t){s.quick_registration=t,e.get("/api/getMortuary").then(function(e){s.mortuaries=e.data,console.log(s.mortuaries);var t=angular.extend(s.quick_registration,s.mortuaries);console.log(t),r.open({templateUrl:"/views/modules/registration/encounterMortuary.html",size:"lg",animation:!0,controller:"registrationModalCorpse",resolve:{object:function(){return t}}})})},s.openDialogForServices=function(e){console.log(e),s.quick_registration=e,console.log(s.quick_registration),r.open({templateUrl:"/views/modules/registration/encounterModal.html",size:"lg",animation:!0,controller:"registrationModal",resolve:{quick_registration:function(){return s.cardDetails=s.quick_registration,console.log(s.cardDetails),s.quick_registration}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})},s.patient_quick_registration=function(t){var a=t.first_name,i=t.middle_name,n=t.last_name,r=t.gender,o=t.dob,c=t.mobile_number;if(0==angular.isDefined(a))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");if(0==angular.isDefined(i))return sweetAlert("Please Enter MIDDLE NAME before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter LAST NAME before SAVING","","error");if(0==angular.isDefined(t.resedence_id))return sweetAlert("Please type the Residence Name and choose from the suggestions","","error");var u={first_name:a,middle_name:i,last_name:n,dob:o,gender:r,mobile_number:c,residence_id:t.resedence_id.residence_id,facility_id:l,user_id:d};e.post("/api/quick_registration",u).then(function(e){s.quick_registration=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):(s.patient=null,u=s.quick_registration,s.viewItem(u))})},s.corpse_quick_registration=function(t){var a=t.first_name,i=t.middle_name,n=t.last_name,r=t.gender,o=t.dob,c=t.mobile_number;if(0==angular.isDefined(a))return sweetAlert("Please Enter FIRST NAME or UKNOWN before SAVING","","error");if(0==angular.isDefined(i))return sweetAlert("Please Enter MIDDLE NAME or UKNOWN before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter LAST NAME or UKNOWN before SAVING","","error");if(0==angular.isDefined(t.resedence_id))return sweetAlert("Please type the Residence Name and choose from the suggestions","","error");var u={first_name:a,middle_name:i,last_name:n,dob:o,gender:r,mobile_number:c,residence_id:t.resedence_id.residence_id,facility_id:l,user_id:d};e.post("/api/corpse_registration",u).then(function(e){s.corpse_registration=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):(s.patient=null,u=s.corpse_registration,s.postCorpseMortuary(u))})},s.savePatientInsuarance=function(t,a){var i=t.first_name,n=t.middle_name,r=t.last_name,o=t.gender,c=t.dob;if(0==angular.isDefined(i))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter MIDDLE NAME before SAVING","","error");if(0==angular.isDefined(r))return sweetAlert("Please Enter LAST NAME before SAVING","","error");var u=a.mobile_number,p=a.resedence_id.residence_id,_=a.payment_services.service_id,m=a.payment_services.price_id,t={item_type_id:a.payment_services.item_type_id,price_id:m,patient_main_category_id:a.payment_services.patient_main_category_id,patient_category:a.payment_services.patient_category,patientservices:_,first_name:i,middle_name:n,last_name:r,dob:c,gender:o,mobile_number:u,residence_id:p,facility_id:l,user_id:d};e.post("/api/quick_registration",t).then(function(e){s.registeredPatient=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):(s.patient=null,s.addEncounterInsuarance(s.registeredPatient,t))})},s.addEncounterInsuarance=function(t,i){s.patientsInfo=t;var n=t.id,o=t.patient_category,l=i.item_type_id,d=i.price_id,c=t.facility_id,u=a.currentUser.id,p=i.patient_main_category_id,_=i.item_name,m=i.patientservices,d=i.price_id,f=i.patient_main_category_id,g={payment_filter:p,item_type_id:l,patient_category:o,main_category_id:i.patient_main_category_id,bill_id:f,service_category:_,service_id:m,price_id:d,patient_id:n,facility_id:c,user_id:u};e.post("/api/enterEncounter",g).then(function(e){s.registrationReport=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):(console.log(s.patientsInfo),r.open({templateUrl:"/views/modules/registration/printCardBima.html",size:"lg",animation:!0,controller:"printCardBima",resolve:{patientsInfo:function(){return s.patientsInfo}}}))})},s.fullRegistration=function(t,a){var i=t.first_name,n=t.middle_name,r=t.last_name,o=t.gender,c=t.dob,u=t.mobile_number;if(0==angular.isDefined(i))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter MIDDLE NAME before SAVING","","error");if(0==angular.isDefined(r))return sweetAlert("Please Enter LAST NAME before SAVING","","error");if(0==angular.isDefined(t.resedence_id))return sweetAlert("Please type the Residence Name and choose from the suggestions","","error");if(0==angular.isDefined(a.marital))return sweetAlert("Please Enter Marital Status and choose from the suggestions","","error");if(0==angular.isDefined(a.occupation))return sweetAlert("Please Enter Occupations and choose from the suggestions","","error");if(0==angular.isDefined(a.tribe))return sweetAlert("Please Enter Tribe and choose from the suggestions","","error");if(0==angular.isDefined(a.country))return sweetAlert("Please Enter Country and choose from the suggestions","","error");if(0==angular.isDefined(a.next_kin_residence))return sweetAlert("Please Enter Next of kin Residences and choose from the suggestions","","error");if(0==angular.isDefined(a.relationship))return sweetAlert("Please Enter Relationships and choose from the suggestions","","error");console.log(a.next_kin_residence);var p=t.resedence_id.residence_id,_=a.marital.id,m=a.occupation.id,f=a.tribe.id,g=a.country.id,h=a.next_of_kin_name,v=a.next_kin_residence.residence_id,y=a.relationship.relationship,w=a.mobile_number_next_kin,b={first_name:i,middle_name:n,last_name:r,dob:c,gender:o,mobile_number:u,residence_id:p,facility_id:l,user_id:d,marital_status:_,occupation_id:m,tribe:f,country_id:g,next_of_kin_name:h,next_of_kin_resedence_id:v,relationship:y,mobile_number_next_kin:w};e.post("/api/full_registration",b).then(function(e){s.full_registration=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):(s.patient=null,b=s.full_registration,s.viewItemFull(b))})},s.viewItemFull=function(e){s.quick_registration=e,console.log(e.first_name),r.open({templateUrl:"/views/modules/registration/encounterModal.html",size:"lg",animation:!0,controller:"registrationModal",resolve:{quick_registration:function(){return console.log(s.quick_registration),s.quick_registration}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})},s.getPricedItems=function(t){console.log(t),e.get("/api/getPricedItems/"+t).then(function(e){s.services=e.data})},s.getPricedMortuary=function(){e.get("/api/getMortuary").then(function(e){s.mortuaries=e.data,console.log(s.mortuaries)})},s.getpatient=function(){},s.cancelEncounte=function(){var e="You have canceled service for "+data.data.first_name;swal({title:"SERVICE CANCELED",html:$("<div>").addClass("some-class").text(""+e),animation:!1,customClass:"animated tada"})},s.openModal=function(e){$(".modal").modal("show")},s.updatepatient=function(t){if(!confirm("Are you sure you want to Update "+t.first_name))return!1;e.post("/api/updatepatient",t).then(function(e){}),s.getpatient()},s.getpatient(),s.updatepatient=function(t,i,n,r,o,l,d){var c={id:t.id,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,dob:t.dob,gender:d.gender,mobile_number:t.mobile_number,residence_id:i.residence_id,marital_id:n.id,occupation_id:r.id,tribe_id:o.id,country_id:l.id,facility_id:a.currentUser.facility_id};console.log(c),e.post("/api/updatepatient",c).then(function(e){s.patientss=e,console.log(patientss),swal("You have Succesfully Update"+s.patientss)})},s.exemption_type_list=function(){e.get("/api/exemption_type_list").then(function(e){s.exemption_types=e.data})},s.exemption_type_list(),e.get("/api/getexemption_services/"+l).then(function(e){s.exemption_services=e.data}),s.exemption_registration=function(t,i){console.log(i,t);var n=2,l="..";if(void 0==t)swal("Feedback..","FILL ALL FIELDS","error");else if(void 0==t.exemption_type_id)swal("Feedback..","Please Select Exemption Category ","error");else if(void 0==t.exemption_reason)swal("Feedback..","Please Fill  Reason(s) for This exemption ","error");else if(void 0==t.service)swal("Feedback..","Please Choose Service ","error");else{var d=i.id,c=t.service.patient_category,u=t.service,p=t.service.service_id,_=t.service.price_id,m=t.service.item_type_id,f=d,g=t.service.facility_id,h=a.currentUser.id,v={payment_filter:t.exemption_type_id,item_type_id:m,patient_category:c,main_category_id:3,bill_id:t.exemption_type_id,service_category:u,service_id:p,price_id:_,patient_id:f,facility_id:g,user_id:h},n=2,y=t.exemption_type_id,w=t.exemption_reason,h=a.currentUser.id,g=a.currentUser.facility_id,f=d,n=n,y=t.exemption_type_id,w=t.exemption_reason,l=l;t.description,o.append("exemption_type_id",y),o.append("exemption_reason",w),o.append("user_id",h),o.append("facility_id",g),o.append("patient_id",f),o.append("reason_for_revoke",l),o.append("status_id",n),e({method:"POST",url:"/api/patient_exemption",data:o,headers:{"Content-Type":void 0}}).then(function(t){t.data.msg,s.ok=t.data.status,t.data.status,e.post("/api/enterEncounter",v).then(function(t){s.registrationReport=t.data,0==t.data.status?sweetAlert(t.data.data,"","error"):(e.get("/api/getPatientInfo/"+f).then(function(e){s.patientsInfo=e.data}),r.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{patientData:function(){return s.patientData}}}))})}).then(function(){})}}})}(),function(){"use strict";angular.module("authApp").controller("nhifRegistrationModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){console.log(s),e.patientData=s;var r=a.currentUser.facility_id,o=a.currentUser.id;e.cancel=function(){console.log("done and cleared"),n.dismiss()},e.savePatientInsuarance=function(a,n){var s=a.first_name,l=a.middle_name,d=a.last_name,c=a.gender,u=a.dob,p=a.membership_number;if(0==angular.isDefined(s))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");if(0==angular.isDefined(l))return sweetAlert("Please Enter MIDDLE NAME before SAVING","","error");if(0==angular.isDefined(d))return sweetAlert("Please Enter LAST NAME before SAVING","","error");var _=n.mobile_number,m=n.resedence_id.residence_id,f=n.payment_services.service_id,g=n.occupation.id,h=n.payment_services.price_id,v=n.payment_services.item_type_id,y=n.payment_services.patient_main_category_id,w=n.payment_services.patient_category,b={membership_number:p,payment_filter:n.payment_services.patient_category_id,occupation:g,item_type_id:v,price_id:h,patient_main_category_id:y,patient_category:w,patientservices:f,first_name:s,middle_name:l,last_name:d,dob:u,gender:c,mobile_number:_,residence_id:m,facility_id:r,user_id:o};t.post("/api/insuaranceRegistration",b).then(function(t){if(e.registeredPatient=t.data,0==t.data.status)sweetAlert(t.data.data,"","error");else{var a={patientsInfo:t.data[0],accounts_number:t.data[1][0],residences:t.data[2][0],getLastVisit:t.data[3]};e.patient=null,e.cancel();i.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{object:function(){return a}}})}})},e.closeAllModals=function(){console.log("done and cleared"),n.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").directive("ngFiles",["$parse",function(e){return{link:function(t,a,i){var n=e(i.ngFiles);a.on("change",function(e){n(t,{$files:e.target.files})})}}}]).controller("patientController",function(e,t,a,i,n,s,r,o){var l=new FormData;s.getTheFiles=function(e){angular.forEach(e,function(e,t){l.append(t,e)})};var d=a.currentUser.facility_id,c=a.currentUser.id;s.calculateAge=function(e){var t=s.patient.dob;if(void 0!=s.patient.dob||void 0!=s.patient.age){if(""!=t&&"date"==e&&((new Date).getFullYear()<parseInt(t.substring(0,4))||(new Date).getFullYear()==parseInt(t.substring(0,4))&&(new Date).getMonth()+1<parseInt(t.substring(t.indexOf("-")+1,7))||(new Date).getFullYear()==parseInt(t.substring(0,4))&&(new Date).getMonth()+1==parseInt(t.substring(t.indexOf("-")+1,7))&&(new Date).getDate()<parseInt(t.substring(t.lastIndexOf("-")+1,10))))return s.patient.dob="",s.patient.age_unit="",s.patient.age="",void swal("Future dates not allowed!","","warning");if("age"==e)s.patient.dob=((new Date).getFullYear()-s.patient.age).toString()+"-07-01",s.patient.age_unit="Years";else if("date"==e){s.patient.dob=s.patient.dob.replace(/\//g,"-");var a=Math.floor((new Date-new Date(t.substring(0,4)+"-"+t.substring(t.indexOf("-")+1,7)+"-"+t.substring(t.lastIndexOf("-")+1,10)))/864e5);a>365?(s.patient.age=Math.floor(a/365),s.patient.age_unit="Years"):a>30?(s.patient.age=Math.floor(a/30),s.patient.age_unit="Months"):(s.patient.age=a,s.patient.age_unit="Days")}else"Years"==s.patient.age_unit?s.calculateAge("age"):"Months"==s.patient.age_unit?(new Date).getMonth()+1>=s.patient.age%12?s.patient.dob=(new Date).getFullYear()-~~(s.patient.age/12)+"-"+(2==((new Date).getMonth()+1-s.patient.age%12).toString().length?"":"0")+((new Date).getMonth()+1-s.patient.age%12)+"-01":s.patient.dob=(new Date).getFullYear()-1-~~(s.patient.age/12)+"-"+(2==(12+((new Date).getMonth()+1)-s.patient.age%12).toString().length?"":"0")+(12+((new Date).getMonth()+1)-s.patient.age%12)+"-01":(new Date).getDate()>=s.patient.age%30?s.patient.dob=(new Date).getFullYear()-~~(s.patient.age/365)+"-"+(2==((new Date).getMonth()+1-~~(s.patient.age/30)).toString().length?"":"0")+((new Date).getMonth()+1-~~(s.patient.age/30))+"-"+(2==s.patient.age.toString().length?"":"0")+s.patient.age.toString():s.patient.dob=(new Date).getFullYear()-~~(s.patient.age/365)+"-"+(2==((new Date).getMonth()-~~(s.patient.age/30)).toString().length?"":"0")+((new Date).getMonth()-~~(s.patient.age/30))+"-"+(2==(30+(new Date).getDate()-s.patient.age%30).toString().length?"":"0")+(30+(new Date).getDate()-s.patient.age%30)}},s.getDepartment=function(){e.get("/api/getClinic").then(function(e){s.departments=e.data})},s.getSms=function(){e.get("http://kiuta.co.tz/oneapi-php-master/examples.php").then(function(e){console.log(e.status),o.success("","SMS SENT TO NASSORO")},function(e){o.error("","SMS MAY DELAY ")})},s.verification=function(t){s.dataLoading=!0,e.get("https://verification.nhif.or.tz/NHIFService/breeze/Verification/GetCard?CardNo="+t).then(function(e){if("Active"==e.data.StatusDescription){console.log(e.status),s.patient.date_of_birth=e.data.DateOfBirth.substr(0,e.data.DateOfBirth.indexOf("T")),s.nhif_patient={first_name:e.data.FirstName,middle_name:e.data.MiddleName,last_name:e.data.LastName,gender:e.data.Gender,dob:s.patient.date_of_birth,AuthorizationNo:e.data.AuthorizationNo,membership_number:t},s.dataLoading=!1;var a=s.nhif_patient;r.open({templateUrl:"/views/modules/registration/insuarance.html",size:"lg",animation:!0,controller:"nhifRegistrationModal",resolve:{object:function(){return a}}})}else"Revoked"==e.data.StatusDescription&&(s.dataLoading=!1,o.error("","Card No. Not Active!"))},function(e){o.error("","Card No. Not Found in Database!")}).finally(function(){s.dataLoading=!1})};var u=[],p=[],_=[],m=[],f=[],g=[],h=[],v=[],y=[],w=[],b=[];s.showSearchMarital=function(t){return e.get("/api/getMaritalStatus/"+t).then(function(e){g=e.data}),console.log(g),g},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0,s.showFirstForm=function(){s.firstFormShow=!0,s.secondFormShow=!1},s.showFirstForm(),s.showNextForm=function(e){s.patient=e,console.log(s.patient),s.firstFormShow=!1,s.secondFormShow=!0},s.showSearchTribe=function(t){return e.get("/api/getTribe/"+t).then(function(e){h=e.data}),h},s.showSearchOccupation=function(t){return e.get("/api/getOccupation/"+t).then(function(e){v=e.data}),v},s.getCountry=function(t){return e.get("/api/getCountry/"+t).then(function(e){y=e.data}),y},s.getRelationships=function(t){return e.get("/api/getRelationships/"+t).then(function(e){w=e.data}),w},e.get("/api/getInsurances").then(function(e){s.insurances=e.data}),s.getPatients=function(t){return console.log(t),e.get("/api/getSeachedPatients/"+t).then(function(e){f=e.data}),f},s.getInsuarancePatients=function(t){return e.get("/api/getSeachedInsuarancePatients/"+t).then(function(e){f=e.data}),f},s.showSearchNextResidences=function(t){return e.get("/api/searchResidences/"+t).then(function(e){p=e.data}),p},s.showSearchResidences=function(t){return e.get("/api/searchResidences/"+t).then(function(e){u=e.data}),u},s.patientService=function(){var t={patient_category:s.encounter.payment_category.patient_category,item_name:s.encounter};return console.log(s.encounter),e.post("/api/searchPatientServices",t).then(function(e){m=e.data}),console.log(u),m},s.patientInsuaranceService=function(t){var a={patient_category:"NHIF",item_name:t};return console.log(a),e.post("/api/searchPatientServices",a).then(function(e){b=e.data}),b},s.searchPatientCategory=function(t){return e.get("/api/searchPatientCategory/"+t).then(function(e){_=e.data}),_},s.viewItem=function(e){s.quick_registration=e,r.open({templateUrl:"/views/modules/registration/encounterModal.html",size:"lg",animation:!0,controller:"registrationModal",resolve:{quick_registration:function(){return console.log(s.quick_registration),s.quick_registration}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})},s.postCorpseMortuary=function(t){s.quick_registration=t,e.get("/api/getMortuary").then(function(e){s.mortuaries=e.data,console.log(s.mortuaries);var t=angular.extend(s.quick_registration,s.mortuaries);console.log(t),r.open({templateUrl:"/views/modules/registration/encounterMortuary.html",size:"lg",animation:!0,controller:"registrationModalCorpse",resolve:{object:function(){return t}}})})},s.openDialogForServices=function(t){var a={patient_id:t.patient_id,residence_id:t.residence_id,facility_id:d};s.quick_registration=t,e.post("/api/getPatientRegistrationStatus",a).then(function(e){if(0==e.data[0]){var a={patientData:t,accounts_number:e.data[1][0],residences:e.data[2][0],getLastVisit:e.data[3]};r.open({templateUrl:"/views/modules/registration/encounterModal.html",size:"lg",animation:!0,controller:"registrationModal",resolve:{object:function(){return a}}})}else r.open({templateUrl:"/views/modules/registration/completeRegistrationModal.html",size:"lg",animation:!0,controller:"completeRegistrationModal",resolve:{selectedPatient:function(){return t}}})}),modalInstance.result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})},s.patient_quick_registration=function(t){var a=t.first_name,i=t.middle_name,n=t.last_name,o=t.gender,l=t.dob,u=t.mobile_number;if(0==angular.isDefined(a))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");if(0==angular.isDefined(i))return sweetAlert("Please Enter MIDDLE NAME before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter LAST NAME before SAVING","","error");if(0==angular.isDefined(t.resedence_id))return sweetAlert("Please type the Residence Name and choose from the suggestions","","error");var p={first_name:a,middle_name:i,last_name:n,dob:l,gender:o,mobile_number:u,residence_id:t.resedence_id.residence_id,facility_id:d,user_id:c};e.post("/api/quick_registration",p).then(function(e){if(s.quick_registration=e.data,console.log(s.quick_registration),0==e.data.status)sweetAlert(e.data.data,"","error");else{var t={patientData:e.data[0],accounts_number:e.data[1][0],residences:e.data[2][0],getLastVisit:e.data[3]};s.patient=null,r.open({templateUrl:"/views/modules/registration/encounterModal.html",size:"lg",animation:!0,controller:"registrationModal",resolve:{object:function(){return console.log(t),t}}})}})},s.corpse_quick_registration=function(t){var a=t.first_name,i=t.middle_name,n=t.last_name,r=t.gender,o=t.dob,l=t.mobile_number;if(0==angular.isDefined(a))return sweetAlert("Please Enter FIRST NAME or UKNOWN before SAVING","","error");if(0==angular.isDefined(i))return sweetAlert("Please Enter MIDDLE NAME or UKNOWN before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter LAST NAME or UKNOWN before SAVING","","error");if(0==angular.isDefined(t.resedence_id))return sweetAlert("Please type the Residence Name and choose from the suggestions","","error");var u={first_name:a,middle_name:i,last_name:n,dob:o,gender:r,mobile_number:l,residence_id:t.resedence_id.residence_id,facility_id:d,user_id:c};e.post("/api/corpse_registration",u).then(function(e){s.corpse_registration=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):(s.patient=null,u=s.corpse_registration,s.postCorpseMortuary(u))})},s.addEncounterInsuarance=function(t,i){s.patientsInfo=t;var n=t.id,o=t.patient_category,l=i.item_type_id,d=i.price_id,c=t.facility_id,u=a.currentUser.id,p=i.patient_main_category_id,_=i.item_name,m=i.patientservices,d=i.price_id,f=i.patient_main_category_id,g={payment_filter:p,item_type_id:l,patient_category:o,main_category_id:i.patient_main_category_id,bill_id:f,service_category:_,service_id:m,price_id:d,patient_id:n,facility_id:c,user_id:u};e.post("/api/enterEncounter",g).then(function(e){s.registrationReport=e.data,0==e.data.status?sweetAlert(e.data.data,"","error"):r.open({templateUrl:"/views/modules/registration/printCardBima.html",size:"lg",animation:!0,controller:"printCardBima",resolve:{patientsInfo:function(){return s.patientsInfo}}})})},s.fullRegistration=function(t,a){var i=t.first_name,n=t.middle_name,o=t.last_name,l=t.gender,u=t.dob,p=t.mobile_number;if(0==angular.isDefined(i))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter MIDDLE NAME before SAVING","","error");if(0==angular.isDefined(o))return sweetAlert("Please Enter LAST NAME before SAVING","","error");if(0==angular.isDefined(t.resedence_id))return sweetAlert("Please type the Residence Name and choose from the suggestions","","error");if(0==angular.isDefined(a.tribe))return sweetAlert("Please Enter Tribe and choose from the suggestions","","error");if(0==angular.isDefined(a.country))return sweetAlert("Please Enter Country and choose from the suggestions","","error");if(0==angular.isDefined(a.next_kin_residence))return sweetAlert("Please Enter Next of kin Residences and choose from the suggestions","","error");if(0==angular.isDefined(a.relationship))return sweetAlert("Please Enter Relationships and choose from the suggestions","","error");if(1==angular.isDefined(a.marital))var _=a.marital.id;console.log(a.next_kin_residence);var m=t.resedence_id.residence_id,f=a.occupation.id,g=a.tribe.id,h=a.country.id,v=a.next_of_kin_name,y=a.next_kin_residence.residence_id,w=a.relationship.relationship,b=a.mobile_number_next_kin,P={first_name:i,middle_name:n,last_name:o,dob:u,gender:l,mobile_number:p,residence_id:m,facility_id:d,user_id:c,marital_status:_,occupation_id:f,tribe:g,country_id:h,next_of_kin_name:v,next_of_kin_resedence_id:y,relationship:w,mobile_number_next_kin:b};e.post("/api/full_registration",P).then(function(e){if(0==e.data.status)sweetAlert(e.data.data,"","error");else{var t={patientData:e.data[0],accounts_number:e.data[1][0],residences:e.data[2][0],getLastVisit:e.data[3]};s.showFirstForm(),s.patient=null,s.others=null,r.open({templateUrl:"/views/modules/registration/encounterModal.html",size:"lg",animation:!0,controller:"registrationModal",resolve:{object:function(){return console.log(t),t}}})}})},s.viewItemFull=function(e){s.quick_registration=e,console.log(e.first_name),r.open({templateUrl:"/views/modules/registration/encounterModal.html",size:"lg",animation:!0,controller:"registrationModal",resolve:{quick_registration:function(){return console.log(s.quick_registration),s.quick_registration}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})},e.get("/api/getUsermenu/"+c).then(function(e){s.menu=e.data,console.log(s.menu)}),s.getPricedItems=function(t){console.log(t),e.get("/api/getPricedItems/"+t).then(function(e){s.services=e.data})},s.regReport=function(){var t={facility_id:d,start_date:"2017-01-01",end_date:"2017-07-07"};e.post("/api/getMahudhurioOPD",t).then(function(e){var t=e.data[0][0],a=e.data[1][0],i=e.data[2][0],n={opd_diagnosises:e.data[3],attendanceOpd:t,newAttendanceOpd:a,opd_mahudhurio_marudio:i};r.open({templateUrl:"/views/modules/reports/registration_report.html",size:"lg",animation:!0,controller:"opdMtuhaController",windowClass:"app-modal-window",resolve:{object:function(){return n}}})})},s.regPerfomance=function(){var t={user_id:c,facility_id:d};e.post("/api/getStaffPerfomance",t).then(function(e){var t=e.data[0][0],a=e.data[1][0],i=e.data[2],n={endDate:e.data[3],startDate:i,specificStaff:t,otherStaff:a};console.log(n),r.open({templateUrl:"/views/modules/reports/regPerfomance.html",size:"lg",animation:!0,controller:"opdStaffController",windowClass:"app-modal-window",resolve:{object:function(){return n}}})})},s.getPricedMortuary=function(){e.get("/api/getMortuary").then(function(e){s.mortuaries=e.data,console.log(s.mortuaries)})},s.getpatient=function(){},s.cancelEncounte=function(){var e="You have canceled service for "+data.data.first_name;swal({title:"SERVICE CANCELED",html:$("<div>").addClass("some-class").text(""+e),animation:!1,customClass:"animated tada"})},s.openModal=function(e){$(".modal").modal("show")},s.updatepatient=function(t){if(!confirm("Are you sure you want to Update "+t.first_name))return!1;e.post("/api/updatepatient",t).then(function(e){}),s.getpatient()},s.getpatient(),s.updatepatient=function(t,i,n,r,o,l,d){var c={id:t.id,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,dob:t.dob,gender:d.gender,mobile_number:t.mobile_number,residence_id:i.residence_id,marital_id:n.id,occupation_id:r.id,tribe_id:o.id,country_id:l.id,facility_id:a.currentUser.facility_id};console.log(c),e.post("/api/updatepatient",c).then(function(e){s.patientss=e,console.log(patientss),swal("You have Succesfully Update"+s.patientss)})},s.exemption_type_list=function(){e.get("/api/exemption_type_list").then(function(e){s.exemption_types=e.data})},s.exemption_type_list(),e.get("/api/getexemption_services/"+d).then(function(e){s.exemption_services=e.data}),s.exemption_registration=function(t,i){console.log(i,t);var n=2,o="..";if(void 0==t)swal("Feedback..","FILL ALL FIELDS","error");else if(void 0==t.exemption_type_id)swal("Feedback..","Please Select Exemption Category ","error");else if(void 0==t.exemption_reason)swal("Feedback..","Please Fill  Reason(s) for This exemption ","error");else if(void 0==t.service)swal("Feedback..","Please Choose Service ","error");else{var d=i.id;console.log(i,d);var c=t.service.patient_category,u=t.service,p=t.service.service_id,_=t.service.price_id,m=t.service.item_type_id,f=d,g=t.service.facility_id,h=a.currentUser.id,v={payment_filter:t.exemption_type_id,item_type_id:m,patient_category:c,main_category_id:3,bill_id:t.exemption_type_id,service_category:u,service_id:p,price_id:_,patient_id:f,facility_id:g,user_id:h},n=2,y=t.exemption_type_id,w=t.exemption_reason,h=a.currentUser.id,g=a.currentUser.facility_id,f=d,n=n,y=t.exemption_type_id,w=t.exemption_reason,o=o;t.description,l.append("exemption_type_id",y),l.append("exemption_reason",w),l.append("user_id",h),l.append("facility_id",g),l.append("patient_id",f),l.append("reason_for_revoke",o),l.append("status_id",n),e({method:"POST",url:"/api/patient_exemption",data:l,headers:{"Content-Type":void 0}}).then(function(t){t.data.msg,s.ok=t.data.status,t.data.status,e.post("/api/enterEncounter",v).then(function(t){s.registrationReport=t.data,0==t.data.status?sweetAlert(t.data.data,"","error"):e.get("/api/getPatientInfo/"+f).then(function(e){s.patientsInfo=e.data,s.patientData=e.data,console.log(e.data);var t={patientsInfo:s.patientsInfo};r.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{object:function(){return t}}})})})}).then(function(){})}}})}(),function(){"use strict";angular.module("authApp").controller("printCard",["$scope","$http","$rootScope","$uibModalInstance","object",function(e,t,a,i,n){e.patientData=n.patientsInfo,e.patientResidences=n.residences,console.log(e.patientData),console.log(n),e.cancel=function(){i.dismiss()},e.enterEncounter=function(i,n,s){if(0==angular.isDefined(i))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(i.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(i.payment_services))return sweetAlert("Please Select Service","","error");console.log(i);var r=i.payment_category.patient_category,o=i.payment_services,l=i.payment_services.service_id,d=i.payment_services.price_id,c={item_type_id:i.payment_services.item_type_id,patient_category:r,service_category:o,service_id:l,price_id:d,patient_id:n,facility_id:s=s,user_id:a.currentUser.id};t.post("/api/enterEncounter",c).then(function(t){e.registrationReport=t.data,0==t.data.status?sweetAlert(t.data.data,"","error"):(sweetAlert(t.data.data,"","success"),c="")})}}])}(),function(){"use strict";angular.module("authApp").controller("printCardBima",["$scope","$http","$rootScope","$uibModalInstance","patientsInfo",function(e,t,a,i,n){e.registeredPatient=n,console.log(e.registeredPatient),e.cancel=function(){console.log("done and cleared"),i.dismissAll()},e.enterEncounter=function(i,n,s){if(0==angular.isDefined(i))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(i.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(i.payment_services))return sweetAlert("Please Select Service","","error");console.log(i);var r=i.payment_category.patient_category,o=i.payment_services,l=i.payment_services.service_id,d=i.payment_services.price_id,c={item_type_id:i.payment_services.item_type_id,patient_category:r,service_category:o,service_id:l,price_id:d,patient_id:n,facility_id:s=s,user_id:a.currentUser.id};t.post("/api/enterEncounter",c).then(function(t){e.registrationReport=t.data,0==t.data.status?sweetAlert(t.data.data,"","error"):(sweetAlert(t.data.data,"","success"),c="")})}}])}(),function(){"use strict";angular.module("authApp").controller("registrationModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){console.log(s),e.patientData=s.patientData,e.accounts_number=s.accounts_number,e.residences=s.residences,e.getLastVisit=s.getLastVisit,e.enterEncounter=function(n,s,r,o,l,d){if(0==angular.isDefined(r))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(r.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(r.payment_services))return sweetAlert("Please Select Service","","error");var c=r.payment_category.patient_category,u=r.payment_services,p=r.payment_services.service_id,_=r.payment_services.price_id,m=r.payment_services.item_type_id,f=o,l=l,g=a.currentUser.id,h=r.payment_category.patient_category_id,v=r.payment_category.patient_category_id,y={dept_id:d,payment_filter:h,item_type_id:m,patient_category:c,main_category_id:r.payment_category.patient_main_category_id,bill_id:v,service_category:u,service_id:p,price_id:_,patient_id:f,facility_id:l,user_id:g};console.log(y),t.post("/api/enterEncounter",y).then(function(t){if(e.registrationReport=t.data,0==t.data.status)sweetAlert(t.data.data,"","error");else{var a={patientsInfo:n,residences:s};e.cancel();i.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{object:function(){return a}}})}})},e.cancel=function(){console.log("done and cleared"),n.dismiss()},e.closeAllModals=function(){console.log("done and cleared"),n.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("registrationModalCorpse",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){var r=a.currentUser.facility_id,o=a.currentUser.id;e.quick_registration=s,e.corpse=s,console.log(e.corpse.id),e.patientData=e.quick_registration;e.quick_registration.id,e.quick_registration.facility_id;e.saveMortuary=function(a,i){e.corpseInfo=a[1],e.corpseData=i,console.log(e.corpseInfo),console.log(e.corpseData);var n={corpse_id:e.corpseData.id,mortuary_id:e.corpseData[0].id,facility_id:r,user_id:o,admission_status_id:1};t.post("/api/saveCorpseFromOutsideFacility",n).then(function(t){1==t.data.status&&(e.cancel(),sweetAlert(t.data.data,"","success"))})},e.enterEncounter=function(n,s,r){if(0==angular.isDefined(n))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(n.payment_services))return sweetAlert("Please Select Service","","error");var o=n.payment_category.patient_category,l=n.payment_services,d=n.payment_services.service_id,c=n.payment_services.price_id,u=n.payment_services.item_type_id,p=s,r=r,_=a.currentUser.id,m=n.payment_category.patient_category_id,f=n.payment_category.patient_category_id,g={payment_filter:m,item_type_id:u,patient_category:o,main_category_id:n.payment_category.patient_main_category_id,bill_id:f,service_category:l,service_id:d,price_id:c,patient_id:p,facility_id:r,user_id:_};console.log(g),t.post("/api/enterEncounter",g).then(function(a){if(e.registrationReport=a.data,0==a.data.status)sweetAlert(a.data.data,"","error");else{t.get("/api/getPatientInfo/"+p).then(function(t){e.patientsInfo=t.data});i.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{patientData:function(){return e.patientData}}})}})},e.cancel=function(){console.log("done and cleared"),n.dismiss()},e.closeAllModals=function(){console.log("done and cleared"),n.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("dentalMtuhaController",["$filter","$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){var o=i.currentUser.facility_id,l=i.currentUser.id;t.dental_attendances=r.postedToClinic,t.getIPDReportBasedOnthisDate=function(e,i){var n={facility_id:o,start_date:e,end_date:i};a.post("/api/getIpdReport",n).then(function(a){var n={admittedIPD:a.data[0][0],diagnosisIPD:a.data[1]};t.ipd_admissions=n.admittedIPD,t.diagnosisIPDs=n.diagnosisIPD,t.start_date=e,t.end_date=i})},t.cancel=function(){console.log("done and cleared"),s.dismiss()},a.get("/api/getLoginUserDetails/"+l).then(function(e){t.loginUserFacilityDetails=e.data,console.log(t.loginUserFacilityDetails)}),t.closeAllModals=function(){console.log("done and cleared"),s.dismissAll()},t.today=function(){t.dt_start=new Date,t.dt_end=new Date},t.clear=function(){t.dt_start=null,t.dt_end=null},t.inlineOptions={customClass:function(e){var a=e.date;if("day"===e.mode)for(var i=new Date(a).setHours(0,0,0,0),n=0;n<t.events.length;n++)if(i===new Date(t.events[n].date).setHours(0,0,0,0))return t.events[n].status;return""},minDate:new Date,showWeeks:!0},t.dateOptions={dateDisabled:function(e){var t=e.date;return"day"===e.mode&&(0===t.getDay()||6===t.getDay())},formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},t.toggleMin=function(){t.inlineOptions.minDate=t.inlineOptions.minDate?null:new Date,t.dateOptions.minDate=t.inlineOptions.minDate},t.toggleMin(),t.open1=function(){t.popup1.opened=!0},t.open2=function(){t.popup2.opened=!0},t.setDate=function(e,a,i){t.dt_end=new Date(e,a,i)},t.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],t.format=t.formats[0],t.altInputFormats=["M!/d!/yyyy"],t.popup1={opened:!1},t.popup2={opened:!1};var d=new Date;d.setDate(d.getDate()+1);var c=new Date;c.setDate(d.getDate()+1),t.events=[{date:d,status:"full"},{date:c,status:"partially"}]}])}(),function(){"use strict";angular.module("authApp").controller("doctorsPerfomacesController",["$filter","$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){var o=i.currentUser.facility_id,l=i.currentUser.id;t.DoctorsPerfomaces=r.DoctorsPerfomaces,t.getReportBasedOnthisDate=function(e,i){var n={facility_id:o,start_date:e,end_date:i};a.post("/api/getMahudhurioOPD",n).then(function(a){var n=a.data[0][0],s=a.data[1][0],r=a.data[2][0],o={opd_diagnosises:a.data[3],attendanceOpd:n,newAttendanceOpd:s,opd_mahudhurio_marudio:r};t.opd_mahudhurio=o.attendanceOpd,t.opd_mahudhurio_new=o.newAttendanceOpd,t.opd_mahudhurio_marudio=o.opd_mahudhurio_marudio,t.opd_diagnosises=o.opd_diagnosises,t.start_date=e,t.end_date=i})},t.cancel=function(){console.log("done and cleared"),s.dismiss()},a.get("/api/getLoginUserDetails/"+l).then(function(e){t.loginUserFacilityDetails=e.data,console.log(t.loginUserFacilityDetails)}),t.closeAllModals=function(){console.log("done and cleared"),s.dismissAll()},t.today=function(){t.dt_start=new Date,t.dt_end=new Date},t.clear=function(){t.dt_start=null,t.dt_end=null},t.inlineOptions={customClass:function(e){var a=e.date;if("day"===e.mode)for(var i=new Date(a).setHours(0,0,0,0),n=0;n<t.events.length;n++)if(i===new Date(t.events[n].date).setHours(0,0,0,0))return t.events[n].status;return""},minDate:new Date,showWeeks:!0},t.dateOptions={dateDisabled:function(e){var t=e.date;return"day"===e.mode&&(0===t.getDay()||6===t.getDay())},formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},t.toggleMin=function(){t.inlineOptions.minDate=t.inlineOptions.minDate?null:new Date,t.dateOptions.minDate=t.inlineOptions.minDate},t.toggleMin(),t.open1=function(){t.popup1.opened=!0},t.open2=function(){t.popup2.opened=!0},t.setDate=function(e,a,i){t.dt_end=new Date(e,a,i)},t.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],t.format=t.formats[0],t.altInputFormats=["M!/d!/yyyy"],t.popup1={opened:!1},t.popup2={opened:!1};var d=new Date;d.setDate(d.getDate()+1);var c=new Date;c.setDate(d.getDate()+1),t.events=[{date:d,status:"full"},{date:c,status:"partially"}]}])}(),function(){"use strict";angular.module("authApp").controller("drugsMtuhaController",["$filter","$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){var o=i.currentUser.facility_id,l=i.currentUser.id;t.drugsOutOfStocks=r.drugsOutOfStock,t.getReportBasedOnthisDate=function(e,i){var n={facility_id:o,start_date:e,end_date:i};a.post("/api/getMahudhurioOPD",n).then(function(a){var n=a.data[0][0],s=a.data[1][0],r=a.data[2][0],o={opd_diagnosises:a.data[3],attendanceOpd:n,newAttendanceOpd:s,opd_mahudhurio_marudio:r};t.opd_mahudhurio=o.attendanceOpd,t.opd_mahudhurio_new=o.newAttendanceOpd,t.opd_mahudhurio_marudio=o.opd_mahudhurio_marudio,t.opd_diagnosises=o.opd_diagnosises,t.start_date=e,t.end_date=i})},t.cancel=function(){console.log("done and cleared"),s.dismiss()},a.get("/api/getLoginUserDetails/"+l).then(function(e){t.loginUserFacilityDetails=e.data,console.log(t.loginUserFacilityDetails)}),t.closeAllModals=function(){console.log("done and cleared"),s.dismissAll()},t.today=function(){t.dt_start=new Date,t.dt_end=new Date},t.clear=function(){t.dt_start=null,t.dt_end=null},t.inlineOptions={customClass:function(e){var a=e.date;if("day"===e.mode)for(var i=new Date(a).setHours(0,0,0,0),n=0;n<t.events.length;n++)if(i===new Date(t.events[n].date).setHours(0,0,0,0))return t.events[n].status;return""},minDate:new Date,showWeeks:!0},t.dateOptions={dateDisabled:function(e){var t=e.date;return"day"===e.mode&&(0===t.getDay()||6===t.getDay())},formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},t.toggleMin=function(){t.inlineOptions.minDate=t.inlineOptions.minDate?null:new Date,t.dateOptions.minDate=t.inlineOptions.minDate},t.toggleMin(),t.open1=function(){t.popup1.opened=!0},t.open2=function(){t.popup2.opened=!0},t.setDate=function(e,a,i){t.dt_end=new Date(e,a,i)},t.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],t.format=t.formats[0],t.altInputFormats=["M!/d!/yyyy"],t.popup1={opened:!1},t.popup2={opened:!1};var d=new Date;d.setDate(d.getDate()+1);var c=new Date;c.setDate(d.getDate()+1),t.events=[{date:d,status:"full"},{date:c,status:"partially"}]}])}(),function(){"use strict";angular.module("authApp").controller("expiredDrugsMtuhaController",["$filter","$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){var o=i.currentUser.facility_id,l=i.currentUser.id;t.drugsExpireds=r.drugsExpired,t.getReportBasedOnthisDate=function(e,i){var n={facility_id:o,start_date:e,end_date:i};a.post("/api/getMahudhurioOPD",n).then(function(a){var n=a.data[0][0],s=a.data[1][0],r=a.data[2][0],o={opd_diagnosises:a.data[3],attendanceOpd:n,newAttendanceOpd:s,opd_mahudhurio_marudio:r};t.opd_mahudhurio=o.attendanceOpd,t.opd_mahudhurio_new=o.newAttendanceOpd,t.opd_mahudhurio_marudio=o.opd_mahudhurio_marudio,t.opd_diagnosises=o.opd_diagnosises,t.start_date=e,t.end_date=i})},t.cancel=function(){console.log("done and cleared"),s.dismiss()},a.get("/api/getLoginUserDetails/"+l).then(function(e){t.loginUserFacilityDetails=e.data,console.log(t.loginUserFacilityDetails)}),t.closeAllModals=function(){console.log("done and cleared"),s.dismissAll()},t.today=function(){t.dt_start=new Date,t.dt_end=new Date},t.clear=function(){t.dt_start=null,t.dt_end=null},t.inlineOptions={customClass:function(e){var a=e.date;if("day"===e.mode)for(var i=new Date(a).setHours(0,0,0,0),n=0;n<t.events.length;n++)if(i===new Date(t.events[n].date).setHours(0,0,0,0))return t.events[n].status;return""},minDate:new Date,showWeeks:!0},t.dateOptions={dateDisabled:function(e){var t=e.date;return"day"===e.mode&&(0===t.getDay()||6===t.getDay())},formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},t.toggleMin=function(){t.inlineOptions.minDate=t.inlineOptions.minDate?null:new Date,t.dateOptions.minDate=t.inlineOptions.minDate},t.toggleMin(),t.open1=function(){t.popup1.opened=!0},t.open2=function(){t.popup2.opened=!0},t.setDate=function(e,a,i){t.dt_end=new Date(e,a,i)},t.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],t.format=t.formats[0],t.altInputFormats=["M!/d!/yyyy"],t.popup1={opened:!1},t.popup2={opened:!1};var d=new Date;d.setDate(d.getDate()+1);var c=new Date;c.setDate(d.getDate()+1),t.events=[{date:d,status:"full"},{date:c,status:"partially"}]}])}(),function(){"use strict";angular.module("authApp").controller("eyeMtuhaController",["$filter","$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){var o=i.currentUser.facility_id,l=i.currentUser.id;t.eye_attendances=r.postedToClinic,t.getIPDReportBasedOnthisDate=function(e,i){var n={facility_id:o,start_date:e,end_date:i};a.post("/api/getIpdReport",n).then(function(a){var n={admittedIPD:a.data[0][0],diagnosisIPD:a.data[1]};t.ipd_admissions=n.admittedIPD,t.diagnosisIPDs=n.diagnosisIPD,t.start_date=e,t.end_date=i})},t.cancel=function(){console.log("done and cleared"),s.dismiss()},a.get("/api/getLoginUserDetails/"+l).then(function(e){t.loginUserFacilityDetails=e.data,console.log(t.loginUserFacilityDetails)}),t.closeAllModals=function(){console.log("done and cleared"),s.dismissAll()},t.today=function(){t.dt_start=new Date,t.dt_end=new Date},t.clear=function(){t.dt_start=null,t.dt_end=null},t.inlineOptions={customClass:function(e){var a=e.date;if("day"===e.mode)for(var i=new Date(a).setHours(0,0,0,0),n=0;n<t.events.length;n++)if(i===new Date(t.events[n].date).setHours(0,0,0,0))return t.events[n].status;return""},minDate:new Date,showWeeks:!0},t.dateOptions={dateDisabled:function(e){var t=e.date;return"day"===e.mode&&(0===t.getDay()||6===t.getDay())},formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},t.toggleMin=function(){t.inlineOptions.minDate=t.inlineOptions.minDate?null:new Date,t.dateOptions.minDate=t.inlineOptions.minDate},t.toggleMin(),t.open1=function(){t.popup1.opened=!0},t.open2=function(){t.popup2.opened=!0},t.setDate=function(e,a,i){t.dt_end=new Date(e,a,i)},t.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],t.format=t.formats[0],t.altInputFormats=["M!/d!/yyyy"],t.popup1={opened:!1},t.popup2={opened:!1};var d=new Date;d.setDate(d.getDate()+1);var c=new Date;c.setDate(d.getDate()+1),t.events=[{date:d,status:"full"},{date:c,status:"partially"}]}])}(),function(){"use strict";angular.module("authApp").controller("ipdMtuhaController",["$filter","$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){var o=i.currentUser.facility_id,l=i.currentUser.id;t.ipd_admissions=r.admittedIPD,t.diagnosisIPDs=r.diagnosisIPD,t.getIPDReportBasedOnthisDate=function(e,i){var n={facility_id:o,start_date:e,end_date:i};a.post("/api/getIpdReport",n).then(function(a){var n={admittedIPD:a.data[0][0],diagnosisIPD:a.data[1]};t.ipd_admissions=n.admittedIPD,t.diagnosisIPDs=n.diagnosisIPD,t.start_date=e,t.end_date=i})},t.cancel=function(){console.log("done and cleared"),s.dismiss()},a.get("/api/getLoginUserDetails/"+l).then(function(e){t.loginUserFacilityDetails=e.data,console.log(t.loginUserFacilityDetails)}),t.closeAllModals=function(){console.log("done and cleared"),s.dismissAll()},t.today=function(){t.dt_start=new Date,t.dt_end=new Date},t.clear=function(){t.dt_start=null,t.dt_end=null},t.inlineOptions={customClass:function(e){var a=e.date;if("day"===e.mode)for(var i=new Date(a).setHours(0,0,0,0),n=0;n<t.events.length;n++)if(i===new Date(t.events[n].date).setHours(0,0,0,0))return t.events[n].status;return""},minDate:new Date,showWeeks:!0},t.dateOptions={dateDisabled:function(e){var t=e.date;return"day"===e.mode&&(0===t.getDay()||6===t.getDay())},formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},t.toggleMin=function(){t.inlineOptions.minDate=t.inlineOptions.minDate?null:new Date,t.dateOptions.minDate=t.inlineOptions.minDate},t.toggleMin(),t.open1=function(){t.popup1.opened=!0},t.open2=function(){t.popup2.opened=!0},t.setDate=function(e,a,i){t.dt_end=new Date(e,a,i)},t.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],t.format=t.formats[0],t.altInputFormats=["M!/d!/yyyy"],t.popup1={opened:!1},t.popup2={opened:!1};var d=new Date;d.setDate(d.getDate()+1);var c=new Date;c.setDate(d.getDate()+1),t.events=[{date:d,status:"full"},{date:c,status:"partially"}]}])}(),function(){"use strict";angular.module("authApp").controller("labMtuhaController",["$filter","$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){var o=i.currentUser.facility_id,l=i.currentUser.id;t.testsOutOfStocks=r.testsOutOfStock,t.getReportBasedOnthisDate=function(e,i){var n={facility_id:o,start_date:e,end_date:i};a.post("/api/getMahudhurioOPD",n).then(function(a){var n=a.data[0][0],s=a.data[1][0],r=a.data[2][0],o={opd_diagnosises:a.data[3],attendanceOpd:n,newAttendanceOpd:s,opd_mahudhurio_marudio:r};t.opd_mahudhurio=o.attendanceOpd,t.opd_mahudhurio_new=o.newAttendanceOpd,t.opd_mahudhurio_marudio=o.opd_mahudhurio_marudio,t.opd_diagnosises=o.opd_diagnosises,t.start_date=e,t.end_date=i})},t.cancel=function(){console.log("done and cleared"),s.dismiss()},a.get("/api/getLoginUserDetails/"+l).then(function(e){t.loginUserFacilityDetails=e.data,console.log(t.loginUserFacilityDetails)}),t.closeAllModals=function(){console.log("done and cleared"),s.dismissAll()},t.today=function(){t.dt_start=new Date,t.dt_end=new Date},t.clear=function(){t.dt_start=null,t.dt_end=null},t.inlineOptions={customClass:function(e){var a=e.date;if("day"===e.mode)for(var i=new Date(a).setHours(0,0,0,0),n=0;n<t.events.length;n++)if(i===new Date(t.events[n].date).setHours(0,0,0,0))return t.events[n].status;return""},minDate:new Date,showWeeks:!0},t.dateOptions={dateDisabled:function(e){var t=e.date;return"day"===e.mode&&(0===t.getDay()||6===t.getDay())},formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},t.toggleMin=function(){t.inlineOptions.minDate=t.inlineOptions.minDate?null:new Date,t.dateOptions.minDate=t.inlineOptions.minDate},t.toggleMin(),t.open1=function(){t.popup1.opened=!0},t.open2=function(){t.popup2.opened=!0},t.setDate=function(e,a,i){t.dt_end=new Date(e,a,i)},t.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],t.format=t.formats[0],t.altInputFormats=["M!/d!/yyyy"],t.popup1={opened:!1},t.popup2={opened:!1};var d=new Date;d.setDate(d.getDate()+1);var c=new Date;c.setDate(d.getDate()+1),t.events=[{date:d,status:"full"},{date:c,status:"partially"}]}])}(),function(){"use strict";angular.module("authApp").controller("opdMtuhaController",["$filter","$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){var o=i.currentUser.facility_id,l=i.currentUser.id;t.opd_mahudhurio=r.attendanceOpd,t.opd_mahudhurio_new=r.newAttendanceOpd,t.opd_mahudhurio_marudio=r.opd_mahudhurio_marudio,t.opd_diagnosises=r.opd_diagnosises,t.getReportBasedOnthisDate=function(e,i){var n={facility_id:o,start_date:e,end_date:i};a.post("/api/getMahudhurioOPD",n).then(function(a){var n=a.data[0][0],s=a.data[1][0],r=a.data[2][0],o={opd_diagnosises:a.data[3],attendanceOpd:n,newAttendanceOpd:s,opd_mahudhurio_marudio:r};t.opd_mahudhurio=o.attendanceOpd,t.opd_mahudhurio_new=o.newAttendanceOpd,t.opd_mahudhurio_marudio=o.opd_mahudhurio_marudio,t.opd_diagnosises=o.opd_diagnosises,t.start_date=e,t.end_date=i})},t.cancel=function(){console.log("done and cleared"),s.dismiss()},a.get("/api/getLoginUserDetails/"+l).then(function(e){t.loginUserFacilityDetails=e.data,console.log(t.loginUserFacilityDetails)}),t.closeAllModals=function(){console.log("done and cleared"),s.dismissAll()},t.today=function(){t.dt_start=new Date,t.dt_end=new Date},t.clear=function(){t.dt_start=null,t.dt_end=null},t.inlineOptions={customClass:function(e){var a=e.date;if("day"===e.mode)for(var i=new Date(a).setHours(0,0,0,0),n=0;n<t.events.length;n++)if(i===new Date(t.events[n].date).setHours(0,0,0,0))return t.events[n].status;return""},minDate:new Date,showWeeks:!0},t.dateOptions={dateDisabled:function(e){var t=e.date;return"day"===e.mode&&(0===t.getDay()||6===t.getDay())},formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},t.toggleMin=function(){t.inlineOptions.minDate=t.inlineOptions.minDate?null:new Date,t.dateOptions.minDate=t.inlineOptions.minDate},t.toggleMin(),t.open1=function(){t.popup1.opened=!0},t.open2=function(){t.popup2.opened=!0},t.setDate=function(e,a,i){t.dt_end=new Date(e,a,i)},t.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],t.format=t.formats[0],t.altInputFormats=["M!/d!/yyyy"],t.popup1={opened:!1},t.popup2={opened:!1};var d=new Date;d.setDate(d.getDate()+1);var c=new Date;c.setDate(d.getDate()+1),t.events=[{date:d,status:"full"},{date:c,status:"partially"}]}])}(),function(){"use strict";angular.module("authApp").controller("opdStaffController",["$filter","$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){var o=i.currentUser.facility_id,l=i.currentUser.id;t.specificStaff=r.specificStaff,t.otherStaff=r.otherStaff,t.start_date=r.startDate,t.end_date=r.endDate,t.getReportBasedOnthisDate=function(e,i){var n={user_id:l,facility_id:o,start_date:e,end_date:i};a.post("/api/getStaffPerfomance",n).then(function(a){t.specificStaff=a.data[0][0],t.otherStaff=a.data[1][0],t.start_date=e,t.end_date=i})},t.cancel=function(){console.log("done and cleared"),s.dismiss()},a.get("/api/getLoginUserDetails/"+l).then(function(e){t.loginUserFacilityDetails=e.data,console.log(t.loginUserFacilityDetails)}),t.closeAllModals=function(){console.log("done and cleared"),s.dismissAll()},t.today=function(){t.dt_start=new Date,t.dt_end=new Date},t.clear=function(){t.dt_start=null,t.dt_end=null},t.inlineOptions={customClass:function(e){var a=e.date;if("day"===e.mode)for(var i=new Date(a).setHours(0,0,0,0),n=0;n<t.events.length;n++)if(i===new Date(t.events[n].date).setHours(0,0,0,0))return t.events[n].status;return""},minDate:new Date,showWeeks:!0},t.dateOptions={dateDisabled:function(e){var t=e.date;return"day"===e.mode&&(0===t.getDay()||6===t.getDay())},formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},t.toggleMin=function(){t.inlineOptions.minDate=t.inlineOptions.minDate?null:new Date,t.dateOptions.minDate=t.inlineOptions.minDate},t.toggleMin(),t.open1=function(){t.popup1.opened=!0},t.open2=function(){t.popup2.opened=!0},t.setDate=function(e,a,i){t.dt_end=new Date(e,a,i)},t.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],t.format=t.formats[0],t.altInputFormats=["M!/d!/yyyy"],t.popup1={opened:!1},t.popup2={opened:!1};var d=new Date;d.setDate(d.getDate()+1);var c=new Date;c.setDate(d.getDate()+1),t.events=[{date:d,status:"full"},{date:c,status:"partially"}]}])}(),function(){"use strict";angular.module("authApp").controller("reportsMtuha",["$filter","$scope","$http","$rootScope","$uibModal","$mdDialog",function(e,t,a,i,n,s){var r=i.currentUser.facility_id;i.currentUser.id;t.getNHIFdashboard=function(){var e={facility_id:r,start_date:"2017-01-01",end_date:"2017-07-07"};a.post("/api/reportsDrugs",e).then(function(e){var t={drugsOutOfStock:e.data[0]};n.open({templateUrl:"/views/modules/insurance/insurance.html",size:"lg",animation:!0,controller:"insuranceController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})},t.showDrugsOutOfStock=function(){var e={facility_id:r,start_date:"2017-01-01",end_date:"2017-07-07"};a.post("/api/reportsDrugs",e).then(function(e){var t={drugsOutOfStock:e.data[0]};n.open({templateUrl:"/views/modules/reports/drugs.html",size:"lg",animation:!0,controller:"drugsMtuhaController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})},t.closeDialog=function(e){e.preventDefault(),s.hide()},t.confirmDialog=function(){s.show({controller:"reportsMtuha",templateUrl:"views/confirm.html",clickOutsideToClose:!0,$scope:t,preserveScope:!0}).then(function(){if(confirmPay){var e={id:id,bank_transaction_no:confirmPay.reference,payment_date:confirmPay.confirmation_date};Helper.setPayable(e);var a="#!/payments/preview/"+id;$window.location.href=a}else t.loading=!1})},t.showTestsOutOfStock=function(){var e={facility_id:r,start_date:"2017-01-01",end_date:"2017-07-01"};a.post("/api/reportsUnavailableTests",e).then(function(e){var t={testsOutOfStock:e.data[0]};n.open({templateUrl:"/views/modules/reports/lab_tests.html",size:"lg",animation:!0,controller:"labMtuhaController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})},t.showBookFive=function(){var e={facility_id:r,start_date:"2017-01-01",end_date:"2017-07-07"};a.post("/api/getMahudhurioOPD",e).then(function(e){var t=e.data[0][0],a=e.data[1][0],i=e.data[2][0],s={opd_diagnosises:e.data[3],attendanceOpd:t,newAttendanceOpd:a,opd_mahudhurio_marudio:i};n.open({templateUrl:"/views/modules/reports/opd.html",size:"lg",animation:!0,controller:"opdMtuhaController",windowClass:"app-modal-window",resolve:{object:function(){return s}}})})},t.showDoctorsPerfomances=function(){var e={facility_id:r};a.post("/api/getDoctorsPerfomaces",e).then(function(e){var t={DoctorsPerfomaces:e.data[0]};n.open({templateUrl:"/views/modules/reports/doctorsPerfomaces.html",size:"lg",animation:!0,controller:"doctorsPerfomacesController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})},t.showDrugsExpired=function(){a.get("/api/expired/"+r).then(function(e){var t={drugsExpired:e.data};n.open({templateUrl:"/views/modules/reports/expiredDrugs.html",size:"lg",animation:!0,controller:"expiredDrugsMtuhaController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})},t.showBookFourteen=function(){var e={facility_id:r,start_date:"2017-01-01",end_date:"2017-07-07"};a.post("/api/getIpdReport",e).then(function(e){var t={admittedIPD:e.data[0][0],diagnosisIPD:e.data[1]};n.open({templateUrl:"/views/modules/reports/ipd.html",size:"lg",animation:!0,controller:"ipdMtuhaController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})},t.showBookEleven=function(){var e={facility_id:r,start_date:"2017-01-01",end_date:"2017-07-07"};a.post("/api/getDentalClinicReport",e).then(function(e){var t={postedToClinic:e.data[0][0]};n.open({templateUrl:"/views/modules/reports/dental.html",size:"lg",animation:!0,controller:"dentalMtuhaController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})},t.showBookSixteen=function(){var e={facility_id:r,start_date:"2017-01-01",end_date:"2017-07-07"};a.post("/api/getEyeClinicReport",e).then(function(e){var t={postedToClinic:e.data[0][0]};n.open({templateUrl:"/views/modules/reports/eye.html",size:"lg",animation:!0,controller:"eyeMtuhaController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})},t.cancel=function(){console.log("done and cleared"),$uibModalInstance.dismiss()},t.closeAllModals=function(){console.log("done and cleared"),$uibModalInstance.dismissAll()}}])}(),angular.module("authApp").controller("PediatricController",["$scope","$http","$rootScope","$state","$uibModal","$window",function(e,t,a,i,n,s){var r=a.currentUser.id,o=a.currentUser.facility_id;e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t},e.ClinicQueue=function(){t.get("/api/searchClinicpatientQueue/"+o).then(function(t){e.resdatas=t.data[6],console.log(e.resdatas)})},e.ClinicQueue(),angular.element(document).ready(function(){e.setTab(1),t.post("/api/getOpdPatients",{facility_id:o}).then(function(t){e.patientData=t.data}),t.post("/api/investigationList",{facility_id:o}).then(function(t){e.patientInvData=t.data})});var l=[];e.showSearch=function(a){return t.post("/api/getAllOpdPatients",{searchKey:a,facility_id:o}).then(function(e){l=e.data}),e.ClinicQueue(),l};var d=[];e.showSearch2=function(e){return console.log(e),t.post("/api/getAllInvPatients",{searchKey:e,facility_id:o}).then(function(e){d=e.data}),d},e.getConsultationModal=function(e){var t=e;n.open({templateUrl:"/views/modules/clinic/Pediatric/PediatricConsultation.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})},e.getIncomingTransferConsultationModal=function(a){var i=a;console.log(a),t.post("/api/update_referral_Incomming",a).then(function(t){t.data&&(e.ClinicQueue(),n.open({templateUrl:"/views/modules/clinic/Pediatric/PediatricConsultation.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return i}}}))})},e.closeModal=function(){$uibModalInstance.dismiss()},e.getTreatmentModal=function(e){var t=e;n.open({templateUrl:"/views/modules/ClinicalServices/treatmentModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})},e.TRACERreport=function(e){n.open({templateUrl:"/views/modules/clinic/Pediatric/TRACERreport.html",size:"lg",animation:!0,controller:"PediatricController",windowClass:"app-modal-window",resolve:{object:function(){}}})},e.Ledger=function(e){n.open({templateUrl:"/views/modules/clinic/Pediatric/Ledger.html",size:"lg",animation:!0,controller:"PediatricController",windowClass:"app-modal-window",resolve:{object:function(){}}})},e.TRACERreportSearch=function(a){t.post("/api/tracer_medicines_report",{facility_id:o,start_date:a.start_date,end_date:a.end_date}).then(function(t){e.tracers=t.data})},e.LedgerSearch=function(a){t.post("/api/ledger",{facility_id:o,start_date:a.start_date,end_date:a.end_date}).then(function(t){e.ledgers=t.data})},e.Tb_diagnosis=function(e){var a;console.log(e),t.get("/api/patientAge/"+e.dob).then(function(t){var i={patientAge:(a=t.data).age,patientAgeDay:a.day,year:a.year,month:a.month,day:a.day,selectedPatient:e};n.open({templateUrl:"/views/modules/clinic/VCT/Vct_care.html",size:"lg",animation:!0,controller:"Vct_data",windowClass:"app-modal-window",resolve:{object:function(){return i}}})})},e.billsCancellation=function(){t.post("/api/getBillList",{facility_id:o}).then(function(t){e.patientBill=t.data})},e.getBillModal=function(e){t.post("/api/cancelPatientBill",{patient_id:e.patient_id,facility_id:o}).then(function(e){var t=e.data;n.open({templateUrl:"/views/modules/ClinicalServices/billCancellationModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})},e.pediatricNutritional=function(e,a){var i=$("#hscore").val(),n=$("#wscore").val();if(void 0==e)swal("Error","Fill All fields","error");else{var s=n+"/"+i;console.log(s);var l={others:e.others,muac:e.muac,whz_score:s,client_id:a,user_id:r,facility_id:o};console.log(l),t.post("/api/pediatricNutritional",l).then(function(e){var t=e.data.data;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},e.pediatricDietary=function(e,a){if(void 0==e)swal("Error","No any column Field","error");else{var i={others:e.others,food_intake_quality:e.food_intake_quality,food_intake_quantity:e.food_intake_quantity,client_id:a,user_id:r,facility_id:o};t.post("/api/pediatricDietary",i).then(function(e){var t=e.data.data;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},e.pediatricPreNatal=function(e,a){if(void 0==e)swal("Error","No any column Field","error");else{var i={others:e.others,preg_book_age:e.preg_book_age,clinic_attendance:e.clinic_attendance,prophylaxis:e.prophylaxis,client_id:a,user_id:r,facility_id:o};t.post("/api/pediatricPreNatal",i).then(function(e){var t=e.data.data;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},e.pediatricNatal=function(e,a){if(void 0==e)swal("Error","No any column Field","error");else{var i={others:e.others,delivery_mode:e.delivery_mode,delivery_place:e.delivery_place,baby_cry:e.baby_cry,apgar_score:e.apgar_score,client_id:a,user_id:r,facility_id:o};console.log(i),t.post("/api/pediatricPreNatal",i).then(function(e){var t=e.data.data;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}},e.pediatricPostNatal=function(e,a){if(void 0==e)swal("Error","No any column Field","error");else{var i={others:e.others,immunization:e.immunization,diety:e.diety,milestone:e.milestone,client_id:a,user_id:r,facility_id:o};t.post("/api/pediatricPostNatal",i).then(function(e){var t=e.data.data;0==e.data.status?swal("Error",t,"error"):swal("Feedback..",t,"success")})}}}]),angular.module("authApp").controller("TbController",["$scope","$http","$rootScope","$state","$uibModal","$window",function(e,t,a,i,n,s){var r=a.currentUser.id,o=a.currentUser.facility_id;e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t},e.ClinicQueue=function(){t.get("/api/searchClinicpatientQueue/"+o).then(function(t){e.resdatas=t.data[7],console.log(e.resdatas)})},e.ClinicQueue(),angular.element(document).ready(function(){e.setTab(1),t.post("/api/getOpdPatients",{facility_id:o}).then(function(t){e.patientData=t.data}),t.post("/api/investigationList",{facility_id:o}).then(function(t){e.patientInvData=t.data})});var l=[];e.showSearch=function(e){return t.post("/api/getAllOpdPatients",{searchKey:e,facility_id:o}).then(function(e){l=e.data}),l};var d=[];e.showSearch2=function(e){return console.log(e),t.post("/api/getAllInvPatients",{searchKey:e,facility_id:o}).then(function(e){d=e.data}),d},e.getConsultationModal=function(e){var t=e;n.open({templateUrl:"/views/modules/clinic/TB/TBConsultationModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})},e.getIncomingTransferConsultationModal=function(a){var i=a;console.log(a),t.post("/api/update_referral_Incomming",a).then(function(t){t.data&&(e.ClinicQueue(),n.open({templateUrl:"/views/modules/clinic/TB/TBConsultationModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return i}}}))})},e.closeModal=function(){$uibModalInstance.dismiss()},e.getTreatmentModal=function(e){var t=e;n.open({templateUrl:"/views/modules/ClinicalServices/treatmentModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})},e.Tb_report=function(e){n.open({templateUrl:"/views/modules/clinic/TB/Tb_report.html",size:"lg",animation:!0,controller:"Tb_data",windowClass:"app-modal-window",resolve:{object:function(){}}})},e.Tb_diagnosis=function(e){var a;console.log(e),t.get("/api/patientAge/"+e.dob).then(function(t){var i={patientAge:(a=t.data).age,patientAgeDay:a.day,year:a.year,month:a.month,day:a.day,selectedPatient:e};n.open({templateUrl:"/views/modules/clinic/TB/Tb_care.html",size:"lg",animation:!0,controller:"Tb_data",windowClass:"app-modal-window",resolve:{object:function(){return i}}})})},e.billsCancellation=function(){t.post("/api/getBillList",{facility_id:o}).then(function(t){e.patientBill=t.data})},e.getBillModal=function(e){t.post("/api/cancelPatientBill",{patient_id:e.patient_id,facility_id:o}).then(function(e){var t=e.data;n.open({templateUrl:"/views/modules/ClinicalServices/billCancellationModal.html",size:"lg",animation:!0,controller:"opdController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})})},e.tb_pre_entry_registration=function(a,i){if(void 0==a)swal("Error","Fill All Fields In This Section","error");else if(void 0==a.client_type)swal("Error","Fill Client Type Column","error");else if(void 0==a.referral_type)swal("Error","Fill Client Referral Type Column","error");else{var n={user_id:r,facility_id:o,client_type:a.client_type,referral_type:a.referral_type,client_id:i.patient_id,transfer_id:i.transfer_id};t.post("/api/tb_pre_entry_registration",n).then(function(t){t.data;var a=t.data.msg;0==t.data.status?swal("Error",a,"error"):(e.ClinicQueue(),e.resdatas=t.data,swal("Success",a,"success"))})}},e.patient_tb_type_registration=function(e,a){if(void 0==e)swal("Error","Fill All Fields In This Section","error");else if(void 0==e.tb_type)swal("Error","Fill TB Type Column","error");else{var i={user_id:r,facility_id:o,tb_type:e.tb_type,client_id:a};t.post("/api/patient_tb_type_registration",i).then(function(e){e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Success",t,"success")})}},e.patient_tb_sputam_registration=function(e,a){if(void 0==e)swal("Error","Fill All Fields In This Section","error");else{var i={user_id:r,facility_id:o,month:e.month,client_id:a};t.post("/api/patient_tb_sputam_registration",i).then(function(e){e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Success",t,"success")})}},e.patient_tb_treatment_types=function(e,a){if(void 0==e)swal("Error","Fill All Fields In This Section","error");else if(void 0==e.treatment_type_id)swal("Error","Fill   Treatment Type","error");else if(void 0==e.treatment_place)swal("Error","Fill Place of Taking This Treatment","error");else{var i={user_id:r,facility_id:o,tb_treatment_type_id:e.treatment_type_id,treatment_place:e.treatment_place,client_id:a};t.post("/api/patient_tb_treatment_types",i).then(function(e){e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Success",t,"success")})}},e.patient_tb_vvu_service=function(e,a){if(void 0==e)swal("Error","Fill All Fields In This Section","error");else if(void 0==e.cpt)swal("Error","Fill   CPT Option","error");else{var i={user_id:r,facility_id:o,cpt:e.cpt,cpt_start_date:e.cpt_start_date,art_start_date:e.art_start_date,client_id:a};t.post("/api/patient_tb_vvu_service",i).then(function(e){e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Success",t,"success")})}},e.tb_patient_medication_followups=function(e,a){if(void 0==e)swal("Error","Fill All Fields In This Section","error");else if(void 0==e.month)swal("Error","Fill   Patient Medication Attending Month  Option","error");else{var i={user_id:r,facility_id:o,month:e.month,remark:e.remark,client_id:a};t.post("/api/tb_patient_medication_followups",i).then(function(e){e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Success",t,"success")})}},e.Tbl_tb_patient_treatment_outputs=function(e,a){if(void 0==e)swal("Error","Fill All Fields In This Section","error");else if(void 0==e.output)swal("Error","Fill   TB Medication Output","error");else{var i={user_id:r,facility_id:o,output:e.output,comment:e.comment,client_id:a};t.post("/api/Tbl_tb_patient_treatment_outputs",i).then(function(e){e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Success",t,"success")})}},e.closeModalTbCare=function(){$uibModalInstance.dismiss()},t.get("/api/treatment_types").then(function(t){e.treatment_types=t.data})}]),function(){"use strict";angular.module("authApp").controller("Tb_data",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.tbs=s.selectedPatient,console.log(e.tbs),e.patientAge=s.patientAge,e.year=s.year,e.month=s.month,e.day=s.day;var r=a.currentUser.id;a.currentUser.facility_id;$("#clientAge").val(r),e.closeModalTbCare=function(){n.dismiss()}}])}(),function(){"use strict";angular.module("authApp").controller("VctController",function(e,t,a,i,n,s,r,o){s.setTab=function(e){s.tab=e},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0;var l=a.currentUser.id,d=a.currentUser.facility_id,c=[];e.get("/api/getUsermenu/"+l).then(function(e){s.menu=e.data}),s.department_list=function(){e.get("/api/department_list").then(function(e){s.departments=e.data})},s.showSearch=function(t){return e.get("/api/searchClinicpatientFromDb/"+t).then(function(e){c=e.data}),c},s.ClinicQueue=function(){e.get("/api/searchClinicpatientQueue/"+d).then(function(e){s.resdatas=e.data[0]})},s.ClinicQueue(),s.vct_registration=function(t,a){if(void 0==t)swal("Error","Fill All Fields In This Section","error");else if(void 0==t.attendance_type)swal("Error","Fill Client Attendance Type Column","error");else if(void 0==t.client_from)swal("Error","Fill Place where Client is From","error");else{console.log(a.account_id);var i;void 0==a.account_id?i=a.visit_id:void 0==a.visit_id&&(i=a.account_id);var n={user_id:l,facility_id:d,attendance_type:t.attendance_type,serial_no:11,client_from:t.client_from,client_from_other:t.client_from_other,pregnancy_record:t.pregnancy_record,referral_to:t.referral_to,referral_to_other:t.referral_to_other,counselling_type:t.counselling_type,agreed_vvu_test:t.agreed_vvu_test,counselling_after_test:t.counselling_after_test,vvu_test_result:t.vvu_test_result,participatory_test_result:t.participatory_test_result,tb_test:t.tb_test,tb_test_result:t.tb_test_result,condom_given:t.condom_given,comment:t.comment,client_id:a.patient_id,transfer_id:a.transfer_id,visit_id:i};console.log(n),e.post("/api/vct_registration",n).then(function(e){e.data;var t=e.data.msg;0==e.data.status?swal("Error",t,"error"):swal("Success",t,"success")})}},s.closeModal=function(){$uibModalInstance.dismiss()},s.getConsultationModal=function(e){var t=e;o.open({templateUrl:"/views/modules/clinic/VCT/Vct_care.html",size:"lg",animation:!0,controller:"Vct_data",windowClass:"app-modal-window",resolve:{object:function(){return t}}})};var u;s.Vct_diagnosis=function(t){s.ClinicQueue(),e.get("/api/patientAge/"+t.dob).then(function(e){var a={patientAge:(u=e.data).age,patientAgeDay:u.day,year:u.year,month:u.month,day:u.day,selectedPatient:t};o.open({templateUrl:"/views/modules/clinic/VCT/Vct_care.html",size:"lg",animation:!0,controller:"Vct_data",windowClass:"app-modal-window",resolve:{object:function(){return a}}})})},s.getIncomingTransferConsultationModal=function(t){console.log(t),e.post("/api/update_referral_Incomming",t).then(function(e){var a={selectedPatient:t};e.data&&(s.ClinicQueue(),o.open({templateUrl:"/views/modules/clinic/VCT/Vct_care.html",size:"lg",animation:!0,controller:"Vct_data",windowClass:"app-modal-window",resolve:{object:function(){return a}}}))})},s.Vct_report=function(){var e={name:l};o.open({templateUrl:"/views/modules/clinic/VCT/Vct_report.html",size:"lg",animation:!0,controller:"Vct_data",windowClass:"app-modal-window",resolve:{object:function(){return e}}})}})}(),function(){"use strict";angular.module("authApp").controller("Vct_data",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.tbs=s.selectedPatient,e.deepartments=s.Department,e.patientAge=s.patientAge,e.year=s.year,e.month=s.month,e.day=s.day;a.currentUser.id,a.currentUser.facility_id;t.get("/api/department_list").then(function(t){e.departments=t.data,console.log(e.deepartments)}),e.closeModal=function(){n.dismiss()}}])}(),function(){"use strict";angular.module("authApp").controller("ctcController",function(e,t,a,i,n,s,r,o,l){var d=a.currentUser.facility_id,c=a.currentUser.id;s.mytime1=new Date,s.mytime2=new Date,s.regex=/\s/g,s.showWeekDay=function(t){var a=l("date")(t,"yyyy-MM-dd"),i=(l("date")(new Date,"yyyy-MM-dd"),{selectedDate:a,facility_id:d,user_id:c});e.post("/api/ctcSheduleTimeTable",i).then(function(e){0==e.data.status?(s.getClinicSchedulesCtc(),o.error("",e.data.data)):(s.getClinicSchedulesCtc(),o.success("",e.data.data))})},s.giveAppointmentCtc=function(t,a){console.log(a);var i=a.visit_id,n=a.refferal_id,r=l("date")(t,"yyyy-MM-dd"),u=(l("date")(new Date,"yyyy-MM-dd"),{refferal_id:n,visit_id:i,selectedDate:r,facility_id:d,user_id:c});e.post("/api/giveAppointmentCtc",u).then(function(e){0==e.data.status?(s.getClinicAttendanceForPatient(a),o.error("",e.data.data)):(s.getClinicAttendanceForPatient(a),o.success("",e.data.data))})},s.getClinicSchedulesCtc=function(){e.get("/api/getCtcSheduleTimeTable/"+d).then(function(e){s.getClinicSchedules=e.data,console.log(s.getClinicSchedules)})},s.getClinicAttendanceForPatient=function(t){var a=t.refferal_id;e.get("/api/getClinicAttendanceForPatient/"+a).then(function(e){s.getClinicAttendanceForPatients=e.data})},s.AdmissionNotes="";var u=[],p=[],_=[];angular.element(document).ready(function(){s.setTabReception(1)}),e.get("/api/getUsermenu/"+c).then(function(e){s.menu=e.data}),s.setTabClinicDays=function(e){s.tab=e,s.getClinicSchedulesCtc()},s.setTabVitalSigns=function(e){s.getctcApprovedCustomers(),s.tab=e},s.setTabFamilyInformation=function(e){s.getctcApprovedCustomers(),s.tab=e},s.setTabLabInvestigations=function(e){s.tab=e},s.setTabTreatmentCtc=function(e){s.tab=e},s.setTabDiscussionTopics=function(e){s.tab=e,s.getClinicSchedulesCtc()},s.setTabReception=function(e){s.tab=e,s.getctcPendingCustomers()},s.setTabRecordForm=function(e){s.tab=e,s.getctcPendingCustomers()},s.setTabClinicSetup=function(e){s.tab=e},s.setTabAppointment=function(e){s.tab=e},s.addClinCapacity=function(t){var a={facility_id:d,user_id:c,clinic_name_id:8,capacity:t};e.post("/api/addClinCapacity",a).then(function(e){0==e.data.status?o.error("",e.data.data):o.success("",e.data.data)})},s.getRelationships=function(t){return e.get("/api/getRelationships/"+t).then(function(e){_=e.data}),_},s.showSearchMarital=function(t){return e.get("/api/getMaritalStatus/"+t).then(function(e){p=e.data}),console.log(p),p},s.showSearchResidences=function(t){return e.get("/api/searchResidences/"+t).then(function(e){u=e.data}),u},s.patient_quick_registration=function(t){if(0==angular.isDefined(t))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");var a=t.first_name,i=t.middle_name,n=t.last_name,o=t.gender,l=t.dob,u=t.mobile_number,p=t.marital.id;if(0==angular.isDefined(a))return sweetAlert("Please Enter FIRST NAME before SAVING","","error");if(0==angular.isDefined(i))return sweetAlert("Please Enter MIDDLE NAME before SAVING","","error");if(0==angular.isDefined(n))return sweetAlert("Please Enter LAST NAME before SAVING","","error");if(0==angular.isDefined(t.resedence_id))return sweetAlert("Please type the Residence Name and choose from the suggestions","","error");var _={marital_status:p,first_name:a,middle_name:i,last_name:n,dob:l,gender:o,mobile_number:u,residence_id:t.resedence_id.residence_id,facility_id:d,user_id:c};e.post("/api/ctc_registration",_).then(function(e){if(s.quick_registration=e.data,console.log(s.quick_registration),0==e.data.status)sweetAlert(e.data.data,"","error");else{var t={patientData:e.data[0],accounts_number:e.data[1][0],residences:e.data[2][0],getLastVisit:e.data[3]};s.patient=null,r.open({templateUrl:"/views/modules/clinic/ctc/encounterModal.html",size:"lg",animation:!0,controller:"ctcRegistrationModal",resolve:{object:function(){return console.log(t),t}}})}})},s.saveFamilyInfo=function(t,a){var i={patient_id:a.patient_id,facility_id:d,user_id:c,relative_name:t.name,relation_id:t.relation.id,age:t.age,hiv_status:t.hiv_status,hiv_care:t.hiv_care,unique_ctc_number:t.ctc_id,health_facility_file:t.health_facility_file};e.post("/api/saveFamilyInfo",i).then(function(e){0==e.data.status?o.error("",e.data.data):o.success("",e.data.data)})},s.setTabDoctors=function(e){s.tab=e,o.success("","Doctor...")},s.printVitals=function(t){e.get("/api/getVitals").then(function(e){s.selectedPatient=t,console.log(s.selectedPatient),s.Vitals=e.data})},s.vitalRegister=function(t){var a,i=[];s.Vitals.forEach(function(e){a=e.vital_name.replace(s.regex,"_"),""!=$("#"+a).val()&&(i.push({vital_sign_id:e.vital_id,vital_sign_value:$("#"+a).val(),patient_id:t,registered_by:c}),$("#"+a).val(""))}),console.log(i),i.length>0&&e.post("/api/CtcVitalSignRegister",i).then(function(e){var t=e.data.msg,a=e.data.notification;0==e.data.status?o.error(a,t):o.success(a,t)})},s.getCTCModal=function(e){var t=e;r.open({templateUrl:"/views/modules/clinic/ctc/visiting_ctc_reg.html",size:"lg",animation:!0,windowClass:"app-modal-window",controller:"ctcPatientQues",resolve:{object:function(){return t}}})},s.getCTCModalClerksheet=function(e){var t=e;r.open({templateUrl:"/views/modules/clinic/ctc/clerk_ctc_reg.html",size:"lg",animation:!0,windowClass:"app-modal-window",controller:"ctcPatientQues",resolve:{object:function(){return t}}})},s.patientAppointment=function(e){var t=e;r.open({templateUrl:"/views/modules/clinic/ctc/appointment.html",size:"lg",animation:!0,windowClass:"app-modal-window",controller:"ctcPatientQues",resolve:{object:function(){return t}}})},s.patientFamilyInfo=function(e){var t=e;r.open({templateUrl:"/views/modules/clinic/ctc/patient_relations.html",size:"lg",animation:!0,windowClass:"app-modal-window",controller:"ctcPatientQues",resolve:{object:function(){return t}}})},s.getctcPendingCustomers=function(){e.get("/api/ctcPendingCustomers/"+d).then(function(e){s.ctcPendingCustomers=e.data})},s.getctcApprovedCustomers=function(){e.get("/api/ctcApprovedCustomers/"+d).then(function(e){s.ctcApprovedCustomers=e.data})},s.deleteClinicDay=function(t){var a=t.id,i=t.week_day;e.get("/api/deleteDayId/"+a).then(function(e){s.getClinicSchedulesCtc(),o.success("",i+" was successfully Deleted")})},s.isSet=function(e){return s.tab===e},s.oneAtATime=!0;var m="";s.getAdmissionNotes=function(t){e.post("/api/getInstructions",{patient_id:t}).then(function(e){s.AdmissionNotes=e.data,m=s.AdmissionNotes,console.dir(s.AdmissionNotes)})},s.giveBed=function(t,a,i,n,r){console.log(n),e.post("/api/giveBed",{bed_id:t,ward_id:i,admission_id:n,bed_available:r}).then(function(e){if(s.giveBeds=e.data,console.log(s.giveBeds),0==e.data.status)sweetAlert(e.data.data,"","error");else{var t=r+" SUCCESSFULLY ASSIGNED TO "+a;sweetAlert(t,"","success")}})},s.getAdmPatient=function(e){s.selectedPatient=e,console.log(s.selectedPatient)},s.getPatientsSentToTheatre=function(){e.get("/api/getPatientSentToTheatre").then(function(e){s.patientsSentToTheatres=e.data})},s.getAdmission=function(t,a,i){e.post("/api/getInstructions",{patient_id:t,ward_id:a}).then(function(e){s.AdmissionNotes=e.data,m=s.AdmissionNotes,console.dir(s.AdmissionNotes)}),e.get("/api/getPatientInfo/"+t).then(function(e){s.quick_registration=e.data;var t=angular.extend({},s.quick_registration,m);r.open({templateUrl:"/views/modules/nursing_care/bedAllocation.html",size:"lg",animation:!0,controller:"nursingCareModal",resolve:{object:function(){return t}}}).result.then(function(e){s.quick_reg=e,console.log(s.quick_reg)})})},s.assignToTheatre=function(t,a,i){e.get("/api/getFullAdmitedPatientInfo/"+i).then(function(e){s.admissions=e.data,console.log(e.data),console.log(i);var t=s.admissions;r.open({templateUrl:"/views/modules/nursing_care/postPatientsToTheatre.html",size:"lg",animation:!0,controller:"postPatientsToTheatreModal",resolve:{object:function(){return t}}})})}})}(),function(){"use strict";angular.module("authApp").controller("ctcPatientQues",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","toastr","object",function(e,t,a,i,n,s,r){e.ctcQues=r;var o=a.currentUser.facility_id,l=a.currentUser.id;e.cancel=function(){n.dismiss()};var d=[];e.showSearchResidences=function(e){return t.get("/api/searchResidences/"+e).then(function(e){d=e.data}),d},e.saveCTCNewAttendance=function(a,n){console.log(n);var r=n.patient_id,d=n.last_name;if(0==angular.isDefined(a))return s.error("","ENTER UNIQUE CTC ID NUMBER  FOR "+d);if(0==angular.isDefined(a.address))return s.error("","SELECT STREET/VILLAGE FOR "+d);var c=a.unique_id,u=a.withrecords,p=a.ten_cell_leaders,_=a.street,m=a.on_art,f=a.no_records,g=a.in_care,h=a.head_household,v=a.contact_household,y={on_off:1,last_name:d,patient_id:r,residence_id:a.address.residence_id,contact_house_hold_head:v,name_head_house_hold:h,in_care:g,no_records:f,on_art:m,street:_,name_ten_cell_leader:p,facility_id:o,user_id:l,unique_ctc_number:c,withrecords:u};t.post("/api/saveCtCRegistration",y).then(function(t){if(0==t.data.status)s.error("",t.data.data);else{s.success("",t.data.data),e.cancel();var r={patient:a,ctcQues:n};i.open({templateUrl:"/views/modules/clinic/ctc/ctc_patient_suport.html",size:"lg",animation:!0,windowClass:"app-modal-window",controller:"ctcPatientSupport",resolve:{object:function(){return r}}})}})},e.closeAllModals=function(){console.log("done and cleared"),n.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("ctcPatientSupport",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","toastr","object",function(e,t,a,i,n,s,r){var o=a.currentUser.facility_id,l=a.currentUser.id;e.ctcQues=r.ctcQues,e.patient=r.patient,e.cancel=function(){console.log("done and cleared"),n.dismiss()};var d=[];e.showSearchResidences=function(e){return t.get("/api/searchResidences/"+e).then(function(e){d=e.data}),d},e.closeAllModals=function(){n.dismissAll()},e.saveCTCPatientSupport=function(a,i){var n=i.patient_id,r=i.last_name,d=i.visit_id,c=0;if(0==angular.isDefined(a))return s.error("","ENTER NAME OF TREATMENT SUPPORTER  FOR "+r);var u=a.treatment_supporter,p=a.phone_supporter,_=a.patient_visit,m=(a.yes,a.no);if(0==angular.isDefined(m))c=1;var f={visit_date_id:d,on_off:1,last_name:r,patient_id:n,name_treatment_supporter:u,telephone_number:p,visit_type_code:_,joined_organisation:c,name_organisation:a.organisation,facility_id:o,user_id:l};console.log(f),t.post("/api/saveCTCPatientSupport",f).then(function(t){0==t.data.status?s.error("",t.data.data):(s.success("",t.data.data),e.cancel())})}}])}(),function(){"use strict";angular.module("authApp").controller("ctcRegistrationModal",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){console.log(s),e.patientData=s.patientData,e.accounts_number=s.accounts_number,e.residences=s.residences,e.getLastVisit=s.getLastVisit,e.enterCtcEncounter=function(n,s,r,o,l){if(0==angular.isDefined(r))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(r.payment_category))return sweetAlert("Please Type the Payment Category","","error");if(0==angular.isDefined(r.payment_services))return sweetAlert("Please Select Service","","error");var d=r.payment_category.patient_category,c=r.payment_services,u=r.payment_services.service_id,p=r.payment_services.price_id,_=r.payment_services.item_type_id,m=o,l=l,f=a.currentUser.id,g=r.payment_category.patient_category_id,h=r.payment_category.patient_category_id,v={payment_filter:g,item_type_id:_,patient_category:d,main_category_id:r.payment_category.patient_main_category_id,bill_id:h,service_category:c,service_id:u,price_id:p,patient_id:m,facility_id:l,user_id:f};console.log(v),t.post("/api/enterCtcEncounter",v).then(function(t){if(e.registrationReport=t.data,0==t.data.status)sweetAlert(t.data.data,"","error");else{var a={patientsInfo:n,residences:s};e.cancel();i.open({templateUrl:"/views/modules/registration/printCard.html",size:"lg",animation:!0,controller:"printCard",resolve:{object:function(){return a}}})}})},e.cancel=function(){console.log("done and cleared"),n.dismiss()},e.closeAllModals=function(){console.log("done and cleared"),n.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("ctcSetup",["$filter","$scope","$http","$rootScope","$uibModal","$uibModalInstance",function(e,t,a,i,n,s,r){i.currentUser.facility_id,i.currentUser.id;angular.element(document).ready(function(){t.setTabReception(1)}),t.setTabReception=function(e){t.tab=e,r.success("","CARE AND TREATMENT CLINIC...")},t.setTabRecordForm=function(e){t.tab=e,r.success("","RECORD FORM CTC...")},t.setTabClinicSetup=function(e){t.tab=e,r.success("","Setup...")},t.isSet=function(e){return t.tab===e},t.oneAtATime=!0,t.today=function(){t.dt=new Date},t.today(),t.clear=function(){t.dt=null},t.options={customClass:getDayClass,minDate:new Date,showWeeks:!0},t.toggleMin=function(){t.options.minDate=t.options.minDate?null:new Date},t.toggleMin(),t.setDate=function(e,a,i){t.dt=new Date(e,a,i)},t.cancel=function(){console.log("done and cleared"),s.dismiss()},t.closeAllModals=function(){console.log("done and cleared"),s.dismissAll()}}])}(),function(){"use strict";angular.module("authApp").controller("vitalSigns",["$scope","$http","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s){e.vitalQue=s.vitalQue,e.Vitals=s.Vitals;a.currentUser.id,a.currentUser.facility_id}])}(),function(){"use strict";angular.module("authApp").controller("dentalController",["$scope","$http","$state","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){e.selectedPatient=r;var o=i.currentUser.id,l=i.currentUser.facility_id,d=r.patient_id;e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t},e.closeModal=function(){s.dismiss()},e.removeFromSelection=function(e,t){var a=t.indexOf(e);t.splice(a,1)},e.templates=[{name:"Admission",url:"admission.html"},{name:"Internal Referral",url:"internal.html"},{name:"External Referral",url:"referral.html"},{name:"Deceased",url:"deceased.html"}],angular.element(document).ready(function(){e.setTab(1),t.post("/api/previousVisits",{patient_id:d}).then(function(t){e.patientsVisits=t.data}),t.post("/api/getResults",{patient_id:d,dept_id:3}).then(function(t){e.radiology=t.data}),t.post("/api/getResults",{patient_id:d,dept_id:2}).then(function(t){e.labInvestigations=t.data})}),e.getPatientReport=function(a){t.post("/api/prevHistory",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevHistory=t.data}),t.post("/api/getPrevDiagnosis",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevDiagnosis=t.data}),t.post("/api/getPrevRos",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevRos=t.data}),t.post("/api/getPrevBirth",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevBirth=t.data}),t.post("/api/getPrevObs",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevObs=t.data}),t.post("/api/getPrevFamily",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevFamily=t.data}),t.post("/api/getPrevPhysical",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevPhysical=t.data}),t.post("/api/getInvestigationResults",{patient_id:a.patient_id,date_attended:a.date_attended,dept_id:2}).then(function(t){e.labInvestigationsz=t.data}),t.post("/api/getInvestigationResults",{patient_id:a.patient_id,date_attended:a.date_attended,dept_id:3}).then(function(t){e.radiologyResults=t.data}),t.post("/api/getPastMedicine",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevMedicines=t.data}),t.post("/api/getPastProcedures",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.pastProcedures=t.data}),t.post("/api/getAllergies",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.allergies=t.data})};var c=[];e.complaints=function(e){return t.post("/api/chiefComplaints",{search:e}).then(function(e){c=e.data}),c};var u=[];e.showCardio=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Cardiovascular"}).then(function(e){u=e.data}),u};var p=[];e.showRespiratory=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Respiratory"}).then(function(e){p=e.data}),p};var _=[];e.showGastro=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Gastrointerstinal"}).then(function(e){_=e.data}),_};var m=[];e.showMusculo=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Musculoskeletal"}).then(function(e){m=e.data}),m};var f=[];e.showGenito=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Genitourinary"}).then(function(e){f=e.data}),f};var g=[];e.showCNS=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Central Nervous System"}).then(function(e){g=e.data}),g};var h=[];e.showEndo=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Endocrine"}).then(function(e){h=e.data}),h};var v=[];e.showAllergy=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Allergy"}).then(function(e){v=e.data}),v};y=[];e.showMedication=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Medication"}).then(function(e){y=e.data}),y};var y=[];e.showIllness=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Past Medical History"}).then(function(e){y=e.data}),y};var w=[];e.showAdmission=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Admission History"}).then(function(e){w=e.data}),w};var b=[];e.showImmune=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Immunisation"}).then(function(e){b=e.data}),b};var P=[];e.showInspection=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Inspection"}).then(function(e){P=e.data}),P};var S=[];e.showPalpation=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Palpation"}).then(function(e){S=e.data}),S};var A=[];e.showPercussion=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Percussion"}).then(function(e){A=e.data}),A};var D=[];e.showAuscultation=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Auscultation"}).then(function(e){D=e.data}),D};var E=[];e.showDiagnosis=function(e){return t.post("/api/getDiagnosis",{search:e}).then(function(e){E=e.data}),E},e.allergyChecker=function(e){t.post("/api/getAllergy",{patient_id:e.patient_id}).then(function(e){swal("This Patient is allergic to "+e.data[0].descriptions,"","info")})},e.getSubDepts=function(a){t.post("/api/getSubDepts",{department_id:a}).then(function(t){e.subDepartments=t.data})},t.get("/api/getWards/"+l).then(function(t){e.wards=t.data}),t.get("/api/getSpecialClinics/"+l).then(function(t){e.clinics=t.data}),e.patientAdmission=function(e,t){if(0!=angular.isDefined(t)){var a=angular.extend({},e,t);n.open({templateUrl:"/views/modules/ClinicalServices/admission.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return a}}})}else swal("Oops! something went wrong..","Please search and select Patient then click ward button to admit patient!")},e.allergyChecker=function(e){t.post("/api/getAllergy",{patient_id:e.patient_id}).then(function(e){swal("This Patient is allergic to "+e.data[0].descriptions,"","info")})},e.getSubDepts=function(a){t.post("/api/getSubDepts",{department_id:a}).then(function(t){e.subDepartments=t.data})},e.getTests=function(a,i){if(0!=angular.isDefined(i)){var n=i.bill_id;3==i.main_category_id&&(n=1),t.post("/api/getPanels",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.panels=t.data}),t.post("/api/getSingleTests",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.singleTests=t.data}),t.post("/api/getTests",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.labTests=t.data,t.data.length>0?swal("Items with red marks are currently not available..","But You can still order them if necessary","info"):swal("If  no Tests displayed under this category..","Please, Contact Lab manager","info")})}else swal("Please...select Patient first","","error")},e.investigationOrders=[],e.unavailableOrders=[],e.orders=function(t,a,i){console.log();var n="";if(null!=i.patient_id){if(1==a){for(s=0;s<e.investigationOrders.length;s++)if(e.investigationOrders[s].item_id==t.item_id)return void swal(t.item_name+"  already in your order list!");if(1!=t.on_off){for(var s=0;s<e.unavailableOrders.length;s++)if(e.unavailableOrders[s].item_id==t.item_id)return void swal(t.item_name+"  already in your order list!");return void e.unavailableOrders.push({facility_id:l,visit_date_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name})}1!=i.main_category_id&&(n=i.bill_id),e.investigationOrders.push({requesting_department_id:i.dept_id,admission_id:"",facility_id:l,item_type_id:t.item_type_id,item_price_id:t.item_price_id,status_id:1,account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name,priority:"",clinical_note:"",payment_filter:n}),console.log(e.investigationOrders)}}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveInvestigation=function(a){if(""!=e.investigationOrders||null!=e.unavailableOrders){for(var i=0;i<e.investigationOrders.length;i++)e.investigationOrders[i].priority=a.priority,e.investigationOrders[i].clinical_note=a.clinical_note;""!=e.investigationOrders&&(t.post("/api/postInvestigations",e.investigationOrders).then(function(e){}),e.investigationOrders=[]),t.post("/api/postUnavailableInvestigations",e.unavailableOrders).then(function(e){}),swal("Investigation order successfully saved!"),e.unavailableOrders=[]}else swal("You dont have Items to save!","Please select Items first!")},e.getLabResults=function(a){var i={patient_id:a.patient_id,date_attended:a.date_attended,dept_id:a.dept_id};t.post("/api/getInvestigationResults",i).then(function(t){e.labResults=t.data})},e.getRadResults=function(a){var i={patient_id:a.patient_id,date_attended:a.date_attended,dept_id:a.dept_id};t.post("/api/getInvestigationResults",i).then(function(t){e.radResults=t.data})},e.complaintz=[],e.addComplaint=function(t,a,i){if(null!=i.patient_id){for(var n=0;n<e.complaintz.length;n++)if(e.complaintz[n].id==t.id)return void swal(t.description+" already in your wish list!");e.complaintz.push({admission_id:"",patient_id:i.patient_id,facility_id:l,visit_date_id:i.account_id,user_id:o,description:t.name,id:t.id,duration:a.durationqty,duration_unit:a.durationunit,status:"Chief Complaints"}),$("#complaint").val(""),$("#duration_qty").val(""),$("#duration_unit").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveComplaints=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].other_complaints=i.other_complaints,a[n].hpi=i.hpi;t.post("/api/postHistory",a).then(function(e){}),swal("Complaints successfully saved!","","success"),e.complaintz=[],$("#other_complaints").val(""),$("#hpi").val("")}else swal("Oops Data not saved!","Please fill all necessary fields, click 'Add' Button then 'Save Complaints' Button to save data..","error")},e.rosTemp=[],e.reviewOfSystems=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#cardio").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems2=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#respiratory").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems3=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#gastrointestinal").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems4=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#musculoskeletal").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems5=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#genitourinary").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems6=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#cns").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems7=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#endocrine").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveRoS=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].review_summary=i;t.post("/api/postRoS",a).then(function(e){}),swal("Review of systems data successfully Saved!","","success"),e.rosTemp=[],$("#review_summary").val("")}else swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.pastTemp=[],e.pastMedicals=function(t,a){null!=a.patient_id?(e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#allergy").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals3=function(t,a){null!=a.patient_id?(e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#illness").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals4=function(t,a){null!=a.patient_id?(e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#admission").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals5=function(t,a){null!=a.patient_id?(e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#immunisation").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.savePastMedical=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].other_past_medicals=i;t.post("/api/postPastMed",a).then(function(e){}),swal("Past medical history data successfully Saved!","","success"),e.pastTemp=[],$("#other_past_medicals").val("")}else swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.savePastDental=function(e,a){t.post("/api/postPastDental",{user_id:o,patient_id:e.patient_id,visit_date_id:e.account_id,past_dental_history:a}).then(function(e){}),swal("Past dental history data successfully saved","","success"),$("#past_dental_history").val("")},e.saveBirthHistory=function(e,a){if(null!=a.patient_id){var i={admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,antenatal:e.antenatal,natal:e.natal,post_natal:e.post_natal,nutrition:e.nutrition,growth:e.growth,development:e.development};t.post("/api/birthHistory",i).then(function(e){swal("Birth history data Successfully Saved!","","success")}),$("#antenatal").val(""),$("#natal").val(""),$("#post_natal").val(""),$("#nutrition").val(""),$("#growth").val(""),$("#development").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveObsGyn=function(e,a){if(null!=a.patient_id){var i={admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,menarche:e.menarche,menopause:e.menopause,menstrual_cycles:e.menstrual_cycles,pad_changes:e.pad_changes,recurrent_menstruation:e.recurrent_menstruation,contraceptives:e.contraceptives,pregnancy:e.pregnancy,lnmp:e.lnmp,gravidity:e.gravidity,parity:e.parity,living_children:e.living_children};t.post("/api/postObs",i).then(function(e){swal("Obstetrics and gynaecological data Successfully Saved!","","success")}),$("#menarche").val(""),$("#menopause").val(""),$("#menstrual_cycles").val(""),$("#pads").val(""),$("#recurrent_menstruation").val(""),$("#contraceptives").val(""),$("#pregnancy").val(""),$("#lnmp").val(""),$("#gravidity").val(""),$("#parity").val(""),$("#living_children").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.removeFromSelection=function(e,t){var a=t.indexOf(e);t.splice(a,1)},e.physicalMusculoskeletal=[],e.physicalRespiratory=[],e.physicalCardiovascular=[],e.physicalGastrointestinal=[],e.physicalGenitourinary=[],e.physicalCNS=[],e.physicalEndocrine=[],e.physicalMusculo=function(t,a,i){null!=a.patient_id?(e.physicalMusculoskeletal.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#musc_inspect").val(""),$("#musc_palpate").val(""),$("#musc_percu").val(""),$("#musc_ausc").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalResp=function(t,a,i){null!=a.patient_id?(e.physicalRespiratory.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#resp_inspect").val(""),$("#resp_palpate").val(""),$("#resp_percus").val(""),$("#resp_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalCardio=function(t,a,i){null!=a.patient_id?(e.physicalCardiovascular.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#cardio_inspect").val(""),$("#cardio_palpate").val(""),$("#cardio_percus").val(""),$("#cardio_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalGastro=function(t,a,i){null!=a.patient_id?(e.physicalGastrointestinal.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#gastro_inspect").val(""),$("#gastro_palpate").val(""),$("#gastro_percus").val(""),$("#gastro_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalGenito=function(t,a,i){null!=a.patient_id?(e.physicalGenitourinary.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#genito_inspect").val(""),$("#genito_palpate").val(""),$("#genito_percus").val(""),$("#genito_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalCns=function(t,a,i){null!=a.patient_id?(e.physicalCNS.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#cns_inspect").val(""),$("#cns_palpate").val(""),$("#cns_percus").val(""),$("#cns_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalEndo=function(t,a,i){null!=a.patient_id?(e.physicalEndocrine.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#endo_inspect").val(""),$("#endo_palpate").val(""),$("#endo_percus").val(""),$("#endo_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.savePhysicalExamination=function(a){""!=a?(t.post("/api/postPhysical",a).then(function(e){}),swal(a[0].system+"  system data successfully Saved!","","success"),e.physicalMusculoskeletal=[],e.physicalRespiratory=[],e.physicalCardiovascular=[],e.physicalGastrointestinal=[],e.physicalGenitourinary=[],e.physicalCNS=[],e.physicalEndocrine=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.saveLocalExams=function(e,a){if(null!=a){var i={admission_id:"",patient_id:e.patient_id,visit_date_id:e.account_id,user_id:o,facility_id:l,local_examination:a};t.post("/api/postLocalPhysical",i).then(function(e){}),swal("Local Examination","data for this patient saved","success"),$("#local_exam").val("")}else swal("Please write examination for this patient first","","error")},e.saveSocialCommunity=function(e,a){if(null!=a.patient_id){var i={patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,chronic_illness:e.chronic_illness,substance_abuse:e.substance_abuse,adoption:e.adoption,others:e.others};t.post("/api/familyHistory",i).then(function(e){swal("Family and social history data successfully Saved!","","success")}),$("#chronic_illness").val(""),$("#substance_abuse").val(""),$("#adoption").val(""),$("#others").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.diagnosisTemp=[],e.addProv=function(t,a,i){null!=a.patient_id?e.diagnosisTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.addDiff=function(t,a,i){null!=a.patient_id?e.diagnosisTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.addConf=function(t,a,i){null!=a.patient_id?e.diagnosisTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveDiagnosis=function(a){""!=a?(t.post("/api/postDiagnosis",a).then(function(e){swal("Diagnosis data successfully Saved!","","success")}),e.diagnosisTemp=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.internalTransfer=function(e,t){var a={sender_clinic_id:9,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,medical_record_number:t.medical_record_number,gender:t.gender,dob:t.dob,visit_id:t.account_id},i=angular.extend({},e,a);n.open({templateUrl:"/views/modules/ClinicalServices/internalTransfer.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return i}}});s.dismiss()};var C=[];e.medicines=[],e.medicinesOs=[],e.searchItems=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getMedicine",{search:e,facility_id:l,patient_category_id:i}).then(function(e){C=e.data}),C;swal("Please search patient to be prescribed before searching Medicine!")}};var T=[];e.checkDosage=function(a,i){var n=a.item_name;t.post("/api/dosageChecker",{item_id:a.item_id,patient_id:i}).then(function(t){if(console.log(t.data),t.data.length>0){var a=t.data[0].duration-t.data[0].days;e.dosageCheck=t.data,swal("ATTENTION",n+" In Dosage Progress "+a+" day(s) remained to Complete a Dosage","info")}})},e.addMedicine=function(a,i,n){t.post("/api/getPrevMedicine",{patient_id:a.patient_id}).then(function(t){e.prevMedicines=t.data});var s="",r=i.main_category_id,d=a.dose*a.duration*24/a.frequency;if(null!=i)if(null!=n)if(null!=a.instructions){for(var c=0;c<e.medicines.length;c++)if(e.medicines[c].item_id==n.item_id)return void swal(n.item_name+" already in your order list!");1!=r&&(s=i.bill_id),3==r&&(r=1),t.post("/api/balanceCheck",{main_category_id:r,item_id:n.item_id,facility_id:l}).then(function(t){if(T=t.data,console.log(T),T.length>0&&T[0].balance>=d)e.medicines.push({facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:d,status_id:1,dose:a.dose,frequency:a.frequency,duration:a.duration,instructions:a.instructions,out_of_stock:"",payment_filter:s,account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name,dose_formulation:n.dose_formulation});else if(T.length<1||T[0].balance<d){if(1!=confirm("This Item is not available in Store..Do you want to prescribe anyway?"))return void swal("canceled","Choose different Item for Prescription");for(var r=0;r<e.medicinesOs.length;r++)if(e.medicinesOs[r].item_id==n.item_id)return void swal("Item already in your order list!");e.medicinesOs.push({facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:d,status_id:1,dose:a.dose,frequency:a.frequency,duration:a.duration,instructions:a.instructions,out_of_stock:"OS",account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name}),swal("Item added under Out of Stock category","","success")}})}else swal("Please Write Instructions and click 'Add to List' Button","","error");else swal("Please search and select medicine!");else swal("Please search and select Patient to prescribe")},e.saveMedicine=function(){""!=e.medicines||""!=e.medicinesOs?(""!=e.medicines&&(t.post("/api/postMedicines",e.medicines).then(function(e){}),e.medicines=[]),t.post("/api/outOfStockMedicine",e.medicinesOs).then(function(e){}),swal("Patient successfully prescribed!","","success"),e.medicinesOs=[]):swal("No Items to Save,Please choose items..","","error")},e.prevMedics=function(a){t.post("/api/getPrevMedicine",{patient_id:a.patient_id}).then(function(t){e.prevMedicines=t.data})},e.prevProcedure=function(a){t.post("/api/getPrevProcedures",{patient_id:a.patient_id}).then(function(t){e.prevProcedures=t.data})};var O=[];e.procedures=[],e.searchProcedures=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getPatientProcedures",{search:e,facility_id:l,patient_category_id:i}).then(function(e){O=e.data}),O;swal("Please search patient before searching procedures!")}};var I=[],M=[];e.supplies=[],e.suppliesOS=[],e.searchMediSupplies=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getMedicalSupplies",{search:e,facility_id:l,patient_category_id:i}).then(function(e){I=e.data}),I;swal("Please search patient before searching medical supplies!")}},e.addSupplies=function(a,i,n){var s="",r=a.main_category_id,d=i;if(null!=a)if(null!=n){for(var c=0;c<e.supplies.length;c++)if(e.supplies[c].item_id==n.item_id)return void swal(n.item_name+" already in your order list!","","info");1!=r&&(s=a.bill_id),3==r&&(r=1),t.post("/api/balanceCheck",{main_category_id:r,item_id:n.item_id,facility_id:l}).then(function(t){if((M=t.data).length>0&&M[0].balance>=d)e.supplies.push({out_of_stock:"",payment_filter:s,admission_id:"",facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:i,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name});else if(M.length<1||M[0].balance<d){if(1!=confirm("This Item is not available in Store..Do you want to select it anyway?","","info"))return void swal("canceled","Choose different Item","info");for(var r=0;r<e.suppliesOS.length;r++)if(e.suppliesOS[r].item_id==n.item_id)return void swal(n.item_name+" already in your order list!");e.suppliesOS.push({out_of_stock:"OS",payment_filter:s,admission_id:"",facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:i,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name}),swal("Item added under Out of Stock category","","success")}}),console.log(e.supplies),$("#supplies").val(""),$("#qty").val("")}else swal("Please search and select Medical supplies!","","error");else swal("Please search and select Patient","","error")},e.saveSupplies=function(){""!=e.supplies||""!=e.suppliesOS?(""!=e.supplies&&(t.post("/api/postMedicalSupplies",e.supplies).then(function(e){}),e.supplies=[]),t.post("/api/outOfStockMedicalSupplies",e.suppliesOS).then(function(e){}),swal("Patient's medical supplies successfully saved!","","success"),e.suppliesOS=[]):swal("No Items to Save,Please choose items..","","error")},e.getDefaultProcedures=function(a){var i=a.bill_id;null!=i?(3==a.main_category_id&&(i=1),t.post("/api/getProcedures",{facility_id:l,patient_category_id:i}).then(function(t){e.defaultProcedures=t.data})):swal("Please search patient before searching procedures!")},e.addProcedure=function(t,a){var i="";if(null!=a.patient_id)if(null!=t.item_id){for(var n=0;n<e.procedures.length;n++)if(e.procedures[n].item_id==t.item_id)return void swal(t.item_name+" already in your order list!","","info");1!=a.main_category_id&&(i=a.bill_id),e.procedures.push({payment_filter:i,admission_id:"",facility_id:l,item_type_id:t.item_type_id,item_price_id:t.price_id,quantity:1,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name})}else swal("Please search and select Procedure!");else swal("Please search and select Patient to prescribe")},e.saveProcedures=function(a){t.post("/api/postPatientProcedures",a).then(function(e){}),swal("Patient procedures successfully saved!","","success"),e.procedures=[]},e.deceased=function(a,i){if(0!=angular.isDefined(i)){var n={patient_id:a.patient_id,user_id:o,facility_id:l,immediate_cause:i.immediate_cause,underlying_cause:i.underlying_cause};t.post("/api/postDeceased",n).then(function(e){}),e.corpse=null,swal(a.first_name+" "+a.last_name+" sent to Last office","","success")}else swal("An error occurred","Data not saved...Please write causes of death and click send to last office button","error")}}])}(),function(){"use strict";angular.module("authApp").controller("dentalHomeController",function(e,t,a,i,n){var s=i.currentUser.facility_id;i.currentUser.id;angular.element(document).ready(function(){a.post("/api/incomingDentalPatients",{facility_id:s,dept_id:9}).then(function(t){e.dentalPatients=t.data})});var r=[];e.showSearch=function(e){return a.post("/api/dentalAll",{searchKey:e,facility_id:s,dept_id:9}).then(function(e){r=e.data}),r},e.getDentalModal=function(e){var t=e;n.open({templateUrl:"/views/modules/clinic/dental/dental.html",size:"lg",animation:!0,controller:"dentalController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})}})}(),function(){"use strict";angular.module("authApp").controller("eyeController",["$scope","$http","$state","$rootScope","$uibModal","$uibModalInstance","object",function(e,t,a,i,n,s,r){e.selectedPatient=r;var o=i.currentUser.id,l=i.currentUser.facility_id,d=r.patient_id;e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t},e.closeModal=function(){s.dismiss()},e.removeFromSelection=function(e,t){var a=t.indexOf(e);t.splice(a,1)},e.templates=[{name:"Admission",url:"admission.html"},{name:"Internal Referral",url:"internal.html"},{name:"External Referral",url:"referral.html"},{name:"Deceased",url:"deceased.html"}],e.scharts=[{name:"6/60"},{name:"6/36"},{name:"6/24"},{name:"6/18"},{name:"6/12"},{name:"6/9"},{name:"6/6"},{name:"6/5"},{name:"E-chart"}],e.cfingers=[{name:"5 metres"},{name:"4 metres"},{name:"3 metres"},{name:"2 metres"},{name:"1 metres"}],e.snellenTemp=[],e.snelleen=function(t,a,i,n){if(1==t){for(var s=0;s<e.snellenTemp.length;s++)if(e.snellenTemp[s].name==i.name)return void swal(i.name+" already in your order list!");e.snellenTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.visit_id,facility_id:l,user_id:o,description:i.name,sub_category:n}),console.log(e.snellenTemp)}},e.eyeSide=[],e.eSide=function(t,a){e.eyeSide.push({category:t}),console.log(e.eyeSide)};var c=[];e.showSearch=function(e,a){return t.post("/api/eyeExaminations",{searchKey:e,category:a}).then(function(e){c=e.data}),c},e.eyeFindings=[],e.eyeExamination=function(t,a){for(var i=0;i<e.eyeFindings.length;i++)if(e.eyeFindings[i].id==t.id)return void swal(t.description+" already in your order list!");e.eyeFindings.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,description:t.description,sub_category:t.category}),console.log(e.eyeFindings)},e.saveSnellen=function(a){for(var i=0;i<a.length;i++)a[i].category=e.eyeSide[0].category;console.log(a),console.log(e.eyeSide[0].category),t.post("/api/eyeFindings",a).then(function(e){}),swal(a[0].category+" charts data saved","","success"),e.snellenTemp=[],e.eyeSide=[]},e.saveExamination=function(a){for(var i=0;i<a.length;i++)a[i].category=e.eyeSide[0].category;t.post("/api/eyeFindings",a).then(function(e){}),swal(a[0].category+" findings saved","","success"),e.eyeFindings=[],e.eyeSide=[]},angular.element(document).ready(function(){e.setTab(1),t.post("/api/previousVisits",{patient_id:d}).then(function(t){e.patientsVisits=t.data}),t.post("/api/getResults",{patient_id:d,dept_id:3}).then(function(t){e.radiology=t.data}),t.post("/api/getResults",{patient_id:d,dept_id:2}).then(function(t){e.labInvestigations=t.data})}),e.getPatientReport=function(a){t.post("/api/prevHistory",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevHistory=t.data}),t.post("/api/getPrevDiagnosis",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevDiagnosis=t.data}),t.post("/api/getPrevRos",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevRos=t.data}),t.post("/api/getPrevBirth",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevBirth=t.data}),t.post("/api/getPrevObs",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevObs=t.data}),t.post("/api/getPrevFamily",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevFamily=t.data}),t.post("/api/getPrevPhysical",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevPhysical=t.data}),t.post("/api/getInvestigationResults",{patient_id:a.patient_id,date_attended:a.date_attended,dept_id:2}).then(function(t){e.labInvestigationsz=t.data}),t.post("/api/getInvestigationResults",{patient_id:a.patient_id,date_attended:a.date_attended,dept_id:3}).then(function(t){e.radiologyResults=t.data}),t.post("/api/getPastMedicine",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.prevMedicines=t.data}),t.post("/api/getPastProcedures",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.pastProcedures=t.data}),t.post("/api/getAllergies",{patient_id:a.patient_id,date_attended:a.date_attended}).then(function(t){e.allergies=t.data})};var u=[];e.complaints=function(e){return t.post("/api/chiefComplaints",{search:e}).then(function(e){u=e.data}),u};var p=[];e.showCardio=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Cardiovascular"}).then(function(e){p=e.data}),p};var _=[];e.showRespiratory=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Respiratory"}).then(function(e){_=e.data}),_};var m=[];e.showGastro=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Gastrointerstinal"}).then(function(e){m=e.data}),m};var f=[];e.showMusculo=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Musculoskeletal"}).then(function(e){f=e.data}),f};var g=[];e.showGenito=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Genitourinary"}).then(function(e){g=e.data}),g};var h=[];e.showCNS=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Central Nervous System"}).then(function(e){h=e.data}),h};var v=[];e.showEndo=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Endocrine"}).then(function(e){v=e.data}),v};var y=[];e.showAllergy=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Allergy"}).then(function(e){y=e.data}),y};w=[];e.showMedication=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Medication"}).then(function(e){w=e.data}),w};var w=[];e.showIllness=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Past Medical History"}).then(function(e){w=e.data}),w};var b=[];e.showAdmission=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Admission History"}).then(function(e){b=e.data}),b};var P=[];e.showImmune=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Immunisation"}).then(function(e){P=e.data}),P};var S=[];e.showInspection=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Inspection"}).then(function(e){S=e.data}),S};var A=[];e.showPalpation=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Palpation"}).then(function(e){A=e.data}),A};var D=[];e.showPercussion=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Percussion"}).then(function(e){D=e.data}),D};var E=[];e.showAuscultation=function(e){return t.post("/api/reviewOfSystems",{search:e,category:"Auscultation"}).then(function(e){E=e.data}),E};var C=[];e.showDiagnosis=function(e){return t.post("/api/getDiagnosis",{search:e}).then(function(e){C=e.data}),C},e.allergyChecker=function(e){t.post("/api/getAllergy",{patient_id:e.patient_id}).then(function(e){swal("This Patient is allergic to "+e.data[0].descriptions,"","info")})},e.getSubDepts=function(a){t.post("/api/getSubDepts",{department_id:a}).then(function(t){e.subDepartments=t.data})},t.get("/api/getWards/"+l).then(function(t){e.wards=t.data}),t.get("/api/getSpecialClinics/"+l).then(function(t){e.clinics=t.data}),e.patientAdmission=function(e,t){if(0!=angular.isDefined(t)){var a=angular.extend({},e,t);n.open({templateUrl:"/views/modules/ClinicalServices/admission.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return a}}})}else swal("Oops! something went wrong..","Please search and select Patient then click ward button to admit patient!")},e.allergyChecker=function(e){t.post("/api/getAllergy",{patient_id:e.patient_id}).then(function(e){swal("This Patient is allergic to "+e.data[0].descriptions,"","info")})},e.getSubDepts=function(a){t.post("/api/getSubDepts",{department_id:a}).then(function(t){e.subDepartments=t.data})},e.getTests=function(a,i){if(0!=angular.isDefined(i)){var n=i.bill_id;3==i.main_category_id&&(n=1),t.post("/api/getPanels",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.panels=t.data}),t.post("/api/getSingleTests",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.singleTests=t.data}),t.post("/api/getTests",{patient_category_id:n,sub_dept_id:a,facility_id:l}).then(function(t){e.labTests=t.data,t.data.length>0?swal("Items with red marks are currently not available..","But You can still order them if necessary","info"):swal("If  no Tests displayed under this category..","Please, Contact Lab manager","info")})}else swal("Please...select Patient first","","error")},e.investigationOrders=[],e.unavailableOrders=[],e.orders=function(t,a,i){console.log();var n="";if(null!=i.patient_id){if(1==a){for(s=0;s<e.investigationOrders.length;s++)if(e.investigationOrders[s].item_id==t.item_id)return void swal(t.item_name+"  already in your order list!");if(1!=t.on_off){for(var s=0;s<e.unavailableOrders.length;s++)if(e.unavailableOrders[s].item_id==t.item_id)return void swal(t.item_name+"  already in your order list!");return void e.unavailableOrders.push({facility_id:l,visit_date_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name})}1!=i.main_category_id&&(n=i.bill_id),e.investigationOrders.push({requesting_department_id:i.dept_id,admission_id:"",facility_id:l,item_type_id:t.item_type_id,item_price_id:t.item_price_id,status_id:1,account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name,priority:"",clinical_note:"",payment_filter:n}),console.log(e.investigationOrders)}}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveInvestigation=function(a){if(""!=e.investigationOrders||null!=e.unavailableOrders){for(var i=0;i<e.investigationOrders.length;i++)e.investigationOrders[i].priority=a.priority,e.investigationOrders[i].clinical_note=a.clinical_note;""!=e.investigationOrders&&(t.post("/api/postInvestigations",e.investigationOrders).then(function(e){}),e.investigationOrders=[]),t.post("/api/postUnavailableInvestigations",e.unavailableOrders).then(function(e){}),swal("Investigation order successfully saved!"),e.unavailableOrders=[]}else swal("You dont have Items to save!","Please select Items first!")},e.getLabResults=function(a){var i={patient_id:a.patient_id,date_attended:a.date_attended,dept_id:a.dept_id};t.post("/api/getInvestigationResults",i).then(function(t){e.labResults=t.data})},e.getRadResults=function(a){var i={patient_id:a.patient_id,date_attended:a.date_attended,dept_id:a.dept_id};t.post("/api/getInvestigationResults",i).then(function(t){e.radResults=t.data})},e.complaintz=[],e.addComplaint=function(t,a,i){if(null!=i.patient_id){for(var n=0;n<e.complaintz.length;n++)if(e.complaintz[n].id==t.id)return void swal(t.description+" already in your wish list!");e.complaintz.push({admission_id:"",patient_id:i.patient_id,facility_id:l,visit_date_id:i.account_id,user_id:o,description:t.name,id:t.id,duration:a.durationqty,duration_unit:a.durationunit,status:"Chief Complaints"}),$("#complaint").val(""),$("#duration_qty").val(""),$("#duration_unit").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveComplaints=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].other_complaints=i.other_complaints,a[n].hpi=i.hpi;t.post("/api/postHistory",a).then(function(e){}),swal("Complaints successfully saved!","","success"),e.complaintz=[],$("#other_complaints").val(""),$("#hpi").val("")}else swal("Oops Data not saved!","Please fill all necessary fields, click 'Add' Button then 'Save Complaints' Button to save data..","error")},e.rosTemp=[],e.reviewOfSystems=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#cardio").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems2=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#respiratory").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems3=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#gastrointestinal").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems4=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#musculoskeletal").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems5=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#genitourinary").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems6=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#cns").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.reviewOfSystems7=function(t,a){null!=a.patient_id?(e.rosTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#endocrine").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveRoS=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].review_summary=i;t.post("/api/postRoS",a).then(function(e){}),swal("Review of systems data successfully Saved!","","success"),e.rosTemp=[],$("#review_summary").val("")}else swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.pastTemp=[],e.pastMedicals=function(t,a){null!=a.patient_id?(e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#allergy").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals3=function(t,a){null!=a.patient_id?(e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#illness").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals4=function(t,a){null!=a.patient_id?(e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#admission").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.pastMedicals5=function(t,a){null!=a.patient_id?(e.pastTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system_id:t.id,name:t.name,status:t.category}),$("#immunisation").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.savePastMedical=function(a,i){if(""!=a){for(var n=0;n<a.length;n++)a[n].other_past_medicals=i;t.post("/api/postPastMed",a).then(function(e){}),swal("Past medical history data successfully Saved!","","success"),e.pastTemp=[],$("#other_past_medicals").val("")}else swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.saveMedicals=function(e,a){t.post("/api/postPastEye",{user_id:o,patient_id:e.patient_id,visit_date_id:e.account_id,past_medical_history:a}).then(function(e){}),swal("Past medical history data successfully saved","","success"),$("#medical").val("")},e.saveOcular=function(e,a){t.post("/api/postPastEye",{user_id:o,patient_id:e.patient_id,visit_date_id:e.account_id,past_ocular_history:a}).then(function(e){}),swal("Past ocular history data successfully saved","","success"),$("#ocular").val("")},e.saveBirthHistory=function(e,a){if(null!=a.patient_id){var i={admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,antenatal:e.antenatal,natal:e.natal,post_natal:e.post_natal,nutrition:e.nutrition,growth:e.growth,development:e.development};t.post("/api/birthHistory",i).then(function(e){swal("Birth history data Successfully Saved!","","success")}),$("#antenatal").val(""),$("#natal").val(""),$("#post_natal").val(""),$("#nutrition").val(""),$("#growth").val(""),$("#development").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveObsGyn=function(e,a){if(null!=a.patient_id){var i={admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,menarche:e.menarche,menopause:e.menopause,menstrual_cycles:e.menstrual_cycles,pad_changes:e.pad_changes,recurrent_menstruation:e.recurrent_menstruation,contraceptives:e.contraceptives,pregnancy:e.pregnancy,lnmp:e.lnmp,gravidity:e.gravidity,parity:e.parity,living_children:e.living_children};t.post("/api/postObs",i).then(function(e){swal("Obstetrics and gynaecological data Successfully Saved!","","success")}),$("#menarche").val(""),$("#menopause").val(""),$("#menstrual_cycles").val(""),$("#pads").val(""),$("#recurrent_menstruation").val(""),$("#contraceptives").val(""),$("#pregnancy").val(""),$("#lnmp").val(""),$("#gravidity").val(""),$("#parity").val(""),$("#living_children").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.removeFromSelection=function(e,t){var a=t.indexOf(e);t.splice(a,1)},e.physicalMusculoskeletal=[],e.physicalRespiratory=[],e.physicalCardiovascular=[],e.physicalGastrointestinal=[],e.physicalGenitourinary=[],e.physicalCNS=[],e.physicalEndocrine=[],e.physicalMusculo=function(t,a,i){null!=a.patient_id?(e.physicalMusculoskeletal.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#musc_inspect").val(""),$("#musc_palpate").val(""),$("#musc_percu").val(""),$("#musc_ausc").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalResp=function(t,a,i){null!=a.patient_id?(e.physicalRespiratory.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#resp_inspect").val(""),$("#resp_palpate").val(""),$("#resp_percus").val(""),$("#resp_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalCardio=function(t,a,i){null!=a.patient_id?(e.physicalCardiovascular.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#cardio_inspect").val(""),$("#cardio_palpate").val(""),$("#cardio_percus").val(""),$("#cardio_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalGastro=function(t,a,i){null!=a.patient_id?(e.physicalGastrointestinal.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#gastro_inspect").val(""),$("#gastro_palpate").val(""),$("#gastro_percus").val(""),$("#gastro_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalGenito=function(t,a,i){null!=a.patient_id?(e.physicalGenitourinary.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#genito_inspect").val(""),$("#genito_palpate").val(""),$("#genito_percus").val(""),$("#genito_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalCns=function(t,a,i){null!=a.patient_id?(e.physicalCNS.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#cns_inspect").val(""),$("#cns_palpate").val(""),$("#cns_percus").val(""),$("#cns_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.physicalEndo=function(t,a,i){null!=a.patient_id?(e.physicalEndocrine.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,user_id:o,facility_id:l,system:i,category:t.category,observation:t.name}),$("#endo_inspect").val(""),$("#endo_palpate").val(""),$("#endo_percus").val(""),$("#endo_aus").val("")):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.savePhysicalExamination=function(a){""!=a?(t.post("/api/postPhysical",a).then(function(e){}),swal(a[0].system+"  system data successfully Saved!","","success"),e.physicalMusculoskeletal=[],e.physicalRespiratory=[],e.physicalCardiovascular=[],e.physicalGastrointestinal=[],e.physicalGenitourinary=[],e.physicalCNS=[],e.physicalEndocrine=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.saveLocalExams=function(e,a){if(null!=a){var i={admission_id:"",patient_id:e.patient_id,visit_date_id:e.account_id,user_id:o,facility_id:l,local_examination:a};t.post("/api/postLocalPhysical",i).then(function(e){}),swal("Local Examination","data for this patient saved","success"),$("#local_exam").val("")}else swal("Please write examination for this patient first","","error")},e.saveSocialCommunity=function(e,a){if(null!=a.patient_id){var i={patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,chronic_illness:e.chronic_illness,substance_abuse:e.substance_abuse,adoption:e.adoption,others:e.others};t.post("/api/familyHistory",i).then(function(e){swal("Family and social history data successfully Saved!","","success")}),$("#chronic_illness").val(""),$("#substance_abuse").val(""),$("#adoption").val(""),$("#others").val("")}else swal("Ooops!! no Patient selected","Please search and select patient first..")},e.diagnosisTemp=[],e.addProv=function(t,a,i){null!=a.patient_id?e.diagnosisTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.addDiff=function(t,a,i){null!=a.patient_id?e.diagnosisTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.addConf=function(t,a,i){null!=a.patient_id?e.diagnosisTemp.push({admission_id:"",patient_id:a.patient_id,visit_date_id:a.account_id,facility_id:l,user_id:o,diagnosis_description_id:t.id,description:t.description,status:i}):swal("Ooops!! no Patient selected","Please search and select patient first..")},e.saveDiagnosis=function(a){""!=a?(t.post("/api/postDiagnosis",a).then(function(e){swal("Diagnosis data successfully Saved!","","success")}),e.diagnosisTemp=[]):swal("Oops Data not saved!","Please search and select items then click 'Save' button to save data..")},e.internalTransfer=function(e,t){console.log(e);var a={sender_clinic_id:10,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,medical_record_number:t.medical_record_number,gender:t.gender,dob:t.dob,visit_id:t.account_id},i=angular.extend({},e,a);n.open({templateUrl:"/views/modules/ClinicalServices/internalTransfer.html",size:"lg",animation:!0,controller:"admissionModal",resolve:{object:function(){return i}}});s.dismiss()};var T=[];e.medicines=[],e.medicinesOs=[],e.searchItems=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getMedicine",{search:e,facility_id:l,patient_category_id:i}).then(function(e){T=e.data}),T;swal("Please search patient to be prescribed before searching Medicine!")}};var O=[];e.checkDosage=function(a,i){var n=a.item_name;t.post("/api/dosageChecker",{item_id:a.item_id,patient_id:i}).then(function(t){if(console.log(t.data),t.data.length>0){var a=t.data[0].duration-t.data[0].days;e.dosageCheck=t.data,swal("ATTENTION",n+" In Dosage Progress "+a+" day(s) remained to Complete a Dosage","info")}})},e.addMedicine=function(a,i,n){t.post("/api/getPrevMedicine",{patient_id:a.patient_id}).then(function(t){e.prevMedicines=t.data});var s="",r=i.main_category_id,d=a.dose*a.duration*24/a.frequency;if(null!=i)if(null!=n)if(null!=a.instructions){for(var c=0;c<e.medicines.length;c++)if(e.medicines[c].item_id==n.item_id)return void swal(n.item_name+" already in your order list!");1!=r&&(s=i.bill_id),3==r&&(r=1),t.post("/api/balanceCheck",{main_category_id:r,item_id:n.item_id,facility_id:l}).then(function(t){if(O=t.data,console.log(O),O.length>0&&O[0].balance>=d)e.medicines.push({facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:d,status_id:1,dose:a.dose,frequency:a.frequency,duration:a.duration,instructions:a.instructions,out_of_stock:"",payment_filter:s,account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name,dose_formulation:n.dose_formulation});else if(O.length<1||O[0].balance<d){if(1!=confirm("This Item is not available in Store..Do you want to prescribe anyway?"))return void swal("canceled","Choose different Item for Prescription");for(var r=0;r<e.medicinesOs.length;r++)if(e.medicinesOs[r].item_id==n.item_id)return void swal("Item already in your order list!");e.medicinesOs.push({facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:d,status_id:1,dose:a.dose,frequency:a.frequency,duration:a.duration,instructions:a.instructions,out_of_stock:"OS",account_number_id:i.account_id,patient_id:i.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name}),swal("Item added under Out of Stock category","","success")}})}else swal("Please Write Instructions and click 'Add to List' Button","","error");else swal("Please search and select medicine!");else swal("Please search and select Patient to prescribe")},e.saveMedicine=function(){""!=e.medicines||""!=e.medicinesOs?(""!=e.medicines&&(t.post("/api/postMedicines",e.medicines).then(function(e){}),e.medicines=[]),t.post("/api/outOfStockMedicine",e.medicinesOs).then(function(e){}),swal("Patient successfully prescribed!","","success"),e.medicinesOs=[]):swal("No Items to Save,Please choose items..","","error")},e.prevMedics=function(a){t.post("/api/getPrevMedicine",{patient_id:a.patient_id}).then(function(t){e.prevMedicines=t.data})},e.prevProcedure=function(a){t.post("/api/getPrevProcedures",{patient_id:a.patient_id}).then(function(t){e.prevProcedures=t.data})};var I=[];e.procedures=[],e.searchProcedures=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getPatientProcedures",{search:e,facility_id:l,patient_category_id:i}).then(function(e){I=e.data}),I;swal("Please search patient before searching procedures!")}};var M=[],U=[];e.supplies=[],e.suppliesOS=[],e.searchMediSupplies=function(e,a){var i=a.bill_id;{if(null!=i)return 3==a.main_category_id&&(i=1),t.post("/api/getMedicalSupplies",{search:e,facility_id:l,patient_category_id:i}).then(function(e){M=e.data}),M;swal("Please search patient before searching medical supplies!")}},e.addSupplies=function(a,i,n){var s="",r=a.main_category_id,d=i;if(null!=a)if(null!=n){for(var c=0;c<e.supplies.length;c++)if(e.supplies[c].item_id==n.item_id)return void swal(n.item_name+" already in your order list!","","info");1!=r&&(s=a.bill_id),3==r&&(r=1),t.post("/api/balanceCheck",{main_category_id:r,item_id:n.item_id,facility_id:l}).then(function(t){if((U=t.data).length>0&&U[0].balance>=d)e.supplies.push({out_of_stock:"",payment_filter:s,admission_id:"",facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:i,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name});else if(U.length<1||U[0].balance<d){if(1!=confirm("This Item is not available in Store..Do you want to select it anyway?","","info"))return void swal("canceled","Choose different Item","info");for(var r=0;r<e.suppliesOS.length;r++)if(e.suppliesOS[r].item_id==n.item_id)return void swal(n.item_name+" already in your order list!");e.suppliesOS.push({out_of_stock:"OS",payment_filter:s,admission_id:"",facility_id:l,item_type_id:n.item_type_id,item_price_id:n.price_id,quantity:i,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:o,item_id:n.item_id,item_name:n.item_name}),swal("Item added under Out of Stock category","","success")}}),console.log(e.supplies),$("#supplies").val(""),$("#qty").val("")}else swal("Please search and select Medical supplies!","","error");else swal("Please search and select Patient","","error")},e.saveSupplies=function(){""!=e.supplies||""!=e.suppliesOS?(""!=e.supplies&&(t.post("/api/postMedicalSupplies",e.supplies).then(function(e){}),e.supplies=[]),t.post("/api/outOfStockMedicalSupplies",e.suppliesOS).then(function(e){}),swal("Patient's medical supplies successfully saved!","","success"),e.suppliesOS=[]):swal("No Items to Save,Please choose items..","","error")},e.getDefaultProcedures=function(a){var i=a.bill_id;null!=i?(3==a.main_category_id&&(i=1),t.post("/api/getProcedures",{facility_id:l,patient_category_id:i}).then(function(t){e.defaultProcedures=t.data})):swal("Please search patient before searching procedures!")},e.addProcedure=function(t,a){var i="";if(null!=a.patient_id)if(null!=t.item_id){for(var n=0;n<e.procedures.length;n++)if(e.procedures[n].item_id==t.item_id)return void swal(t.item_name+" already in your order list!","","info");1!=a.main_category_id&&(i=a.bill_id),e.procedures.push({payment_filter:i,admission_id:"",facility_id:l,item_type_id:t.item_type_id,item_price_id:t.price_id,quantity:1,status_id:1,account_number_id:a.account_id,patient_id:a.patient_id,user_id:o,item_id:t.item_id,item_name:t.item_name})}else swal("Please search and select Procedure!");else swal("Please search and select Patient to prescribe")},e.saveProcedures=function(a){t.post("/api/postPatientProcedures",a).then(function(e){}),swal("Patient procedures successfully saved!","","success"),e.procedures=[]},e.deceased=function(a,i){if(0!=angular.isDefined(i)){var n={patient_id:a.patient_id,user_id:o,facility_id:l,immediate_cause:i.immediate_cause,underlying_cause:i.underlying_cause};t.post("/api/postDeceased",n).then(function(e){}),e.corpse=null,swal(a.first_name+" "+a.last_name+" sent to Last office","","success")}else swal("An error occurred","Data not saved...Please write causes of death and click send to last office button","error")}}])}(),function(){"use strict";angular.module("authApp").controller("eyeHomeController",function(e,t,a,i,n){var s=i.currentUser.facility_id;i.currentUser.id;angular.element(document).ready(function(){a.post("/api/incomingEyePatients",{facility_id:s,dept_id:8}).then(function(t){e.eyePatients=t.data})});var r=[];e.showSearch=function(e){return a.post("/api/eyeAll",{searchKey:e,facility_id:s,dept_id:8}).then(function(e){r=e.data}),r},e.getEyeModal=function(e){var t=e;n.open({templateUrl:"/views/modules/clinic/eye/eye.html",size:"lg",animation:!0,controller:"eyeController",windowClass:"app-modal-window",resolve:{object:function(){return t}}})}})}();