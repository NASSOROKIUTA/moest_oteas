<div class="wrapper wrapper-content animated fadeInRight">
<div class="row">
<div class="col-md-12 form-box">
<form  role="form" class="">
<fieldset>
<div class="form-top">
<div class="form-top-left">
<h3><span><i class="fa fa-user-md" aria-hidden="true"></i></span>&nbsp;LABORATORY DASHBOARD</h3>
</div>
</div>
<br>
<p><h3><b>Today's Status::>>&nbsp;Sample to Collect: {{lab_orders.length}} &nbsp; Sample Collected: {{lab_order_collected.length}} &nbsp; Awaiting Test: {{lab_order_collected.length}} &nbsp; Awaiting Validation: {{lab_orders_status.length}} &nbsp; Total Patients Today: {{lab_orders_status.length}}</h3></p>

<br>

<uib-accordion close-others="oneAtATime">

<div uib-accordion-group heading="LABORATORY SAMPLE COLLECTION" panel-class="panel-danger">

<h3>
<ul class="nav nav-tabs nav-justified">
<li ng-class="{active: isSet(1)}" ng-click="get_lab_order()"><a href ng-click="setTab(1)">Sample to Collect</a></li>
<li ng-class="{active: isSet(2)}" ng-click="get_lab_order()"><a href ng-click="setTab(2)">Sample Collected</a></li>
</ul>
</h3>

<div class="row">
<div ng-show="isSet(1)">
<div class="container">
<div class="row">
<div class="col-md-12">
<div class="panel-default">
<div class="panel-heading"></div>
<div class="panel-body">

<div class="col-md-12">
<table class="table table-bordered table-striped" style="width:100%" >
<b>Sample to Collect</b>&nbsp;
<div class="form-group">
<div class="input-group">
</div>
</div>
<thead>
<tr>
<td class="text-navy">
PATIENT ID
</td>
<td class="text-navy">
PATIETN NAME
</td>
<td class="text-navy">
REQUEST FROM
</td>
<td class="text-navy">
REQUESTED TO
</td>
<td class="text-navy">
TEST REQUESTED
</td>
<td class="text-navy" width="20%">
SAMPLE COLLECTED NO
</td>
<td colspan="3" align="center">
<h3 class="text-navy">
ACTION
</h3>
</td>
</tr>
</thead>

<tbody>
<tr ng-repeat="laborder in lab_orders | filter:search track by $index">
<td>{{laborder.medical_record_number}} </td>
<td>{{laborder.first_name}}&nbsp;
{{laborder.middle_name}}&nbsp;
{{laborder.last_name}}
</td>
<td>OPD</td>
<td>{{laborder.sub_department_name}}</td>
<td>{{laborder.item_name}}</td>
<td ng-if="!e">
<input type="text" class="form-control" disabled ng-model="order_numbers" ng-value="order_number">
</td>
<td ng-if="order_number">
<button class="btn btn-success" ng-click="savepatientlaborder(order_number,laborder)">Save Sample</button>
</td>
<td ng-if="order_number">
<button type="button" ng-click="cancelsample(order_number)" class="btn btn-primary">Cancel Samples</button>
</td>
<td>
<button class="btn btn-success" ng-click="createLabsOrderNo(laborder)" >Collect Sample</button>
</td>
</tr>
</tbody>

</table>
</div>

</div>

</div>
</div>
</div>
</div>
</div>
</div>



<div class="row">
<div ng-show="isSet(2)">
<div class="container">
<div class="row">
<div class="col-md-12">
<div class="panel-default">
<div class="panel-heading"></div>
<div class="panel-body">

<div class="col-md-12">
<table class="table table-bordered table-striped" style="width:100%" >
<b>Sample Collected</b>&nbsp;
<div class="form-group">
<div class="input-group">
</div>
</div>
<thead>
<tr>
<td class="text-navy">
ORDER ID
</td>
<td class="text-navy">
PATIENT ID
</td>
<td class="text-navy">
PATIETN NAME
</td>
<td class="text-navy">
BELONGS TO
</td>
<td class="text-navy">
TEST REQUESTED
</td>
<td class="text-navy">
SAMPLE COLLECTED
</td>
<td class="text-navy">
SAMPLE NO
</td>


</tr>
</thead>

<tbody>
<tr ng-repeat="ordercollected in lab_order_collected | filter:search track by $index">
<td> {{ordercollected.tbl_lab_order_id}}</td>
<td>{{ordercollected.medical_record_number}} </td>
<td>{{ordercollected.first_name}}&nbsp;{{ordercollected.middle_name}}&nbsp;{{ordercollected.last_name}}</td>
<td>{{ordercollected.sub_department_name}}</td>
<td>{{ordercollected.item_name}}</td>
<td></td>
<td>
{{ordercollected.sample_no}}
</td>
</tr>
</tbody>

</table>

</div>



</div>

</div>
</div>
</div>
</div>
</div>
</div>

</div>
<!-- END OF FIRST uib-accordion -->

<div ng-repeat='subdepartment in subdepartment' ng-click="getlaborderperdepartment(subdepartment)" uib-accordion-group heading={{subdepartment.sub_department_name}} panel-class="panel-danger">

<h3>
<ul class="nav nav-tabs nav-justified">
<li ng-class="{active: isSet(3)}" ng-click="getmicrobiologyrequest()"><a href ng-click="setTab(3)">Awaiting Test</a></li>
<li ng-class="{active: isSet(4)}" ng-click="get_lab_order()"><a href ng-click="setTab(4)">Awaiting Validation</a></li>
</ul>
</h3>


<div class="row">
<div ng-show="isSet(3)">
<div class="container">
<div class="row">
<div class="col-md-12">
<div class="panel-default">
<div class="panel-heading"></div>
<div class="panel-body">

<div class="col-md-12">
<table class="table table-bordered table-striped" style="width:100%" >
<b>Awaiting Test</b>&nbsp;
<div class="form-group">
<div class="input-group">
</div>
</div>
<thead>
<tr>
<td class="text-navy">
ORDER ID
</td>
<td class="text-navy">
PATIENT ID
</td>
<td class="text-navy">
PATIENT DETAILS
</td>
<td class="text-navy">
SOURCE
</td>
<td class="text-navy">
TO DEPARTMENT
</td>
<td class="text-navy">
SAMPLE COLLECTED
</td>
<td class="text-navy">
SAMPLE NO
</td>
<td class="text-navy">
CLINICAL NOTE
</td>
<td class="text-navy">
ACTION
</td>
</tr>
</thead>

<tbody>
<tr ng-repeat="ordercollected in laborderperdepartment | filter:search track by $index">

<td>{{ordercollected.laborderid}} </td>
<td>{{ordercollected.medical_record_number}} </td>
<td>{{ordercollected.first_name}}&nbsp;{{ordercollected.middle_name}}&nbsp;{{ordercollected.last_name}}</td>
<td></td>
<td>{{ordercollected.sub_department_name}}</td>
<td>{{ordercollected.item_name}}</td>
<td>
{{ordercollected.sample_no}}
</td>
<td>
{{ordercollected.clinical_note}}
</td>
<td>
<button class="btn btn-success" ng-Click="postpatientlaborder(ordercollected)">Post Results</button>
</td>

</tr>
</tbody>

</table>
</div>
<br><br>

<div class="form-bottom" >
<div class="row">


<table class="table table-bordered">
<h2><p align="center" class="text-navy">POST PATIENT LABORATORY RESULTS</p></h2>  
<tr> 
<td class="text-navy">PATIENT NAME:</td> 
<td class="text-navy">GENDER:</td>
<td class="text-navy">DOB:</td> 
<td class="text-navy">MRN:</td>
<td class="text-navy">SAMPLE NO:</td>
</tr>
<tr>
<td>{{loadpostresultform[0].first_name}}&nbsp;
{{loadpostresultform[0].middle_name}}&nbsp;
{{loadpostresultform[0].last_name}}
</td>
<td>{{loadpostresultform[0].gender}}</td>
<td>{{loadpostresultform[0].dob}}</td> 

<td>{{loadpostresultform[0].medical_record_number}}</td>
<td>{{loadpostresultform[0].sample_no}}</td> 
</tr>

</table>

<table class="table table-bordered">  
<tr> 
<td class="text-navy">ORDER ID:</td> 
<td class="text-navy">INVESTIGATION:</td> 
<td class="text-navy">SAMPLE:</td>
<td class="text-navy">NORMAL:</td>
<td class="text-navy">VALUE:</td>
<td class="text-navy">UNIT:</td>
<td class="text-navy">COLOR:</td> 
<td class="text-navy">RESULT:</td>
<td class="text-navy">RESULT:</td>
<td class="text-navy">UPLOAD ATTACHEMENT:</td>
</tr>
<tr ng-repeat="(index, postpatientresult) in loadpostresultform">
<td>{{postpatientresult.laborderid}}</td>
<td>{{postpatientresult.item_name}}</td>
<td>{{postpatientresult.sample_to_collect}}</td>
<td>{{postpatientresult.item_indicator}}</td> 
<td>{{postpatientresult.item_range}}</td>
<td>{{postpatientresult.unit}}</td>
<td bgcolor="{{postpatientresult.indicator_color_code}}">STATUS</td>
<td>
<input ng-model="postpatientresult[index]" type="text" data-toggle="tooltip" class="form-control" placeholder="Enter Patient Lab Sample Results">
</td> 
<td>
<select class="btn-sm" ng-model="loadpostresultform.result">
<option value="" selected disabled><b>SELECT RESULT</b></option>
<option>POSITIVE</option>
<option>NEGATIVE</option>
</select>
</td> 
<td>
<input type="file" name="fileupload" value="fileupload" id="fileupload"> <label for="fileupload"></label>
</td>  
</tr>

</table>


<button type="submit" class="btn btn-success pull-right" ng-Click="send_lab_result(loadpostresultform)">
<span fa fa-upload></span>Send Lab Results
</button>

</div>
</div>

</div>
</div>
</div>
</div>
</div>
</div>
</div>

</div>

</uib-accordion>

</fieldset>
</form>
</div>
</div>
</div>