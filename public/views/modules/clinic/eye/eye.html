<md-dialog  class="fullscreen-dialog">
    <md-toolbar>
        <div class="md-toolbar-tools">
            <p style="text-align: right;" ng-if="selectedPatient.first_name.length >0"><span><i class="fa fa-user" aria-hidden="true"></i></span>&nbsp;&nbsp;&nbsp;{{selectedPatient.first_name}}
                {{selectedPatient.middle_name}} {{selectedPatient.last_name}}&nbsp;&nbsp;&nbsp;
                {{"MRN: "+selectedPatient.medical_record_number}}&nbsp;&nbsp;&nbsp;
                {{"DoB: "+selectedPatient.dob}}&nbsp;&nbsp;&nbsp;
                {{"Gender: "+selectedPatient.gender}}&nbsp;&nbsp;&nbsp;
                {{"Age: "+selectedPatient.age}}</p>
            <span flex></span>
            <md-button class="md-icon-button" ng-click="cancel()">
                <md-icon md-svg-src="/svg/ic_close_24px.svg" aria-label="Close dialog"></md-icon>
            </md-button>
        </div>
    </md-toolbar>

    <md-dialog-content>
        <md-tabs md-dynamic-height md-border-bottom>
            <md-tab label="Previous visits">
                  <md-content class="md-padding" style="padding:2em;">
                      <div layout="row">
                          <div flex="20">
                              <md-list style="color:white;font-weight:700">
                                  <md-list-item style="padding:0;background-color:teal;margin:2px;cursor: pointer;" ng-click="getPatientReport(vt)" class="md-1-line" ng-repeat="vt in patientsVisits">
                                      {{vt.created_at}}
                                  </md-list-item>
                              </md-list>
                          </div>
                          <div flex="80">
                              <md-card>
                                  <md-card-content>
                                      <table class="full-width">
                                          <thead>
                                          <th class="mdl-data-table__cell--non-numeric"></th>
                                          <th class="mdl-data-table__cell--non-numeric full-width">{{selectedPatient.first_name}}
                                              {{selectedPatient.middle_name}}
                                              {{selectedPatient.last_name}}&nbsp;&nbsp;&nbsp;
                                              {{"MRN: "+selectedPatient.medical_record_number}}                                                               {{"DoB: "+selectedPatient.dob}}&nbsp;&nbsp;&nbsp;
                                              {{"Gender: "+selectedPatient.gender}}&nbsp;&nbsp;&nbsp;
                                              {{"Age: "+selectedPatient.age}}</th>
                                          </thead>
                                          <tbody>
                                          <tr ng-if="vitals.length>0">
                                              <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                  <strong>Vital signs</strong></td>
                                          </tr>
                                          <tr ng-repeat="vt in vitals" ng-if="vitals.length>0">
                                              <td class="mdl-data-table__cell--non-numeric">{{vt.vital_name}}</td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{vt.vital_sign_value}} &nbsp; {{vt.si_unit}}
                                              </td>
                                          </tr>
                                          <tr ng-if="prevHistory.length>0">
                                              <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                  <strong>Complaints</strong></td>
                                          </tr>
                                          <tr ng-if="prevHistory.length>0" ng-repeat="ph in prevHistory">
                                              <td class="mdl-data-table__cell--non-numeric">{{ph.status}}</td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{ph.description+' since '+ph.duration+' '+ph.duration_unit}}
                                                  <br>
                                              </td>
                                          </tr>
                                          <tr ng-if="otherComplaints.length>0" ng-repeat="ot in otherComplaints">
                                              <td class="mdl-data-table__cell--non-numeric"><span>Other Complaints</span></td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{ot.other_complaints}}
                                              </td>
                                          </tr>

                                          <tr ng-if="hpi.length>0" ng-repeat="h in hpi">
                                              <td class="mdl-data-table__cell--non-numeric"><span>History of Presenting Illness</span></td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{h.hpi}}
                                              </td>
                                          </tr>
                                          <tr ng-if="prevRos.length>0">
                                              <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                  <strong>Review of systems</strong></td>
                                          </tr>
                                          <tr ng-repeat="ros in prevRos" ng-if="prevRos.length>0">
                                              <td class="mdl-data-table__cell--non-numeric">{{ros.status}}</td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{ros.name}}
                                              </td>
                                          </tr>
                                          <tr ng-if="prevRosSummary.length>0" ng-repeat="summary in prevRosSummary">
                                              <td class="mdl-data-table__cell--non-numeric"><span>RoS summary</span></td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{summary.review_summary}}
                                              </td>
                                          </tr>

                                          <tr ng-if="allergies.length>0">
                                              <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                  <strong>Allergies</strong></td>
                                          </tr>
                                          <tr ng-repeat="allergy in allergies" ng-if="allergies.length>0">
                                              <td class="mdl-data-table__cell--non-numeric">{{allergy.status}}</td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{allergy.descriptions}}</td>
                                          </tr>
                                          <tr ng-if="prevFamily.length>0">
                                              <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                  <strong>Family and Social History</strong></td>
                                          </tr>
                                          <tr ng-if="prevFamily.length>0">
                                              <td class="mdl-data-table__cell--non-numeric">Family and social
                                                  history</td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{prevFamily[0].chronic_illness}}.{{prevFamily[0].substance_abuse}}. <br>                                                                    {{prevFamily[0].adoption}}.{{prevFamily[0].others}}
                                              </td>
                                          </tr>
                                          <tr ng-if="prevGen.length>0">
                                              <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                  <strong>General examination</strong></td>
                                          </tr>
                                          <tr ng-if="prevGen.length>0" ng-repeat="gn in prevGen">
                                              <td class="mdl-data-table__cell--non-numeric">General examination</td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{gn.gen_examination}}
                                              </td>
                                          </tr>
                                          <tr ng-if="prevLocal.length>0">
                                              <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                  <strong>Local examination</strong></td>
                                          </tr>
                                          <tr ng-if="prevLocal.length>0" ng-repeat="lc in prevLocal">
                                              <td class="mdl-data-table__cell--non-numeric">Local examination</td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{lc.local_examination}}
                                              </td>
                                          </tr>
                                          <tr ng-if="prevSystemic.length>0">
                                              <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                  <strong>Systemic examination</strong></td>
                                          </tr>
                                          <tr ng-if="prevSystemic.length>0" ng-repeat="sys in prevSystemic">
                                              <td class="mdl-data-table__cell--non-numeric">{{sys.system}}</td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{sys.category +' - '+ sys.observation}}
                                              </td>
                                          </tr>
                                          <tr ng-if="prevSummary.length>0">
                                              <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                  <strong>Systemic examination summary</strong></td>
                                          </tr>
                                          <tr ng-if="prevSummary.length>0">
                                              <td class="mdl-data-table__cell--non-numeric">Systemic examination summary</td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{prevSummary[0].summary_examination}}
                                              </td>
                                          </tr>
                                          <tr ng-if="prevDiagnosis.length>0">
                                              <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                  <strong>Diagnosis</strong></td>
                                          </tr>
                                          <tr ng-repeat=" diag in prevDiagnosis" ng-if="prevDiagnosis.length>0">
                                              <td class="mdl-data-table__cell--non-numeric"> {{diag.status}}
                                              </td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{diag.description}}
                                              </td>
                                          </tr>
                                          <tr ng-if="labInvestigationsz.length>0">
                                              <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                  <strong>Investigations</strong></td>
                                          </tr>
                                          <tr ng-repeat=" lb in labInvestigationsz" ng-if="labInvestigationsz.length>0">
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{lb.item_name}} </td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{lb.description+' '+lb.unit}}
                                              </td>
                                          </tr>
                                          <tr ng-repeat=" rd in radiologyResults" ng-if="radiologyResults.length>0">
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  <div class="card">
                                                      <div class="card-image">
                                                          <!--<a><img class="img-responsive" src="/uploads/{{img.attached_image}}" width="100px;" height="100px"></a>-->
                                                      </div>
                                                      <!-- card image -->
                                                      <div class="card-content">{{img.description}}</div>
                                                      <!-- card content -->
                                                  </div>
                                              </td>
                                          </tr>
                                          <tr ng-if="prevMedicines.length>0">
                                              <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                  <strong>Medications</strong></td>
                                          </tr>
                                          <tr ng-repeat="med in prevMedicines" ng-if="prevMedicines.length>0">
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{med.item_name}}</td>
                                              <td class="mdl-data-table__cell--non-numeric">{{med.dose}},
                                                  {{med.frequency}},{{'for '+ med.duration}}</td>

                                          </tr>
                                          <tr ng-if="pastProcedures.length>0">
                                              <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                  <strong>Procedures</strong></td>
                                          </tr>
                                          <tr ng-repeat="pro in pastProcedures" ng-if="pastProcedures.length>0">
                                              <td class="mdl-data-table__cell--non-numeric">{{pro.item_category}}</td>
                                              <td class="mdl-data-table__cell--non-numeric">
                                                  {{pro.item_name}}</td>
                                          </tr>
                                          </tbody>
                                      </table>
                                  </md-card-content>
                              </md-card>

                          </div>
                      </div>
                  </md-content>
                </md-tab>
			<md-tab label="vital signs" ng-click="getTodaysVitals(selectedPatient)">
                    <md-content class="md-padding">
                        <div layout="row">
                            <div flex="20">
                                <md-list style="color:white;font-weight:700">
                                    <md-list-item style="padding:0;background-color:teal;margin:2px;cursor: pointer;" ng-click="getPatientVitals(vt)" class="md-1-line" ng-repeat="vt in vitalTime">
                                        {{vt.created_at}}
                                    </md-list-item>
                                </md-list>
                            </div>
							<div flex="80">
							<table  ng-if="vitalData.length>0" class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" width="100%">
							<thead>
							<th class="mdl-data-table__cell--non-numeric">Name</th>
							<th class="mdl-data-table__cell--non-numeric">Value</th>
							<th class="mdl-data-table__cell--non-numeric">Time taken</th>
							<th class="mdl-data-table__cell--non-numeric">Staff's names</th>
							</thead>
							<tbody>
							<tr ng-repeat="vt in vitalData">
                                        <td class="mdl-data-table__cell--non-numeric">{{vt.vital_name}}</td>
                                        <td class="mdl-data-table__cell--non-numeric">
                                            {{vt.vital_sign_value}} &nbsp;&nbsp;&nbsp; {{vt.si_unit}}</td>
										<td class="mdl-data-table__cell--non-numeric">{{vt.created_at}}</td>
										<td class="mdl-data-table__cell--non-numeric">{{vt.submited_by}}</td>
                            </tr>
							</tbody>
							</table>
							</div>
                        </div>
                    </md-content>
                </md-tab>
            <md-tab label="eye examination">
                <md-content class="md-padding">
                    <!--vertical tabs start-->
                    <div layout="row">
                        <div flex="25"></div>
                        <div flex="50">
                            <md-radio-group layout="row">
                                <md-radio-button value="left eye" class="md-primary" ng-model="eye.left_eye" ng-click="eSide('Left Eye',selectedPatient)">Left Eye</md-radio-button>
                                <md-radio-button value="right eye" class="md-primary" ng-model="eye.right_eye" ng-click="eSide('Right Eye',selectedPatient)">Right Eye </md-radio-button>
                            </md-radio-group>
                        </div>
                        <div flex="25"></div>
                    </div>
                    <vertical-tabs>
                        <vertical-tab-pane title="Visual Acuity (VA)">
                            <div layout="row">
                                <div flex="30">
                                    <p>Snellen chart/e-chart</p>
                                    <md-checkbox aria-label="" ng-repeat="chart in scharts"ng-model="checked" ng-change="snelleen(checked,selectedPatient,chart,'Snellen Chart/E-chart')">
                                        {{chart.name}}
                                    </md-checkbox>
                                </div>
                                <div flex="10"></div>
                                <div flex="40">
                                    <p>Finger counting(CF)</p>
                                    <md-checkbox aria-label="" ng-repeat="ch in cfingers" ng-model="checked" ng-change="snelleen(checked,selectedPatient,ch,'Counting Fingers')">
                                        {{ch.name}}
                                    </md-checkbox>
                                </div>
                            </div>
                            <div layout="row">
                                <div flex="25"><md-input-container class="md-block">
                                    <label>Hand movement</label>
                                    <textarea ng-model="va.hand_movement" autocomplete="off" id="hand_movement" md-maxlength="500" rows="3" md-select-on-focus></textarea>
                                </md-input-container></div>
                                <div flex="10"></div>
                                <div flex="25"><md-input-container class="md-block">
                                    <label>Perception of light</label>
                                    <textarea ng-model="va.perception_light" autocomplete="off" id="pl" md-maxlength="500" rows="3" md-select-on-focus></textarea>
                                </md-input-container></div>
                                <div flex="10"></div>
                                <div flex="25"><md-input-container class="md-block">
                                    <label>Non perception of light</label>
                                    <textarea ng-model="va.non_perception_light" autocomplete="off" id="npl" md-maxlength="500" rows="3" md-select-on-focus></textarea>
                                </md-input-container></div>
                            </div>
                            <div layout="row">
                                <div flex="50">
                                    <md-card  ng-if="snellenTemp.length>0">
                                        <md-card-content>
                                            <table class="mdl-data-table mdl-js-data-table">
                                                <thead>
                                                <tr>
                                                    <th>Description</th>
                                                    <th>Category</th>
                                                    <th>Action</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr  ng-repeat="item in snellenTemp">
                                                    <td >{{item.description}}</td>
                                                    <td >{{item.sub_category}}</td>
                                                    <td ><span ng-click="removeFromSelection(item,snellenTemp)" style="cursor: pointer;" >Remove</span></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </md-card-content>
                                    </md-card>
                                </div>
                                <div flex="5"><md-button class="md-raised md-primary" ng-click="saveSnellen(snellenTemp,va)">Save</md-button></div>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Examination of the eye">
                            <div layout="row">
                                <div flex="25">
                                    <md-input-container class="md-block">
                                        <input type="text" ng-model="selectedConjuctiva" typeahead-on-select="eyeExamination($item,selectedPatient)" uib-typeahead="conjuctiva as conjuctiva.description for conjuctiva in showSearch($viewValue,'Conjuctival/Sclera') |filter:$viewValue |limitTo:5" placeholder="Conjuctiva/sclera">
                                    </md-input-container>
                                </div>
                                <div flex="25">
                                    <md-input-container class="md-block">
                                        <input type="text"  ng-model="selectedAC" typeahead-on-select="eyeExamination($item,selectedPatient)" uib-typeahead="ac as ac.description for ac in showSearch($viewValue,'Anterior Chamber') |filter:$viewValue |limitTo:5" placeholder="Anterior chamber">
                                    </md-input-container>
                                </div>
                                <div flex="25">
                                    <md-input-container class="md-block">
                                        <input type="text"  ng-model="selectedExtraocular" typeahead-on-select="eyeExamination($item,selectedPatient)" uib-typeahead="ex as ex.description for ex in showSearch($viewValue,'Extraocular') |filter:$viewValue |limitTo:5" placeholder="Extraocular Muscle movement">
                                    </md-input-container>
                                </div>
                                <div flex="25">
                                    <md-input-container class="md-block">
                                        <input type="text" ng-model="selectedEyelid" typeahead-on-select="eyeExamination($item,selectedPatient)" uib-typeahead="el as el.description for el in showSearch($viewValue,'Eyelid') |filter:$viewValue |limitTo:5" placeholder="Eyelid Findings">
                                    </md-input-container>
                                </div>
                            </div>
                            <div layout="row">
                                <div flex="25"><md-input-container class="md-block">
                                    <input type="text"  ng-model="selectedCornea" typeahead-on-select="eyeExamination($item,selectedPatient)" uib-typeahead="cor as cor.description for cor in showSearch($viewValue,'Cornea') |filter:$viewValue |limitTo:5" placeholder="Cornea">
                                </md-input-container></div>
                                <div flex="25"><md-input-container class="md-block">
                                    <input type="text"  ng-model="selectedPupil" typeahead-on-select="eyeExamination($item,selectedPatient)" uib-typeahead="pl as pl.description for pl in showSearch($viewValue,'Pupil') |filter:$viewValue |limitTo:5" placeholder="Pupil">
                                </md-input-container></div>
                                <div flex="25"><md-input-container class="md-block">
                                    <input type="text"   ng-model="selectedLens" typeahead-on-select="eyeExamination($item,selectedPatient)" uib-typeahead="le as le.description for le in showSearch($viewValue,'Lens') |filter:$viewValue |limitTo:5" placeholder="Lens">
                                </md-input-container></div>
                                <div flex="25">
                                    <div layout="row">
                                        <md-card>
                                            <md-card-content>
                                                <table class="mdl-data-table mdl-js-data-table" ng-if="eyeFindings.length>0">
                                                    <thead>
                                                    <tr>
                                                        <th>Description</th>
                                                        <th>Category</th>
                                                        <th>Action</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr  ng-repeat="item in eyeFindings">
                                                        <td >{{item.description}}</td>
                                                        <td >{{item.sub_category}}</td>
                                                        <td ><span ng-click="removeFromSelection(item,eyeFindings)" style="cursor: pointer;" >Remove</span></td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="2"><md-button class="md-raised md-primary" ng-click="saveExamination(eyeFindings)">Save</md-button></td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </md-card-content>
                                        </md-card>
                                    </div>
                                </div>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Fundoscopy">
                            <div layout="row">
                                <div flex="20">
                                    <md-input-container class="md-block">
                                        <input type="text" ng-model="selectedVitreous" typeahead-on-select="eyeExamination($item,selectedPatient)" uib-typeahead="vt as vt.description for vt in showSearch($viewValue,'Vitreous') |filter:$viewValue |limitTo:5" placeholder="Vitreous">
                                    </md-input-container>
                                </div>
                                <div flex="20">
                                    <md-input-container class="md-block">
                                        <input type="text"  ng-model="selectedBlood" typeahead-on-select="eyeExamination($item,selectedPatient)" uib-typeahead="bv as bv.description for bv in showSearch($viewValue,'Blood vessels') |filter:$viewValue |limitTo:5" placeholder="Blood Vessels">
                                    </md-input-container>
                                </div>
                                <div flex="20">
                                    <md-input-container class="md-block">
                                        <input type="text"  ng-model="selectedExud" typeahead-on-select="eyeExamination($item,selectedPatient)" uib-typeahead="ex as ex.description for ex in showSearch($viewValue,'Exudates') |filter:$viewValue |limitTo:5" placeholder="Exudates">
                                    </md-input-container>
                                </div>
                                <div flex="20">
                                    <md-input-container class="md-block">
                                        <input type="text"  ng-model="selectedMacular" typeahead-on-select="eyeExamination($item,selectedPatient)" uib-typeahead="mc as mc.description for mc in showSearch($viewValue,'Macular') |filter:$viewValue |limitTo:5" placeholder="Macular">
                                    </md-input-container>
                                </div>
                                <div flex="20">
                                    <md-input-container class="md-block">
                                        <input type="text"  ng-model="selectedDisc" typeahead-on-select="eyeExamination($item,selectedPatient)" uib-typeahead="dc as dc.description for dc in showSearch($viewValue,'Disc') |filter:$viewValue |limitTo:5" placeholder="Drusen Disc">
                                    </md-input-container>
                                </div>
                            </div>
                            <div layout="row">
                                <md-card>
                                    <md-card-content>
                                        <table class="mdl-data-table mdl-js-data-table" ng-if="eyeFindings.length>0">
                                            <thead>
                                            <tr>
                                                <th>Description</th>
                                                <th>Category</th>
                                                <th>Action</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr  ng-repeat="item in eyeFindings">
                                                <td >{{item.description}}</td>
                                                <td >{{item.sub_category}}</td>
                                                <td ><span ng-click="removeFromSelection(item,eyeFindings)" style="cursor: pointer;" >Remove</span></td>
                                            </tr>
                                            <tr>
                                                <td colspan="2"><md-button class="md-raised md-primary" ng-click="saveExamination(eyeFindings)">Save</md-button></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </md-card-content>
                                </md-card>
                            </div>
                        </vertical-tab-pane>
                    </vertical-tabs>
                    <!--vertical tabs end-->
            </md-content>
            </md-tab>
            <md-tab label="Clerk Sheet">
                <md-content class="md-padding">
                    <vertical-tabs>
                        <vertical-tab-pane title="Complaints">
                            <div layout="row">
                                <div flex="55">
                                    <md-input-container class="md-block">
                                        <input type="text" ng-model="selectedcomplaint" id="complaint"
                                               placeholder="Search Chief Complaints" autocomplete="off"
                                               uib-typeahead="complaint as complaint.name for complaint in complaints($viewValue) |filter:$viewValue |limitTo:5">
                                    </md-input-container>
                                </div>
                                <div flex="15">
                                    <md-select ng-model="qty" id="dxn" autocomplete="off" placeholder="Duration" class="md-no-underline">
                                        <md-option value="1">1</md-option>
                                        <md-option value="2">2</md-option>
                                        <md-option value="3">3</md-option>
                                        <md-option value="4">4</md-option>
                                        <md-option value="5">5</md-option>
                                        <md-option value="6">6</md-option>
                                        <md-option value="7">7</md-option>
                                        <md-option value="8">8</md-option>
                                        <md-option value="9">9</md-option>
                                        <md-option value="10">10</md-option>
                                        <md-option value="11">11</md-option>
                                        <md-option value="12">12</md-option>
                                    </md-select>
                                </div>
                                <div flex="15">
                                    <md-select ng-model="unit" autocomplete="off" id="unit" placeholder="Duration Unit" class="md-no-underline">
                                        <md-option value="Hours">Hours</md-option>
                                        <md-option value="Days">Day(s)</md-option>
                                        <md-option value="Weeks">Weeks</md-option>
                                        <md-option value="Months">Months</md-option>
                                        <md-option value="Years">Years</md-option>
                                    </md-select>
                                </div>
                                <div flex="5"><md-button class="md-raised md-primary" ng-click="addComplaint(selectedcomplaint,qty,unit,selectedPatient)">Add</md-button>
                                </div>
                            </div>
                            <div layout="row">
                                <div flex="50">
                                    <md-input-container class="md-block">
                                        <label>Other complaints</label>
                                        <textarea ng-model="other_complaints" autocomplete="off" id="other_complaints" md-maxlength="500" rows="3" md-select-on-focus></textarea>
                                    </md-input-container>
                                </div>
                                <div flex="20">
                                    <div ng-repeat="c in complaintz">
                                        {{c.description +' for '+c.duration+' '+c.duration_unit}}&nbsp;&nbsp;&nbsp;
                                        <span ng-click="removeFromSelection(c,complaintz)" class="glyphicon glyphicon-minus-sign"></span>
                                    </div>
                                    <md-button class="md-raised md-primary" ng-click="saveComplaints(complaintz,other_complaints,selectedPatient)">Save</md-button>
                                </div>
                                <div flex="5">
                                </div>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="History of presenting illness">
                            <div layout="row">
                                <div flex="50">
                                    <md-input-container class="md-block">
                                        <label>History of presenting illness</label>
                                        <textarea ng-model="hpi" md-maxlength="500" id="hpi" autocomplete="off" rows="3" md-select-on-focus></textarea>
                                    </md-input-container>
                                    <md-button class="md-raised md-primary pull-right" ng-click="saveHpi(hpi,selectedPatient)">Save</md-button>
                                </div>
                            </div>
                        </vertical-tab-pane>
                    </vertical-tabs>
                </md-content>
            </md-tab>
            <md-tab label="Diagnosis">
                <md-content class="md-padding">
                    <div layout="row">
                        <div flex="40">
                            <md-input-container class="md-block">
                                <input type="text" ng-model="selectedProvisional" typeahead-on-select="addProv($item,selectedPatient,'Provisional')"
                                       placeholder="Provisional diagnosis"
                                       uib-typeahead="prov as prov.description+' '+prov.code for prov in showDiagnosis($viewValue) | filter:$viewValue | limitTo:5">
                            </md-input-container>
                        </div>
                        <div flex="40">
                            <md-input-container class="md-block">
                                <input type="text" ng-model="selectedDifferential" typeahead-on-select="addDiff($item,selectedPatient,'Differential')"
                                       placeholder="Differential diagnosis"
                                       uib-typeahead="diff as diff.description+' '+diff.code for diff in showDiagnosis($viewValue) | filter:$viewValue | limitTo:5">
                            </md-input-container>
                        </div>
                        <div flex="20" ng-if="diagnosisTemp.length>0">
                            <md-list>
                                <md-list-item  class="md-2-line" ng-repeat="prov in diagnosisTemp">
                                    {{prov.description}}-->{{prov.status}}  <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(prov,diagnosisTemp)"></span>
                                </md-list-item>
                            </md-list>
                            <md-button class="md-raised md-primary pull-right" ng-click="saveDiagnosis(diagnosisTemp)">Save</md-button>
                        </div>
                    </div>
                </md-content>
            </md-tab>
            <md-tab label="investigation" ng-click="getSubDepts()">
                <div layout="row">
                    <div flex="20">
                        <md-list style="color:white;font-weight:700">
                            <md-list-item style="padding:0;background-color:teal;margin:2px;" ng-click="getTests(sub.id,selectedPatient)" class="md-1-line" ng-repeat="sub in subDepartments" style="cursor: pointer;">
                                {{sub.sub_department_name}}
                            </md-list-item>
                        </md-list>

                    </div>
                    <div flex="80">
                        <md-card>
                            <md-card-content>
                                <md-input-container class="md-block">
                                    <input type="text" ng-model="search" placeholder="Search here...">
                                </md-input-container>
                                <md-grid-list md-cols="3" md-gutter="1em" md-row-height="4:1">
                                    <md-grid-tile   layout="row" layout-align="start start" style="border:#c0c0c0 solid 2px;" ng-repeat="panel in panels | filter:search">
                                        <md-checkbox ng-model="checked" ng-change="orders(test,checked,selectedPatient)" aria-label="Checkbox">
                                            {{ panel.item_name+' - '+panel.price+' Tshs'}}
                                        </md-checkbox>
                                    </md-grid-tile>
                                </md-grid-list>
                                <di>
                                    <div></div>
                                </di>
                                <md-grid-list md-cols="3" md-gutter="1em" md-row-height="4:1">
                                    <md-grid-tile  layout="row" layout-align="start start" style="border:#c0c0c0 solid 2px;" ng-repeat="test in singleTests | filter:search">
                                        <md-checkbox ng-model="checked" ng-change="orders(test,checked,selectedPatient)" aria-label="Checkbox">
                                            {{ test.item_name+' - '+test.price+' Tshs'}}
                                        </md-checkbox>
                                    </md-grid-tile>
                                </md-grid-list>
                                <md-grid-list md-cols="3" md-gutter="1em" md-row-height="4:1">
                                    <md-grid-tile  layout="row" layout-align="start start" style="border:#c0c0c0 solid 2px;" ng-repeat="test in labTests | filter:search">
                                        <md-checkbox ng-model="checked" ng-change="orders(test,checked,selectedPatient)" aria-label="Checkbox">
                                            {{ test.item_name+' - '+test.price+' Tshs'}}
                                        </md-checkbox>
                                    </md-grid-tile>
                                </md-grid-list>
                            </md-card-content>
                        </md-card>
                    </div>
                </div>
                <div layout="row" ng-if="investigationOrders.length>0 || unavailableOrders.length>0">
                    <div flex="20">
                        <md-list>
                            <h3 style="color:white;padding:3px;background-color:teal;margin:2px;">Selected orders</h3>
                            <md-list-item ng-repeat="lab in investigationOrders">
                                {{lab.item_name+' - '+lab.price+' Tshs'}} &nbsp;
                                <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(lab,investigationOrders)"></span>
                            </md-list-item>
                            <md-list-item ng-repeat="lab in unavailableOrders">
                                {{lab.item_name+' - '+lab.price+' Tshs'}} &nbsp;
                                <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(lab,unavailableOrders)"></span>
                            </md-list-item>
                        </md-list>
                    </div>
                    <div flex="40">
                        <md-input-container class="md-block">
                            <label>Write clinical summary here...</label>
                            <textarea ng-model="inv.clinical_note" id="clinical_note" md-maxlength="500" rows="3" md-select-on-focus></textarea>
                        </md-input-container>
                    </div>
                    <div flex="5"></div>
                    <div flex="10">
                        <md-select ng-model="inv.priority" id="priority" placeholder="Priority" class="md-no-underline">
                            <md-option value="Routine">Routine</md-option>
                            <md-option value="Urgent">Urgent</md-option>
                        </md-select>
                    </div>
                    <div flex="20">
                        <md-button class="md-raised md-primary " ng-click="saveInvestigation(inv,investigationOrders)">Save</md-button>
                    </div>
                </div>
            </md-tab>
            <md-tab label="investigation results">
                <md-content class="md-padding">
                    <div layout="row">
                        <div flex="55">
                            <v-accordion class="vAccordion--default">
                                <v-pane>
                                    <v-pane-header>
                                        Lab results
                                    </v-pane-header>

                                    <v-pane-content>
                                        <div layout="row">
                                            <div flex="20">
                                                <md-list style="color:white;font-weight:700">
                                                    <md-list-item style="padding:0;background-color:teal;margin:2px;cursor: pointer;" ng-click="getLabResults(lab)" class="md-1-line" ng-repeat="lab in labInvestigations">
                                                        {{lab.date_attended}}
                                                    </md-list-item>
                                                </md-list>
                                            </div>
                                            <div flex="80">
                                                <table class="full-width">
                                                    <thead ng-if="labResults.length>0">
                                                    <td class="mdl-data-table__cell--non-numeric">Investigation</td>
                                                    <td class="mdl-data-table__cell--non-numeric">Description</td>
                                                    <td class="mdl-data-table__cell--non-numeric">Attachment</td>
                                                    <td class="mdl-data-table__cell--non-numeric">Remarks</td>
                                                    <td class="mdl-data-table__cell--non-numeric">Verifier</td>
                                                    <td class="mdl-data-table__cell--non-numeric">Date</td>
                                                    </thead>
                                                    <tbody>
                                                    <tr ng-repeat="rs in labResults">
                                                        <td class="mdl-data-table__cell--non-numeric">{{rs.item_name}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">{{rs.description}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric" ng-if="!rs.attached_image"> </td>
                                                        <td class="mdl-data-table__cell--non-numeric" ng-if="rs.attached_image"><md-button ng-click="getAttachedDocument(rs)">attachment</md-button></td>
                                                        <td class="mdl-data-table__cell--non-numeric"  ng-if="!rs.remarks"> </td>
                                                        <td class="mdl-data-table__cell--non-numeric" >{{rs.remarks}} </td>
                                                        <td class="mdl-data-table__cell--non-numeric" >{{rs.name}} </td>
                                                        <td class="mdl-data-table__cell--non-numeric">{{rs.created_at}}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </v-pane-content>
                                </v-pane>

                                <v-pane>
                                    <v-pane-header>
                                        Imaging results
                                    </v-pane-header>

                                    <v-pane-content>
                                        <div layout="row">
                                            <div flex="20">
                                                <md-list style="color:white;font-weight:700">
                                                    <md-list-item style="padding:0;background-color:teal;margin:2px;cursor: pointer;" ng-repeat="rad in radiology" ng-click="getRadResults(rad)" class="md-1-line">
                                                        {{rad.date_attended}}
                                                    </md-list-item>
                                                </md-list>
                                            </div>
                                            <div flex="85" style="padding-top:3em;" layout="column">
                                                <div style="margin-bottom:2em;" flex-gt-sm="70"  ng-repeat="img in radResults">
                                                    <p align="center">{{img.item_name}}</p>
                                                    <zoom ng-if="img.attached_image" image-width="500" image-src="/uploads/{{img.attached_image}}"></zoom>
                                                    <br>
                                                    <p align="center">{{img.description}} &lt;<a href="/uploads/{{img.attached_image}}" target = "_blank">Enlarge Image...</a>&gt;</p>
                                                    <br>
                                                    <p align="center">{{img.remarks}}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </v-pane-content>
                                </v-pane>
                            </v-accordion>
                        </div>
                        <div flex="5"></div>
                        <div flex="35">
                            <div class="panel panel-default">
                                <div class="panel-heading ">Confirmed Diagnosis</div>
                                <div class="panel-body">
                                    <md-input-container class="md-block">
                                        <input type="text" ng-model="selectedConfirmed" typeahead-on-select="addConf($item,selectedPatient,'Confirmed')"
                                               placeholder="Type ICD code or diagnosis to  Search"
                                               uib-typeahead="conf as conf.description+' '+conf.code for conf in showDiagnosis($viewValue) | filter:$viewValue | limitTo:5">
                                    </md-input-container>
                                    <div class="row" ng-repeat="conf in diagnosisTemp"><br> {{conf.description}}&nbsp;&nbsp;&nbsp;
                                        <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(conf,diagnosisTemp)"></span>
                                    </div>
                                    <br>
                                    <md-button class="md-raised md-primary pull-right" ng-click="saveDiagnosis(diagnosisTemp, selectedPatient)">Save</md-button>
                                </div>
                            </div>
                        </div>
                    </div>
                </md-content>
            </md-tab>
            <md-tab label="Treatments" ng-click="allergyChecker(selectedPatient)">
                <md-content class="md-padding">
                    <!--vertical tabs start-->
                    <vertical-tabs>
                        <vertical-tab-pane title="Medication">
                            <div layout="row">
                                <div flex="35">
                                    <md-input-container class="md-block">
                                        <input type="text"
                                               id="item_search"
                                               placeholder="Search Drug by Name"
                                               ng-model="selectedItem" autocomplete="off"
                                               typeahead-on-select="checkDosage($item,selectedPatient.patient_id)"
                                               uib-typeahead="item as item.item_name+', '+item.dose_formulation for item in searchItems($viewValue,selectedPatient) | filter:$viewValue | limitTo:5">
                                    </md-input-container>
                                </div>
                                <div flex="15">
                                    <md-input-container class="md-block">
                                        <input type="text"
                                               id="dose"
                                               ng-model="dosage.dose"
                                               min="0" autocomplete="off"
                                               placeholder="Dose">
                                    </md-input-container>
                                </div>
                                <div flex="5"></div>
                                <div flex="20">
                                    <md-select id="frequency" ng-model="dosage.frequency" placeholder="Frequency" class="md-block">
                                        <md-option selected disabled >Frequency</md-option>
                                        <md-option value="24 hourly" >Once a Day</md-option>
                                        <md-option value="12 hourly" >Twice a Day</md-option>
                                        <md-option value="8 hourly" >Thrice a Day</md-option>
                                        <md-option value="6 hourly" >Four times a day</md-option>
                                        <md-option value="1 hourly" >Every Hour</md-option>
                                        <md-option value="2 hourly" >Every 2 Hours</md-option>
                                        <md-option value="3 hourly" >Every 3 Hours</md-option>
                                        <md-option value="4 hourly" >Every 4 Hours</md-option>
                                    </md-select>
                                </div>
                                <div flex="5"></div>
                                <div flex="20">
                                    <md-select id="duration" ng-model="dosage.duration" placeholder="Duration" class="md-block">
                                        <md-option  value="1 days" > One   Day</md-option >
                                        <md-option  value="2 days" > Two   Days</md-option >
                                        <md-option  value="3 days" > Three Days</md-option >
                                        <md-option  value="4 days" > Four  Days</md-option >
                                        <md-option  value="5 days" > Five  Days</md-option >
                                        <md-option  value="6 days" > Six   Days</md-option >
                                        <md-option  value="7 days" > Seven Days</md-option >
                                        <md-option  value="8 days" > Eight   Days</md-option >
                                        <md-option  value="9 days" > Nine   Days</md-option >
                                        <md-option  value="10 days" > Ten Days</md-option >
                                        <md-option  value="11 days" > Eleven  Days</md-option >
                                        <md-option  value="12 days" > Twelve  Days</md-option >
                                        <md-option  value="13 days" > Thirteen   Days</md-option >
                                        <md-option  value="14 days" > Fourteen Days</md-option >
                                        <md-option  value="15 days" > Fifteen Days</md-option >
                                        <md-option  value="16 days" > Sixteen  Day</md-option >
                                        <md-option  value="17 days" > Seventeen  Days</md-option >
                                        <md-option  value="18 days" > Eighteen Days</md-option >
                                        <md-option  value="19 days" > Nineteen  Days</md-option >
                                        <md-option  value="20 days" > Twenty Days</md-option >
                                        <md-option  value="21 days" > Twenty one   Days</md-option >
                                        <md-option  value="22 days" > Twenty two Days</md-option >
                                        <md-option  value="23 days" > Twenty three   Days</md-option >
                                        <md-option  value="24 days" > Twenty four   Days</md-option >
                                        <md-option  value="25 days" > Twenty five Days</md-option >
                                        <md-option  value="26 days" > Twenty six  Days</md-option >
                                        <md-option  value="27 days" > Twenty seven  Days</md-option >
                                        <md-option  value="28 days" > Twenty eight   Days</md-option >
                                        <md-option  value="29 days" > Twenty nine Days</md-option >
                                        <md-option  value="30 days" > Thirty Days</md-option >
                                    </md-select></div>
                            </div >
                            <div layout="row">
                                <div flex="40">
                                    <md-input-container class="md-block">
                                        <input type="text"
                                               id="instruction" autocomplete="off"
                                               ng-model="instructions"
                                               placeholder="Additional Instructions here">
                                    </md-input-container>
                                </div>
                                <div flex="10">
                                    <md-button class="md-raised md-primary"
                                               ng-click="addMedicine(dosage,selectedPatient,selectedItem,instructions)">Add To List</md-button>
                                </div>
                            </div>
                            <div layout="row">
                                <div flex="80" >
                                    <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" width="100%" ng-if="medicines.length >0">
                                        <tbody>
                                        <tr ng-repeat="med in medicines">
                                            <td class="mdl-data-table__cell--non-numeric">{{med.item_name+','+med.dose_formulation}}
                                            </td>
                                            <td class="mdl-data-table__cell--non-numeric">{{med.dose}}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{med.frequency}}
                                            </td>
                                            <td class="mdl-data-table__cell--non-numeric">{{med.duration}}
                                            </td>
                                            <td class="mdl-data-table__cell--non-numeric">
                                                                                    <span
                                                                                            ng-click="removeFromSelection(med,medicines)"
                                                                                            style="cursor: pointer;">Remove</span>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" width="100%" ng-if="medicinesOs.length >0">
                                        <tbody>
                                        <tr ng-repeat="med in medicinesOs">
                                            <td class="mdl-data-table__cell--non-numeric">{{med.item_name}}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{med.dose}}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{med.frequency}}
                                            </td>
                                            <td class="mdl-data-table__cell--non-numeric">{{med.duration}}</td>
                                            <td class="mdl-data-table__cell--non-numeric">
                                                <span
                                                        ng-click="removeFromSelection(med,medicinesOs)"
                                                        style="cursor: pointer;">Remove</span>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <md-button class="md-raised md-primary pull-right" ng-click="saveMedicine(medicines)">Save</md-button>
                                </div>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Medical supplies">
                            <div layout="row">
                                <div flex="50">
                                    <md-input-container class="md-block">
                                        <input type="text" id="supplies" placeholder="Search medical supplies here"
                                               ng-model="selectedSupplies" autocomplete="off"
                                               typeahead-on-select=""
                                               uib-typeahead="item as item.item_name for item in searchMediSupplies($viewValue,selectedPatient) | filter:$viewValue | limitTo:5">
                                    </md-input-container>
                                </div>
                                <div flex="10">
                                    <md-input-container class="md-block">
                                        <input type="number" id="supply_qty" min="1" placeholder="Quantity" ng-model="supply_qty"
                                        >
                                    </md-input-container>
                                </div>
                                <div flex="10"> <md-button class="md-raised md-primary" ng-click="addSupplies(selectedPatient,supply_qty,selectedSupplies)">Add to list</md-button></div>
                            </div>
                            <div layout="row">
                                <div flex="50">
                                    <table class="full-width" ng-if="supplies.length>0">
                                        <thead>
                                        <tr>
                                            <th>Medical
                                                supplies</th>
                                            <th>Quantity</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="item in supplies">
                                            <td>{{item.item_name}}</td>
                                            <td>{{item.quantity}}</td>
                                            <td><span ng-click="removeFromSelection(item,supplies)"
                                                      style="cursor: pointer;">Remove</span></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">
                                                <md-button  class="md-raised md-primary" ng-click="saveSupplies()">save</md-button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <table class="full-width" ng-if="suppliesOS.length>0">
                                        <thead>
                                        <tr>
                                            <th>Medical
                                                supplies</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="item in suppliesOS">
                                            <td>{{item.item_name}}</td>
                                            <td><span ng-click="removeFromSelection(item,suppliesOS)"
                                                      style="cursor: pointer;">Remove</span></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">
                                                <md-button
                                                        class="md-raised md-primary"
                                                        ng-click="saveSupplies()">save</md-button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Procedures">
                            <div layout="row">
                                <div flex="50">
                                    <md-input-container class="md-block">
                                        <input type="text" placeholder="Search Procedure by Name"
                                               ng-model="selectedProcedures" autocomplete="off" id="procedures"
                                               typeahead-on-select="addProcedure($item,selectedPatient)"
                                               uib-typeahead="item as item.item_name for item in searchProcedures($viewValue,selectedPatient) | filter:$viewValue | limitTo:5">
                                    </md-input-container>
                                </div>
                                <div flex="50" ng-if="procedures.length>0">
                                    <table class="full-width" >
                                        <thead>
                                        <tr>
                                            <th>Procedure</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="pro in procedures">
                                            <td>{{pro.item_name}}</td>
                                            <td>
                                                                                        <span
                                                                                                ng-click="removeFromSelection(pro,procedures)"
                                                                                                style="cursor: pointer;">Remove</span>
                                            </td>
                                        </tr>&nbsp;
                                        </tbody>
                                    </table>
                                    <md-button ng-click="saveProcedures(procedures)" class="md-raised md-primary pull-right">Save</md-button>
                                </div>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Prescribed medications">
                            <div layout="row">
                                <md-button class="md-raised md-primary" ng-click="prevMedics(selectedPatient)">Preview</md-button>
                                <table class="full-width"  ng-if="prevMedicines.length>0">
                                    <thead>
                                    <tr>
                                        <th>Medicine</th>
                                        <th>Dose</th>
                                        <th>Frequency</th>
                                        <th>Duration</th>
                                        <th>Qty</th>
                                        <th>Start
                                            Date</th>
                                        <th>Dosage
                                            Status</th>
                                        <th>Remark</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="med in prevMedicines">
                                        <td>{{med.item_name}}</td>
                                        <td>{{med.dose}}</td>
                                        <td>{{med.frequency}}
                                        </td>
                                        <td>{{med.duration}}
                                        </td>
                                        <td>{{med.quantity}}</td>
                                        <td>{{med.start_date}}</td>
                                        <td>
                                            <span ng-if="med.duration>med.days">Ongoing dosage </span>
                                            <span ng-if="med.days>=med.duration">Dosage completed </span>
                                        </td>
                                        <td>{{med.out_of_stock}}</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <md-list ng-if="prevMedicines==0">
                                    <md-list-item >No medicine
                                        prescribed
                                        for this
                                        Patient</md-list-item>
                                </md-list>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Previous procedures">
                            <div layout="row">
                                <md-button class="md-raised md-primary pull-right" ng-click="prevProcedure(selectedPatient)">Preview</md-button>

                                <table class="full-width" ng-if="prevProcedures.length>0">
                                    <thead>
                                    <tr>
                                        <th>Procedure</th>
                                        <th>Procedure
                                            Type
                                        </th>
                                        <th>Date
                                            Ordered</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="pro in prevProcedures">
                                        <td>{{pro.item_name}}</td>
                                        <td>{{pro.item_category}}</td>
                                        <td>{{pro.created_at}}</td>
                                    </tr>&nbsp;
                                    </tbody>
                                </table>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Rejected prescriptions">
                            <md-button class="md-raised md-primary" ng-click="getRejected(selectedPatient)">load prescriptions</md-button>

                            <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" width="100%">
                                <thead>
                                <th class="mdl-data-table__cell--non-numeric">Medicine</th>
                                <th class="mdl-data-table__cell--non-numeric">Dose</th>
                                <th class="mdl-data-table__cell--non-numeric">Frequency</th>
                                <th class="mdl-data-table__cell--non-numeric">Duration</th>
                                <th class="mdl-data-table__cell--non-numeric">Doctor's name</th>
                                <th class="mdl-data-table__cell--non-numeric">Reject reason</th>
                                <th class="mdl-data-table__cell--non-numeric">Action</th>
                                </thead>
                                <tr ng-repeat="rj in rejectedMedicines">
                                    <td class="mdl-data-table__cell--non-numeric">{{rj.item_name}}</td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="!m">{{rj.dose}}</td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="m">
                                        <md-input-container class="md-block">
                                            <input type="text"  placeholder="{{rj.dose}}" ng-model="rj.dose">
                                        </md-input-container>
                                    </td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="!m">{{rj.frequency}}</td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="m">
                                        <md-select id="frequency3" ng-model="rj.frequency" placeholder="Frequency" class="md-block">
                                            <md-option selected disabled >Frequency</md-option>
                                            <md-option value="24 hourly" >Once a Day</md-option>
                                            <md-option value="12 hourly" >Twice a Day</md-option>
                                            <md-option value="8 hourly" >Thrice a Day</md-option>
                                            <md-option value="6 hourly" >Four times a day</md-option>
                                            <md-option value="1 hourly" >Every Hour</md-option>
                                            <md-option value="2 hourly" >Every 2 Hours</md-option>
                                            <md-option value="3 hourly" >Every 3 Hours</md-option>
                                            <md-option value="4 hourly" >Every 4 Hours</md-option>
                                        </md-select>
                                    </td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="!m">{{rj.duration}}</td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="m">
                                        <md-select id="duration3" ng-model="rj.duration" placeholder="Duration" class="md-block">
                                            <md-option  value="1 days" > One   Day</md-option >
                                            <md-option  value="2 days" > Two   Days</md-option >
                                            <md-option  value="3 days" > Three Days</md-option >
                                            <md-option  value="4 days" > Four  Days</md-option >
                                            <md-option  value="5 days" > Five  Days</md-option >
                                            <md-option  value="6 days" > Six   Days</md-option >
                                            <md-option  value="7 days" > Seven Days</md-option >
                                            <md-option  value="8 days" > Eight   Days</md-option >
                                            <md-option  value="9 days" > Nine   Days</md-option >
                                            <md-option  value="10 days" > Ten Days</md-option >
                                            <md-option  value="11 days" > Eleven  Days</md-option >
                                            <md-option  value="12 days" > Twelve  Days</md-option >
                                            <md-option  value="13 days" > Thirteen   Days</md-option >
                                            <md-option  value="14 days" > Fourteen Days</md-option >
                                            <md-option  value="15 days" > Fifteen Days</md-option >
                                            <md-option  value="16 days" > Sixteen  Day</md-option >
                                            <md-option  value="17 days" > Seventeen  Days</md-option >
                                            <md-option  value="18 days" > Eighteen Days</md-option >
                                            <md-option  value="19 days" > Nineteen  Days</md-option >
                                            <md-option  value="20 days" > Twenty Days</md-option >
                                            <md-option  value="21 days" > Twenty one   Days</md-option >
                                            <md-option  value="22 days" > Twenty two Days</md-option >
                                            <md-option  value="23 days" > Twenty three   Days</md-option >
                                            <md-option  value="24 days" > Twenty four   Days</md-option >
                                            <md-option  value="25 days" > Twenty five Days</md-option >
                                            <md-option  value="26 days" > Twenty six  Days</md-option >
                                            <md-option  value="27 days" > Twenty seven  Days</md-option >
                                            <md-option  value="28 days" > Twenty eight   Days</md-option >
                                            <md-option  value="29 days" > Twenty nine Days</md-option >
                                            <md-option  value="30 days" > Thirty Days</md-option >
                                        </md-select>
                                        </md-input-container></td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="!m">{{rj.name}}</td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="m"><md-button class="md-raised md-primary" ng-click="updateMedicine(rj)">update</md-button></td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="!m">{{rj.cancellation_reason}}</td>
                                    <td class="mdl-data-table__cell--non-numeric"><md-checkbox type="checkbox" class="" ng-model="m">Edit</md-checkbox></td>
                                </tr>
                            </table>
                        </vertical-tab-pane>
                    </vertical-tabs>
                    <!--vertical tabs end-->
                </md-content>
            </md-tab>
            <md-tab label="Disposition">
                <md-content class="md-padding">
                    <div class="row">
                        <div class="col-xs-2">
                            <select class="form-control hidden-print" ng-model="template" ng-options="t.name for t in templates">

                            </select>
                        </div>
                        <br>
                    </div>

                    <div ng-include src="template.url" onload="myFunction()">

                    </div>
                    <div class="col-xs-12">
                        <!--Admission start -->
                        <script type="text/ng-template" id="admission.html"><br>
                            <div class="col-xs-3" ng-repeat="ward in wards">
                                <div class="list-group form-top" ng-click="patientAdmission(ward,selectedPatient)"
                                     style="cursor: pointer;">
                                    {{ward.ward_full_name}}
                                </div>
                            </div>
                        </script>
                        <!--Admission ends -->
                        <!--Internal referral starts -->
                        <script type="text/ng-template" id="internal.html">
                            <div class="col-xs-3" ng-repeat="clinic in clinics"><br>
                                <div class="list-group form-top" ng-click="internalTransfer(clinic,selectedPatient)"
                                     style="cursor: pointer;">
                                    {{clinic.department_name}}
                                </div>
                            </div>
                        </script>
                        <!--Internal referral ends -->
                        <!--referral starts -->
                        <script type="text/ng-template" id="referral.html">
                            <div class="row">
                                <div class="col-xs-12" ng-if="selectedPatient.first_name.length>0"><br>
                                    <div class="col-xs-6">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <p>Hospital
                                                    To
                                                    Refer
                                                    Patient</p>
                                            </div>
                                            <div class="panel-body">
                                                <div class="row">
                                                    <input type="text"  placeholder="Search hospital to refer patient"
                                                           ng-model="selectedFacility"
                                                           uib-typeahead="facility as facility.facility_name for facility in showFacility($viewValue) |filter:$viewValue |limitTo:5 ">
                                                </div>
                                                <br> {{selectedFacility.facility_name}}
                                                <br>
                                                <div class="row">
                                                    <textarea  placeholder="Write referral Summary" ng-model="ref.summary"></textarea>
                                                </div>

                                                <br>
                                                <button
                                                        class="md-raised md-primary pull-right"
                                                        ng-click="exReferral(selectedPatient,selectedFacility,ref)">Save</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-6">
                                        <!--reserved-->
                                    </div>
                                </div>
                            </div>
                        </script>
                        <!--referral ends -->
                        <script type="text/ng-template" id="deceased.html">
                            <div class="row"><br>
                                <div class="col-xs-4">
                                                            <textarea ng-model="corpse.immediate_cause" id="immediate_cause" placeholder="Immediate Cause of Death"
                                                                      
                                                                      required="Required"></textarea>
                                </div>
                                <div class="col-xs-4">
                                                            <textarea ng-model="corpse.underlying_cause" id="underlying_cause" placeholder="Other underlying conditions"
                                                                      
                                                                      required="Required"></textarea>
                                </div>
                                <div class="col-xs-2"><button class="md-raised md-primary pull-right"
                                                              ng-click="deceased(selectedPatient,corpse)">Send to Last office</button></div>
                            </div>
                        </script>
                    </div>
                </md-content>
            </md-tab>
        </md-tabs>
    </md-dialog-content>

</md-dialog>
