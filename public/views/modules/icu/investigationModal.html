<style>
    .my-legend .legend-scale ul {
        margin: 0;
        margin-bottom: 5px;
        padding: 0;
        float: left;
        list-style: none;
    }
    .my-legend .legend-scale ul li {
        display: inline-block;
        Font-Family: Metric-Regular;
        Font-Size: 12px;
        Color: #666666;
        list-style: none;
        line-height: 18px;
        vertical-align: text-top;
    }
    .my-legend ul.legend-labels li span {
        display: inline-block;
        height: 9px;
        width: 9px;
        margin-right: 5px;
        margin-left: 10px;
    }
</style>
<div class="wrapper wrapper-content animated fadeInRight" ng-controller="ipdController">
    <div class="row">
        <div class="col-md-12 form-box">
            <form  role="form" class="payments-form" action="javascript:void(0);">
                <fieldset>
                    <div class="form-top">
                        <div class="form-top-left">
                            <h4><i class="fa fa-bed" aria-hidden="true">Investigations</i><span class="pull-right">{{"Name: " +patientDetails.first_name}} {{patientDetails.middle_name}} {{patientDetails.last_name}}&nbsp;&nbsp;&nbsp;  {{"MRN: "+patientDetails.medical_record_number}}&nbsp;&nbsp;&nbsp; {{" A/C#: "+patientDetails.account_number}}&nbsp;&nbsp;&nbsp; {{"DoB: "+patientDetails.dob}}&nbsp;&nbsp;&nbsp;  {{"Gender: "+patientDetails.gender}}</span> </h4>
                        </div>
                    </div>
                    <div class="form-bottom">
                        <div class="row">
                            <div class="col-xs-12">
                                <!--<uib-accordion close-others="oneAtATime" >-->
                                    <!--<div uib-accordion-group  heading="Laboratory Investigation" ng-click="getSubDepts(2)">-->
                                        <!--<div class="col-xs-12">-->
                                            <!--<div class="row">-->
                                                <!--<div class="col-xs-2">-->
                                                    <!--<ul class="list-group" ng-repeat="sub in subDepartments" style="cursor: pointer;">-->
                                                        <!--<li class="list-group-item form-top" ng-click="getTests(sub.id,patientDetails)">{{sub.sub_department_name}}</li>-->
                                                    <!--</ul>-->
                                                <!--</div>-->
                                                <!--<div class="col-xs-10">-->
                                                    <!--<div class="row">-->
                                                        <!--<div class="col-xs-3" ng-repeat="test in labTests">-->
                                                            <!--<div class="row">-->
                                                                <!--<label><input type="checkbox"  ng-model="checked" ng-change="orders(test,checked,patientDetails)">  {{test.item_name+' - '+test.price+' Tshs'}}</label>-->
                                                            <!--</div>-->
                                                        <!--</div>-->
                                                    <!--</div>-->
                                                <!--</div>-->
                                            <!--</div>-->
                                        <!--</div>-->
                                        <!--<div class="col-xs-4">-->
                                            <!--<h3 style="font-weight: 400">Selected Orders</h3>-->
                                            <!--<div class="row" ng-repeat="lab in investigationOrders">-->
                                                <!--{{lab.item_name}}&nbsp;&nbsp;&nbsp; <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(lab,investigationOrders)"></span>-->
                                            <!--</div>-->
                                        <!--</div>-->
                                        <!--<div class="col-xs-4">-->
                                            <!--<textarea class="form-control" ng-model="inv.clinical_note" placeholder="Clinical notes summary"></textarea>-->

                                        <!--</div>-->
                                        <!--<div class="col-xs-2">-->
                                            <!--<select ng-model="inv.priority" class="form-control" placeholder="Choose Priority">-->
                                                <!--<option disabled selected>Choose Priority</option>-->
                                                <!--<option value="Routine" selected>Routine</option>-->
                                                <!--<option value="Urgent">Urgent</option>-->
                                            <!--</select>-->
                                        <!--</div>-->
                                        <!--<br>-->
                                        <!--<button class="btn btn-primary pull-right" ng-click="saveInvestigation(inv,investigationOrders)">Save</button>-->
                                    <!--</div>-->
                                    <!--<div uib-accordion-group class="" heading="Radiology Investigation" ng-click="getSubDepts(3)">-->
                                        <!--<div class="col-xs-12">-->
                                            <!--<div class="row">-->
                                                <!--<div class="col-xs-2">-->
                                                    <!--<ul class="list-group" ng-repeat="sub in subDepartments" style="cursor: pointer;">-->
                                                        <!--<li class="list-group-item form-top" ng-click="getTests(sub.id,patientDetails)">{{sub.sub_department_name}}</li>-->
                                                    <!--</ul>-->
                                                <!--</div>-->
                                                <!--<div class="col-xs-10">-->
                                                    <!--<div class="row">-->
                                                        <!--<div class="col-xs-3" ng-repeat="test in labTests">-->
                                                            <!--<div class="row">-->
                                                                <!--<label><input type="checkbox"  ng-model="checked" ng-change="orders(test,checked,patientDetails)">  {{test.item_name+' - '+test.price+' Tshs'}}</label>-->
                                                            <!--</div>-->
                                                        <!--</div>-->
                                                    <!--</div>-->
                                                <!--</div>-->
                                            <!--</div>-->
                                        <!--</div>-->
                                        <!--<div class="col-xs-4">-->
                                            <!--<h3 style="font-weight: 400">Selected Orders</h3>-->
                                            <!--<div class="row" ng-repeat="lab in investigationOrders">-->
                                                <!--{{lab.item_name}}&nbsp;&nbsp;&nbsp; <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(lab,investigationOrders)"></span>-->
                                            <!--</div>-->
                                        <!--</div>-->
                                        <!--<div class="col-xs-4">-->
                                            <!--<textarea class="form-control" ng-model="inv.clinical_note" placeholder="Clinical notes summary"></textarea>-->

                                        <!--</div>-->
                                        <!--<div class="col-xs-2">-->
                                            <!--<select ng-model="inv.priority" class="form-control" placeholder="Choose Priority">-->
                                                <!--<option disabled selected >Choose Priority</option>-->
                                                <!--<option value="Routine" selected>Routine</option>-->
                                                <!--<option value="Urgent">Urgent</option>-->
                                            <!--</select>-->
                                        <!--</div>-->
                                        <!--<br>-->
                                        <!--<button class="btn btn-primary pull-right" ng-click="saveInvestigation(inv,investigationOrders)">Save</button>-->
                                    <!--</div>-->
                                <!--</uib-accordion>-->
                                <uib-accordion close-others="oneAtATime" >
                                    <div uib-accordion-group  heading="Laboratory" ng-click="getSubDepts(2)">
                                        <div class="col-xs-12">
                                            <div class="row">
                                                <div class="col-xs-2">
                                                    <ul class="list-group" ng-repeat="sub in subDepartments" style="cursor: pointer;">
                                                        <li class="list-group-item form-top" ng-click="getTests(sub.id,patientDetails)">{{sub.sub_department_name}}</li>
                                                    </ul>
                                                </div>
                                                <div class="col-xs-10">
                                                    <div class="row">
                                                        <div class="col-xs-3" >
                                                            <div class="row">
                                                                <div class='my-legend pull-right'>
                                                                    <div class='legend-scale'>
                                                                        <ul class='legend-labels' ng-repeat="test in labTests">
                                                                            <li><label><span style='background-color:red; cursor: pointer;' ng-if="test.on_off==0"></span>
                                                                                <input type="checkbox" ng-model="checked" ng-change="orders(test,checked,patientDetails)">{{ test.item_name+' - '+test.price+' Tshs'}}</label></li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-4">
                                            <h3 style="font-weight: 400">Selected Orders</h3>
                                            <div class="row" ng-repeat="lab in investigationOrders">
                                                {{lab.item_name}}&nbsp;&nbsp;&nbsp; <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(lab,investigationOrders)"></span>
                                            </div>
                                            <div class="row" ng-repeat="lab in unavailableOrders">
                                                {{lab.item_name}}&nbsp;&nbsp;&nbsp; <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(lab,unavailableOrders)"></span>
                                            </div>
                                        </div>
                                        <div class="col-xs-4">
                                            <textarea class="form-control" ng-model="inv.clinical_note" placeholder="Clinical notes summary"></textarea>

                                        </div>
                                        <div class="col-xs-2">
                                            <select ng-model="inv.priority" class="form-control" placeholder="Choose Priority">
                                                <option disabled selected>Choose Priority</option>
                                                <option value="Routine" selected>Routine</option>
                                                <option value="Urgent">Urgent</option>
                                            </select>
                                        </div>
                                        <br>
                                        <button class="btn btn-primary pull-right" ng-click="saveInvestigation(inv,investigationOrders)">Save</button>
                                    </div>
                                    <div uib-accordion-group class="" heading="Radiology" ng-click="getSubDepts(3)">
                                        <div class="col-xs-12">
                                            <div class="row">
                                                <div class="col-xs-2">
                                                    <ul class="list-group" ng-repeat="sub in subDepartments" style="cursor: pointer;">
                                                        <li class="list-group-item form-top" ng-click="getTests(sub.id,patientDetails)">{{sub.sub_department_name}}</li>
                                                    </ul>
                                                </div>
                                                <div class="col-xs-10">
                                                    <div class="row">
                                                        <div class="col-xs-3" >
                                                            <div class="row">
                                                                <div class='my-legend pull-right'>
                                                                    <div class='legend-scale'>
                                                                        <ul class='legend-labels' ng-repeat="test in labTests">
                                                                            <li><label><span style='background-color:red; cursor: pointer;' ng-if="test.on_off==0"></span>
                                                                                <input type="checkbox"  ng-model="checked" ng-change="orders(test,checked,patientDetails)">{{ test.item_name+' - '+test.price+' Tshs'}}</label></li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-4">
                                            <h3 style="font-weight: 400">Selected Orders</h3>
                                            <div class="row" ng-repeat="lab in investigationOrders">
                                                {{lab.item_name}}&nbsp;&nbsp;&nbsp; <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(lab,investigationOrders)"></span>
                                            </div>
                                        </div>
                                        <div class="col-xs-4">
                                            <textarea class="form-control" ng-model="inv.clinical_note" placeholder="Clinical notes summary"></textarea>

                                        </div>
                                        <div class="col-xs-2">
                                            <select ng-model="inv.priority" class="form-control" placeholder="Choose Priority">
                                                <option disabled selected >Choose Priority</option>
                                                <option value="Routine" selected>Routine</option>
                                                <option value="Urgent">Urgent</option>
                                            </select>
                                        </div>
                                        <br>
                                        <button class="btn btn-primary pull-right" ng-click="saveInvestigation(inv,investigationOrders)">Save</button>
                                    </div>
                                </uib-accordion>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="col-xs-6">
                                        <div class="panel">
                                            <div class="panel-heading form-top">Laboratory Results</div>
                                            <div class="panel-body">
                                                <uib-accordion>
                                                    <div uib-accordion-group heading="{{lab.date_attended}}" ng-repeat="lab in labInvestigations" ng-click="getLabResults(lab)">
                                                        <div class="row" ng-if="labInvestigations.length>0">
                                                            <table class="table table-striped table-bordered">
                                                                <thead>
                                                                <th>Investigation</th>
                                                                <th>Results</th>
                                                                <th>Units</th>
                                                                <th>Date</th>
                                                                </thead>
                                                                <tbody>
                                                                <tr ng-repeat="rs in labResults">
                                                                    <td>{{rs.item_name}}</td>
                                                                    <td>{{rs.description}}</td>
                                                                    <td>{{rs.unit}}</td>
                                                                    <td>{{rs.created_at}}</td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </uib-accordion>
                                                <ul class="list-group" ng-if="labInvestigations==0">
                                                    <li class="list-group-item">Currently no Lab results for this Patient</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-6">
                                        <div class="panel">
                                            <div class="panel-heading form-top">Imaging Results</div>
                                            <div class="panel-body">
                                                <uib-accordion>
                                                    <div uib-accordion-group heading="{{rad.date_attended}}" ng-repeat="rad in radiology" ng-click="getRadResults(rad)">

                                                        <div class="row">
                                                            <div class="col-sm-6" ng-repeat="img in radResults">
                                                                <div class="card">
                                                                    <div class="card-image">
                                                                        <a><img class="img-responsive" src="public/uploads/{{img.attached_image}}" width="300px;" height="300px"></a>
                                                                    </div><!-- card image -->
                                                                    <div class="card-content">{{img.description}} </div><!-- card content -->
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </uib-accordion>
                                                <ul class="list-group" ng-if="radInvestigations==0">
                                                    <li class="list-group-item">Currently no Imaging results for this Patient</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
</div>